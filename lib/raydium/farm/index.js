var Tr=Object.create;var ae=Object.defineProperty,xr=Object.defineProperties,Pr=Object.getOwnPropertyDescriptor,Sr=Object.getOwnPropertyDescriptors,kr=Object.getOwnPropertyNames,bt=Object.getOwnPropertySymbols,Ar=Object.getPrototypeOf,wt=Object.prototype.hasOwnProperty,Ir=Object.prototype.propertyIsEnumerable;var ht=(r,t,e)=>t in r?ae(r,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):r[t]=e,F=(r,t)=>{for(var e in t||(t={}))wt.call(t,e)&&ht(r,e,t[e]);if(bt)for(var e of bt(t))Ir.call(t,e)&&ht(r,e,t[e]);return r},v=(r,t)=>xr(r,Sr(t));var Lr=(r,t)=>{for(var e in t)ae(r,e,{get:t[e],enumerable:!0})},Tt=(r,t,e,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of kr(t))!wt.call(r,o)&&o!==e&&ae(r,o,{get:()=>t[o],enumerable:!(n=Pr(t,o))||n.enumerable});return r};var _=(r,t,e)=>(e=r!=null?Tr(Ar(r)):{},Tt(t||!r||!r.__esModule?ae(e,"default",{value:r,enumerable:!0}):e,r)),Br=r=>Tt(ae({},"__esModule",{value:!0}),r);var kn={};Lr(kn,{DEV_FARM_LOCK_MINT:()=>_r,DEV_FARM_LOCK_VAULT:()=>Mr,FARM_LOCK_MINT:()=>Vr,FARM_LOCK_VAULT:()=>Fr,FARM_PROGRAM_TO_VERSION:()=>vr,FARM_VERSION_TO_LEDGER_LAYOUT:()=>Xe,FARM_VERSION_TO_STATE_LAYOUT:()=>Ye,Voter:()=>rt,VoterDepositEntry:()=>vt,VoterLockup:()=>Nt,VoterRegistrar:()=>tt,VoterVotingMintConfig:()=>Dt,associatedLedgerAccountLayout:()=>ke,calFarmRewardAmount:()=>on,createAssociatedLedgerAccountInstruction:()=>cn,dwLayout:()=>M,farmAddRewardLayout:()=>Be,farmLedgerLayoutV3_1:()=>Wr,farmLedgerLayoutV3_2:()=>te,farmLedgerLayoutV5_1:()=>Or,farmLedgerLayoutV5_2:()=>$e,farmLedgerLayoutV6_1:()=>et,farmRewardInfoToConfig:()=>nn,farmRewardLayout:()=>Ie,farmRewardRestartLayout:()=>Le,farmRewardTimeInfoLayout:()=>Mt,farmStateV3Layout:()=>Ze,farmStateV5Layout:()=>Je,farmStateV6Layout:()=>Qe,fetchMultipleFarmInfoAndUpdate:()=>sn,getAssociatedAuthority:()=>rn,getAssociatedLedgerAccount:()=>W,getAssociatedLedgerPoolAccount:()=>tn,getDepositEntryIndex:()=>Me,getFarmLedgerLayout:()=>cr,getFarmStateLayout:()=>lr,getRegistrarAddress:()=>De,getTokenOwnerRecordAddress:()=>Oe,getVoterAddress:()=>Ee,getVoterWeightRecordAddress:()=>We,getVotingMintAuthority:()=>ve,getVotingTokenMint:()=>Ne,governanceCreateTokenOwnerRecord:()=>yr,isValidFarmVersion:()=>Dr,judgeFarmType:()=>an,makeAddNewRewardInstruction:()=>yn,makeCreateFarmInstruction:()=>ln,makeCreatorWithdrawFarmRewardInstruction:()=>dn,makeDepositInstructionV3:()=>xn,makeDepositInstructionV5:()=>Pn,makeDepositInstructionV6:()=>Sn,makeDepositTokenInstruction:()=>pn,makeDepositWithdrawInstruction:()=>gn,makeRestartRewardInstruction:()=>fn,makeWithdrawInstructionV3:()=>Tn,makeWithdrawInstructionV4:()=>wn,makeWithdrawInstructionV5:()=>hn,makeWithdrawInstructionV6:()=>bn,makeWithdrawTokenInstruction:()=>mn,poolTypeV6:()=>z,realFarmStateV3Layout:()=>Vt,realFarmStateV5Layout:()=>Ft,realFarmV6Layout:()=>_t,updateFarmPoolInfo:()=>dr,validateFarmRewards:()=>Nr,voterStakeRegistryCreateDepositEntry:()=>br,voterStakeRegistryCreateVoter:()=>gr,voterStakeRegistryDeposit:()=>pr,voterStakeRegistryUpdateVoterWeightRecord:()=>mr,voterStakeRegistryWithdraw:()=>fr,withdrawRewardLayout:()=>Ae});module.exports=Br(kn);var kt=require("@solana/web3.js"),Q=_(require("bn.js"));var g=require("@solana/buffer-layout"),qe=g.Layout,xt=g.Structure;var je=g.UInt;var Pt=g.u8;var St=g.seq;var H=g.blob;var $=class extends qe{constructor(e,n,o){super(e,o);this.blob=H(e),this.signed=n}decode(e,n=0){let o=new Q.default(this.blob.decode(e,n),10,"le");return this.signed?o.fromTwos(this.span*8).clone():o}encode(e,n,o=0){return typeof e=="number"&&(e=new Q.default(e)),this.signed&&(e=e.toTwos(this.span*8)),this.blob.encode(e.toArrayLike(Buffer,"le",this.span),n,o)}};function k(r){return new je(1,r)}function ee(r){return new je(4,r)}function c(r){return new $(8,!1,r)}function U(r){return new $(16,!1,r)}function At(r){return new $(1,!0,r)}function Pe(r){return new $(8,!0,r)}var xe=class extends qe{constructor(e,n,o,a){super(e.span,a);this.layout=e,this.decoder=n,this.encoder=o}decode(e,n){return this.decoder(this.layout.decode(e,n))}encode(e,n,o){return this.layout.encode(this.encoder(e),n,o)}getSpan(e,n){return this.layout.getSpan(e,n)}};function w(r){return new xe(H(32),t=>new kt.PublicKey(t),t=>t.toBuffer(),r)}function ue(r){return new xe(Pt(),Rr,Cr,r)}function Rr(r){if(r===0)return!1;if(r===1)return!0;throw new Error("Invalid bool: "+r)}function Cr(r){return r?1:0}var He=class extends xt{decode(t,e){return super.decode(t,e)}};function P(r,t,e){return new He(r,t,e)}function R(r,t,e){let n,o=typeof t=="number"?t:(0,Q.isBN)(t)?t.toNumber():new Proxy(t,{get(a,s){if(!n){let l=Reflect.get(a,"count");n=(0,Q.isBN)(l)?l.toNumber():l,Reflect.set(a,"count",n)}return Reflect.get(a,s)},set(a,s,l){return s==="count"&&(n=l),Reflect.set(a,s,l)}});return St(r,o,e)}var Se=require("@solana/web3.js");var ce=require("lodash");var ze=class{constructor(t){this.logLevel=t.logLevel!==void 0?t.logLevel:0,this.name=t.name}set level(t){this.logLevel=t}get time(){return Date.now().toString()}get moduleName(){return this.name}isLogLevel(t){return t<=this.logLevel}error(...t){return this.isLogLevel(0)?(console.error(this.time,this.name,"sdk logger error",...t),this):this}logWithError(...t){let e=t.map(n=>typeof n=="object"?JSON.stringify(n):n).join(", ");throw new Error(e)}warning(...t){return this.isLogLevel(1)?(console.warn(this.time,this.name,"sdk logger warning",...t),this):this}info(...t){return this.isLogLevel(2)?(console.info(this.time,this.name,"sdk logger info",...t),this):this}debug(...t){return this.isLogLevel(3)?(console.debug(this.time,this.name,"sdk logger debug",...t),this):this}},It={},Kr={};function C(r){let t=(0,ce.get)(It,r);if(!t){let e=(0,ce.get)(Kr,r);t=new ze({name:r,logLevel:e}),(0,ce.set)(It,r,t)}return t}var y=require("@solana/web3.js"),Lt=new y.PublicKey("EhhTKczWMGQt46ynNeRX1WfeagwwJd7ufHvCDjRxjo5Q"),Bt=new y.PublicKey("CBuCnLe26faBpcBP2fktp4rp8abpcAnTWft6ZrP5Q4T"),Rt=new y.PublicKey("9KEPoZmtHUrBbhWN1v1KWLMkkvwY6WLtAVUCPRtRjP4z"),Ct=new y.PublicKey("FarmqiPv5eAj3j1GMdMCMUGXqPUvmquZtMy86QH6rzhG"),En=new y.PublicKey("CLaimxFqjHzgTJtAGHU47NPhg6qrc5sCnpC4tBLyABQS"),Wn=new y.PublicKey("srmqPvymJeFKQ4zGQed1GFppgkRHL9kaELCbyksJtPX"),On=new y.PublicKey("9xQeWvG816bUx9EPjHmaT23yvVM2ZWbrrpZb9PusVFin"),Un=new y.PublicKey("675kPX9MHTjS2zt1qfr1NYHuzeLXfQM9H24wFSUt1Mp8"),Gn=new y.PublicKey("5quBtoiQqxF9Jv6KYKctB59NT3gtJD2Y65kdnB1Uev3h"),qn=new y.PublicKey("CDSr3ssLcRB6XYPJwAfFt18MZvEZp4LjHcvzBVZ45duo"),jn=new y.PublicKey("CAMMCzo5YL8w4VFF8KVHrK22GGUsp5VTaW7grrKgrWqK"),Hn=new y.PublicKey("LockrWmn6K5twhz3y9w1dQERbmgSaRkfnTeTKbpofwE"),zn=new y.PublicKey("kN1kEznaF5Xbd8LYuqtEFcxzWSBk5Fv6ygX6SqEGJVy"),Yn=new y.PublicKey("CDSr3ssLcRB6XYPJwAfFt18MZvEZp4LjHcvzBVZ45duo"),Xn=new y.PublicKey("routeUGWgWzqBWFcrCfv8tritsqukccJPu3q5GPP3xS"),Zn=new y.PublicKey("7YttLkHDoNj9wyDur5pM1ejNaAvT9X4eqaYcHQqtj2G5"),Jn=new y.PublicKey("6FJon3QE27qgPVggARueB22hLvoh22VzJpXv4rBEoSLF"),Qn=new y.PublicKey("CC12se5To1CdEuw7fDS27B7Geo5jJyL7t5UK2B44NgiH"),$n=new y.PublicKey("9HzJyW1qZsEiSfMUf6L2jo3CcTKAyBmSyKdwQeYisHrC"),eo=new y.PublicKey("DropEU8AvevN3UrXWXTMuz3rqnMczQVNjq3kcSdW2SQi"),to=new y.PublicKey("CPMMoo8L3F4NbTegBCKVNunggL7H1ZpdTHKxQB5qKP1C"),ro=new y.PublicKey("GpMZbSM2GgvTKHJirzeGfMFoaZ8UR2X7F4v8vHTvxFbL"),no=new y.PublicKey("DNXgeM9EiiaAbaWvwjHj9fQQLAX5ZsfHyvmYUNRAdNC8"),oo=new y.PublicKey("LockrWmn6K5twhz3y9w1dQERbmgSaRkfnTeTKbpofwE"),io=new y.PublicKey("3f7GcQFG397GAaEnv51zR6tsTVihYRydnydDD1cXekxH"),so=new y.PublicKey("LanMV9sAd7wArD4vJFi2qDdfnVhFxYSUg6eADduJ3uj"),ao=new y.PublicKey("WLHv2UAZm6z4KyaaELi5pjdbJh6RESMva1Rnn8pJVVh"),uo=new y.PublicKey("DRay6fNdQ5J82H7xV6uq2aV3mNrUZ1J4PgSKsWgptcm6"),co=new y.PublicKey("5xqNaZXX5eUi4p5HU4oz9i5QnwRNT2y6oN7yyn4qENeq"),lo=new y.PublicKey("4Bu96XjU84XjPDSpveTVf6LYGCkfW5FK7SNkREWcEfV4"),po=new y.PublicKey("6s1xP3hpbAfFoNtUNF8mfHsjr2Bd97JxFJRWLbL6aHuX");var le={OPEN_BOOK_PROGRAM:new y.PublicKey("EoTcMgcDRTJVZDMZWBoU6rhYHZfkNTVEAfz3uUJRcYGj"),SERUM_PROGRAM_ID_V3:new y.PublicKey("Ray1111111111111111111111111111111111111111"),AMM_V4:new y.PublicKey("DRaya7Kj3aMWQSy19kSjvmuwq9docCHofyP9kanQGaav"),AMM_STABLE:new y.PublicKey("DRayDdXc1NZQ9C3hRWmoSf8zK4iapgMnjdNZWrfwsP8m"),CLMM_PROGRAM_ID:new y.PublicKey("DRayAUgENGQBKVaX8owNhgzkEDyoHTGVEGHVJT1E9pfH"),CLMM_LOCK_PROGRAM_ID:new y.PublicKey("DRay25Usp3YJAi7beckgpGUC7mGJ2cR1AVPxhYfwVCUX"),CLMM_LOCK_AUTH_ID:new y.PublicKey("6Aoh8h2Lw2m5UGxYR8AdAL87jTWYeKoxM52mJRzfYwN"),CREATE_CPMM_POOL_PROGRAM:new y.PublicKey("DRaycpLY18LhpbydsBWbVJtxpNv9oXPgjRSfpF2bWpYb"),CREATE_CPMM_POOL_AUTH:new y.PublicKey("CXniRufdq5xL8t8jZAPxsPZDpuudwuJSPWnbcD5Y5Nxq"),CREATE_CPMM_POOL_FEE_ACC:new y.PublicKey("3oE58BKVt8KuYkGxx8zBojugnymWmBiyafWgMrnb6eYy"),LOCK_CPMM_PROGRAM:new y.PublicKey("DRay25Usp3YJAi7beckgpGUC7mGJ2cR1AVPxhYfwVCUX"),LOCK_CPMM_AUTH:new y.PublicKey("7qWVV8UY2bRJfDLP4s37YzBPKUkVB46DStYJBpYbQzu3"),UTIL1216:y.PublicKey.default,Router:new y.PublicKey("DRaybByLpbUL57LJARs3j8BitTxVfzBg351EaMr5UTCd"),FARM_PROGRAM_ID_V3:new y.PublicKey("DRayWyrLmEW5KEeqs8kdTMMaBabapqagaBC7KWpGtJeZ"),FARM_PROGRAM_ID_V4:new y.PublicKey("Ray1111111111111111111111111111111111111111"),FARM_PROGRAM_ID_V5:new y.PublicKey("DRayiCGSZgku1GTK6rXD6mVDdingXy6APAH1R6R5L2LC"),FARM_PROGRAM_ID_V6:new y.PublicKey("DRayzbYakXs45ELHkzH6vC3fuhQqTAnv5A68gdFuvZyZ"),LAUNCHPAD_PROGRAM:new y.PublicKey("DRay6fNdQ5J82H7xV6uq2aV3mNrUZ1J4PgSKsWgptcm6"),LAUNCHPAD_AUTH:new y.PublicKey("5xqNaZXX5eUi4p5HU4oz9i5QnwRNT2y6oN7yyn4qENeq"),LAUNCHPAD_PLATFORM:new y.PublicKey("2Jx4KTDrVSdWNazuGpcA8n3ZLTRGGBDxAWhuKe2Xcj2a"),LAUNCHPAD_CONFIG:new y.PublicKey("7ZR4zD7PYfY2XxoG1Gxcy2EgEeGYrpxrwzPuwdUBssEt"),FEE_DESTINATION_ID:new y.PublicKey("9y8ENuuZ3b19quffx9hQvRVygG5ky6snHfRvGpuSfeJy"),MODEL_DATA_PUBKEY:new y.PublicKey("Ray1111111111111111111111111111111111111111")};var Kt=require("@solana/spl-token"),wo=C("Raydium_farm_config"),Vr=new Se.PublicKey("4k3Dyjzvzp8eMZWUXbBCjEvwSkkk59S5iCNLY3QrkX6R"),Fr=new Se.PublicKey("FrspKwj8i3pNmKwXreTveC4fu7KL5ZbGeXdZBe2XViu1"),_r=Kt.NATIVE_MINT,Mr=new Se.PublicKey("3TRTX4dXUpp2eqxi3tvQDFYUV7SdDJjcPE3Y4mbtftaX"),Ye={3:Ze,5:Je,6:Qe},Xe={3:te,5:$e,6:et},Dr=r=>[3,4,5,6].indexOf(r)!==-1,Nr=r=>{var s;let{version:t,rewardInfos:e,rewardTokenAccountsPublicKeys:n}=r,o=`rewardInfo:${JSON.stringify(e)}, rewardAccount:${JSON.stringify(n)}`,a={3:()=>{if(e.length!==1||n.length!==1)return`rewardInfos or rewardTokenAccounts lengths not equal 1: ${o}`},5:()=>{if(e.length!==n.length)return`rewardInfos and rewardTokenAccounts lengths not equal: ${o}`},6:()=>{if(!n.length||e.length!==n.length)return`no rewardTokenAccounts or rewardInfos and rewardTokenAccounts lengths not equal: ${o}`}};return(s=a[t])==null?void 0:s.call(a)},z={"Standard SPL":0,"Option tokens":1},vr={[Lt.toString()]:3,[Bt.toString()]:4,[Rt.toString()]:5,[Ct.toString()]:6,[le.FARM_PROGRAM_ID_V3.toString()]:3,[le.FARM_PROGRAM_ID_V4.toString()]:4,[le.FARM_PROGRAM_ID_V5.toString()]:5,[le.FARM_PROGRAM_ID_V6.toString()]:6};var ke=P([k("instruction")]),Ae=P([k("instruction")]),Er=P([c("rewardState"),c("rewardOpenTime"),c("rewardEndTime"),c("rewardLastUpdateTime"),c("totalReward"),c("totalRewardEmissioned"),c("rewardClaimed"),c("rewardPerSecond"),U("accRewardPerShare"),w("rewardVault"),w("rewardMint"),w("rewardSender"),c("rewardType"),R(c(),15,"padding")]),Vt=P([c("state"),c("nonce"),w("lpVault"),w("rewardVault"),w(),w(),c(),c(),c("totalReward"),U("perShareReward"),c("lastSlot"),c("perSlotReward")]),Ft=P([c("state"),c("nonce"),w("lpVault"),w("rewardVaultA"),c("totalRewardA"),U("perShareRewardA"),c("perSlotRewardA"),k("option"),w("rewardVaultB"),H(7),c("totalRewardB"),U("perShareRewardB"),c("perSlotRewardB"),c("lastSlot"),w()]),_t=P([c(),c("state"),c("nonce"),c("validRewardTokenNum"),U("rewardMultiplier"),c("rewardPeriodMax"),c("rewardPeriodMin"),c("rewardPeriodExtend"),w("lpMint"),w("lpVault"),R(Er,5,"rewardInfos"),w("creator"),w(),R(c(),32,"padding")]),Ze=new Proxy(Vt,{get(r,t,e){return t==="decode"?(...n)=>{let o=r.decode(...n);return v(F({},o),{version:3,rewardInfos:[{rewardVault:o.rewardVault,totalReward:o.totalReward,perSlotReward:o.perSlotReward,perShareReward:o.perShareReward}]})}:Reflect.get(r,t,e)}}),Je=new Proxy(Ft,{get(r,t,e){return t==="decode"?(...n)=>{let o=r.decode(...n);return v(F({},o),{version:5,rewardInfos:[{rewardVault:o.rewardVaultA,totalReward:o.totalRewardA,perSlotReward:o.perSlotRewardA,perShareReward:o.perShareRewardA},{rewardVault:o.rewardVaultB,totalReward:o.totalRewardB,perSlotReward:o.perSlotRewardB,perShareReward:o.perShareRewardB}]})}:Reflect.get(r,t,e)}}),Qe=new Proxy(_t,{get(r,t,e){return t==="decode"?(...n)=>{let o=r.decode(...n);return v(F({},o),{version:6,rewardInfos:o.rewardInfos.map(a=>{var s;return v(F({},a),{rewardType:((s=Object.entries(z).find(l=>String(l[1])===a.rewardType.toString()))!=null?s:["Standard SPL"])[0]})})})}:Reflect.get(r,t,e)}}),Mt=P([c("isSet"),c("rewardPerSecond"),c("rewardOpenTime"),c("rewardEndTime"),c("rewardType")]),Ie=P([k("instruction"),c("nonce"),R(Mt,5,"rewardTimeInfo")]),Le=P([k("instruction"),c("rewardReopenTime"),c("rewardEndTime"),c("rewardPerSecond")]),Be=P([k("instruction"),c("isSet"),c("rewardPerSecond"),c("rewardOpenTime"),c("rewardEndTime"),c("rewardType")]),Wr=P([c("state"),w("id"),w("owner"),c("deposited"),R(c(),1,"rewardDebts")]),te=P([c("state"),w("id"),w("owner"),c("deposited"),R(U(),1,"rewardDebts"),c(""),c("voteLockedBalance"),R(c(),15)]),Or=P([c("state"),w("id"),w("owner"),c("deposited"),R(c(),2,"rewardDebts")]),$e=P([c("state"),w("id"),w("owner"),c("deposited"),R(U(),2,"rewardDebts"),R(c(),17)]),et=P([c(),c("state"),w("id"),w("owner"),c("deposited"),R(U(),5,"rewardDebts"),R(c(),16)]),M=P([k("instruction"),c("amount")]),Dt=P([w("mint"),w("grantAuthority"),c("baselineVoteWeightScaledFactor"),c("maxExtraLockupVoteWeightScaledFactor"),c("lockupSaturationSecs"),At("digitShift"),R(k(),7,"reserved1"),R(c(),7,"reserved2")]),tt=P([H(8),w("governanceProgramId"),w("realm"),w("realmGoverningTokenMint"),w("realmAuthority"),R(k(),32,"reserved1"),R(Dt,4,"votingMints"),Pe("timeOffset"),k("bump"),R(k(),7,"reserved2"),R(c(),11,"reserved3")]),Nt=P([Pe("startTime"),Pe("endTime"),k("kind"),R(k(),15,"reserved")]),vt=P([R(Nt,1,"lockup"),c("amountDeposited_native"),c("amountInitiallyLockedNative"),ue("isUsed"),ue("allowClawback"),k("votingMintConfigIdx"),R(k(),29,"reserved")]),rt=P([H(8),w("voterAuthority"),w("registrar"),R(vt,32,"deposits"),k("voterBump"),k("voterWweightRecordBump"),R(k(),94,"reserved")]);var D=_(require("bn.js"));var Et=require("@solana/web3.js");var Re=require("@solana/spl-token"),nt=C("Raydium_accountInfo_util");async function Wt(r,t,e){let{batchRequest:n,commitment:o="confirmed",chunkCount:a=100}=F({batchRequest:!1},e),s=ot(t,a),l=new Array(s.length).fill([]);if(n){let f=s.map(b=>{let p=r._buildArgs([b.map(m=>m.toBase58())],o,"base64");return{methodName:"getMultipleAccounts",args:p}}),d=ot(f,10);l=(await(await Promise.all(d.map(async b=>await r._rpcBatchRequest(b)))).flat()).map(b=>(b.error&&nt.logWithError(`failed to get info for multiple accounts, RPC_ERROR, ${b.error.message}`),b.result.value.map(p=>{if(p){let{data:m,executable:S,lamports:B,owner:I,rentEpoch:V}=p;return m.length!==2&&m[1]!=="base64"&&nt.logWithError("info must be base64 encoded, RPC_ERROR"),{data:Buffer.from(m[0],"base64"),executable:S,lamports:B,owner:new Et.PublicKey(I),rentEpoch:V}}return null})))}else try{l=await Promise.all(s.map(f=>r.getMultipleAccountsInfo(f,o)))}catch(f){f instanceof Error&&nt.logWithError(`failed to get info for multiple accounts, RPC_ERROR, ${f.message}`)}return l.flat()}async function Ot(r,t,e){let n=await Wt(r,t.map(o=>o.pubkey),e);return t.map((o,a)=>v(F({},o),{accountInfo:n[a]}))}var O=_(require("bn.js")),Zr=_(require("decimal.js"));var zt=_(require("big.js")),fe=_(require("bn.js"));var Ut=_(require("toformat")),Ur=Ut.default,de=Ur;var pe=_(require("big.js")),qt=_(require("bn.js")),jt=_(require("decimal.js-light"));var re=_(require("bn.js"));var Gt=9007199254740991;function x(r){let t=C("Raydium_parseBigNumberish");if(r instanceof re.default)return r;if(typeof r=="string"){if(r.match(/^-?[0-9]+$/))return new re.default(r);t.logWithError(`invalid BigNumberish string: ${r}`)}return typeof r=="number"?(r%1&&t.logWithError(`BigNumberish number underflow: ${r}`),(r>=Gt||r<=-Gt)&&t.logWithError(`BigNumberish number overflow: ${r}`),new re.default(String(r))):typeof r=="bigint"?new re.default(r.toString()):(t.error(`invalid BigNumberish value: ${r}`),new re.default(0))}var Ce=C("module/fraction"),st=de(pe.default),me=de(jt.default),qr={[0]:me.ROUND_DOWN,[1]:me.ROUND_HALF_UP,[2]:me.ROUND_UP},jr={[0]:pe.default.roundDown,[1]:pe.default.roundHalfUp,[2]:pe.default.roundUp},A=class{constructor(t,e=new qt.default(1)){this.numerator=x(t),this.denominator=x(e)}get quotient(){return this.numerator.div(this.denominator)}invert(){return new A(this.denominator,this.numerator)}add(t){let e=t instanceof A?t:new A(x(t));return this.denominator.eq(e.denominator)?new A(this.numerator.add(e.numerator),this.denominator):new A(this.numerator.mul(e.denominator).add(e.numerator.mul(this.denominator)),this.denominator.mul(e.denominator))}sub(t){let e=t instanceof A?t:new A(x(t));return this.denominator.eq(e.denominator)?new A(this.numerator.sub(e.numerator),this.denominator):new A(this.numerator.mul(e.denominator).sub(e.numerator.mul(this.denominator)),this.denominator.mul(e.denominator))}mul(t){let e=t instanceof A?t:new A(x(t));return new A(this.numerator.mul(e.numerator),this.denominator.mul(e.denominator))}div(t){let e=t instanceof A?t:new A(x(t));return new A(this.numerator.mul(e.denominator),this.denominator.mul(e.numerator))}toSignificant(t,e={groupSeparator:""},n=1){Number.isInteger(t)||Ce.logWithError(`${t} is not an integer.`),t<=0&&Ce.logWithError(`${t} is not positive.`),me.set({precision:t+1,rounding:qr[n]});let o=new me(this.numerator.toString()).div(this.denominator.toString()).toSignificantDigits(t);return o.toFormat(o.decimalPlaces(),e)}toFixed(t,e={groupSeparator:""},n=1){return Number.isInteger(t)||Ce.logWithError(`${t} is not an integer.`),t<0&&Ce.logWithError(`${t} is negative.`),st.DP=t,st.RM=jr[n]||1,new st(this.numerator.toString()).div(this.denominator.toString()).toFormat(t,e)}isZero(){return this.numerator.isZero()}};var Hr=C("Raydium_amount"),Ht=de(zt.default);function zr(r,t){let e="0",n="0";if(r.includes(".")){let o=r.split(".");o.length===2?([e,n]=o,n=n.padEnd(t,"0")):Hr.logWithError(`invalid number string, num: ${r}`)}else e=r;return[e,n.slice(0,t)||n]}var G=class extends A{constructor(e,n,o=!0,a){let s=new fe.default(0),l=at.pow(new fe.default(e.decimals));if(o)s=x(n);else{let f=new fe.default(0),d=new fe.default(0);if(typeof n=="string"||typeof n=="number"||typeof n=="bigint"){let[h,b]=zr(n.toString(),e.decimals);f=x(h),d=x(b)}f=f.mul(l),s=f.add(d)}super(s,l);this.logger=C(a||"TokenAmount"),this.token=e}get raw(){return this.numerator}isZero(){return this.raw.isZero()}gt(e){return this.token.equals(e.token)||this.logger.logWithError("gt token not equals"),this.raw.gt(e.raw)}lt(e){return this.token.equals(e.token)||this.logger.logWithError("lt token not equals"),this.raw.lt(e.raw)}add(e){return this.token.equals(e.token)||this.logger.logWithError("add token not equals"),new G(this.token,this.raw.add(e.raw))}subtract(e){return this.token.equals(e.token)||this.logger.logWithError("sub token not equals"),new G(this.token,this.raw.sub(e.raw))}toSignificant(e=this.token.decimals,n,o=0){return super.toSignificant(e,n,o)}toFixed(e=this.token.decimals,n,o=0){return e>this.token.decimals&&this.logger.logWithError("decimals overflow"),super.toFixed(e,n,o)}toExact(e={groupSeparator:""}){return Ht.DP=this.token.decimals,new Ht(this.numerator.toString()).div(this.denominator.toString()).toFormat(e)}};var Yt=require("@solana/web3.js"),ut=require("@solana/spl-token"),Xt={chainId:101,address:Yt.PublicKey.default.toBase58(),programId:ut.TOKEN_PROGRAM_ID.toBase58(),decimals:9,symbol:"SOL",name:"solana",logoURI:"https://img-v1.raydium.io/icon/So11111111111111111111111111111111111111112.png",tags:[],priority:2,type:"raydium",extensions:{coingeckoId:"solana"}},Y={chainId:101,address:"So11111111111111111111111111111111111111112",programId:ut.TOKEN_PROGRAM_ID.toBase58(),decimals:9,symbol:"WSOL",name:"Wrapped SOL",logoURI:"https://img-v1.raydium.io/icon/So11111111111111111111111111111111111111112.png",tags:[],priority:2,type:"raydium",extensions:{coingeckoId:"solana"}};var Ve=require("@solana/web3.js");var L=require("@solana/web3.js"),Zt=require("@solana/spl-token");function i({pubkey:r,isSigner:t=!1,isWritable:e=!0}){return{pubkey:r,isWritable:e,isSigner:t}}var ct=[i({pubkey:Zt.TOKEN_PROGRAM_ID,isWritable:!1}),i({pubkey:L.SystemProgram.programId,isWritable:!1}),i({pubkey:L.SYSVAR_RENT_PUBKEY,isWritable:!1})];function Jt({publicKey:r,transformSol:t}){let e=lt(r.toString());if(e instanceof L.PublicKey)return t&&e.equals(X)?it:e;if(t&&e.toString()===X.toBase58())return it;if(typeof e=="string"){if(e===L.PublicKey.default.toBase58())return L.PublicKey.default;try{return new L.PublicKey(e)}catch{throw new Error("invalid public key")}}throw new Error("invalid public key")}function lt(r){try{return new L.PublicKey(r)}catch{return r}}var $o=new L.PublicKey("MemoSq4gqABAXKb96qnH8TysNcWxMyWCqXgDLGmfcHr"),ei=new L.PublicKey("MemoSq4gqABAXKb96qnH8TysNcWxMyWCqXgDLGmfcHr"),dt=new L.PublicKey("SysvarRent111111111111111111111111111111111"),ti=new L.PublicKey("SysvarC1ock11111111111111111111111111111111"),ri=new L.PublicKey("metaqbxxUerdq28cj1RbAWkYQm3ybzjb6a8bt518x1s"),Ke=new L.PublicKey("Sysvar1nstructions1111111111111111111111111"),ni=L.SystemProgram.programId,oi=new L.PublicKey("4k3Dyjzvzp8eMZWUXbBCjEvwSkkk59S5iCNLY3QrkX6R"),ii=new L.PublicKey("Ea5SjE2Y6yvCeW5dYTn7PYMuW5ikXkvbGdcmSnXeaLjS"),si=new L.PublicKey("SRMuApVNdxXokk5GT7XD5cUUgXMBCoAz2LHeuAoKWRt"),ai=new L.PublicKey("EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v"),ui=new L.PublicKey("Es9vMFrzaCERmJfrF4H2FYD4KCoNkY11McCe8BenwNYB"),ci=new L.PublicKey("mSoLzYCxHdYgdzU16g5QSh3i5K3z3KZK7ytfqcJm7So"),li=new L.PublicKey("7dHbWXmci3dT8UFYWYZweBLXgycu7Y3iL6trKn1Y7ARj"),di=new L.PublicKey("USDH1SM1ojwWUga67PGrgFWUHibbjqMvuMaDkRJTgkX"),pi=new L.PublicKey("NRVwhjBQiUPYtfDT5zRBVJajzFQHaBUNtC7SNVvqRFa"),mi=new L.PublicKey("ANAxByE6G2WjFp7A4NqtWYXb3mgruyzZYg3spfxe6Lbo"),fi=new L.PublicKey("7vfCXTUXx5WJV5JADk17DUJ4ksgau7utNKj4b963voxs"),it=new L.PublicKey("So11111111111111111111111111111111111111112"),X=L.PublicKey.default;var pt=class{constructor({mint:t,decimals:e,symbol:n,name:o,skipMint:a=!1,isToken2022:s=!1}){if(t===X.toBase58()||t instanceof Ve.PublicKey&&X.equals(t)){this.decimals=Y.decimals,this.symbol=Y.symbol,this.name=Y.name,this.mint=new Ve.PublicKey(Y.address),this.isToken2022=!1;return}this.decimals=e,this.symbol=n||t.toString().substring(0,6),this.name=o||t.toString().substring(0,6),this.mint=a?Ve.PublicKey.default:Jt({publicKey:t}),this.isToken2022=s}equals(t){return this===t?!0:this.mint.equals(t.mint)}},Z=pt;Z.WSOL=new pt(v(F({},Y),{mint:Y.address}));var mt=class{constructor({decimals:t,symbol:e="UNKNOWN",name:n="UNKNOWN"}){this.decimals=t,this.symbol=e,this.name=n}equals(t){return this===t}},Fe=mt;Fe.SOL=new mt(Xt);var $t=_(require("bn.js"));var Qt=new A(new $t.default(100)),ne=class extends A{toSignificant(t=5,e,n){return this.mul(Qt).toSignificant(t,e,n)}toFixed(t=2,e,n){return this.mul(Qt).toFixed(t,e,n)}};var Yr=C("Raydium_price"),q=class extends A{constructor(e){let{baseToken:n,quoteToken:o,numerator:a,denominator:s}=e;super(a,s);this.baseToken=n,this.quoteToken=o,this.scalar=new A(ft(n.decimals),ft(o.decimals))}get raw(){return new A(this.numerator,this.denominator)}get adjusted(){return super.mul(this.scalar)}invert(){return new q({baseToken:this.quoteToken,quoteToken:this.baseToken,denominator:this.numerator,numerator:this.denominator})}mul(e){this.quoteToken!==e.baseToken&&Yr.logWithError("mul token not equals");let n=super.mul(e);return new q({baseToken:this.baseToken,quoteToken:e.quoteToken,denominator:n.denominator,numerator:n.numerator})}toSignificant(e=this.quoteToken.decimals,n,o){return this.adjusted.toSignificant(e,n,o)}toFixed(e=this.quoteToken.decimals,n,o){return this.adjusted.toFixed(e,n,o)}};var er=require("@solana/web3.js"),tr=_(require("bn.js"));function rr(r){return typeof r=="object"&&r!==null&&![Z,G,er.PublicKey,A,tr.default,q,ne].some(t=>typeof t=="object"&&r instanceof t)}function _e(r){return typeof r=="string"?lt(r):Array.isArray(r)?r.map(t=>_e(t)):rr(r)?Object.fromEntries(Object.entries(r).map(([t,e])=>[t,_e(e)])):r}var Xr=new O.default(0),ns=new O.default(1),os=new O.default(2),is=new O.default(3),ss=new O.default(5),at=new O.default(10),as=new O.default(100),us=new O.default(1e3),cs=new O.default(1e4);function ft(r){return at.pow(x(r))}var nr=r=>typeof r=="number";function or(r,t,e){let n=nr(t)?t*((e==null?void 0:e.unit)==="s"?1e3:1):t;return new Date(r).getTime()<=n}function ir(r,t,e){let n=nr(t)?t*((e==null?void 0:e.unit)==="s"?1e3:1):t;return new Date(r).getTime()>n}function ot(r,t=1,e=[]){let n=[...r];if(t<=0)return e;for(;n.length;)e.push(n.splice(0,t));return e}var sr=require("@solana/web3.js"),ar=require("@solana/spl-token");var J=require("@solana/web3.js");var oe={CreateAccount:"CreateAccount",InitAccount:"InitAccount",CreateATA:"CreateATA",CloseAccount:"CloseAccount",TransferAmount:"TransferAmount",InitMint:"InitMint",MintTo:"MintTo",InitMarket:"InitMarket",Util1216OwnerClaim:"Util1216OwnerClaim",SetComputeUnitPrice:"SetComputeUnitPrice",SetComputeUnitLimit:"SetComputeUnitLimit",ClmmCreatePool:"ClmmCreatePool",ClmmOpenPosition:"ClmmOpenPosition",ClmmIncreasePosition:"ClmmIncreasePosition",ClmmDecreasePosition:"ClmmDecreasePosition",ClmmClosePosition:"ClmmClosePosition",ClmmSwapBaseIn:"ClmmSwapBaseIn",ClmmSwapBaseOut:"ClmmSwapBaseOut",ClmmInitReward:"ClmmInitReward",ClmmSetReward:"ClmmSetReward",ClmmCollectReward:"ClmmCollectReward",ClmmLockPosition:"ClmmLockPosition",ClmmHarvestLockPosition:"ClmmHarvestLockPosition",AmmV4Swap:"AmmV4Swap",AmmV4AddLiquidity:"AmmV4AddLiquidity",AmmV4RemoveLiquidity:"AmmV4RemoveLiquidity",AmmV4SimulatePoolInfo:"AmmV4SimulatePoolInfo",AmmV4SwapBaseIn:"AmmV4SwapBaseIn",AmmV4SwapBaseOut:"AmmV4SwapBaseOut",AmmV4CreatePool:"AmmV4CreatePool",AmmV4InitPool:"AmmV4InitPool",AmmV5AddLiquidity:"AmmV5AddLiquidity",AmmV5RemoveLiquidity:"AmmV5RemoveLiquidity",AmmV5SimulatePoolInfo:"AmmV5SimulatePoolInfo",AmmV5SwapBaseIn:"AmmV5SwapBaseIn",AmmV5SwapBaseOut:"AmmV5SwapBaseOut",RouteSwap:"RouteSwap",RouteSwap1:"RouteSwap1",RouteSwap2:"RouteSwap2",FarmV3Deposit:"FarmV3Deposit",FarmV3Withdraw:"FarmV3Withdraw",FarmV3CreateLedger:"FarmV3CreateLedger",FarmV4Withdraw:"FarmV4Withdraw",FarmV5Deposit:"FarmV5Deposit",FarmV5Withdraw:"FarmV5Withdraw",FarmV5CreateLedger:"FarmV5CreateLedger",FarmV6Deposit:"FarmV6Deposit",FarmV6Withdraw:"FarmV6Withdraw",FarmV6Create:"FarmV6Create",FarmV6Restart:"FarmV6Restart",FarmV6CreatorAddReward:"FarmV6CreatorAddReward",FarmV6CreatorWithdraw:"FarmV6CreatorWithdraw",CpmmCreatePool:"CpmmCreatePool",CpmmAddLiquidity:"CpmmAddLiquidity",CpmmWithdrawLiquidity:"CpmmWithdrawLiquidity",CpmmSwapBaseIn:"CpmmSwapBaseIn",CpmmSwapBaseOut:"CpmmSwapBaseOut",CpmmLockLp:"CpmmLockLp",CpmmCollectLockFee:"CpmmCollectLockFee",TransferTip:"TransferTip"};var Jr=require("@solana/spl-token"),Ps=C("Raydium_txUtil");function E(r,t){let[e,n]=J.PublicKey.findProgramAddressSync(r,t);return{publicKey:e,nonce:n}}function ye(r,t,e){return E([r.toBuffer(),(e!=null?e:ar.TOKEN_PROGRAM_ID).toBuffer(),t.toBuffer()],new sr.PublicKey("ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL"))}var Qr=_(require("bn.js"));var ge=require("@solana/web3.js");var $r={AcL1Vo8oy1ULiavEcjSUcwfBSForXMudcZvDZy5nzJkU:new ge.AddressLookupTableAccount({key:new ge.PublicKey("AcL1Vo8oy1ULiavEcjSUcwfBSForXMudcZvDZy5nzJkU"),state:ge.AddressLookupTableAccount.deserialize(Buffer.from("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","base64"))})};var ie=require("@solana/web3.js"),en=_(require("axios"));var ur=_(require("bn.js")),Zs=new ur.default(1e6);var yt=P([w("mint"),w("owner"),c("amount"),ee("delegateOption"),w("delegate"),k("state"),ee("isNativeOption"),c("isNative"),c("delegatedAmount"),ee("closeAuthorityOption"),w("closeAuthority")]);var be=C("Raydium.farm.util");function tn({programId:r,poolId:t,mint:e,type:n}){let{publicKey:o}=E([t.toBuffer(),e.toBuffer(),Buffer.from(n==="lpVault"?"lp_vault_associated_seed":n==="rewardVault"?"reward_vault_associated_seed":"","utf-8")],r);return o}function W({programId:r,poolId:t,owner:e,version:n}){let{publicKey:o}=E([t.toBuffer(),e.toBuffer(),Buffer.from(n===6?"farmer_info_associated_seed":"staker_info_v2_associated_seed","utf-8")],r);return o}var rn=({programId:r,poolId:t})=>E([t.toBuffer()],r);function nn(r){return{isSet:new D.default(1),rewardPerSecond:x(r.perSecond),rewardOpenTime:x(r.openTime),rewardEndTime:x(r.endTime),rewardType:x(z[r.rewardType])}}function on(r){return x(r.endTime).sub(x(r.openTime)).mul(x(r.perSecond))}function cr(r){let t=Xe[r];return t||be.logWithError("invalid version",r),t}function lr(r){let t=Ye[r];return t||be.logWithError("invalid version",r),t}function dr(r,t,e,n){if(r.version===3||r.version===5){if(r.lastSlot.gte(new D.default(e)))return r;let o=new D.default(e).sub(r.lastSlot);r.lastSlot=new D.default(e);for(let a of r.rewardInfos){if(t.amount.eq(new D.default(0)))continue;let s=a.perSlotReward.mul(o);a.perShareReward=a.perShareReward.add(s.mul(new D.default(10).pow(new D.default(r.version===3?9:15))).div(t.amount)),a.totalReward=a.totalReward.add(s)}}else if(r.version===6)for(let o of r.rewardInfos){if(o.rewardState.eq(new D.default(0)))continue;let a=D.default.min(new D.default(n),o.rewardEndTime);if(o.rewardOpenTime.gte(a))continue;let l=a.sub(o.rewardLastUpdateTime).mul(o.rewardPerSecond),f=o.totalReward.sub(o.totalRewardEmissioned);f.lt(l)?(l=f,o.rewardLastUpdateTime=o.rewardLastUpdateTime.add(f.div(o.rewardPerSecond))):o.rewardLastUpdateTime=a,!t.amount.eq(new D.default(0))&&(o.accRewardPerShare=o.accRewardPerShare.add(l.mul(r.rewardMultiplier).div(t.amount)),o.totalRewardEmissioned=o.totalRewardEmissioned.add(l))}return r}async function sn({connection:r,farmPools:t,owner:e,config:n,chainTime:o}){let a=!1,s=!1,l=new D.default(10),f=[];for(let p of t){let m=_e(p);m.version===6?s=!0:a=!0,f.push({pubkey:m.id,version:m.version,key:"state",poolId:m.id},{pubkey:m.lpVault,version:m.version,key:"lpVault",poolId:m.id}),e&&f.push({pubkey:W({programId:m.programId,poolId:m.id,owner:e,version:p.version}),version:m.version,key:"ledger",poolId:m.id})}let d={},h=await Ot(r,f,n);for(let{pubkey:p,version:m,key:S,poolId:B,accountInfo:I}of h){let V=B.toBase58();if(d[V]=F({},d[V]),S==="state"){let N=lr(m);(!I||!I.data||I.data.length!==N.span)&&be.logWithError(`invalid farm state account info, pools.id, ${p}`),d[V].state=N.decode(I.data)}else if(S==="lpVault")(!I||!I.data||I.data.length!==yt.span)&&be.logWithError(`invalid farm lp vault account info, pools.lpVault, ${p}`),d[V].lpVault=yt.decode(I.data);else if(S==="ledger"){let N=cr(m);I&&I.data&&(I.data.length!==N.span&&be.logWithError(`invalid farm ledger account info, ledger, ${p}`),d[V].ledger=N.decode(I.data))}}let b=s||a?await r.getSlot():0;for(let p of Object.keys(d))d[p]!==void 0&&(d[p].state=dr(d[p].state,d[p].lpVault,b,o));for(let[p,{state:m,ledger:S}]of Object.entries(d))if(S){let B=m.version===6?m.rewardMultiplier:m.rewardInfos.length===1?l.pow(new D.default(9)):l.pow(new D.default(15)),I=m.rewardInfos.map((V,N)=>{let j=S.rewardDebts[N];return S.deposited.mul(m.version===6?V.accRewardPerShare:V.perShareReward).div(B).sub(j)});d[p].wrapped=v(F({},d[p].wrapped),{pendingRewards:I})}return d}function an(r,t=Date.now()){if(r.version===6){let e=r.state.rewardInfos;if(e.every(({rewardOpenTime:n})=>or(t,n.toNumber(),{unit:"s"})))return"upcoming pool";if(e.every(({rewardEndTime:n})=>ir(t,n.toNumber(),{unit:"s"})))return"closed pool"}else{let e=r.state.rewardInfos.map(({perSlotReward:n})=>n);if(e.length===2){if(String(e[0])==="0"&&String(e[1])!=="0")return"normal fusion pool";if(String(e[0])!=="0"&&String(e[1])!=="0")return"dual fusion pool";if(String(e[0])==="0"&&String(e[1])==="0")return"closed pool"}else if(e.length===1&&String(e[0])==="0")return"closed pool"}}async function Me(r,t,e,n){let o=await r.getAccountInfo(t);if(o===null)throw Error("registrar info check error");let s=tt.decode(o.data).votingMints.findIndex(h=>h.mint.equals(n));if(s===-1)throw Error("find voter mint error");let l=await r.getAccountInfo(e);if(l===null)return{index:s,isInit:!1};let d=rt.decode(l.data).deposits.findIndex(h=>h.isUsed&&h.votingMintConfigIdx===s);return d===-1?{index:s,isInit:!1}:{index:d,isInit:!0}}var u=require("@solana/web3.js"),he=_(require("bn.js")),K=require("@solana/spl-token");function De(r,t,e){return E([t.toBuffer(),Buffer.from("registrar","utf8"),e.toBuffer()],r)}function Ne(r,t){return E([t.toBuffer(),Buffer.from("voting_mint_seed","utf8")],r)}function ve(r,t){return E([t.toBuffer()],r)}function Ee(r,t,e){return E([t.toBuffer(),Buffer.from("voter","utf8"),e.toBuffer()],r)}function We(r,t,e){return E([t.toBuffer(),Buffer.from("voter-weight-record","utf8"),e.toBuffer()],r)}function Oe(r,t,e,n){return E([Buffer.from("governance","utf8"),t.toBuffer(),e.toBuffer(),n.toBuffer()],r)}var un=C("Raydium_farm_instruction"),we={voterStakeRegistryCreateVoter:Buffer.from([6,24,245,52,243,255,148,25]),voterStakeRegistryCreateDepositEntry:Buffer.from([185,131,167,186,159,125,19,67]),voterStakeRegistryDeposit:Buffer.from([242,35,198,137,82,225,242,182]),voterStakeRegistryWithdraw:Buffer.from([183,18,70,156,148,109,161,34]),voterStakeRegistryUpdateVoterWeightRecord:Buffer.from([45,185,3,36,109,190,115,169])};function cn(r){let{version:t,id:e,ledger:n,programId:o,owner:a}=r,s={3:9,5:10}[t];s||un.logWithError(`invalid farm pool version: ${t}`);let l=Buffer.alloc(ke.span);ke.encode({instruction:s},l);let f=[i({pubkey:e}),i({pubkey:n}),i({pubkey:a,isWritable:!1}),i({pubkey:u.SystemProgram.programId,isWritable:!1}),i({pubkey:u.SYSVAR_RENT_PUBKEY,isWritable:!1})];return{instruction:new u.TransactionInstruction({programId:o,keys:f,data:l}),instructionType:oe.FarmV3CreateLedger}}function ln(r){var n;let t=Buffer.alloc(Ie.span);Ie.encode({instruction:0,nonce:new he.default(r.nonce),rewardTimeInfo:r.rewardInfoConfig},t);let e=[...ct,i({pubkey:r.farmId}),i({pubkey:r.farmAuthority,isWritable:!1}),i({pubkey:r.lpVault}),i({pubkey:r.lpMint,isWritable:!1}),i({pubkey:r.lockVault}),i({pubkey:r.lockMint,isWritable:!1}),i({pubkey:(n=r.lockUserAccount)!=null?n:X}),i({pubkey:r.owner,isWritable:!1,isSigner:!0})];for(let o of r.rewardInfo)e.push(i({pubkey:o.rewardMint,isWritable:!1}),i({pubkey:o.rewardVault}),i({pubkey:o.userRewardToken}));return{instruction:new u.TransactionInstruction({programId:r.programId,keys:e,data:t}),instructionType:oe.FarmV6Create}}function dn(r){let t=Buffer.alloc(Ae.span);Ae.encode({instruction:5},t);let e=[i({pubkey:K.TOKEN_PROGRAM_ID,isWritable:!1}),i({pubkey:r.id}),i({pubkey:r.authority,isWritable:!1}),i({pubkey:r.lpVault,isWritable:!1}),i({pubkey:r.rewardVault}),i({pubkey:r.userRewardToken}),i({pubkey:r.owner,isWritable:!1,isSigner:!0})];return{instruction:new u.TransactionInstruction({programId:r.programId,keys:e,data:t}),instructionType:oe.FarmV6CreatorWithdraw}}function pr(r,t,e,n,o,a,s,l,f,d,h,b,p){let m=P([k("depositEntryIndex"),c("amount")]),S=[{pubkey:t,isSigner:!1,isWritable:!1},{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!0},{pubkey:o,isSigner:!1,isWritable:!0},{pubkey:a,isSigner:!1,isWritable:!1},{pubkey:K.TOKEN_PROGRAM_ID,isSigner:!1,isWritable:!1},{pubkey:s,isSigner:!1,isWritable:!0},{pubkey:l,isSigner:!1,isWritable:!1},{pubkey:f,isSigner:!1,isWritable:!0},{pubkey:d,isSigner:!1,isWritable:!1},{pubkey:h,isSigner:!1,isWritable:!1},{pubkey:Ke,isSigner:!1,isWritable:!1}],B=Buffer.alloc(m.span);m.encode({depositEntryIndex:b,amount:p},B);let I=Buffer.from([...we.voterStakeRegistryDeposit,...B]);return new u.TransactionInstruction({keys:S,programId:r,data:I})}function mr(r,t,e,n){let o=P([]),a=[{pubkey:t,isSigner:!1,isWritable:!1},{pubkey:e,isSigner:!1,isWritable:!1},{pubkey:n,isSigner:!1,isWritable:!0},{pubkey:u.SystemProgram.programId,isSigner:!1,isWritable:!1}],s=Buffer.alloc(o.span);o.encode({},s);let l=Buffer.from([...we.voterStakeRegistryUpdateVoterWeightRecord,...s]);return new u.TransactionInstruction({keys:a,programId:r,data:l})}function fr(r,t,e,n,o,a,s,l,f,d,h,b,p,m,S){let B=P([k("depositEntryIndex"),c("amount")]),I=[{pubkey:t,isSigner:!1,isWritable:!1},{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!0,isWritable:!1},{pubkey:o,isSigner:!1,isWritable:!1},{pubkey:a,isSigner:!1,isWritable:!0},{pubkey:s,isSigner:!1,isWritable:!0},{pubkey:l,isSigner:!1,isWritable:!0},{pubkey:K.TOKEN_PROGRAM_ID,isSigner:!1,isWritable:!1},{pubkey:f,isSigner:!1,isWritable:!0},{pubkey:d,isSigner:!1,isWritable:!1},{pubkey:h,isSigner:!1,isWritable:!0},{pubkey:b,isSigner:!1,isWritable:!1},{pubkey:p,isSigner:!1,isWritable:!1},{pubkey:Ke,isSigner:!1,isWritable:!1}],V=Buffer.alloc(B.span);B.encode({depositEntryIndex:m,amount:S},V);let N=Buffer.from([...we.voterStakeRegistryWithdraw,...V]);return new u.TransactionInstruction({keys:I,programId:r,data:N})}function yr(r,t,e,n,o,a){let s=P([k("ins")]),l=[{pubkey:t,isSigner:!1,isWritable:!1},{pubkey:e,isSigner:!1,isWritable:!1},{pubkey:a,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!1},{pubkey:o,isSigner:!0,isWritable:!0},{pubkey:u.SystemProgram.programId,isSigner:!1,isWritable:!1}],f=Buffer.alloc(s.span);return s.encode({ins:23},f),new u.TransactionInstruction({keys:l,programId:r,data:f})}function gr(r,t,e,n,o,a,s,l){let f=P([k("voterBump"),k("voterWeightRecordBump")]),d=[{pubkey:t,isSigner:!1,isWritable:!1},{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:o,isSigner:!0,isWritable:!1},{pubkey:n,isSigner:!1,isWritable:!0},{pubkey:a,isSigner:!0,isWritable:!0},{pubkey:u.SystemProgram.programId,isSigner:!1,isWritable:!1},{pubkey:dt,isSigner:!1,isWritable:!1},{pubkey:Ke,isSigner:!1,isWritable:!1}],h=Buffer.alloc(f.span);f.encode({voterBump:s,voterWeightRecordBump:l},h);let b=Buffer.from([...we.voterStakeRegistryCreateVoter,...h]);return new u.TransactionInstruction({keys:d,programId:r,data:b})}function br(r,t,e,n,o,a,s,l,f,d,h,b){let p=P([k("depositEntryIndex"),k("kind"),k("option"),c("startTs"),ee("periods"),ue("allowClawback")]),m=[{pubkey:t,isSigner:!1,isWritable:!1},{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!0},{pubkey:o,isSigner:!0,isWritable:!1},{pubkey:a,isSigner:!0,isWritable:!0},{pubkey:s,isSigner:!1,isWritable:!1},{pubkey:u.SystemProgram.programId,isSigner:!1,isWritable:!1},{pubkey:K.TOKEN_PROGRAM_ID,isSigner:!1,isWritable:!1},{pubkey:K.ASSOCIATED_TOKEN_PROGRAM_ID,isSigner:!1,isWritable:!1},{pubkey:dt,isSigner:!1,isWritable:!1}],S=Buffer.alloc(p.span);p.encode({depositEntryIndex:l,kind:f,option:d===void 0?0:1,startTs:d,periods:h,allowClawback:b},S);let B=Buffer.from([...we.voterStakeRegistryCreateDepositEntry,...S]);return new u.TransactionInstruction({keys:m,programId:r,data:B})}async function pn({connection:r,programId:t,governanceProgramId:e,voteWeightAddinProgramId:n,realm:o,communityTokenMint:a,owner:s,poolId:l,tokenProgram:f}){let d=De(n,o,a).publicKey,h=W({programId:t,poolId:l,owner:s,version:3}),b=await r.getAccountInfo(h);if(b===null)throw Error("user is not staker");let p=te.decode(b.data),m=p.deposited.sub(p.voteLockedBalance);if(console.log("amount",m.toString()),m.eq(new he.default(0)))throw Error("user do not has new stake amount");let S=Ne(t,l).publicKey,B=ve(t,l).publicKey,{publicKey:I,nonce:V}=Ee(n,d,s),N=ye(I,S,f).publicKey,{publicKey:j,nonce:Te}=We(n,d,s),Ue=Oe(e,o,a,s).publicKey,se=[],Ge=ye(s,S,f).publicKey;if(await r.getAccountInfo(Ge)===null&&se.push((0,K.createAssociatedTokenAccountIdempotentInstruction)(s,Ge,s,S)),await r.getAccountInfo(I)===null){let wr=yr(e,o,s,a,s,Ue);se.push(wr,gr(n,d,I,j,s,s,V,Te))}let{index:gt,isInit:hr}=await Me(r,d,I,S);return hr||se.push(br(n,d,I,N,s,s,S,gt,0,void 0,0,!1)),se.push(pr(n,d,I,N,Ge,s,h,l,S,B,t,gt,m),mr(n,d,I,j)),se}async function mn({connection:r,programId:t,governanceProgramId:e,voteWeightAddinProgramId:n,realm:o,communityTokenMint:a,owner:s,poolId:l,tokenProgram:f}){let d=De(n,o,a).publicKey,h=W({programId:t,poolId:l,owner:s,version:3}),b=await r.getAccountInfo(h);if(b===null)throw Error("user is not staker");let p=te.decode(b.data);if(p.voteLockedBalance.eq(new he.default(0)))throw Error("user has vote locked balance = 0");let m=Ne(t,l).publicKey,S=ve(t,l).publicKey,{publicKey:B}=Ee(n,d,s),I=ye(B,m,f).publicKey,{publicKey:V}=We(n,d,s),N=Oe(e,o,a,s).publicKey,j=[],{index:Te,isInit:Ue}=await Me(r,d,B,m);if(!Ue)throw Error("deposit entry index check error");return j.push(fr(n,d,B,s,N,V,I,ye(s,m,f).publicKey,h,l,m,S,t,Te,p.voteLockedBalance)),j}function fn({payer:r,rewardVault:t,userRewardTokenPub:e,farmKeys:n,rewardInfo:o}){let a=Buffer.alloc(Le.span);Le.encode({instruction:3,rewardReopenTime:x(o.openTime),rewardEndTime:x(o.endTime),rewardPerSecond:x(o.perSecond)},a);let s=[i({pubkey:K.TOKEN_PROGRAM_ID,isWritable:!1}),i({pubkey:n.id}),i({pubkey:n.lpVault,isWritable:!1}),i({pubkey:t}),i({pubkey:e}),i({pubkey:r,isWritable:!1,isSigner:!0})];return new u.TransactionInstruction({programId:n.programId,keys:s,data:a})}function yn({payer:r,userRewardTokenPub:t,farmKeys:e,rewardVault:n,rewardInfo:o}){let a=Buffer.alloc(Be.span);Be.encode({instruction:4,isSet:new he.default(1),rewardPerSecond:x(o.perSecond),rewardOpenTime:x(o.openTime),rewardEndTime:x(o.endTime),rewardType:x(z[o.rewardType])},a);let s=[...ct,i({pubkey:e.id}),i({pubkey:e.authority,isWritable:!1}),i({pubkey:o.mint,isWritable:!1}),i({pubkey:n}),i({pubkey:t}),i({pubkey:r,isWritable:!1,isSigner:!0})];return new u.TransactionInstruction({programId:e.programId,keys:s,data:a})}function gn(r){let{farmInfo:t,farmKeys:e,version:n,lpAccount:o,rewardAccounts:a,owner:s,instruction:l,amount:f,deposit:d}=r,[h,b]=[new u.PublicKey(t.programId),new u.PublicKey(t.id)],p=W({programId:h,poolId:b,owner:s,version:n}),m=Buffer.alloc(M.span);M.encode({instruction:l,amount:f},m);let S=n===6?[i({pubkey:K.TOKEN_PROGRAM_ID,isWritable:!1}),...d?[i({pubkey:u.SystemProgram.programId,isWritable:!1})]:[],i({pubkey:b}),i({pubkey:new u.PublicKey(e.authority),isWritable:!1}),i({pubkey:new u.PublicKey(e.lpVault)}),i({pubkey:p}),i({pubkey:s,isWritable:!1,isSigner:!0}),i({pubkey:o})]:[i({pubkey:b}),i({pubkey:new u.PublicKey(e.authority),isWritable:!1}),i({pubkey:p}),i({pubkey:s,isWritable:!1,isSigner:!0}),i({pubkey:o}),i({pubkey:new u.PublicKey(e.lpVault)}),i({pubkey:a[0]}),i({pubkey:new u.PublicKey(e.rewardInfos[0].vault)}),i({pubkey:u.SYSVAR_CLOCK_PUBKEY,isWritable:!1}),i({pubkey:K.TOKEN_PROGRAM_ID,isWritable:!1})];if(n===5)for(let B=1;B<e.rewardInfos.length;B++)S.push(i({pubkey:a[B]})),S.push(i({pubkey:new u.PublicKey(e.rewardInfos[B].vault)}));if(n===6)for(let B=0;B<e.rewardInfos.length;B++)S.push(i({pubkey:new u.PublicKey(e.rewardInfos[B].vault)})),S.push(i({pubkey:a[B]}));return new u.TransactionInstruction({programId:h,keys:S,data:m})}function bn(r){let{farmInfo:t,farmKeys:e,lpAccount:n,rewardAccounts:o,owner:a,amount:s}=r,[l,f]=[new u.PublicKey(t.programId),new u.PublicKey(t.id)],d=W({programId:l,poolId:f,owner:a,version:6}),h=Buffer.alloc(M.span);M.encode({instruction:2,amount:x(s)},h);let b=[i({pubkey:K.TOKEN_PROGRAM_ID,isWritable:!1}),i({pubkey:f}),i({pubkey:new u.PublicKey(e.authority),isWritable:!1}),i({pubkey:new u.PublicKey(e.lpVault)}),i({pubkey:d}),i({pubkey:a,isWritable:!1,isSigner:!0}),i({pubkey:n})];for(let p=0;p<e.rewardInfos.length;p++)b.push(i({pubkey:new u.PublicKey(e.rewardInfos[p].vault)})),b.push(i({pubkey:o[p]}));return new u.TransactionInstruction({programId:l,keys:b,data:h})}function hn(r){let{farmInfo:t,farmKeys:e,lpAccount:n,rewardAccounts:o,owner:a,amount:s,userAuxiliaryLedgers:l}=r,[f,d]=[new u.PublicKey(t.programId),new u.PublicKey(t.id)],h=W({programId:f,poolId:d,owner:a,version:5}),b=Buffer.alloc(M.span);M.encode({instruction:12,amount:x(s)},b);let p=[i({pubkey:d}),i({pubkey:new u.PublicKey(e.authority),isWritable:!1}),i({pubkey:h}),i({pubkey:a,isWritable:!1,isSigner:!0}),i({pubkey:n}),i({pubkey:new u.PublicKey(e.lpVault)}),i({pubkey:o[0]}),i({pubkey:new u.PublicKey(e.rewardInfos[0].vault)}),i({pubkey:u.SYSVAR_CLOCK_PUBKEY,isWritable:!1}),i({pubkey:K.TOKEN_PROGRAM_ID,isWritable:!1})];for(let m=1;m<e.rewardInfos.length;m++)p.push(i({pubkey:o[m]})),p.push(i({pubkey:new u.PublicKey(e.rewardInfos[m].vault)}));if(l)for(let m of l)p.push(i({pubkey:m}));return new u.TransactionInstruction({programId:f,keys:p,data:b})}function wn(r){let{farmInfo:t,farmKeys:e,lpAccount:n,rewardAccounts:o,owner:a,amount:s,userAuxiliaryLedgers:l}=r,[f,d]=[new u.PublicKey(t.programId),new u.PublicKey(t.id)],h=P([k("instruction"),c("amount")]),b=[i({pubkey:d}),i({pubkey:new u.PublicKey(e.authority),isWritable:!1}),i({pubkey:l[0]}),i({pubkey:a,isSigner:!0,isWritable:!1}),i({pubkey:n}),i({pubkey:new u.PublicKey(e.lpVault)}),i({pubkey:o[0]}),i({pubkey:new u.PublicKey(e.rewardInfos[0].vault)}),i({pubkey:u.SYSVAR_CLOCK_PUBKEY,isWritable:!1}),i({pubkey:K.TOKEN_PROGRAM_ID,isWritable:!1}),i({pubkey:o[1]}),i({pubkey:new u.PublicKey(e.rewardInfos[1].vault)})],p=Buffer.alloc(h.span);return h.encode({instruction:2,amount:s},p),new u.TransactionInstruction({keys:b,programId:f,data:p})}function Tn(r){let{farmInfo:t,farmKeys:e,lpAccount:n,rewardAccounts:o,owner:a,amount:s,userAuxiliaryLedgers:l}=r,[f,d]=[new u.PublicKey(t.programId),new u.PublicKey(t.id)],h=W({programId:f,poolId:d,owner:a,version:3}),b=Buffer.alloc(M.span);M.encode({instruction:11,amount:x(s)},b);let p=[i({pubkey:d}),i({pubkey:new u.PublicKey(e.authority),isWritable:!1}),i({pubkey:h}),i({pubkey:a,isWritable:!1,isSigner:!0}),i({pubkey:n}),i({pubkey:new u.PublicKey(e.lpVault)}),i({pubkey:o[0]}),i({pubkey:new u.PublicKey(e.rewardInfos[0].vault)}),i({pubkey:u.SYSVAR_CLOCK_PUBKEY,isWritable:!1}),i({pubkey:K.TOKEN_PROGRAM_ID,isWritable:!1})];if(l)for(let m of l)p.push(i({pubkey:m}));return new u.TransactionInstruction({programId:f,keys:p,data:b})}function xn(r){let{farmInfo:t,farmKeys:e,lpAccount:n,rewardAccounts:o,owner:a,amount:s,userAuxiliaryLedgers:l}=r,[f,d]=[new u.PublicKey(t.programId),new u.PublicKey(t.id)],h=W({programId:f,poolId:d,owner:a,version:3}),b=Buffer.alloc(M.span);M.encode({instruction:10,amount:x(s)},b);let p=[i({pubkey:d}),i({pubkey:new u.PublicKey(e.authority),isWritable:!1}),i({pubkey:h}),i({pubkey:a,isWritable:!1,isSigner:!0}),i({pubkey:n}),i({pubkey:new u.PublicKey(e.lpVault)}),i({pubkey:o[0]}),i({pubkey:new u.PublicKey(e.rewardInfos[0].vault)}),i({pubkey:u.SYSVAR_CLOCK_PUBKEY,isWritable:!1}),i({pubkey:K.TOKEN_PROGRAM_ID,isWritable:!1})];if(l)for(let m of l)p.push(i({pubkey:m}));return new u.TransactionInstruction({programId:f,keys:p,data:b})}function Pn(r){let{farmInfo:t,farmKeys:e,lpAccount:n,rewardAccounts:o,owner:a,amount:s,userAuxiliaryLedgers:l}=r,[f,d]=[new u.PublicKey(t.programId),new u.PublicKey(t.id)],h=W({programId:f,poolId:d,owner:a,version:5}),b=Buffer.alloc(M.span);M.encode({instruction:11,amount:x(s)},b);let p=[i({pubkey:d}),i({pubkey:new u.PublicKey(e.authority),isWritable:!1}),i({pubkey:h}),i({pubkey:a,isWritable:!1,isSigner:!0}),i({pubkey:n}),i({pubkey:new u.PublicKey(e.lpVault)}),i({pubkey:o[0]}),i({pubkey:new u.PublicKey(e.rewardInfos[0].vault)}),i({pubkey:u.SYSVAR_CLOCK_PUBKEY,isWritable:!1}),i({pubkey:K.TOKEN_PROGRAM_ID,isWritable:!1})];for(let m=1;m<e.rewardInfos.length;m++)p.push(i({pubkey:o[m]})),p.push(i({pubkey:new u.PublicKey(e.rewardInfos[m].vault)}));if(l)for(let m of l)p.push(i({pubkey:m}));return new u.TransactionInstruction({programId:f,keys:p,data:b})}function Sn(r){let{farmInfo:t,farmKeys:e,lpAccount:n,rewardAccounts:o,owner:a,amount:s}=r,[l,f]=[new u.PublicKey(t.programId),new u.PublicKey(t.id)],d=W({programId:l,poolId:f,owner:a,version:6}),h=Buffer.alloc(M.span);M.encode({instruction:1,amount:x(s)},h);let b=[i({pubkey:K.TOKEN_PROGRAM_ID,isWritable:!1}),i({pubkey:u.SystemProgram.programId,isWritable:!1}),i({pubkey:f}),i({pubkey:new u.PublicKey(e.authority),isWritable:!1}),i({pubkey:new u.PublicKey(e.lpVault)}),i({pubkey:d}),i({pubkey:a,isWritable:!1,isSigner:!0}),i({pubkey:n})];for(let p=0;p<e.rewardInfos.length;p++)b.push(i({pubkey:new u.PublicKey(e.rewardInfos[p].vault)})),b.push(i({pubkey:o[p]}));return new u.TransactionInstruction({programId:l,keys:b,data:h})}0&&(module.exports={DEV_FARM_LOCK_MINT,DEV_FARM_LOCK_VAULT,FARM_LOCK_MINT,FARM_LOCK_VAULT,FARM_PROGRAM_TO_VERSION,FARM_VERSION_TO_LEDGER_LAYOUT,FARM_VERSION_TO_STATE_LAYOUT,Voter,VoterDepositEntry,VoterLockup,VoterRegistrar,VoterVotingMintConfig,associatedLedgerAccountLayout,calFarmRewardAmount,createAssociatedLedgerAccountInstruction,dwLayout,farmAddRewardLayout,farmLedgerLayoutV3_1,farmLedgerLayoutV3_2,farmLedgerLayoutV5_1,farmLedgerLayoutV5_2,farmLedgerLayoutV6_1,farmRewardInfoToConfig,farmRewardLayout,farmRewardRestartLayout,farmRewardTimeInfoLayout,farmStateV3Layout,farmStateV5Layout,farmStateV6Layout,fetchMultipleFarmInfoAndUpdate,getAssociatedAuthority,getAssociatedLedgerAccount,getAssociatedLedgerPoolAccount,getDepositEntryIndex,getFarmLedgerLayout,getFarmStateLayout,getRegistrarAddress,getTokenOwnerRecordAddress,getVoterAddress,getVoterWeightRecordAddress,getVotingMintAuthority,getVotingTokenMint,governanceCreateTokenOwnerRecord,isValidFarmVersion,judgeFarmType,makeAddNewRewardInstruction,makeCreateFarmInstruction,makeCreatorWithdrawFarmRewardInstruction,makeDepositInstructionV3,makeDepositInstructionV5,makeDepositInstructionV6,makeDepositTokenInstruction,makeDepositWithdrawInstruction,makeRestartRewardInstruction,makeWithdrawInstructionV3,makeWithdrawInstructionV4,makeWithdrawInstructionV5,makeWithdrawInstructionV6,makeWithdrawTokenInstruction,poolTypeV6,realFarmStateV3Layout,realFarmStateV5Layout,realFarmV6Layout,updateFarmPoolInfo,validateFarmRewards,voterStakeRegistryCreateDepositEntry,voterStakeRegistryCreateVoter,voterStakeRegistryDeposit,voterStakeRegistryUpdateVoterWeightRecord,voterStakeRegistryWithdraw,withdrawRewardLayout});
//# sourceMappingURL=index.js.map