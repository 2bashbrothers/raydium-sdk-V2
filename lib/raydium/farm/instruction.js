var Mt=Object.create;var te=Object.defineProperty,Nt=Object.defineProperties,vt=Object.getOwnPropertyDescriptor,Wt=Object.getOwnPropertyDescriptors,Et=Object.getOwnPropertyNames,Ye=Object.getOwnPropertySymbols,Ot=Object.getPrototypeOf,Je=Object.prototype.hasOwnProperty,Ut=Object.prototype.propertyIsEnumerable;var Ze=(r,e,t)=>e in r?te(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,_=(r,e)=>{for(var t in e||(e={}))Je.call(e,t)&&Ze(r,t,e[t]);if(Ye)for(var t of Ye(e))Ut.call(e,t)&&Ze(r,t,e[t]);return r},D=(r,e)=>Nt(r,Wt(e));var Gt=(r,e)=>{for(var t in e)te(r,t,{get:e[t],enumerable:!0})},Qe=(r,e,t,o)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of Et(e))!Je.call(r,i)&&i!==t&&te(r,i,{get:()=>e[i],enumerable:!(o=vt(e,i))||o.enumerable});return r};var V=(r,e,t)=>(t=r!=null?Mt(Ot(r)):{},Qe(e||!r||!r.__esModule?te(t,"default",{value:r,enumerable:!0}):t,r)),qt=r=>Qe(te({},"__esModule",{value:!0}),r);var Or={};Gt(Or,{createAssociatedLedgerAccountInstruction:()=>Lr,governanceCreateTokenOwnerRecord:()=>Vt,makeAddNewRewardInstruction:()=>Kr,makeCreateFarmInstruction:()=>Ir,makeCreatorWithdrawFarmRewardInstruction:()=>Rr,makeDepositInstructionV3:()=>vr,makeDepositInstructionV5:()=>Wr,makeDepositInstructionV6:()=>Er,makeDepositTokenInstruction:()=>Br,makeDepositWithdrawInstruction:()=>Fr,makeRestartRewardInstruction:()=>Vr,makeWithdrawInstructionV3:()=>Nr,makeWithdrawInstructionV4:()=>Mr,makeWithdrawInstructionV5:()=>Dr,makeWithdrawInstructionV6:()=>_r,makeWithdrawTokenInstruction:()=>Cr,voterStakeRegistryCreateDepositEntry:()=>Ft,voterStakeRegistryCreateVoter:()=>Kt,voterStakeRegistryDeposit:()=>Rt,voterStakeRegistryUpdateVoterWeightRecord:()=>Bt,voterStakeRegistryWithdraw:()=>Ct});module.exports=qt(Or);var s=require("@solana/web3.js"),de=V(require("bn.js")),B=require("@solana/spl-token");var Ht=require("@solana/web3.js");var re=require("lodash");var Ae=class{constructor(e){this.logLevel=e.logLevel!==void 0?e.logLevel:0,this.name=e.name}set level(e){this.logLevel=e}get time(){return Date.now().toString()}get moduleName(){return this.name}isLogLevel(e){return e<=this.logLevel}error(...e){return this.isLogLevel(0)?(console.error(this.time,this.name,"sdk logger error",...e),this):this}logWithError(...e){let t=e.map(o=>typeof o=="object"?JSON.stringify(o):o).join(", ");throw new Error(t)}warning(...e){return this.isLogLevel(1)?(console.warn(this.time,this.name,"sdk logger warning",...e),this):this}info(...e){return this.isLogLevel(2)?(console.info(this.time,this.name,"sdk logger info",...e),this):this}debug(...e){return this.isLogLevel(3)?(console.debug(this.time,this.name,"sdk logger debug",...e),this):this}},$e={},jt={};function C(r){let e=(0,re.get)($e,r);if(!e){let t=(0,re.get)(jt,r);e=new Ae({name:r,logLevel:t}),(0,re.set)($e,r,e)}return e}var me=require("@solana/spl-token"),Jr=C("Raydium_accountInfo_util");var N=V(require("bn.js")),rr=V(require("decimal.js"));var ot=V(require("big.js")),Jt=V(require("bn.js"));var et=V(require("toformat")),zt=et.default,ne=zt;var oe=V(require("big.js")),rt=V(require("bn.js")),nt=V(require("decimal.js-light"));var H=V(require("bn.js"));var tt=9007199254740991;function A(r){let e=C("Raydium_parseBigNumberish");if(r instanceof H.default)return r;if(typeof r=="string"){if(r.match(/^-?[0-9]+$/))return new H.default(r);e.logWithError(`invalid BigNumberish string: ${r}`)}return typeof r=="number"?(r%1&&e.logWithError(`BigNumberish number underflow: ${r}`),(r>=tt||r<=-tt)&&e.logWithError(`BigNumberish number overflow: ${r}`),new H.default(String(r))):typeof r=="bigint"?new H.default(r.toString()):(e.error(`invalid BigNumberish value: ${r}`),new H.default(0))}var fe=C("module/fraction"),Ie=ne(oe.default),ie=ne(nt.default),Yt={[0]:ie.ROUND_DOWN,[1]:ie.ROUND_HALF_UP,[2]:ie.ROUND_UP},Zt={[0]:oe.default.roundDown,[1]:oe.default.roundHalfUp,[2]:oe.default.roundUp},k=class{constructor(e,t=new rt.default(1)){this.numerator=A(e),this.denominator=A(t)}get quotient(){return this.numerator.div(this.denominator)}invert(){return new k(this.denominator,this.numerator)}add(e){let t=e instanceof k?e:new k(A(e));return this.denominator.eq(t.denominator)?new k(this.numerator.add(t.numerator),this.denominator):new k(this.numerator.mul(t.denominator).add(t.numerator.mul(this.denominator)),this.denominator.mul(t.denominator))}sub(e){let t=e instanceof k?e:new k(A(e));return this.denominator.eq(t.denominator)?new k(this.numerator.sub(t.numerator),this.denominator):new k(this.numerator.mul(t.denominator).sub(t.numerator.mul(this.denominator)),this.denominator.mul(t.denominator))}mul(e){let t=e instanceof k?e:new k(A(e));return new k(this.numerator.mul(t.numerator),this.denominator.mul(t.denominator))}div(e){let t=e instanceof k?e:new k(A(e));return new k(this.numerator.mul(t.denominator),this.denominator.mul(t.numerator))}toSignificant(e,t={groupSeparator:""},o=1){Number.isInteger(e)||fe.logWithError(`${e} is not an integer.`),e<=0&&fe.logWithError(`${e} is not positive.`),ie.set({precision:e+1,rounding:Yt[o]});let i=new ie(this.numerator.toString()).div(this.denominator.toString()).toSignificantDigits(e);return i.toFormat(i.decimalPlaces(),t)}toFixed(e,t={groupSeparator:""},o=1){return Number.isInteger(e)||fe.logWithError(`${e} is not an integer.`),e<0&&fe.logWithError(`${e} is negative.`),Ie.DP=e,Ie.RM=Zt[o]||1,new Ie(this.numerator.toString()).div(this.denominator.toString()).toFormat(e,t)}isZero(){return this.numerator.isZero()}};var hn=C("Raydium_amount"),wn=ne(ot.default);var it=require("@solana/web3.js"),Re=require("@solana/spl-token"),st={chainId:101,address:it.PublicKey.default.toBase58(),programId:Re.TOKEN_PROGRAM_ID.toBase58(),decimals:9,symbol:"SOL",name:"solana",logoURI:"https://img-v1.raydium.io/icon/So11111111111111111111111111111111111111112.png",tags:[],priority:2,type:"raydium",extensions:{coingeckoId:"solana"}},E={chainId:101,address:"So11111111111111111111111111111111111111112",programId:Re.TOKEN_PROGRAM_ID.toBase58(),decimals:9,symbol:"WSOL",name:"Wrapped SOL",logoURI:"https://img-v1.raydium.io/icon/So11111111111111111111111111111111111111112.png",tags:[],priority:2,type:"raydium",extensions:{coingeckoId:"solana"}};var ge=require("@solana/web3.js");var S=require("@solana/web3.js"),at=require("@solana/spl-token");function n({pubkey:r,isSigner:e=!1,isWritable:t=!0}){return{pubkey:r,isWritable:t,isSigner:e}}var Be=[n({pubkey:at.TOKEN_PROGRAM_ID,isWritable:!1}),n({pubkey:S.SystemProgram.programId,isWritable:!1}),n({pubkey:S.SYSVAR_RENT_PUBKEY,isWritable:!1})];function ut({publicKey:r,transformSol:e}){let t=ct(r.toString());if(t instanceof S.PublicKey)return e&&t.equals(O)?Le:t;if(e&&t.toString()===O.toBase58())return Le;if(typeof t=="string"){if(t===S.PublicKey.default.toBase58())return S.PublicKey.default;try{return new S.PublicKey(t)}catch{throw new Error("invalid public key")}}throw new Error("invalid public key")}function ct(r){try{return new S.PublicKey(r)}catch{return r}}var Sn=new S.PublicKey("MemoSq4gqABAXKb96qnH8TysNcWxMyWCqXgDLGmfcHr"),kn=new S.PublicKey("MemoSq4gqABAXKb96qnH8TysNcWxMyWCqXgDLGmfcHr"),Ce=new S.PublicKey("SysvarRent111111111111111111111111111111111"),An=new S.PublicKey("SysvarC1ock11111111111111111111111111111111"),Ln=new S.PublicKey("metaqbxxUerdq28cj1RbAWkYQm3ybzjb6a8bt518x1s"),ye=new S.PublicKey("Sysvar1nstructions1111111111111111111111111"),In=S.SystemProgram.programId,Rn=new S.PublicKey("4k3Dyjzvzp8eMZWUXbBCjEvwSkkk59S5iCNLY3QrkX6R"),Bn=new S.PublicKey("Ea5SjE2Y6yvCeW5dYTn7PYMuW5ikXkvbGdcmSnXeaLjS"),Cn=new S.PublicKey("SRMuApVNdxXokk5GT7XD5cUUgXMBCoAz2LHeuAoKWRt"),Vn=new S.PublicKey("EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v"),Kn=new S.PublicKey("Es9vMFrzaCERmJfrF4H2FYD4KCoNkY11McCe8BenwNYB"),Fn=new S.PublicKey("mSoLzYCxHdYgdzU16g5QSh3i5K3z3KZK7ytfqcJm7So"),_n=new S.PublicKey("7dHbWXmci3dT8UFYWYZweBLXgycu7Y3iL6trKn1Y7ARj"),Dn=new S.PublicKey("USDH1SM1ojwWUga67PGrgFWUHibbjqMvuMaDkRJTgkX"),Mn=new S.PublicKey("NRVwhjBQiUPYtfDT5zRBVJajzFQHaBUNtC7SNVvqRFa"),Nn=new S.PublicKey("ANAxByE6G2WjFp7A4NqtWYXb3mgruyzZYg3spfxe6Lbo"),vn=new S.PublicKey("7vfCXTUXx5WJV5JADk17DUJ4ksgau7utNKj4b963voxs"),Le=new S.PublicKey("So11111111111111111111111111111111111111112"),O=S.PublicKey.default;var Ve=class{constructor({mint:e,decimals:t,symbol:o,name:i,skipMint:c=!1,isToken2022:u=!1}){if(e===O.toBase58()||e instanceof ge.PublicKey&&O.equals(e)){this.decimals=E.decimals,this.symbol=E.symbol,this.name=E.name,this.mint=new ge.PublicKey(E.address),this.isToken2022=!1;return}this.decimals=t,this.symbol=o||e.toString().substring(0,6),this.name=i||e.toString().substring(0,6),this.mint=c?ge.PublicKey.default:ut({publicKey:e}),this.isToken2022=u}equals(e){return this===e?!0:this.mint.equals(e.mint)}},z=Ve;z.WSOL=new Ve(D(_({},E),{mint:E.address}));var Ke=class{constructor({decimals:e,symbol:t="UNKNOWN",name:o="UNKNOWN"}){this.decimals=e,this.symbol=t,this.name=o}equals(e){return this===e}},be=Ke;be.SOL=new Ke(st);var lt=V(require("bn.js"));var Xn=new k(new lt.default(100));var eo=C("Raydium_price");var er=require("@solana/web3.js"),tr=V(require("bn.js"));var $t=new N.default(0),Ko=new N.default(1),Fo=new N.default(2),_o=new N.default(3),Do=new N.default(5),Qt=new N.default(10),Mo=new N.default(100),No=new N.default(1e3),vo=new N.default(1e4);var ft=require("@solana/web3.js"),yt=require("@solana/spl-token");var U=require("@solana/web3.js");var X={CreateAccount:"CreateAccount",InitAccount:"InitAccount",CreateATA:"CreateATA",CloseAccount:"CloseAccount",TransferAmount:"TransferAmount",InitMint:"InitMint",MintTo:"MintTo",InitMarket:"InitMarket",Util1216OwnerClaim:"Util1216OwnerClaim",SetComputeUnitPrice:"SetComputeUnitPrice",SetComputeUnitLimit:"SetComputeUnitLimit",ClmmCreatePool:"ClmmCreatePool",ClmmOpenPosition:"ClmmOpenPosition",ClmmIncreasePosition:"ClmmIncreasePosition",ClmmDecreasePosition:"ClmmDecreasePosition",ClmmClosePosition:"ClmmClosePosition",ClmmSwapBaseIn:"ClmmSwapBaseIn",ClmmSwapBaseOut:"ClmmSwapBaseOut",ClmmInitReward:"ClmmInitReward",ClmmSetReward:"ClmmSetReward",ClmmCollectReward:"ClmmCollectReward",ClmmLockPosition:"ClmmLockPosition",ClmmHarvestLockPosition:"ClmmHarvestLockPosition",AmmV4Swap:"AmmV4Swap",AmmV4AddLiquidity:"AmmV4AddLiquidity",AmmV4RemoveLiquidity:"AmmV4RemoveLiquidity",AmmV4SimulatePoolInfo:"AmmV4SimulatePoolInfo",AmmV4SwapBaseIn:"AmmV4SwapBaseIn",AmmV4SwapBaseOut:"AmmV4SwapBaseOut",AmmV4CreatePool:"AmmV4CreatePool",AmmV4InitPool:"AmmV4InitPool",AmmV5AddLiquidity:"AmmV5AddLiquidity",AmmV5RemoveLiquidity:"AmmV5RemoveLiquidity",AmmV5SimulatePoolInfo:"AmmV5SimulatePoolInfo",AmmV5SwapBaseIn:"AmmV5SwapBaseIn",AmmV5SwapBaseOut:"AmmV5SwapBaseOut",RouteSwap:"RouteSwap",RouteSwap1:"RouteSwap1",RouteSwap2:"RouteSwap2",FarmV3Deposit:"FarmV3Deposit",FarmV3Withdraw:"FarmV3Withdraw",FarmV3CreateLedger:"FarmV3CreateLedger",FarmV4Withdraw:"FarmV4Withdraw",FarmV5Deposit:"FarmV5Deposit",FarmV5Withdraw:"FarmV5Withdraw",FarmV5CreateLedger:"FarmV5CreateLedger",FarmV6Deposit:"FarmV6Deposit",FarmV6Withdraw:"FarmV6Withdraw",FarmV6Create:"FarmV6Create",FarmV6Restart:"FarmV6Restart",FarmV6CreatorAddReward:"FarmV6CreatorAddReward",FarmV6CreatorWithdraw:"FarmV6CreatorWithdraw",CpmmCreatePool:"CpmmCreatePool",CpmmAddLiquidity:"CpmmAddLiquidity",CpmmWithdrawLiquidity:"CpmmWithdrawLiquidity",CpmmSwapBaseIn:"CpmmSwapBaseIn",CpmmSwapBaseOut:"CpmmSwapBaseOut",CpmmLockLp:"CpmmLockLp",CpmmCollectLockFee:"CpmmCollectLockFee",TransferTip:"TransferTip"};var nr=require("@solana/spl-token"),Jo=C("Raydium_txUtil");function M(r,e){let[t,o]=U.PublicKey.findProgramAddressSync(r,e);return{publicKey:t,nonce:o}}function se(r,e,t){return M([r.toBuffer(),(t!=null?t:yt.TOKEN_PROGRAM_ID).toBuffer(),e.toBuffer()],new ft.PublicKey("ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL"))}var d=require("@solana/web3.js"),gt=new d.PublicKey("EhhTKczWMGQt46ynNeRX1WfeagwwJd7ufHvCDjRxjo5Q"),bt=new d.PublicKey("CBuCnLe26faBpcBP2fktp4rp8abpcAnTWft6ZrP5Q4T"),ht=new d.PublicKey("9KEPoZmtHUrBbhWN1v1KWLMkkvwY6WLtAVUCPRtRjP4z"),wt=new d.PublicKey("FarmqiPv5eAj3j1GMdMCMUGXqPUvmquZtMy86QH6rzhG"),ti=new d.PublicKey("CLaimxFqjHzgTJtAGHU47NPhg6qrc5sCnpC4tBLyABQS"),ri=new d.PublicKey("srmqPvymJeFKQ4zGQed1GFppgkRHL9kaELCbyksJtPX"),ni=new d.PublicKey("9xQeWvG816bUx9EPjHmaT23yvVM2ZWbrrpZb9PusVFin"),oi=new d.PublicKey("675kPX9MHTjS2zt1qfr1NYHuzeLXfQM9H24wFSUt1Mp8"),ii=new d.PublicKey("5quBtoiQqxF9Jv6KYKctB59NT3gtJD2Y65kdnB1Uev3h"),si=new d.PublicKey("CDSr3ssLcRB6XYPJwAfFt18MZvEZp4LjHcvzBVZ45duo"),ai=new d.PublicKey("CAMMCzo5YL8w4VFF8KVHrK22GGUsp5VTaW7grrKgrWqK"),ui=new d.PublicKey("LockrWmn6K5twhz3y9w1dQERbmgSaRkfnTeTKbpofwE"),ci=new d.PublicKey("kN1kEznaF5Xbd8LYuqtEFcxzWSBk5Fv6ygX6SqEGJVy"),li=new d.PublicKey("CDSr3ssLcRB6XYPJwAfFt18MZvEZp4LjHcvzBVZ45duo"),di=new d.PublicKey("routeUGWgWzqBWFcrCfv8tritsqukccJPu3q5GPP3xS"),pi=new d.PublicKey("7YttLkHDoNj9wyDur5pM1ejNaAvT9X4eqaYcHQqtj2G5"),mi=new d.PublicKey("6FJon3QE27qgPVggARueB22hLvoh22VzJpXv4rBEoSLF"),fi=new d.PublicKey("CC12se5To1CdEuw7fDS27B7Geo5jJyL7t5UK2B44NgiH"),yi=new d.PublicKey("9HzJyW1qZsEiSfMUf6L2jo3CcTKAyBmSyKdwQeYisHrC"),gi=new d.PublicKey("DropEU8AvevN3UrXWXTMuz3rqnMczQVNjq3kcSdW2SQi"),bi=new d.PublicKey("CPMMoo8L3F4NbTegBCKVNunggL7H1ZpdTHKxQB5qKP1C"),hi=new d.PublicKey("GpMZbSM2GgvTKHJirzeGfMFoaZ8UR2X7F4v8vHTvxFbL"),wi=new d.PublicKey("DNXgeM9EiiaAbaWvwjHj9fQQLAX5ZsfHyvmYUNRAdNC8"),Ti=new d.PublicKey("LockrWmn6K5twhz3y9w1dQERbmgSaRkfnTeTKbpofwE"),xi=new d.PublicKey("3f7GcQFG397GAaEnv51zR6tsTVihYRydnydDD1cXekxH"),Pi=new d.PublicKey("LanMV9sAd7wArD4vJFi2qDdfnVhFxYSUg6eADduJ3uj"),Si=new d.PublicKey("WLHv2UAZm6z4KyaaELi5pjdbJh6RESMva1Rnn8pJVVh"),ki=new d.PublicKey("DRay6fNdQ5J82H7xV6uq2aV3mNrUZ1J4PgSKsWgptcm6"),Ai=new d.PublicKey("5xqNaZXX5eUi4p5HU4oz9i5QnwRNT2y6oN7yyn4qENeq"),Li=new d.PublicKey("4Bu96XjU84XjPDSpveTVf6LYGCkfW5FK7SNkREWcEfV4"),Ii=new d.PublicKey("6s1xP3hpbAfFoNtUNF8mfHsjr2Bd97JxFJRWLbL6aHuX");var ae={OPEN_BOOK_PROGRAM:new d.PublicKey("EoTcMgcDRTJVZDMZWBoU6rhYHZfkNTVEAfz3uUJRcYGj"),SERUM_PROGRAM_ID_V3:new d.PublicKey("Ray1111111111111111111111111111111111111111"),AMM_V4:new d.PublicKey("DRaya7Kj3aMWQSy19kSjvmuwq9docCHofyP9kanQGaav"),AMM_STABLE:new d.PublicKey("DRayDdXc1NZQ9C3hRWmoSf8zK4iapgMnjdNZWrfwsP8m"),CLMM_PROGRAM_ID:new d.PublicKey("DRayAUgENGQBKVaX8owNhgzkEDyoHTGVEGHVJT1E9pfH"),CLMM_LOCK_PROGRAM_ID:new d.PublicKey("DRay25Usp3YJAi7beckgpGUC7mGJ2cR1AVPxhYfwVCUX"),CLMM_LOCK_AUTH_ID:new d.PublicKey("6Aoh8h2Lw2m5UGxYR8AdAL87jTWYeKoxM52mJRzfYwN"),CREATE_CPMM_POOL_PROGRAM:new d.PublicKey("DRaycpLY18LhpbydsBWbVJtxpNv9oXPgjRSfpF2bWpYb"),CREATE_CPMM_POOL_AUTH:new d.PublicKey("CXniRufdq5xL8t8jZAPxsPZDpuudwuJSPWnbcD5Y5Nxq"),CREATE_CPMM_POOL_FEE_ACC:new d.PublicKey("3oE58BKVt8KuYkGxx8zBojugnymWmBiyafWgMrnb6eYy"),LOCK_CPMM_PROGRAM:new d.PublicKey("DRay25Usp3YJAi7beckgpGUC7mGJ2cR1AVPxhYfwVCUX"),LOCK_CPMM_AUTH:new d.PublicKey("7qWVV8UY2bRJfDLP4s37YzBPKUkVB46DStYJBpYbQzu3"),UTIL1216:d.PublicKey.default,Router:new d.PublicKey("DRaybByLpbUL57LJARs3j8BitTxVfzBg351EaMr5UTCd"),FARM_PROGRAM_ID_V3:new d.PublicKey("DRayWyrLmEW5KEeqs8kdTMMaBabapqagaBC7KWpGtJeZ"),FARM_PROGRAM_ID_V4:new d.PublicKey("Ray1111111111111111111111111111111111111111"),FARM_PROGRAM_ID_V5:new d.PublicKey("DRayiCGSZgku1GTK6rXD6mVDdingXy6APAH1R6R5L2LC"),FARM_PROGRAM_ID_V6:new d.PublicKey("DRayzbYakXs45ELHkzH6vC3fuhQqTAnv5A68gdFuvZyZ"),LAUNCHPAD_PROGRAM:new d.PublicKey("DRay6fNdQ5J82H7xV6uq2aV3mNrUZ1J4PgSKsWgptcm6"),LAUNCHPAD_AUTH:new d.PublicKey("5xqNaZXX5eUi4p5HU4oz9i5QnwRNT2y6oN7yyn4qENeq"),LAUNCHPAD_PLATFORM:new d.PublicKey("2Jx4KTDrVSdWNazuGpcA8n3ZLTRGGBDxAWhuKe2Xcj2a"),LAUNCHPAD_CONFIG:new d.PublicKey("7ZR4zD7PYfY2XxoG1Gxcy2EgEeGYrpxrwzPuwdUBssEt"),FEE_DESTINATION_ID:new d.PublicKey("9y8ENuuZ3b19quffx9hQvRVygG5ky6snHfRvGpuSfeJy"),MODEL_DATA_PUBKEY:new d.PublicKey("Ray1111111111111111111111111111111111111111")};var or=V(require("bn.js"));var ue=require("@solana/web3.js");var ir={AcL1Vo8oy1ULiavEcjSUcwfBSForXMudcZvDZy5nzJkU:new ue.AddressLookupTableAccount({key:new ue.PublicKey("AcL1Vo8oy1ULiavEcjSUcwfBSForXMudcZvDZy5nzJkU"),state:ue.AddressLookupTableAccount.deserialize(Buffer.from("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","base64"))})};var Y=require("@solana/web3.js"),sr=V(require("axios"));var Tt=V(require("bn.js")),es=new Tt.default(1e6);var kt=require("@solana/web3.js"),Z=V(require("bn.js"));var p=require("@solana/buffer-layout"),Fe=p.Layout,xt=p.Structure;var _e=p.UInt;var Pt=p.u8;var St=p.seq;var G=p.blob;var J=class extends Fe{constructor(t,o,i){super(t,i);this.blob=G(t),this.signed=o}decode(t,o=0){let i=new Z.default(this.blob.decode(t,o),10,"le");return this.signed?i.fromTwos(this.span*8).clone():i}encode(t,o,i=0){return typeof t=="number"&&(t=new Z.default(t)),this.signed&&(t=t.toTwos(this.span*8)),this.blob.encode(t.toArrayLike(Buffer,"le",this.span),o,i)}};function P(r){return new _e(1,r)}function Q(r){return new _e(4,r)}function a(r){return new J(8,!1,r)}function W(r){return new J(16,!1,r)}function At(r){return new J(1,!0,r)}function we(r){return new J(8,!0,r)}var he=class extends Fe{constructor(t,o,i,c){super(t.span,c);this.layout=t,this.decoder=o,this.encoder=i}decode(t,o){return this.decoder(this.layout.decode(t,o))}encode(t,o,i){return this.layout.encode(this.encoder(t),o,i)}getSpan(t,o){return this.layout.getSpan(t,o)}};function h(r){return new he(G(32),e=>new kt.PublicKey(e),e=>e.toBuffer(),r)}function ce(r){return new he(Pt(),ar,ur,r)}function ar(r){if(r===0)return!1;if(r===1)return!0;throw new Error("Invalid bool: "+r)}function ur(r){return r?1:0}var De=class extends xt{decode(e,t){return super.decode(e,t)}};function x(r,e,t){return new De(r,e,t)}function L(r,e,t){let o,i=typeof e=="number"?e:(0,Z.isBN)(e)?e.toNumber():new Proxy(e,{get(c,u){if(!o){let l=Reflect.get(c,"count");o=(0,Z.isBN)(l)?l.toNumber():l,Reflect.set(c,"count",o)}return Reflect.get(c,u)},set(c,u,l){return u==="count"&&(o=l),Reflect.set(c,u,l)}});return St(r,i,t)}var xe=require("@solana/web3.js");var Me=x([P("instruction")]),Ne=x([P("instruction")]),cr=x([a("rewardState"),a("rewardOpenTime"),a("rewardEndTime"),a("rewardLastUpdateTime"),a("totalReward"),a("totalRewardEmissioned"),a("rewardClaimed"),a("rewardPerSecond"),W("accRewardPerShare"),h("rewardVault"),h("rewardMint"),h("rewardSender"),a("rewardType"),L(a(),15,"padding")]),lr=x([a("state"),a("nonce"),h("lpVault"),h("rewardVault"),h(),h(),a(),a(),a("totalReward"),W("perShareReward"),a("lastSlot"),a("perSlotReward")]),dr=x([a("state"),a("nonce"),h("lpVault"),h("rewardVaultA"),a("totalRewardA"),W("perShareRewardA"),a("perSlotRewardA"),P("option"),h("rewardVaultB"),G(7),a("totalRewardB"),W("perShareRewardB"),a("perSlotRewardB"),a("lastSlot"),h()]),pr=x([a(),a("state"),a("nonce"),a("validRewardTokenNum"),W("rewardMultiplier"),a("rewardPeriodMax"),a("rewardPeriodMin"),a("rewardPeriodExtend"),h("lpMint"),h("lpVault"),L(cr,5,"rewardInfos"),h("creator"),h(),L(a(),32,"padding")]),mr=new Proxy(lr,{get(r,e,t){return e==="decode"?(...o)=>{let i=r.decode(...o);return D(_({},i),{version:3,rewardInfos:[{rewardVault:i.rewardVault,totalReward:i.totalReward,perSlotReward:i.perSlotReward,perShareReward:i.perShareReward}]})}:Reflect.get(r,e,t)}}),fr=new Proxy(dr,{get(r,e,t){return e==="decode"?(...o)=>{let i=r.decode(...o);return D(_({},i),{version:5,rewardInfos:[{rewardVault:i.rewardVaultA,totalReward:i.totalRewardA,perSlotReward:i.perSlotRewardA,perShareReward:i.perShareRewardA},{rewardVault:i.rewardVaultB,totalReward:i.totalRewardB,perSlotReward:i.perSlotRewardB,perShareReward:i.perShareRewardB}]})}:Reflect.get(r,e,t)}}),yr=new Proxy(pr,{get(r,e,t){return e==="decode"?(...o)=>{let i=r.decode(...o);return D(_({},i),{version:6,rewardInfos:i.rewardInfos.map(c=>{var u;return D(_({},c),{rewardType:((u=Object.entries(le).find(l=>String(l[1])===c.rewardType.toString()))!=null?u:["Standard SPL"])[0]})})})}:Reflect.get(r,e,t)}}),gr=x([a("isSet"),a("rewardPerSecond"),a("rewardOpenTime"),a("rewardEndTime"),a("rewardType")]),ve=x([P("instruction"),a("nonce"),L(gr,5,"rewardTimeInfo")]),We=x([P("instruction"),a("rewardReopenTime"),a("rewardEndTime"),a("rewardPerSecond")]),Ee=x([P("instruction"),a("isSet"),a("rewardPerSecond"),a("rewardOpenTime"),a("rewardEndTime"),a("rewardType")]),Ms=x([a("state"),h("id"),h("owner"),a("deposited"),L(a(),1,"rewardDebts")]),Te=x([a("state"),h("id"),h("owner"),a("deposited"),L(W(),1,"rewardDebts"),a(""),a("voteLockedBalance"),L(a(),15)]),Ns=x([a("state"),h("id"),h("owner"),a("deposited"),L(a(),2,"rewardDebts")]),br=x([a("state"),h("id"),h("owner"),a("deposited"),L(W(),2,"rewardDebts"),L(a(),17)]),hr=x([a(),a("state"),h("id"),h("owner"),a("deposited"),L(W(),5,"rewardDebts"),L(a(),16)]),K=x([P("instruction"),a("amount")]),wr=x([h("mint"),h("grantAuthority"),a("baselineVoteWeightScaledFactor"),a("maxExtraLockupVoteWeightScaledFactor"),a("lockupSaturationSecs"),At("digitShift"),L(P(),7,"reserved1"),L(a(),7,"reserved2")]),Lt=x([G(8),h("governanceProgramId"),h("realm"),h("realmGoverningTokenMint"),h("realmAuthority"),L(P(),32,"reserved1"),L(wr,4,"votingMints"),we("timeOffset"),P("bump"),L(P(),7,"reserved2"),L(a(),11,"reserved3")]),Tr=x([we("startTime"),we("endTime"),P("kind"),L(P(),15,"reserved")]),xr=x([L(Tr,1,"lockup"),a("amountDeposited_native"),a("amountInitiallyLockedNative"),ce("isUsed"),ce("allowClawback"),P("votingMintConfigIdx"),L(P(),29,"reserved")]),It=x([G(8),h("voterAuthority"),h("registrar"),L(xr,32,"deposits"),P("voterBump"),P("voterWweightRecordBump"),L(P(),94,"reserved")]);var Pr=require("@solana/spl-token"),qs=C("Raydium_farm_config"),js=new xe.PublicKey("4k3Dyjzvzp8eMZWUXbBCjEvwSkkk59S5iCNLY3QrkX6R"),Hs=new xe.PublicKey("FrspKwj8i3pNmKwXreTveC4fu7KL5ZbGeXdZBe2XViu1");var zs=new xe.PublicKey("3TRTX4dXUpp2eqxi3tvQDFYUV7SdDJjcPE3Y4mbtftaX");var le={"Standard SPL":0,"Option tokens":1},Xs={[gt.toString()]:3,[bt.toString()]:4,[ht.toString()]:5,[wt.toString()]:6,[ae.FARM_PROGRAM_ID_V3.toString()]:3,[ae.FARM_PROGRAM_ID_V4.toString()]:4,[ae.FARM_PROGRAM_ID_V5.toString()]:5,[ae.FARM_PROGRAM_ID_V6.toString()]:6};function Oe(r,e,t){return M([e.toBuffer(),Buffer.from("registrar","utf8"),t.toBuffer()],r)}function Ue(r,e){return M([e.toBuffer(),Buffer.from("voting_mint_seed","utf8")],r)}function Ge(r,e){return M([e.toBuffer()],r)}function qe(r,e,t){return M([e.toBuffer(),Buffer.from("voter","utf8"),t.toBuffer()],r)}function je(r,e,t){return M([e.toBuffer(),Buffer.from("voter-weight-record","utf8"),t.toBuffer()],r)}function He(r,e,t,o){return M([Buffer.from("governance","utf8"),e.toBuffer(),t.toBuffer(),o.toBuffer()],r)}var kr=V(require("bn.js"));var Sr=x([h("mint"),h("owner"),a("amount"),Q("delegateOption"),h("delegate"),P("state"),Q("isNativeOption"),a("isNative"),a("delegatedAmount"),Q("closeAuthorityOption"),h("closeAuthority")]);var ha=C("Raydium.farm.util");function v({programId:r,poolId:e,owner:t,version:o}){let{publicKey:i}=M([e.toBuffer(),t.toBuffer(),Buffer.from(o===6?"farmer_info_associated_seed":"staker_info_v2_associated_seed","utf-8")],r);return i}async function ze(r,e,t,o){let i=await r.getAccountInfo(e);if(i===null)throw Error("registrar info check error");let u=Lt.decode(i.data).votingMints.findIndex(g=>g.mint.equals(o));if(u===-1)throw Error("find voter mint error");let l=await r.getAccountInfo(t);if(l===null)return{index:u,isInit:!1};let m=It.decode(l.data).deposits.findIndex(g=>g.isUsed&&g.votingMintConfigIdx===u);return m===-1?{index:u,isInit:!1}:{index:m,isInit:!0}}var Ar=C("Raydium_farm_instruction"),pe={voterStakeRegistryCreateVoter:Buffer.from([6,24,245,52,243,255,148,25]),voterStakeRegistryCreateDepositEntry:Buffer.from([185,131,167,186,159,125,19,67]),voterStakeRegistryDeposit:Buffer.from([242,35,198,137,82,225,242,182]),voterStakeRegistryWithdraw:Buffer.from([183,18,70,156,148,109,161,34]),voterStakeRegistryUpdateVoterWeightRecord:Buffer.from([45,185,3,36,109,190,115,169])};function Lr(r){let{version:e,id:t,ledger:o,programId:i,owner:c}=r,u={3:9,5:10}[e];u||Ar.logWithError(`invalid farm pool version: ${e}`);let l=Buffer.alloc(Me.span);Me.encode({instruction:u},l);let y=[n({pubkey:t}),n({pubkey:o}),n({pubkey:c,isWritable:!1}),n({pubkey:s.SystemProgram.programId,isWritable:!1}),n({pubkey:s.SYSVAR_RENT_PUBKEY,isWritable:!1})];return{instruction:new s.TransactionInstruction({programId:i,keys:y,data:l}),instructionType:X.FarmV3CreateLedger}}function Ir(r){var o;let e=Buffer.alloc(ve.span);ve.encode({instruction:0,nonce:new de.default(r.nonce),rewardTimeInfo:r.rewardInfoConfig},e);let t=[...Be,n({pubkey:r.farmId}),n({pubkey:r.farmAuthority,isWritable:!1}),n({pubkey:r.lpVault}),n({pubkey:r.lpMint,isWritable:!1}),n({pubkey:r.lockVault}),n({pubkey:r.lockMint,isWritable:!1}),n({pubkey:(o=r.lockUserAccount)!=null?o:O}),n({pubkey:r.owner,isWritable:!1,isSigner:!0})];for(let i of r.rewardInfo)t.push(n({pubkey:i.rewardMint,isWritable:!1}),n({pubkey:i.rewardVault}),n({pubkey:i.userRewardToken}));return{instruction:new s.TransactionInstruction({programId:r.programId,keys:t,data:e}),instructionType:X.FarmV6Create}}function Rr(r){let e=Buffer.alloc(Ne.span);Ne.encode({instruction:5},e);let t=[n({pubkey:B.TOKEN_PROGRAM_ID,isWritable:!1}),n({pubkey:r.id}),n({pubkey:r.authority,isWritable:!1}),n({pubkey:r.lpVault,isWritable:!1}),n({pubkey:r.rewardVault}),n({pubkey:r.userRewardToken}),n({pubkey:r.owner,isWritable:!1,isSigner:!0})];return{instruction:new s.TransactionInstruction({programId:r.programId,keys:t,data:e}),instructionType:X.FarmV6CreatorWithdraw}}function Rt(r,e,t,o,i,c,u,l,y,m,g,b,f){let w=x([P("depositEntryIndex"),a("amount")]),R=[{pubkey:e,isSigner:!1,isWritable:!1},{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:o,isSigner:!1,isWritable:!0},{pubkey:i,isSigner:!1,isWritable:!0},{pubkey:c,isSigner:!1,isWritable:!1},{pubkey:B.TOKEN_PROGRAM_ID,isSigner:!1,isWritable:!1},{pubkey:u,isSigner:!1,isWritable:!0},{pubkey:l,isSigner:!1,isWritable:!1},{pubkey:y,isSigner:!1,isWritable:!0},{pubkey:m,isSigner:!1,isWritable:!1},{pubkey:g,isSigner:!1,isWritable:!1},{pubkey:ye,isSigner:!1,isWritable:!1}],I=Buffer.alloc(w.span);w.encode({depositEntryIndex:b,amount:f},I);let F=Buffer.from([...pe.voterStakeRegistryDeposit,...I]);return new s.TransactionInstruction({keys:R,programId:r,data:F})}function Bt(r,e,t,o){let i=x([]),c=[{pubkey:e,isSigner:!1,isWritable:!1},{pubkey:t,isSigner:!1,isWritable:!1},{pubkey:o,isSigner:!1,isWritable:!0},{pubkey:s.SystemProgram.programId,isSigner:!1,isWritable:!1}],u=Buffer.alloc(i.span);i.encode({},u);let l=Buffer.from([...pe.voterStakeRegistryUpdateVoterWeightRecord,...u]);return new s.TransactionInstruction({keys:c,programId:r,data:l})}function Ct(r,e,t,o,i,c,u,l,y,m,g,b,f,w,R){let I=x([P("depositEntryIndex"),a("amount")]),F=[{pubkey:e,isSigner:!1,isWritable:!1},{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:o,isSigner:!0,isWritable:!1},{pubkey:i,isSigner:!1,isWritable:!1},{pubkey:c,isSigner:!1,isWritable:!0},{pubkey:u,isSigner:!1,isWritable:!0},{pubkey:l,isSigner:!1,isWritable:!0},{pubkey:B.TOKEN_PROGRAM_ID,isSigner:!1,isWritable:!1},{pubkey:y,isSigner:!1,isWritable:!0},{pubkey:m,isSigner:!1,isWritable:!1},{pubkey:g,isSigner:!1,isWritable:!0},{pubkey:b,isSigner:!1,isWritable:!1},{pubkey:f,isSigner:!1,isWritable:!1},{pubkey:ye,isSigner:!1,isWritable:!1}],q=Buffer.alloc(I.span);I.encode({depositEntryIndex:w,amount:R},q);let j=Buffer.from([...pe.voterStakeRegistryWithdraw,...q]);return new s.TransactionInstruction({keys:F,programId:r,data:j})}function Vt(r,e,t,o,i,c){let u=x([P("ins")]),l=[{pubkey:e,isSigner:!1,isWritable:!1},{pubkey:t,isSigner:!1,isWritable:!1},{pubkey:c,isSigner:!1,isWritable:!0},{pubkey:o,isSigner:!1,isWritable:!1},{pubkey:i,isSigner:!0,isWritable:!0},{pubkey:s.SystemProgram.programId,isSigner:!1,isWritable:!1}],y=Buffer.alloc(u.span);return u.encode({ins:23},y),new s.TransactionInstruction({keys:l,programId:r,data:y})}function Kt(r,e,t,o,i,c,u,l){let y=x([P("voterBump"),P("voterWeightRecordBump")]),m=[{pubkey:e,isSigner:!1,isWritable:!1},{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:i,isSigner:!0,isWritable:!1},{pubkey:o,isSigner:!1,isWritable:!0},{pubkey:c,isSigner:!0,isWritable:!0},{pubkey:s.SystemProgram.programId,isSigner:!1,isWritable:!1},{pubkey:Ce,isSigner:!1,isWritable:!1},{pubkey:ye,isSigner:!1,isWritable:!1}],g=Buffer.alloc(y.span);y.encode({voterBump:u,voterWeightRecordBump:l},g);let b=Buffer.from([...pe.voterStakeRegistryCreateVoter,...g]);return new s.TransactionInstruction({keys:m,programId:r,data:b})}function Ft(r,e,t,o,i,c,u,l,y,m,g,b){let f=x([P("depositEntryIndex"),P("kind"),P("option"),a("startTs"),Q("periods"),ce("allowClawback")]),w=[{pubkey:e,isSigner:!1,isWritable:!1},{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:o,isSigner:!1,isWritable:!0},{pubkey:i,isSigner:!0,isWritable:!1},{pubkey:c,isSigner:!0,isWritable:!0},{pubkey:u,isSigner:!1,isWritable:!1},{pubkey:s.SystemProgram.programId,isSigner:!1,isWritable:!1},{pubkey:B.TOKEN_PROGRAM_ID,isSigner:!1,isWritable:!1},{pubkey:B.ASSOCIATED_TOKEN_PROGRAM_ID,isSigner:!1,isWritable:!1},{pubkey:Ce,isSigner:!1,isWritable:!1}],R=Buffer.alloc(f.span);f.encode({depositEntryIndex:l,kind:y,option:m===void 0?0:1,startTs:m,periods:g,allowClawback:b},R);let I=Buffer.from([...pe.voterStakeRegistryCreateDepositEntry,...R]);return new s.TransactionInstruction({keys:w,programId:r,data:I})}async function Br({connection:r,programId:e,governanceProgramId:t,voteWeightAddinProgramId:o,realm:i,communityTokenMint:c,owner:u,poolId:l,tokenProgram:y}){let m=Oe(o,i,c).publicKey,g=v({programId:e,poolId:l,owner:u,version:3}),b=await r.getAccountInfo(g);if(b===null)throw Error("user is not staker");let f=Te.decode(b.data),w=f.deposited.sub(f.voteLockedBalance);if(console.log("amount",w.toString()),w.eq(new de.default(0)))throw Error("user do not has new stake amount");let R=Ue(e,l).publicKey,I=Ge(e,l).publicKey,{publicKey:F,nonce:q}=qe(o,m,u),j=se(F,R,y).publicKey,{publicKey:$,nonce:Pe}=je(o,m,u),Se=He(t,i,c,u).publicKey,ee=[],ke=se(u,R,y).publicKey;if(await r.getAccountInfo(ke)===null&&ee.push((0,B.createAssociatedTokenAccountIdempotentInstruction)(u,ke,u,R)),await r.getAccountInfo(F)===null){let Dt=Vt(t,i,u,c,u,Se);ee.push(Dt,Kt(o,m,F,$,u,u,q,Pe))}let{index:Xe,isInit:_t}=await ze(r,m,F,R);return _t||ee.push(Ft(o,m,F,j,u,u,R,Xe,0,void 0,0,!1)),ee.push(Rt(o,m,F,j,ke,u,g,l,R,I,e,Xe,w),Bt(o,m,F,$)),ee}async function Cr({connection:r,programId:e,governanceProgramId:t,voteWeightAddinProgramId:o,realm:i,communityTokenMint:c,owner:u,poolId:l,tokenProgram:y}){let m=Oe(o,i,c).publicKey,g=v({programId:e,poolId:l,owner:u,version:3}),b=await r.getAccountInfo(g);if(b===null)throw Error("user is not staker");let f=Te.decode(b.data);if(f.voteLockedBalance.eq(new de.default(0)))throw Error("user has vote locked balance = 0");let w=Ue(e,l).publicKey,R=Ge(e,l).publicKey,{publicKey:I}=qe(o,m,u),F=se(I,w,y).publicKey,{publicKey:q}=je(o,m,u),j=He(t,i,c,u).publicKey,$=[],{index:Pe,isInit:Se}=await ze(r,m,I,w);if(!Se)throw Error("deposit entry index check error");return $.push(Ct(o,m,I,u,j,q,F,se(u,w,y).publicKey,g,l,w,R,e,Pe,f.voteLockedBalance)),$}function Vr({payer:r,rewardVault:e,userRewardTokenPub:t,farmKeys:o,rewardInfo:i}){let c=Buffer.alloc(We.span);We.encode({instruction:3,rewardReopenTime:A(i.openTime),rewardEndTime:A(i.endTime),rewardPerSecond:A(i.perSecond)},c);let u=[n({pubkey:B.TOKEN_PROGRAM_ID,isWritable:!1}),n({pubkey:o.id}),n({pubkey:o.lpVault,isWritable:!1}),n({pubkey:e}),n({pubkey:t}),n({pubkey:r,isWritable:!1,isSigner:!0})];return new s.TransactionInstruction({programId:o.programId,keys:u,data:c})}function Kr({payer:r,userRewardTokenPub:e,farmKeys:t,rewardVault:o,rewardInfo:i}){let c=Buffer.alloc(Ee.span);Ee.encode({instruction:4,isSet:new de.default(1),rewardPerSecond:A(i.perSecond),rewardOpenTime:A(i.openTime),rewardEndTime:A(i.endTime),rewardType:A(le[i.rewardType])},c);let u=[...Be,n({pubkey:t.id}),n({pubkey:t.authority,isWritable:!1}),n({pubkey:i.mint,isWritable:!1}),n({pubkey:o}),n({pubkey:e}),n({pubkey:r,isWritable:!1,isSigner:!0})];return new s.TransactionInstruction({programId:t.programId,keys:u,data:c})}function Fr(r){let{farmInfo:e,farmKeys:t,version:o,lpAccount:i,rewardAccounts:c,owner:u,instruction:l,amount:y,deposit:m}=r,[g,b]=[new s.PublicKey(e.programId),new s.PublicKey(e.id)],f=v({programId:g,poolId:b,owner:u,version:o}),w=Buffer.alloc(K.span);K.encode({instruction:l,amount:y},w);let R=o===6?[n({pubkey:B.TOKEN_PROGRAM_ID,isWritable:!1}),...m?[n({pubkey:s.SystemProgram.programId,isWritable:!1})]:[],n({pubkey:b}),n({pubkey:new s.PublicKey(t.authority),isWritable:!1}),n({pubkey:new s.PublicKey(t.lpVault)}),n({pubkey:f}),n({pubkey:u,isWritable:!1,isSigner:!0}),n({pubkey:i})]:[n({pubkey:b}),n({pubkey:new s.PublicKey(t.authority),isWritable:!1}),n({pubkey:f}),n({pubkey:u,isWritable:!1,isSigner:!0}),n({pubkey:i}),n({pubkey:new s.PublicKey(t.lpVault)}),n({pubkey:c[0]}),n({pubkey:new s.PublicKey(t.rewardInfos[0].vault)}),n({pubkey:s.SYSVAR_CLOCK_PUBKEY,isWritable:!1}),n({pubkey:B.TOKEN_PROGRAM_ID,isWritable:!1})];if(o===5)for(let I=1;I<t.rewardInfos.length;I++)R.push(n({pubkey:c[I]})),R.push(n({pubkey:new s.PublicKey(t.rewardInfos[I].vault)}));if(o===6)for(let I=0;I<t.rewardInfos.length;I++)R.push(n({pubkey:new s.PublicKey(t.rewardInfos[I].vault)})),R.push(n({pubkey:c[I]}));return new s.TransactionInstruction({programId:g,keys:R,data:w})}function _r(r){let{farmInfo:e,farmKeys:t,lpAccount:o,rewardAccounts:i,owner:c,amount:u}=r,[l,y]=[new s.PublicKey(e.programId),new s.PublicKey(e.id)],m=v({programId:l,poolId:y,owner:c,version:6}),g=Buffer.alloc(K.span);K.encode({instruction:2,amount:A(u)},g);let b=[n({pubkey:B.TOKEN_PROGRAM_ID,isWritable:!1}),n({pubkey:y}),n({pubkey:new s.PublicKey(t.authority),isWritable:!1}),n({pubkey:new s.PublicKey(t.lpVault)}),n({pubkey:m}),n({pubkey:c,isWritable:!1,isSigner:!0}),n({pubkey:o})];for(let f=0;f<t.rewardInfos.length;f++)b.push(n({pubkey:new s.PublicKey(t.rewardInfos[f].vault)})),b.push(n({pubkey:i[f]}));return new s.TransactionInstruction({programId:l,keys:b,data:g})}function Dr(r){let{farmInfo:e,farmKeys:t,lpAccount:o,rewardAccounts:i,owner:c,amount:u,userAuxiliaryLedgers:l}=r,[y,m]=[new s.PublicKey(e.programId),new s.PublicKey(e.id)],g=v({programId:y,poolId:m,owner:c,version:5}),b=Buffer.alloc(K.span);K.encode({instruction:12,amount:A(u)},b);let f=[n({pubkey:m}),n({pubkey:new s.PublicKey(t.authority),isWritable:!1}),n({pubkey:g}),n({pubkey:c,isWritable:!1,isSigner:!0}),n({pubkey:o}),n({pubkey:new s.PublicKey(t.lpVault)}),n({pubkey:i[0]}),n({pubkey:new s.PublicKey(t.rewardInfos[0].vault)}),n({pubkey:s.SYSVAR_CLOCK_PUBKEY,isWritable:!1}),n({pubkey:B.TOKEN_PROGRAM_ID,isWritable:!1})];for(let w=1;w<t.rewardInfos.length;w++)f.push(n({pubkey:i[w]})),f.push(n({pubkey:new s.PublicKey(t.rewardInfos[w].vault)}));if(l)for(let w of l)f.push(n({pubkey:w}));return new s.TransactionInstruction({programId:y,keys:f,data:b})}function Mr(r){let{farmInfo:e,farmKeys:t,lpAccount:o,rewardAccounts:i,owner:c,amount:u,userAuxiliaryLedgers:l}=r,[y,m]=[new s.PublicKey(e.programId),new s.PublicKey(e.id)],g=x([P("instruction"),a("amount")]),b=[n({pubkey:m}),n({pubkey:new s.PublicKey(t.authority),isWritable:!1}),n({pubkey:l[0]}),n({pubkey:c,isSigner:!0,isWritable:!1}),n({pubkey:o}),n({pubkey:new s.PublicKey(t.lpVault)}),n({pubkey:i[0]}),n({pubkey:new s.PublicKey(t.rewardInfos[0].vault)}),n({pubkey:s.SYSVAR_CLOCK_PUBKEY,isWritable:!1}),n({pubkey:B.TOKEN_PROGRAM_ID,isWritable:!1}),n({pubkey:i[1]}),n({pubkey:new s.PublicKey(t.rewardInfos[1].vault)})],f=Buffer.alloc(g.span);return g.encode({instruction:2,amount:u},f),new s.TransactionInstruction({keys:b,programId:y,data:f})}function Nr(r){let{farmInfo:e,farmKeys:t,lpAccount:o,rewardAccounts:i,owner:c,amount:u,userAuxiliaryLedgers:l}=r,[y,m]=[new s.PublicKey(e.programId),new s.PublicKey(e.id)],g=v({programId:y,poolId:m,owner:c,version:3}),b=Buffer.alloc(K.span);K.encode({instruction:11,amount:A(u)},b);let f=[n({pubkey:m}),n({pubkey:new s.PublicKey(t.authority),isWritable:!1}),n({pubkey:g}),n({pubkey:c,isWritable:!1,isSigner:!0}),n({pubkey:o}),n({pubkey:new s.PublicKey(t.lpVault)}),n({pubkey:i[0]}),n({pubkey:new s.PublicKey(t.rewardInfos[0].vault)}),n({pubkey:s.SYSVAR_CLOCK_PUBKEY,isWritable:!1}),n({pubkey:B.TOKEN_PROGRAM_ID,isWritable:!1})];if(l)for(let w of l)f.push(n({pubkey:w}));return new s.TransactionInstruction({programId:y,keys:f,data:b})}function vr(r){let{farmInfo:e,farmKeys:t,lpAccount:o,rewardAccounts:i,owner:c,amount:u,userAuxiliaryLedgers:l}=r,[y,m]=[new s.PublicKey(e.programId),new s.PublicKey(e.id)],g=v({programId:y,poolId:m,owner:c,version:3}),b=Buffer.alloc(K.span);K.encode({instruction:10,amount:A(u)},b);let f=[n({pubkey:m}),n({pubkey:new s.PublicKey(t.authority),isWritable:!1}),n({pubkey:g}),n({pubkey:c,isWritable:!1,isSigner:!0}),n({pubkey:o}),n({pubkey:new s.PublicKey(t.lpVault)}),n({pubkey:i[0]}),n({pubkey:new s.PublicKey(t.rewardInfos[0].vault)}),n({pubkey:s.SYSVAR_CLOCK_PUBKEY,isWritable:!1}),n({pubkey:B.TOKEN_PROGRAM_ID,isWritable:!1})];if(l)for(let w of l)f.push(n({pubkey:w}));return new s.TransactionInstruction({programId:y,keys:f,data:b})}function Wr(r){let{farmInfo:e,farmKeys:t,lpAccount:o,rewardAccounts:i,owner:c,amount:u,userAuxiliaryLedgers:l}=r,[y,m]=[new s.PublicKey(e.programId),new s.PublicKey(e.id)],g=v({programId:y,poolId:m,owner:c,version:5}),b=Buffer.alloc(K.span);K.encode({instruction:11,amount:A(u)},b);let f=[n({pubkey:m}),n({pubkey:new s.PublicKey(t.authority),isWritable:!1}),n({pubkey:g}),n({pubkey:c,isWritable:!1,isSigner:!0}),n({pubkey:o}),n({pubkey:new s.PublicKey(t.lpVault)}),n({pubkey:i[0]}),n({pubkey:new s.PublicKey(t.rewardInfos[0].vault)}),n({pubkey:s.SYSVAR_CLOCK_PUBKEY,isWritable:!1}),n({pubkey:B.TOKEN_PROGRAM_ID,isWritable:!1})];for(let w=1;w<t.rewardInfos.length;w++)f.push(n({pubkey:i[w]})),f.push(n({pubkey:new s.PublicKey(t.rewardInfos[w].vault)}));if(l)for(let w of l)f.push(n({pubkey:w}));return new s.TransactionInstruction({programId:y,keys:f,data:b})}function Er(r){let{farmInfo:e,farmKeys:t,lpAccount:o,rewardAccounts:i,owner:c,amount:u}=r,[l,y]=[new s.PublicKey(e.programId),new s.PublicKey(e.id)],m=v({programId:l,poolId:y,owner:c,version:6}),g=Buffer.alloc(K.span);K.encode({instruction:1,amount:A(u)},g);let b=[n({pubkey:B.TOKEN_PROGRAM_ID,isWritable:!1}),n({pubkey:s.SystemProgram.programId,isWritable:!1}),n({pubkey:y}),n({pubkey:new s.PublicKey(t.authority),isWritable:!1}),n({pubkey:new s.PublicKey(t.lpVault)}),n({pubkey:m}),n({pubkey:c,isWritable:!1,isSigner:!0}),n({pubkey:o})];for(let f=0;f<t.rewardInfos.length;f++)b.push(n({pubkey:new s.PublicKey(t.rewardInfos[f].vault)})),b.push(n({pubkey:i[f]}));return new s.TransactionInstruction({programId:l,keys:b,data:g})}0&&(module.exports={createAssociatedLedgerAccountInstruction,governanceCreateTokenOwnerRecord,makeAddNewRewardInstruction,makeCreateFarmInstruction,makeCreatorWithdrawFarmRewardInstruction,makeDepositInstructionV3,makeDepositInstructionV5,makeDepositInstructionV6,makeDepositTokenInstruction,makeDepositWithdrawInstruction,makeRestartRewardInstruction,makeWithdrawInstructionV3,makeWithdrawInstructionV4,makeWithdrawInstructionV5,makeWithdrawInstructionV6,makeWithdrawTokenInstruction,voterStakeRegistryCreateDepositEntry,voterStakeRegistryCreateVoter,voterStakeRegistryDeposit,voterStakeRegistryUpdateVoterWeightRecord,voterStakeRegistryWithdraw});
//# sourceMappingURL=instruction.js.map