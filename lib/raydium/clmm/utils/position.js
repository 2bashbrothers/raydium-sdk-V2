var Lt=Object.create;var oe=Object.defineProperty,Rt=Object.defineProperties,Et=Object.getOwnPropertyDescriptor,Ft=Object.getOwnPropertyDescriptors,_t=Object.getOwnPropertyNames,Je=Object.getOwnPropertySymbols,Mt=Object.getPrototypeOf,et=Object.prototype.hasOwnProperty,Dt=Object.prototype.propertyIsEnumerable;var $e=(r,e,t)=>e in r?oe(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,G=(r,e)=>{for(var t in e||(e={}))et.call(e,t)&&$e(r,t,e[t]);if(Je)for(var t of Je(e))Dt.call(e,t)&&$e(r,t,e[t]);return r},V=(r,e)=>Rt(r,Ft(e));var Ot=(r,e)=>{for(var t in e)oe(r,t,{get:e[t],enumerable:!0})},tt=(r,e,t,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of _t(e))!et.call(r,i)&&i!==t&&oe(r,i,{get:()=>e[i],enumerable:!(n=Et(e,i))||n.enumerable});return r};var T=(r,e,t)=>(t=r!=null?Lt(Mt(r)):{},tt(e||!r||!r.__esModule?oe(t,"default",{value:r,enumerable:!0}):t,r)),Kt=r=>tt(oe({},"__esModule",{value:!0}),r);var Bn={};Ot(Bn,{PositionUtils:()=>Ie});module.exports=Kt(Bn);var v=T(require("bn.js")),Se=T(require("decimal.js"));var Gt=require("@solana/web3.js");var se=require("lodash");var Ce=class{constructor(e){this.logLevel=e.logLevel!==void 0?e.logLevel:0,this.name=e.name}set level(e){this.logLevel=e}get time(){return Date.now().toString()}get moduleName(){return this.name}isLogLevel(e){return e<=this.logLevel}error(...e){return this.isLogLevel(0)?(console.error(this.time,this.name,"sdk logger error",...e),this):this}logWithError(...e){let t=e.map(n=>typeof n=="object"?JSON.stringify(n):n).join(", ");throw new Error(t)}warning(...e){return this.isLogLevel(1)?(console.warn(this.time,this.name,"sdk logger warning",...e),this):this}info(...e){return this.isLogLevel(2)?(console.info(this.time,this.name,"sdk logger info",...e),this):this}debug(...e){return this.isLogLevel(3)?(console.debug(this.time,this.name,"sdk logger debug",...e),this):this}},nt={},vt={};function E(r){let e=(0,se.get)(nt,r);if(!e){let t=(0,se.get)(vt,r);e=new Ce({name:r,logLevel:t}),(0,se.set)(nt,r,e)}return e}var Te=require("@solana/spl-token"),Fn=E("Raydium_accountInfo_util");var q=T(require("bn.js")),Jt=T(require("decimal.js"));var at=T(require("big.js")),Ht=T(require("bn.js"));var rt=T(require("toformat")),Vt=rt.default,ae=Vt;var ue=T(require("big.js")),ot=T(require("bn.js")),st=T(require("decimal.js-light"));var Q=T(require("bn.js"));var it=9007199254740991;function U(r){let e=E("Raydium_parseBigNumberish");if(r instanceof Q.default)return r;if(typeof r=="string"){if(r.match(/^-?[0-9]+$/))return new Q.default(r);e.logWithError(`invalid BigNumberish string: ${r}`)}return typeof r=="number"?(r%1&&e.logWithError(`BigNumberish number underflow: ${r}`),(r>=it||r<=-it)&&e.logWithError(`BigNumberish number overflow: ${r}`),new Q.default(String(r))):typeof r=="bigint"?new Q.default(r.toString()):(e.error(`invalid BigNumberish value: ${r}`),new Q.default(0))}var xe=E("module/fraction"),Le=ae(ue.default),ce=ae(st.default),Wt={[0]:ce.ROUND_DOWN,[1]:ce.ROUND_HALF_UP,[2]:ce.ROUND_UP},Xt={[0]:ue.default.roundDown,[1]:ue.default.roundHalfUp,[2]:ue.default.roundUp},b=class{constructor(e,t=new ot.default(1)){this.numerator=U(e),this.denominator=U(t)}get quotient(){return this.numerator.div(this.denominator)}invert(){return new b(this.denominator,this.numerator)}add(e){let t=e instanceof b?e:new b(U(e));return this.denominator.eq(t.denominator)?new b(this.numerator.add(t.numerator),this.denominator):new b(this.numerator.mul(t.denominator).add(t.numerator.mul(this.denominator)),this.denominator.mul(t.denominator))}sub(e){let t=e instanceof b?e:new b(U(e));return this.denominator.eq(t.denominator)?new b(this.numerator.sub(t.numerator),this.denominator):new b(this.numerator.mul(t.denominator).sub(t.numerator.mul(this.denominator)),this.denominator.mul(t.denominator))}mul(e){let t=e instanceof b?e:new b(U(e));return new b(this.numerator.mul(t.numerator),this.denominator.mul(t.denominator))}div(e){let t=e instanceof b?e:new b(U(e));return new b(this.numerator.mul(t.denominator),this.denominator.mul(t.numerator))}toSignificant(e,t={groupSeparator:""},n=1){Number.isInteger(e)||xe.logWithError(`${e} is not an integer.`),e<=0&&xe.logWithError(`${e} is not positive.`),ce.set({precision:e+1,rounding:Wt[n]});let i=new ce(this.numerator.toString()).div(this.denominator.toString()).toSignificantDigits(e);return i.toFormat(i.decimalPlaces(),t)}toFixed(e,t={groupSeparator:""},n=1){return Number.isInteger(e)||xe.logWithError(`${e} is not an integer.`),e<0&&xe.logWithError(`${e} is negative.`),Le.DP=e,Le.RM=Xt[n]||1,new Le(this.numerator.toString()).div(this.denominator.toString()).toFormat(e,t)}isZero(){return this.numerator.isZero()}};var Jn=E("Raydium_amount"),$n=ae(at.default);var ut=require("@solana/web3.js"),Re=require("@solana/spl-token"),ct={chainId:101,address:ut.PublicKey.default.toBase58(),programId:Re.TOKEN_PROGRAM_ID.toBase58(),decimals:9,symbol:"SOL",name:"solana",logoURI:"https://img-v1.raydium.io/icon/So11111111111111111111111111111111111111112.png",tags:[],priority:2,type:"raydium",extensions:{coingeckoId:"solana"}},z={chainId:101,address:"So11111111111111111111111111111111111111112",programId:Re.TOKEN_PROGRAM_ID.toBase58(),decimals:9,symbol:"WSOL",name:"Wrapped SOL",logoURI:"https://img-v1.raydium.io/icon/So11111111111111111111111111111111111111112.png",tags:[],priority:2,type:"raydium",extensions:{coingeckoId:"solana"}};var we=require("@solana/web3.js");var g=require("@solana/web3.js"),mt=require("@solana/spl-token");function Ee({pubkey:r,isSigner:e=!1,isWritable:t=!0}){return{pubkey:r,isWritable:t,isSigner:e}}var rr=[Ee({pubkey:mt.TOKEN_PROGRAM_ID,isWritable:!1}),Ee({pubkey:g.SystemProgram.programId,isWritable:!1}),Ee({pubkey:g.SYSVAR_RENT_PUBKEY,isWritable:!1})];function lt({publicKey:r,transformSol:e}){let t=dt(r.toString());if(t instanceof g.PublicKey)return e&&t.equals(me)?Ne:t;if(e&&t.toString()===me.toBase58())return Ne;if(typeof t=="string"){if(t===g.PublicKey.default.toBase58())return g.PublicKey.default;try{return new g.PublicKey(t)}catch{throw new Error("invalid public key")}}throw new Error("invalid public key")}function dt(r){try{return new g.PublicKey(r)}catch{return r}}var ir=new g.PublicKey("MemoSq4gqABAXKb96qnH8TysNcWxMyWCqXgDLGmfcHr"),or=new g.PublicKey("MemoSq4gqABAXKb96qnH8TysNcWxMyWCqXgDLGmfcHr"),sr=new g.PublicKey("SysvarRent111111111111111111111111111111111"),ar=new g.PublicKey("SysvarC1ock11111111111111111111111111111111"),jt=new g.PublicKey("metaqbxxUerdq28cj1RbAWkYQm3ybzjb6a8bt518x1s"),ur=new g.PublicKey("Sysvar1nstructions1111111111111111111111111"),cr=g.SystemProgram.programId,mr=new g.PublicKey("4k3Dyjzvzp8eMZWUXbBCjEvwSkkk59S5iCNLY3QrkX6R"),lr=new g.PublicKey("Ea5SjE2Y6yvCeW5dYTn7PYMuW5ikXkvbGdcmSnXeaLjS"),dr=new g.PublicKey("SRMuApVNdxXokk5GT7XD5cUUgXMBCoAz2LHeuAoKWRt"),pr=new g.PublicKey("EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v"),fr=new g.PublicKey("Es9vMFrzaCERmJfrF4H2FYD4KCoNkY11McCe8BenwNYB"),gr=new g.PublicKey("mSoLzYCxHdYgdzU16g5QSh3i5K3z3KZK7ytfqcJm7So"),yr=new g.PublicKey("7dHbWXmci3dT8UFYWYZweBLXgycu7Y3iL6trKn1Y7ARj"),br=new g.PublicKey("USDH1SM1ojwWUga67PGrgFWUHibbjqMvuMaDkRJTgkX"),hr=new g.PublicKey("NRVwhjBQiUPYtfDT5zRBVJajzFQHaBUNtC7SNVvqRFa"),Tr=new g.PublicKey("ANAxByE6G2WjFp7A4NqtWYXb3mgruyzZYg3spfxe6Lbo"),xr=new g.PublicKey("7vfCXTUXx5WJV5JADk17DUJ4ksgau7utNKj4b963voxs"),Ne=new g.PublicKey("So11111111111111111111111111111111111111112"),me=g.PublicKey.default;var Fe=class{constructor({mint:e,decimals:t,symbol:n,name:i,skipMint:s=!1,isToken2022:o=!1}){if(e===me.toBase58()||e instanceof we.PublicKey&&me.equals(e)){this.decimals=z.decimals,this.symbol=z.symbol,this.name=z.name,this.mint=new we.PublicKey(z.address),this.isToken2022=!1;return}this.decimals=t,this.symbol=n||e.toString().substring(0,6),this.name=i||e.toString().substring(0,6),this.mint=s?we.PublicKey.default:lt({publicKey:e}),this.isToken2022=o}equals(e){return this===e?!0:this.mint.equals(e.mint)}},j=Fe;j.WSOL=new Fe(V(G({},z),{mint:z.address}));var _e=class{constructor({decimals:e,symbol:t="UNKNOWN",name:n="UNKNOWN"}){this.decimals=e,this.symbol=t,this.name=n}equals(e){return this===e}},Ae=_e;Ae.SOL=new _e(ct);var pt=T(require("bn.js"));var Lr=new b(new pt.default(100));var Dr=E("Raydium_price");var Qt=require("@solana/web3.js"),Yt=T(require("bn.js"));var Zt=new q.default(0),pi=new q.default(1),fi=new q.default(2),gi=new q.default(3),yi=new q.default(5),zt=new q.default(10),bi=new q.default(100),hi=new q.default(1e3),Ti=new q.default(1e4);var nn=require("@solana/web3.js"),rn=require("@solana/spl-token");var Y=require("@solana/web3.js");var en=require("@solana/spl-token"),Ei=E("Raydium_txUtil");var u=require("@solana/web3.js"),Di=new u.PublicKey("EhhTKczWMGQt46ynNeRX1WfeagwwJd7ufHvCDjRxjo5Q"),Oi=new u.PublicKey("CBuCnLe26faBpcBP2fktp4rp8abpcAnTWft6ZrP5Q4T"),Ki=new u.PublicKey("9KEPoZmtHUrBbhWN1v1KWLMkkvwY6WLtAVUCPRtRjP4z"),vi=new u.PublicKey("FarmqiPv5eAj3j1GMdMCMUGXqPUvmquZtMy86QH6rzhG"),Gi=new u.PublicKey("CLaimxFqjHzgTJtAGHU47NPhg6qrc5sCnpC4tBLyABQS"),qi=new u.PublicKey("srmqPvymJeFKQ4zGQed1GFppgkRHL9kaELCbyksJtPX"),Vi=new u.PublicKey("9xQeWvG816bUx9EPjHmaT23yvVM2ZWbrrpZb9PusVFin"),Ui=new u.PublicKey("675kPX9MHTjS2zt1qfr1NYHuzeLXfQM9H24wFSUt1Mp8"),Wi=new u.PublicKey("5quBtoiQqxF9Jv6KYKctB59NT3gtJD2Y65kdnB1Uev3h"),Xi=new u.PublicKey("CDSr3ssLcRB6XYPJwAfFt18MZvEZp4LjHcvzBVZ45duo"),Hi=new u.PublicKey("CAMMCzo5YL8w4VFF8KVHrK22GGUsp5VTaW7grrKgrWqK"),zi=new u.PublicKey("LockrWmn6K5twhz3y9w1dQERbmgSaRkfnTeTKbpofwE"),ji=new u.PublicKey("kN1kEznaF5Xbd8LYuqtEFcxzWSBk5Fv6ygX6SqEGJVy"),Zi=new u.PublicKey("CDSr3ssLcRB6XYPJwAfFt18MZvEZp4LjHcvzBVZ45duo"),Qi=new u.PublicKey("routeUGWgWzqBWFcrCfv8tritsqukccJPu3q5GPP3xS"),Yi=new u.PublicKey("7YttLkHDoNj9wyDur5pM1ejNaAvT9X4eqaYcHQqtj2G5"),Ji=new u.PublicKey("6FJon3QE27qgPVggARueB22hLvoh22VzJpXv4rBEoSLF"),$i=new u.PublicKey("CC12se5To1CdEuw7fDS27B7Geo5jJyL7t5UK2B44NgiH"),eo=new u.PublicKey("9HzJyW1qZsEiSfMUf6L2jo3CcTKAyBmSyKdwQeYisHrC"),to=new u.PublicKey("DropEU8AvevN3UrXWXTMuz3rqnMczQVNjq3kcSdW2SQi"),no=new u.PublicKey("CPMMoo8L3F4NbTegBCKVNunggL7H1ZpdTHKxQB5qKP1C"),ro=new u.PublicKey("GpMZbSM2GgvTKHJirzeGfMFoaZ8UR2X7F4v8vHTvxFbL"),io=new u.PublicKey("DNXgeM9EiiaAbaWvwjHj9fQQLAX5ZsfHyvmYUNRAdNC8"),oo=new u.PublicKey("LockrWmn6K5twhz3y9w1dQERbmgSaRkfnTeTKbpofwE"),so=new u.PublicKey("3f7GcQFG397GAaEnv51zR6tsTVihYRydnydDD1cXekxH"),ao=new u.PublicKey("LanMV9sAd7wArD4vJFi2qDdfnVhFxYSUg6eADduJ3uj"),uo=new u.PublicKey("WLHv2UAZm6z4KyaaELi5pjdbJh6RESMva1Rnn8pJVVh"),co=new u.PublicKey("DRay6fNdQ5J82H7xV6uq2aV3mNrUZ1J4PgSKsWgptcm6"),mo=new u.PublicKey("5xqNaZXX5eUi4p5HU4oz9i5QnwRNT2y6oN7yyn4qENeq"),lo=new u.PublicKey("4Bu96XjU84XjPDSpveTVf6LYGCkfW5FK7SNkREWcEfV4"),po=new u.PublicKey("6s1xP3hpbAfFoNtUNF8mfHsjr2Bd97JxFJRWLbL6aHuX");var fo={OPEN_BOOK_PROGRAM:new u.PublicKey("EoTcMgcDRTJVZDMZWBoU6rhYHZfkNTVEAfz3uUJRcYGj"),SERUM_PROGRAM_ID_V3:new u.PublicKey("Ray1111111111111111111111111111111111111111"),AMM_V4:new u.PublicKey("DRaya7Kj3aMWQSy19kSjvmuwq9docCHofyP9kanQGaav"),AMM_STABLE:new u.PublicKey("DRayDdXc1NZQ9C3hRWmoSf8zK4iapgMnjdNZWrfwsP8m"),CLMM_PROGRAM_ID:new u.PublicKey("DRayAUgENGQBKVaX8owNhgzkEDyoHTGVEGHVJT1E9pfH"),CLMM_LOCK_PROGRAM_ID:new u.PublicKey("DRay25Usp3YJAi7beckgpGUC7mGJ2cR1AVPxhYfwVCUX"),CLMM_LOCK_AUTH_ID:new u.PublicKey("6Aoh8h2Lw2m5UGxYR8AdAL87jTWYeKoxM52mJRzfYwN"),CREATE_CPMM_POOL_PROGRAM:new u.PublicKey("DRaycpLY18LhpbydsBWbVJtxpNv9oXPgjRSfpF2bWpYb"),CREATE_CPMM_POOL_AUTH:new u.PublicKey("CXniRufdq5xL8t8jZAPxsPZDpuudwuJSPWnbcD5Y5Nxq"),CREATE_CPMM_POOL_FEE_ACC:new u.PublicKey("3oE58BKVt8KuYkGxx8zBojugnymWmBiyafWgMrnb6eYy"),LOCK_CPMM_PROGRAM:new u.PublicKey("DRay25Usp3YJAi7beckgpGUC7mGJ2cR1AVPxhYfwVCUX"),LOCK_CPMM_AUTH:new u.PublicKey("7qWVV8UY2bRJfDLP4s37YzBPKUkVB46DStYJBpYbQzu3"),UTIL1216:u.PublicKey.default,Router:new u.PublicKey("DRaybByLpbUL57LJARs3j8BitTxVfzBg351EaMr5UTCd"),FARM_PROGRAM_ID_V3:new u.PublicKey("DRayWyrLmEW5KEeqs8kdTMMaBabapqagaBC7KWpGtJeZ"),FARM_PROGRAM_ID_V4:new u.PublicKey("Ray1111111111111111111111111111111111111111"),FARM_PROGRAM_ID_V5:new u.PublicKey("DRayiCGSZgku1GTK6rXD6mVDdingXy6APAH1R6R5L2LC"),FARM_PROGRAM_ID_V6:new u.PublicKey("DRayzbYakXs45ELHkzH6vC3fuhQqTAnv5A68gdFuvZyZ"),LAUNCHPAD_PROGRAM:new u.PublicKey("DRay6fNdQ5J82H7xV6uq2aV3mNrUZ1J4PgSKsWgptcm6"),LAUNCHPAD_AUTH:new u.PublicKey("5xqNaZXX5eUi4p5HU4oz9i5QnwRNT2y6oN7yyn4qENeq"),LAUNCHPAD_PLATFORM:new u.PublicKey("2Jx4KTDrVSdWNazuGpcA8n3ZLTRGGBDxAWhuKe2Xcj2a"),LAUNCHPAD_CONFIG:new u.PublicKey("7ZR4zD7PYfY2XxoG1Gxcy2EgEeGYrpxrwzPuwdUBssEt"),FEE_DESTINATION_ID:new u.PublicKey("9y8ENuuZ3b19quffx9hQvRVygG5ky6snHfRvGpuSfeJy"),MODEL_DATA_PUBKEY:new u.PublicKey("Ray1111111111111111111111111111111111111111")};var F=T(require("bn.js")),le=1e4;function O(r,e,t,n){if(e===void 0)return{amount:r,fee:void 0,expirationTime:void 0};let i=V(G({},e),{olderTransferFee:{epoch:BigInt(e.olderTransferFee.epoch),maximumFee:BigInt(e.olderTransferFee.maximumFee),transferFeeBasisPoints:e.olderTransferFee.transferFeeBasisPoints},newerTransferFee:{epoch:BigInt(e.newerTransferFee.epoch),maximumFee:BigInt(e.newerTransferFee.maximumFee),transferFeeBasisPoints:e.newerTransferFee.transferFeeBasisPoints}}),s=t.epoch<i.newerTransferFee.epoch?i.olderTransferFee:i.newerTransferFee,o=new F.default(s.maximumFee.toString()),a=t.epoch<i.newerTransferFee.epoch?(Number(i.newerTransferFee.epoch)*t.slotsInEpoch-t.absoluteSlot)*400/1e3:void 0;if(n)if(s.transferFeeBasisPoints===le){let m=new F.default(s.maximumFee.toString());return{amount:r.add(m),fee:m,expirationTime:a}}else{let m=Ke(r.mul(new F.default(le)),new F.default(le-s.transferFeeBasisPoints)),h=new F.default(s.maximumFee.toString()),A=m.sub(r).gt(h)?r.add(h):m,P=Ke(A.mul(new F.default(s.transferFeeBasisPoints)),new F.default(le)),B=P.gt(o)?o:P;return{amount:A,fee:B,expirationTime:a}}else{let m=Ke(r.mul(new F.default(s.transferFeeBasisPoints)),new F.default(le)),h=m.gt(o)?o:m;return{amount:r,fee:h,expirationTime:a}}}function de(r,e){return r===void 0?e:e===void 0?r:Math.min(r,e)}function Ke(r,e){let{div:t,mod:n}=r.divmod(e);return n.gt(new F.default(0))?t.add(new F.default(1)):t}var pe=require("@solana/web3.js");var on={AcL1Vo8oy1ULiavEcjSUcwfBSForXMudcZvDZy5nzJkU:new pe.AddressLookupTableAccount({key:new pe.PublicKey("AcL1Vo8oy1ULiavEcjSUcwfBSForXMudcZvDZy5nzJkU"),state:pe.AddressLookupTableAccount.deserialize(Buffer.from("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","base64"))})};var J=require("@solana/web3.js"),sn=T(require("axios"));var gt=T(require("bn.js")),Go=new gt.default(1e6);var L=T(require("bn.js")),_=new L.default(0),X=new L.default(1),yt=new L.default(-1),M=new L.default(1).shln(64),Pe=new L.default(1).shln(128),ve=M.sub(X),fe=64,bt=Pe.subn(1),Z=-443636,$=-Z,Ge=new L.default("4295048016"),qe=new L.default("79226673521066979257578248091"),as=new L.default("4295048017"),us=new L.default("79226673521066979257578248090"),ht=16,Tt="59543866431248",xt="184467440737095516",wt="15793534762490258745",an=new L.default(10).pow(new L.default(6));var cs=new L.default("18446744073700000000");var p=T(require("bn.js")),K=T(require("decimal.js"));var ys=Buffer.from("amm_config","utf8"),bs=Buffer.from("pool","utf8"),hs=Buffer.from("pool_vault","utf8"),Ts=Buffer.from("pool_reward_vault","utf8"),xs=Buffer.from("position","utf8"),ws=Buffer.from("tick_array","utf8"),As=Buffer.from("operation","utf8"),Ps=Buffer.from("pool_tick_array_bitmap_extension","utf8"),ks=Buffer.from("observation","utf8");var Bs=Buffer.from("locked_position","utf8");var Is=Buffer.from("support_mint","utf8");var xn=require("@solana/web3.js"),wn=require("@solana/spl-token"),An=T(require("bn.js")),Pn=T(require("decimal.js"));var Bt=require("@solana/web3.js"),ee=T(require("bn.js"));var c=require("@solana/buffer-layout"),Ve=c.Layout,At=c.Structure;var Ue=c.UInt;var Pt=c.u8,ge=c.u16;var H=c.s32;var kt=c.seq;var R=c.blob;var te=class extends Ve{constructor(t,n,i){super(t,i);this.blob=R(t),this.signed=n}decode(t,n=0){let i=new ee.default(this.blob.decode(t,n),10,"le");return this.signed?i.fromTwos(this.span*8).clone():i}encode(t,n,i=0){return typeof t=="number"&&(t=new ee.default(t)),this.signed&&(t=t.toTwos(this.span*8)),this.blob.encode(t.toArrayLike(Buffer,"le",this.span),n,i)}};function N(r){return new Ue(1,r)}function ne(r){return new Ue(4,r)}function f(r){return new te(8,!1,r)}function w(r){return new te(16,!1,r)}function It(r){return new te(8,!0,r)}function St(r){return new te(16,!0,r)}var ke=class extends Ve{constructor(t,n,i,s){super(t.span,s);this.layout=t,this.decoder=n,this.encoder=i}decode(t,n){return this.decoder(this.layout.decode(t,n))}encode(t,n,i){return this.layout.encode(this.encoder(t),n,i)}getSpan(t,n){return this.layout.getSpan(t,n)}};function y(r){return new ke(R(32),e=>new Bt.PublicKey(e),e=>e.toBuffer(),r)}function Ct(r){return new ke(Pt(),un,cn,r)}function un(r){if(r===0)return!1;if(r===1)return!0;throw new Error("Invalid bool: "+r)}function cn(r){return r?1:0}var We=class extends At{decode(e,t){return super.decode(e,t)}};function S(r,e,t){return new We(r,e,t)}function x(r,e,t){let n,i=typeof e=="number"?e:(0,ee.isBN)(e)?e.toNumber():new Proxy(e,{get(s,o){if(!n){let a=Reflect.get(s,"count");n=(0,ee.isBN)(a)?a.toNumber():a,Reflect.set(s,"count",n)}return Reflect.get(s,o)},set(s,o,a){return o==="count"&&(n=a),Reflect.set(s,o,a)}});return kt(r,i,t)}var mn=T(require("bn.js")),ln=T(require("decimal.js"));var Be=60;var je=14;var la=S([R(8),N("bump"),ge("index"),y(""),ne("protocolFeeRate"),ne("tradeFeeRate"),ge("tickSpacing"),x(f(),8,"")]),pn=S([ne("blockTimestamp"),It("tickCumulative"),x(f(),4)]),da=S([R(8),Ct("initialized"),f("recentEpoch"),ge("observationIndex"),y("poolId"),x(pn,100,"observations"),x(f(),4)]),fn=S([N("rewardState"),f("openTime"),f("endTime"),f("lastUpdateTime"),w("emissionsPerSecondX64"),f("rewardTotalEmissioned"),f("rewardClaimed"),y("tokenMint"),y("tokenVault"),y("creator"),w("rewardGrowthGlobalX64")]),gn=S([R(8),N("bump"),y("ammConfig"),y("creator"),y("mintA"),y("mintB"),y("vaultA"),y("vaultB"),y("observationId"),N("mintDecimalsA"),N("mintDecimalsB"),ge("tickSpacing"),w("liquidity"),w("sqrtPriceX64"),H("tickCurrent"),ne(),w("feeGrowthGlobalX64A"),w("feeGrowthGlobalX64B"),f("protocolFeesTokenA"),f("protocolFeesTokenB"),w("swapInAmountTokenA"),w("swapOutAmountTokenB"),w("swapInAmountTokenB"),w("swapOutAmountTokenA"),N("status"),x(N(),7,""),x(fn,3,"rewardInfos"),x(f(),16,"tickArrayBitmap"),f("totalFeesTokenA"),f("totalFeesClaimedTokenA"),f("totalFeesTokenB"),f("totalFeesClaimedTokenB"),f("fundFeesTokenA"),f("fundFeesTokenB"),f("startTime"),x(f(),15*4-3,"padding")]),yn=S([w("growthInsideLastX64"),f("rewardAmountOwed")]),bn=S([R(8),N("bump"),y("nftMint"),y("poolId"),H("tickLower"),H("tickUpper"),w("liquidity"),w("feeGrowthInsideLastX64A"),w("feeGrowthInsideLastX64B"),f("tokenFeesOwedA"),f("tokenFeesOwedB"),x(yn,3,"rewardInfos"),x(f(),8,"")]),pa=S([R(8),N("bump"),y("poolId"),H("tickLowerIndex"),H("tickUpperIndex"),w("liquidity"),w("feeGrowthInsideLastX64A"),w("feeGrowthInsideLastX64B"),f("tokenFeesOwedA"),f("tokenFeesOwedB"),x(w(),3,"rewardGrowthInside"),x(f(),8,"")]),hn=S([H("tick"),St("liquidityNet"),w("liquidityGross"),w("feeGrowthOutsideX64A"),w("feeGrowthOutsideX64B"),x(w(),3,"rewardGrowthsOutsideX64"),x(ne(),13,"")]),Nt=S([R(8),y("poolId"),H("startTickIndex"),x(hn,Be,"ticks"),N("initializedTickCount"),x(N(),115,"")]),fa=S([R(329),x(y(),100,"whitelistMints")]),Tn=S([R(8),y("poolId"),x(x(f(),8),je,"positiveTickArrayBitmap"),x(x(f(),8),je,"negativeTickArrayBitmap")]),ga=S([f(),N("bump"),y("owner"),y("poolId"),y("positionId"),y("nftAccount"),x(f(),8)]),ya=S([R(8),N("bump"),y("lockOwner"),y("poolId"),y("positionId"),y("nftAccount"),y("lockNftMint"),f("recentEpoch"),x(f(),8)]);var d=class{static mulDivRoundingUp(e,t,n){let i=e.mul(t),s=i.div(n);return i.mod(n).eq(_)||(s=s.add(X)),s}static mulDivFloor(e,t,n){if(n.eq(_))throw new Error("division by 0");return e.mul(t).div(n)}static mulDivCeil(e,t,n){if(n.eq(_))throw new Error("division by 0");return e.mul(t).add(n.sub(X)).div(n)}static x64ToDecimal(e,t){return new K.default(e.toString()).div(K.default.pow(2,64)).toDecimalPlaces(t)}static decimalToX64(e){return new p.default(e.mul(K.default.pow(2,64)).floor().toFixed())}static wrappingSubU128(e,t){return e.add(Pe).sub(t).mod(Pe)}};function k(r,e){return Ze(r.mul(e),64,256)}function kn(r,e,t){let n=r.toTwos(t).shln(e);return n.imaskn(t+1),n.fromTwos(t)}function Ze(r,e,t){let n=r.toTwos(t).shrn(e);return n.imaskn(t-e+1),n.fromTwos(t-e)}var C=class{static sqrtPriceX64ToPrice(e,t,n){return d.x64ToDecimal(e).pow(2).mul(K.default.pow(10,t-n))}static priceToSqrtPriceX64(e,t,n){return d.decimalToX64(e.mul(K.default.pow(10,n-t)).sqrt())}static getNextSqrtPriceX64FromInput(e,t,n,i){if(!e.gt(_))throw new Error("sqrtPriceX64 must greater than 0");if(!t.gt(_))throw new Error("liquidity must greater than 0");return i?this.getNextSqrtPriceFromTokenAmountARoundingUp(e,t,n,!0):this.getNextSqrtPriceFromTokenAmountBRoundingDown(e,t,n,!0)}static getNextSqrtPriceX64FromOutput(e,t,n,i){if(!e.gt(_))throw new Error("sqrtPriceX64 must greater than 0");if(!t.gt(_))throw new Error("liquidity must greater than 0");return i?this.getNextSqrtPriceFromTokenAmountBRoundingDown(e,t,n,!1):this.getNextSqrtPriceFromTokenAmountARoundingUp(e,t,n,!1)}static getNextSqrtPriceFromTokenAmountARoundingUp(e,t,n,i){if(n.eq(_))return e;let s=t.shln(fe);if(i){let o=s,a=s.add(n.mul(e));return a.gte(o)?d.mulDivCeil(o,e,a):d.mulDivRoundingUp(o,X,o.div(e).add(n))}else{let o=n.mul(e);if(!s.gt(o))throw new Error("getNextSqrtPriceFromTokenAmountARoundingUp,liquidityLeftShift must gt amountMulSqrtPrice");let a=s.sub(o);return d.mulDivCeil(s,e,a)}}static getNextSqrtPriceFromTokenAmountBRoundingDown(e,t,n,i){let s=n.shln(fe);if(i)return e.add(s.div(t));{let o=d.mulDivRoundingUp(s,X,t);if(!e.gt(o))throw new Error("getNextSqrtPriceFromTokenAmountBRoundingDown sqrtPriceX64 must gt amountDivLiquidity");return e.sub(o)}}static getSqrtPriceX64FromTick(e){if(!Number.isInteger(e))throw new Error("tick must be integer");if(e<Z||e>$)throw new Error("tick must be in MIN_TICK and MAX_TICK");let t=e<0?e*-1:e,n=(t&1)!=0?new p.default("18445821805675395072"):new p.default("18446744073709551616");return(t&2)!=0&&(n=k(n,new p.default("18444899583751176192"))),(t&4)!=0&&(n=k(n,new p.default("18443055278223355904"))),(t&8)!=0&&(n=k(n,new p.default("18439367220385607680"))),(t&16)!=0&&(n=k(n,new p.default("18431993317065453568"))),(t&32)!=0&&(n=k(n,new p.default("18417254355718170624"))),(t&64)!=0&&(n=k(n,new p.default("18387811781193609216"))),(t&128)!=0&&(n=k(n,new p.default("18329067761203558400"))),(t&256)!=0&&(n=k(n,new p.default("18212142134806163456"))),(t&512)!=0&&(n=k(n,new p.default("17980523815641700352"))),(t&1024)!=0&&(n=k(n,new p.default("17526086738831433728"))),(t&2048)!=0&&(n=k(n,new p.default("16651378430235570176"))),(t&4096)!=0&&(n=k(n,new p.default("15030750278694412288"))),(t&8192)!=0&&(n=k(n,new p.default("12247334978884435968"))),(t&16384)!=0&&(n=k(n,new p.default("8131365268886854656"))),(t&32768)!=0&&(n=k(n,new p.default("3584323654725218816"))),(t&65536)!=0&&(n=k(n,new p.default("696457651848324352"))),(t&131072)!=0&&(n=k(n,new p.default("26294789957507116"))),(t&262144)!=0&&(n=k(n,new p.default("37481735321082"))),e>0&&(n=bt.div(n)),n}static getTickFromPrice(e,t,n){return C.getTickFromSqrtPriceX64(C.priceToSqrtPriceX64(e,t,n))}static getTickFromSqrtPriceX64(e){if(e.gt(qe)||e.lt(Ge))throw new Error("Provided sqrtPrice is not within the supported sqrtPrice range.");let t=e.bitLength()-1,n=new p.default(t-64),i=kn(n,32,128),s=new p.default("8000000000000000","hex"),o=0,a=new p.default(0),m=t>=64?e.shrn(t-63):e.shln(63-t);for(;s.gt(new p.default(0))&&o<ht;){m=m.mul(m);let W=m.shrn(127);m=m.shrn(63+W.toNumber()),a=a.add(s.mul(W)),s=s.shrn(1),o+=1}let h=a.shrn(32),P=i.add(h).mul(new p.default(Tt)),B=Ze(P.sub(new p.default(xt)),64,128).toNumber(),D=Ze(P.add(new p.default(wt)),64,128).toNumber();return B==D?B:C.getSqrtPriceX64FromTick(D).lte(e)?D:B}};var I=class{static addDelta(e,t){return e.add(t)}static getTokenAmountAFromLiquidity(e,t,n,i){if(e.gt(t)&&([e,t]=[t,e]),!e.gt(_))throw new Error("sqrtPriceX64A must greater than 0");let s=n.ushln(fe),o=t.sub(e);return i?d.mulDivRoundingUp(d.mulDivCeil(s,o,t),X,e):d.mulDivFloor(s,o,t).div(e)}static getTokenAmountBFromLiquidity(e,t,n,i){if(e.gt(t)&&([e,t]=[t,e]),!e.gt(_))throw new Error("sqrtPriceX64A must greater than 0");return i?d.mulDivCeil(n,t.sub(e),M):d.mulDivFloor(n,t.sub(e),M)}static getLiquidityFromTokenAmountA(e,t,n,i){e.gt(t)&&([e,t]=[t,e]);let s=n.mul(e).mul(t),o=t.sub(e),a=s.div(o);return i?d.mulDivRoundingUp(a,X,ve):a.shrn(fe)}static getLiquidityFromTokenAmountB(e,t,n){return e.gt(t)&&([e,t]=[t,e]),d.mulDivFloor(n,ve,t.sub(e))}static getLiquidityFromTokenAmounts(e,t,n,i,s){if(t.gt(n)&&([t,n]=[n,t]),e.lte(t))return I.getLiquidityFromTokenAmountA(t,n,i,!1);if(e.lt(n)){let o=I.getLiquidityFromTokenAmountA(e,n,i,!1),a=I.getLiquidityFromTokenAmountB(t,e,s);return o.lt(a)?o:a}else return I.getLiquidityFromTokenAmountB(t,n,s)}static getAmountsFromLiquidity(e,t,n,i,s){if(t.gt(n)&&([t,n]=[n,t]),e.lte(t))return{amountA:I.getTokenAmountAFromLiquidity(t,n,i,s),amountB:new p.default(0)};if(e.lt(n)){let o=I.getTokenAmountAFromLiquidity(e,n,i,s),a=I.getTokenAmountBFromLiquidity(t,e,i,s);return{amountA:o,amountB:a}}else return{amountA:new p.default(0),amountB:I.getTokenAmountBFromLiquidity(t,n,i,s)}}static getAmountsFromLiquidityWithSlippage(e,t,n,i,s,o,a){let{amountA:m,amountB:h}=I.getAmountsFromLiquidity(e,t,n,i,o),A=s?1+a:1-a,P=new p.default(new K.default(m.toString()).mul(A).toFixed(0)),B=new p.default(new K.default(h.toString()).mul(A).toFixed(0));return{amountSlippageA:P,amountSlippageB:B}}static getAmountsOutFromLiquidity({poolInfo:e,tickLower:t,tickUpper:n,liquidity:i,slippage:s,add:o,epochInfo:a,amountAddFee:m}){var re,ie,Qe,Ye;let h=C.priceToSqrtPriceX64(new K.default(e.price),e.mintA.decimals,e.mintB.decimals),A=C.getSqrtPriceX64FromTick(t),P=C.getSqrtPriceX64FromTick(n),B=o?1+s:1-s,D=I.getAmountsFromLiquidity(h,A,P,i,o),[W,ye]=[O(D.amountA,(re=e.mintA.extensions)==null?void 0:re.feeConfig,a,m),O(D.amountB,(ie=e.mintB.extensions)==null?void 0:ie.feeConfig,a,m)],[be,he]=[O(new p.default(new K.default(D.amountA.toString()).mul(B).toFixed(0)),(Qe=e.mintA.extensions)==null?void 0:Qe.feeConfig,a,m),O(new p.default(new K.default(D.amountB.toString()).mul(B).toFixed(0)),(Ye=e.mintB.extensions)==null?void 0:Ye.feeConfig,a,m)];return{liquidity:i,amountA:W,amountB:ye,amountSlippageA:be,amountSlippageB:he,expirationTime:de(W.expirationTime,ye.expirationTime)}}};var Ie=class{static getfeeGrowthInside(e,t,n){let i=new v.default(0),s=new v.default(0);e.tickCurrent>=t.tick?(i=t.feeGrowthOutsideX64A,s=t.feeGrowthOutsideX64B):(i=e.feeGrowthGlobalX64A.sub(t.feeGrowthOutsideX64A),s=e.feeGrowthGlobalX64B.sub(t.feeGrowthOutsideX64B));let o=new v.default(0),a=new v.default(0);e.tickCurrent<n.tick?(o=n.feeGrowthOutsideX64A,a=n.feeGrowthOutsideX64B):(o=e.feeGrowthGlobalX64A.sub(n.feeGrowthOutsideX64A),a=e.feeGrowthGlobalX64B.sub(n.feeGrowthOutsideX64B));let m=d.wrappingSubU128(d.wrappingSubU128(e.feeGrowthGlobalX64A,i),o),h=d.wrappingSubU128(d.wrappingSubU128(e.feeGrowthGlobalX64B,s),a);return{feeGrowthInsideX64A:m,feeGrowthInsideBX64:h}}static GetPositionFees(e,t,n,i){let{feeGrowthInsideX64A:s,feeGrowthInsideBX64:o}=this.getfeeGrowthInside(e,n,i),a=d.mulDivFloor(d.wrappingSubU128(s,t.feeGrowthInsideLastX64A),t.liquidity,M),m=t.tokenFeesOwedA.add(a),h=d.mulDivFloor(d.wrappingSubU128(o,t.feeGrowthInsideLastX64B),t.liquidity,M),A=t.tokenFeesOwedB.add(h);return{tokenFeeAmountA:m,tokenFeeAmountB:A}}static GetPositionFeesV2(e,t,n,i){let{feeGrowthInsideX64A:s,feeGrowthInsideBX64:o}=this.getfeeGrowthInside(e,n,i),a=d.mulDivFloor(d.wrappingSubU128(s,t.feeGrowthInsideLastX64A),t.liquidity,M),m=t.tokenFeesOwedA.add(a),h=d.mulDivFloor(d.wrappingSubU128(o,t.feeGrowthInsideLastX64B),t.liquidity,M),A=t.tokenFeesOwedB.add(h);return{tokenFeeAmountA:m,tokenFeeAmountB:A}}static GetPositionRewardsV2(e,t,n,i){let s=[],o=this.getRewardGrowthInsideV2(e.tickCurrent,n,i,e.rewardInfos);for(let a=0;a<o.length;a++){let m=o[a],h=t.rewardInfos[a],A=d.wrappingSubU128(m,h.growthInsideLastX64),P=d.mulDivFloor(A,t.liquidity,M),B=h.rewardAmountOwed.add(P);s.push(B)}return s}static GetPositionRewards(e,t,n,i){let s=[],o=this.getRewardGrowthInside(e.tickCurrent,n,i,e.rewardInfos);for(let a=0;a<o.length;a++){let m=o[a],h=t.rewardInfos[a],A=d.wrappingSubU128(m,h.growthInsideLastX64),P=d.mulDivFloor(A,t.liquidity,M),B=h.rewardAmountOwed.add(P);s.push(B)}return s}static getRewardGrowthInside(e,t,n,i){let s=[];for(let o=0;o<i.length;o++){let a=new v.default(0);t.liquidityGross.eqn(0)?a=i[o].rewardGrowthGlobalX64:e<t.tick?a=i[o].rewardGrowthGlobalX64.sub(t.rewardGrowthsOutsideX64[o]):a=t.rewardGrowthsOutsideX64[o];let m=new v.default(0);n.liquidityGross.eqn(0)||(e<n.tick?m=n.rewardGrowthsOutsideX64[o]:m=i[o].rewardGrowthGlobalX64.sub(n.rewardGrowthsOutsideX64[o])),s.push(d.wrappingSubU128(d.wrappingSubU128(i[o].rewardGrowthGlobalX64,a),m))}return s}static getRewardGrowthInsideV2(e,t,n,i){let s=[];for(let o=0;o<i.length;o++){let a=new v.default(0);t.liquidityGross.eqn(0)?a=i[o].rewardGrowthGlobalX64:e<t.tick?a=i[o].rewardGrowthGlobalX64.sub(t.rewardGrowthsOutsideX64[o]):a=t.rewardGrowthsOutsideX64[o];let m=new v.default(0);n.liquidityGross.eqn(0)||(e<n.tick?m=n.rewardGrowthsOutsideX64[o]:m=i[o].rewardGrowthGlobalX64.sub(n.rewardGrowthsOutsideX64[o])),s.push(d.wrappingSubU128(d.wrappingSubU128(i[o].rewardGrowthGlobalX64,a),m))}return s}static getAmountsFromLiquidity({poolInfo:e,ownerPosition:t,liquidity:n,slippage:i,add:s,epochInfo:o}){var be,he,re,ie;let a=C.priceToSqrtPriceX64(new Se.default(e.price),e.mintA.decimals,e.mintB.decimals),m=C.getSqrtPriceX64FromTick(t.tickLower),h=C.getSqrtPriceX64FromTick(t.tickUpper),A=s?1+i:1-i,P=I.getAmountsFromLiquidity(a,m,h,n,s),[B,D]=[O(P.amountA,(be=e.mintA.extensions)==null?void 0:be.feeConfig,o,!0),O(P.amountB,(he=e.mintB.extensions)==null?void 0:he.feeConfig,o,!0)],[W,ye]=[O(new v.default(new Se.default(P.amountA.toString()).mul(A).toFixed(0)),(re=e.mintA.extensions)==null?void 0:re.feeConfig,o,!0),O(new v.default(new Se.default(P.amountB.toString()).mul(A).toFixed(0)),(ie=e.mintB.extensions)==null?void 0:ie.feeConfig,o,!0)];return{liquidity:n,amountA:B,amountB:D,amountSlippageA:W,amountSlippageB:ye,expirationTime:de(B.expirationTime,D.expirationTime)}}};0&&(module.exports={PositionUtils});
//# sourceMappingURL=position.js.map