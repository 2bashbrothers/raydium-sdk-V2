var $e=Object.defineProperty,et=Object.defineProperties;var tt=Object.getOwnPropertyDescriptors;var z=Object.getOwnPropertySymbols;var Le=Object.prototype.hasOwnProperty,Ce=Object.prototype.propertyIsEnumerable;var Be=(n,e,t)=>e in n?$e(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,k=(n,e)=>{for(var t in e||(e={}))Le.call(e,t)&&Be(n,t,e[t]);if(z)for(var t of z(e))Ce.call(e,t)&&Be(n,t,e[t]);return n},N=(n,e)=>et(n,tt(e));var ie=(n,e)=>{var t={};for(var o in n)Le.call(n,o)&&e.indexOf(o)<0&&(t[o]=n[o]);if(n!=null&&z)for(var o of z(n))e.indexOf(o)<0&&Ce.call(n,o)&&(t[o]=n[o]);return t};import{PublicKey as H}from"@solana/web3.js";import G from"bn.js";import ee from"decimal.js";import{TOKEN_PROGRAM_ID as Ut}from"@solana/spl-token";import{ComputeBudgetProgram as Jt,Keypair as tn,PublicKey as De,Transaction as ae,TransactionMessage as on,VersionedTransaction as sn}from"@solana/web3.js";import{get as Re,set as nt}from"lodash";var se=class{constructor(e){this.logLevel=e.logLevel!==void 0?e.logLevel:0,this.name=e.name}set level(e){this.logLevel=e}get time(){return Date.now().toString()}get moduleName(){return this.name}isLogLevel(e){return e<=this.logLevel}error(...e){return this.isLogLevel(0)?(console.error(this.time,this.name,"sdk logger error",...e),this):this}logWithError(...e){let t=e.map(o=>typeof o=="object"?JSON.stringify(o):o).join(", ");throw new Error(t)}warning(...e){return this.isLogLevel(1)?(console.warn(this.time,this.name,"sdk logger warning",...e),this):this}info(...e){return this.isLogLevel(2)?(console.info(this.time,this.name,"sdk logger info",...e),this):this}debug(...e){return this.isLogLevel(3)?(console.debug(this.time,this.name,"sdk logger debug",...e),this):this}},Ne={},rt={};function h(n){let e=Re(Ne,n);if(!e){let t=Re(rt,n);e=new se({name:n,logLevel:t}),nt(Ne,n,e)}return e}import{TOKEN_PROGRAM_ID as ln}from"@solana/spl-token";var S=h("Raydium_txUtil"),ot=1644;function it(n,e){n.length<1&&S.logWithError(`no instructions provided: ${n.toString()}`),e.length<1&&S.logWithError(`no signers provided:, ${e.toString()}`);let t=new ae;t.recentBlockhash="11111111111111111111111111111111",t.feePayer=e[0],t.add(...n);try{return Buffer.from(t.serialize({verifySignatures:!1})).toString("base64").length<ot}catch{return!1}}async function Me(n,e,t,o=!0){let i=new De("RaydiumSimuLateTransaction11111111111111111"),c=[],d=new ae;d.feePayer=i;for(let l of e)it([...d.instructions,l],[i])||(c.push(d),d=new ae,d.feePayer=i),d.add(l);d.instructions.length>0&&c.push(d);let p=[];try{if(p=await st(n,c,o),p.find(l=>l.err!==null))throw Error("rpc simulateTransaction error")}catch(l){l instanceof Error&&S.logWithError("failed to simulate for instructions","RPC_ERROR",{message:l.message})}let x=[];for(let l of p)if(S.debug("simulate result:",l),l.logs){let f=l.logs.filter(A=>A&&A.includes(t));S.debug("filteredLog:",x),f.length||S.logWithError("simulate log not match keyword","keyword",t),x.push(...f)}return x}function _e(n,e){let t=n.match(/{["\w:,]+}/g);return!t||t.length!==1?S.logWithError(`simulate log fail to match json, keyword: ${e}`):t[0]}function I(n,e){let o=new RegExp(`"${e}":(\\d+)`,"g").exec(n);return!o||o.length!==2?S.logWithError(`simulate log fail to match key", key: ${e}`):o[1]}function O(n,e){let[t,o]=De.findProgramAddressSync(n,e);return{publicKey:t,nonce:o}}async function st(n,e,t){let o=[];if(t){let i=await n.getLatestBlockhash(),c=[];for(let l of e){l.recentBlockhash=i.blockhash,l.lastValidBlockHeight=i.lastValidBlockHeight;let A=l._compile().serialize(),D=l._serialize(A).toString("base64");c.push(D)}let d=c.map(l=>{let f=n._buildArgs([l],void 0,"base64");return{methodName:"simulateTransaction",args:f}}),p=[],x=20;for(let l=0;l<Math.ceil(d.length/x);l++)p.push(d.slice(l*x,(l+1)*x));o=await(await Promise.all(p.map(async l=>(await n._rpcBatchRequest(l)).map(f=>f.result.value)))).flat()}else try{o=await Promise.all(e.map(async i=>await(await n.simulateTransaction(i)).value))}catch(i){i instanceof Error&&S.logWithError("failed to get info for multiple accounts","RPC_ERROR",{message:i.message})}return o}import{PublicKey as Bs}from"@solana/web3.js";import{MintLayout as Cs,TOKEN_PROGRAM_ID as Ns}from"@solana/spl-token";import kt from"big.js";import is from"bn.js";import L from"bn.js";import Nr from"decimal.js";import{PublicKey as at}from"@solana/web3.js";import{TOKEN_PROGRAM_ID as Ee}from"@solana/spl-token";var ce={chainId:101,address:at.default.toBase58(),programId:Ee.toBase58(),decimals:9,symbol:"SOL",name:"solana",logoURI:"https://img-v1.raydium.io/icon/So11111111111111111111111111111111111111112.png",tags:[],priority:2,type:"raydium",extensions:{coingeckoId:"solana"}},B={chainId:101,address:"So11111111111111111111111111111111111111112",programId:Ee.toBase58(),decimals:9,symbol:"WSOL",name:"Wrapped SOL",logoURI:"https://img-v1.raydium.io/icon/So11111111111111111111111111111111111111112.png",tags:[],priority:2,type:"raydium",extensions:{coingeckoId:"solana"}};import{PublicKey as de}from"@solana/web3.js";import{PublicKey as g,SystemProgram as Ke,SYSVAR_RENT_PUBKEY as ut}from"@solana/web3.js";import{TOKEN_PROGRAM_ID as ct}from"@solana/spl-token";function P({pubkey:n,isSigner:e=!1,isWritable:t=!0}){return{pubkey:n,isWritable:t,isSigner:e}}var hn=[P({pubkey:ct,isWritable:!1}),P({pubkey:Ke.programId,isWritable:!1}),P({pubkey:ut,isWritable:!1})];function me({publicKey:n,transformSol:e}){let t=Oe(n.toString());if(t instanceof g)return e&&t.equals(F)?le:t;if(e&&t.toString()===F.toBase58())return le;if(typeof t=="string"){if(t===g.default.toBase58())return g.default;try{return new g(t)}catch{throw new Error("invalid public key")}}throw new Error("invalid public key")}function Oe(n){try{return new g(n)}catch{return n}}var Tn=new g("MemoSq4gqABAXKb96qnH8TysNcWxMyWCqXgDLGmfcHr"),xn=new g("MemoSq4gqABAXKb96qnH8TysNcWxMyWCqXgDLGmfcHr"),lt=new g("SysvarRent111111111111111111111111111111111"),Pn=new g("SysvarC1ock11111111111111111111111111111111"),wn=new g("metaqbxxUerdq28cj1RbAWkYQm3ybzjb6a8bt518x1s"),An=new g("Sysvar1nstructions1111111111111111111111111"),kn=Ke.programId,Sn=new g("4k3Dyjzvzp8eMZWUXbBCjEvwSkkk59S5iCNLY3QrkX6R"),In=new g("Ea5SjE2Y6yvCeW5dYTn7PYMuW5ikXkvbGdcmSnXeaLjS"),Bn=new g("SRMuApVNdxXokk5GT7XD5cUUgXMBCoAz2LHeuAoKWRt"),Ln=new g("EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v"),Cn=new g("Es9vMFrzaCERmJfrF4H2FYD4KCoNkY11McCe8BenwNYB"),Rn=new g("mSoLzYCxHdYgdzU16g5QSh3i5K3z3KZK7ytfqcJm7So"),Nn=new g("7dHbWXmci3dT8UFYWYZweBLXgycu7Y3iL6trKn1Y7ARj"),Dn=new g("USDH1SM1ojwWUga67PGrgFWUHibbjqMvuMaDkRJTgkX"),Mn=new g("NRVwhjBQiUPYtfDT5zRBVJajzFQHaBUNtC7SNVvqRFa"),_n=new g("ANAxByE6G2WjFp7A4NqtWYXb3mgruyzZYg3spfxe6Lbo"),En=new g("7vfCXTUXx5WJV5JADk17DUJ4ksgau7utNKj4b963voxs"),le=new g("So11111111111111111111111111111111111111112"),F=g.default;function pe(n){return me({publicKey:n,transformSol:!0})}var fe=class{constructor({mint:e,decimals:t,symbol:o,name:i,skipMint:c=!1,isToken2022:d=!1}){if(e===F.toBase58()||e instanceof de&&F.equals(e)){this.decimals=B.decimals,this.symbol=B.symbol,this.name=B.name,this.mint=new de(B.address),this.isToken2022=!1;return}this.decimals=t,this.symbol=o||e.toString().substring(0,6),this.name=i||e.toString().substring(0,6),this.mint=c?de.default:me({publicKey:e}),this.isToken2022=d}equals(e){return this===e?!0:this.mint.equals(e.mint)}},M=fe;M.WSOL=new fe(N(k({},B),{mint:B.address}));var be=class{constructor({decimals:e,symbol:t="UNKNOWN",name:o="UNKNOWN"}){this.decimals=e,this.symbol=t,this.name=o}equals(e){return this===e}},Q=be;Q.SOL=new be(ce);import X from"big.js";import ft from"bn.js";import bt from"decimal.js-light";import V from"bn.js";var Fe=9007199254740991;function w(n){let e=h("Raydium_parseBigNumberish");if(n instanceof V)return n;if(typeof n=="string"){if(n.match(/^-?[0-9]+$/))return new V(n);e.logWithError(`invalid BigNumberish string: ${n}`)}return typeof n=="number"?(n%1&&e.logWithError(`BigNumberish number underflow: ${n}`),(n>=Fe||n<=-Fe)&&e.logWithError(`BigNumberish number overflow: ${n}`),new V(String(n))):typeof n=="bigint"?new V(n.toString()):(e.error(`invalid BigNumberish value: ${n}`),new V(0))}import mt from"toformat";var pt=mt,v=pt;var Y=h("module/fraction"),ge=v(X),W=v(bt),gt={[0]:W.ROUND_DOWN,[1]:W.ROUND_HALF_UP,[2]:W.ROUND_UP},yt={[0]:X.roundDown,[1]:X.roundHalfUp,[2]:X.roundUp},b=class{constructor(e,t=new ft(1)){this.numerator=w(e),this.denominator=w(t)}get quotient(){return this.numerator.div(this.denominator)}invert(){return new b(this.denominator,this.numerator)}add(e){let t=e instanceof b?e:new b(w(e));return this.denominator.eq(t.denominator)?new b(this.numerator.add(t.numerator),this.denominator):new b(this.numerator.mul(t.denominator).add(t.numerator.mul(this.denominator)),this.denominator.mul(t.denominator))}sub(e){let t=e instanceof b?e:new b(w(e));return this.denominator.eq(t.denominator)?new b(this.numerator.sub(t.numerator),this.denominator):new b(this.numerator.mul(t.denominator).sub(t.numerator.mul(this.denominator)),this.denominator.mul(t.denominator))}mul(e){let t=e instanceof b?e:new b(w(e));return new b(this.numerator.mul(t.numerator),this.denominator.mul(t.denominator))}div(e){let t=e instanceof b?e:new b(w(e));return new b(this.numerator.mul(t.denominator),this.denominator.mul(t.numerator))}toSignificant(e,t={groupSeparator:""},o=1){Number.isInteger(e)||Y.logWithError(`${e} is not an integer.`),e<=0&&Y.logWithError(`${e} is not positive.`),W.set({precision:e+1,rounding:gt[o]});let i=new W(this.numerator.toString()).div(this.denominator.toString()).toSignificantDigits(e);return i.toFormat(i.decimalPlaces(),t)}toFixed(e,t={groupSeparator:""},o=1){return Number.isInteger(e)||Y.logWithError(`${e} is not an integer.`),e<0&&Y.logWithError(`${e} is negative.`),ge.DP=e,ge.RM=yt[o]||1,new ge(this.numerator.toString()).div(this.denominator.toString()).toFormat(e,t)}isZero(){return this.numerator.isZero()}};import ht from"bn.js";var sr=new b(new ht(100));var pr=h("Raydium_price");import{PublicKey as Pr}from"@solana/web3.js";import Ar from"bn.js";var We=new L(0),Tt=new L(1),Wr=new L(2),qr=new L(3),Ur=new L(5),xt=new L(10),Gr=new L(100),Hr=new L(1e3),jr=new L(1e4);import{PublicKey as $r}from"@solana/web3.js";import{MINT_SIZE as ro,TOKEN_PROGRAM_ID as oo,getTransferFeeConfig as io,unpackMint as so}from"@solana/spl-token";var ao=h("Raydium_accountInfo_util");import{PublicKey as bo}from"@solana/web3.js";import{TOKEN_PROGRAM_ID as yo}from"@solana/spl-token";import{PublicKey as s}from"@solana/web3.js";var Po=new s("EhhTKczWMGQt46ynNeRX1WfeagwwJd7ufHvCDjRxjo5Q"),wo=new s("CBuCnLe26faBpcBP2fktp4rp8abpcAnTWft6ZrP5Q4T"),Ao=new s("9KEPoZmtHUrBbhWN1v1KWLMkkvwY6WLtAVUCPRtRjP4z"),ko=new s("FarmqiPv5eAj3j1GMdMCMUGXqPUvmquZtMy86QH6rzhG"),So=new s("CLaimxFqjHzgTJtAGHU47NPhg6qrc5sCnpC4tBLyABQS"),Io=new s("srmqPvymJeFKQ4zGQed1GFppgkRHL9kaELCbyksJtPX"),Bo=new s("9xQeWvG816bUx9EPjHmaT23yvVM2ZWbrrpZb9PusVFin"),Lo=new s("675kPX9MHTjS2zt1qfr1NYHuzeLXfQM9H24wFSUt1Mp8"),Co=new s("5quBtoiQqxF9Jv6KYKctB59NT3gtJD2Y65kdnB1Uev3h"),Ro=new s("CDSr3ssLcRB6XYPJwAfFt18MZvEZp4LjHcvzBVZ45duo"),No=new s("CAMMCzo5YL8w4VFF8KVHrK22GGUsp5VTaW7grrKgrWqK"),Do=new s("LockrWmn6K5twhz3y9w1dQERbmgSaRkfnTeTKbpofwE"),Mo=new s("kN1kEznaF5Xbd8LYuqtEFcxzWSBk5Fv6ygX6SqEGJVy"),he=new s("CDSr3ssLcRB6XYPJwAfFt18MZvEZp4LjHcvzBVZ45duo"),_o=new s("routeUGWgWzqBWFcrCfv8tritsqukccJPu3q5GPP3xS"),Eo=new s("7YttLkHDoNj9wyDur5pM1ejNaAvT9X4eqaYcHQqtj2G5"),Ko=new s("6FJon3QE27qgPVggARueB22hLvoh22VzJpXv4rBEoSLF"),Oo=new s("CC12se5To1CdEuw7fDS27B7Geo5jJyL7t5UK2B44NgiH"),Fo=new s("9HzJyW1qZsEiSfMUf6L2jo3CcTKAyBmSyKdwQeYisHrC"),Vo=new s("DropEU8AvevN3UrXWXTMuz3rqnMczQVNjq3kcSdW2SQi"),vo=new s("CPMMoo8L3F4NbTegBCKVNunggL7H1ZpdTHKxQB5qKP1C"),Wo=new s("GpMZbSM2GgvTKHJirzeGfMFoaZ8UR2X7F4v8vHTvxFbL"),qo=new s("DNXgeM9EiiaAbaWvwjHj9fQQLAX5ZsfHyvmYUNRAdNC8"),Uo=new s("LockrWmn6K5twhz3y9w1dQERbmgSaRkfnTeTKbpofwE"),Go=new s("3f7GcQFG397GAaEnv51zR6tsTVihYRydnydDD1cXekxH"),Ho=new s("LanMV9sAd7wArD4vJFi2qDdfnVhFxYSUg6eADduJ3uj"),jo=new s("WLHv2UAZm6z4KyaaELi5pjdbJh6RESMva1Rnn8pJVVh"),zo=new s("DRay6fNdQ5J82H7xV6uq2aV3mNrUZ1J4PgSKsWgptcm6"),Qo=new s("5xqNaZXX5eUi4p5HU4oz9i5QnwRNT2y6oN7yyn4qENeq"),Yo=new s("4Bu96XjU84XjPDSpveTVf6LYGCkfW5FK7SNkREWcEfV4"),Xo=new s("6s1xP3hpbAfFoNtUNF8mfHsjr2Bd97JxFJRWLbL6aHuX");var Zo={OPEN_BOOK_PROGRAM:new s("EoTcMgcDRTJVZDMZWBoU6rhYHZfkNTVEAfz3uUJRcYGj"),SERUM_PROGRAM_ID_V3:new s("Ray1111111111111111111111111111111111111111"),AMM_V4:new s("DRaya7Kj3aMWQSy19kSjvmuwq9docCHofyP9kanQGaav"),AMM_STABLE:new s("DRayDdXc1NZQ9C3hRWmoSf8zK4iapgMnjdNZWrfwsP8m"),CLMM_PROGRAM_ID:new s("DRayAUgENGQBKVaX8owNhgzkEDyoHTGVEGHVJT1E9pfH"),CLMM_LOCK_PROGRAM_ID:new s("DRay25Usp3YJAi7beckgpGUC7mGJ2cR1AVPxhYfwVCUX"),CLMM_LOCK_AUTH_ID:new s("6Aoh8h2Lw2m5UGxYR8AdAL87jTWYeKoxM52mJRzfYwN"),CREATE_CPMM_POOL_PROGRAM:new s("DRaycpLY18LhpbydsBWbVJtxpNv9oXPgjRSfpF2bWpYb"),CREATE_CPMM_POOL_AUTH:new s("CXniRufdq5xL8t8jZAPxsPZDpuudwuJSPWnbcD5Y5Nxq"),CREATE_CPMM_POOL_FEE_ACC:new s("3oE58BKVt8KuYkGxx8zBojugnymWmBiyafWgMrnb6eYy"),LOCK_CPMM_PROGRAM:new s("DRay25Usp3YJAi7beckgpGUC7mGJ2cR1AVPxhYfwVCUX"),LOCK_CPMM_AUTH:new s("7qWVV8UY2bRJfDLP4s37YzBPKUkVB46DStYJBpYbQzu3"),UTIL1216:s.default,Router:new s("DRaybByLpbUL57LJARs3j8BitTxVfzBg351EaMr5UTCd"),FARM_PROGRAM_ID_V3:new s("DRayWyrLmEW5KEeqs8kdTMMaBabapqagaBC7KWpGtJeZ"),FARM_PROGRAM_ID_V4:new s("Ray1111111111111111111111111111111111111111"),FARM_PROGRAM_ID_V5:new s("DRayiCGSZgku1GTK6rXD6mVDdingXy6APAH1R6R5L2LC"),FARM_PROGRAM_ID_V6:new s("DRayzbYakXs45ELHkzH6vC3fuhQqTAnv5A68gdFuvZyZ"),LAUNCHPAD_PROGRAM:new s("DRay6fNdQ5J82H7xV6uq2aV3mNrUZ1J4PgSKsWgptcm6"),LAUNCHPAD_AUTH:new s("5xqNaZXX5eUi4p5HU4oz9i5QnwRNT2y6oN7yyn4qENeq"),LAUNCHPAD_PLATFORM:new s("2Jx4KTDrVSdWNazuGpcA8n3ZLTRGGBDxAWhuKe2Xcj2a"),LAUNCHPAD_CONFIG:new s("7ZR4zD7PYfY2XxoG1Gxcy2EgEeGYrpxrwzPuwdUBssEt"),FEE_DESTINATION_ID:new s("9y8ENuuZ3b19quffx9hQvRVygG5ky6snHfRvGpuSfeJy"),MODEL_DATA_PUBKEY:new s("Ray1111111111111111111111111111111111111111")};import ei from"bn.js";import{PublicKey as Pt,AddressLookupTableAccount as qe}from"@solana/web3.js";var wt={AcL1Vo8oy1ULiavEcjSUcwfBSForXMudcZvDZy5nzJkU:new qe({key:new Pt("AcL1Vo8oy1ULiavEcjSUcwfBSForXMudcZvDZy5nzJkU"),state:qe.deserialize(Buffer.from("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","base64"))})};import{PublicKey as Ti,sendAndConfirmTransaction as xi,SystemProgram as Ai,Transaction as ki,TransactionMessage as Ii,VersionedTransaction as Bi}from"@solana/web3.js";import Ci from"axios";import At from"bn.js";var Ki=new At(1e6);var fs=h("Raydium_amount"),bs=v(kt);var Z=i=>{var c=i,{address:n,programId:e,decimals:t}=c,o=ie(c,["address","programId","decimals"]);return k({chainId:101,address:pe(n).toBase58(),programId:e,logoURI:"",symbol:"",name:"",decimals:t,tags:[],extensions:o.extensions||{}},o)};import{PublicKey as R,SystemProgram as ja,SYSVAR_RENT_PUBKEY as za,TransactionInstruction as Kt}from"@solana/web3.js";import{ASSOCIATED_TOKEN_PROGRAM_ID as Ya,TOKEN_PROGRAM_ID as Xa}from"@solana/spl-token";import{PublicKey as Rt}from"@solana/web3.js";import He,{isBN as je}from"bn.js";import{bits as Fs,BitStructure as Vs,blob as St,Blob as vs,cstr as Ws,f32 as qs,f32be as Us,f64 as Gs,f64be as Hs,greedy as js,Layout as It,ns64 as zs,ns64be as Qs,nu64 as Ys,nu64be as Xs,offset as Zs,s16 as Js,s16be as $s,s24 as ea,s24be as ta,s32 as na,s32be as ra,s40 as oa,s40be as ia,s48 as sa,s48be as aa,s8 as ua,seq as Bt,struct as ca,Structure as Lt,u16 as la,u16be as ma,u24 as pa,u24be as da,u32 as fa,u32be as ba,u40 as ga,u40be as ya,u48 as ha,u48be as Ta,u8 as xa,UInt as Ct,union as Pa,Union as wa,unionLayoutDiscriminator as Aa,utf8 as ka}from"@solana/buffer-layout";var Te=It,Ue=Lt;var xe=Ct;var Ge=Bt;var Pe=St;var J=class extends Te{constructor(t,o,i){super(t,i);this.blob=Pe(t),this.signed=o}decode(t,o=0){let i=new He(this.blob.decode(t,o),10,"le");return this.signed?i.fromTwos(this.span*8).clone():i}encode(t,o,i=0){return typeof t=="number"&&(t=new He(t)),this.signed&&(t=t.toTwos(this.span*8)),this.blob.encode(t.toArrayLike(Buffer,"le",this.span),o,i)}};function T(n){return new xe(1,n)}function _(n){return new xe(4,n)}function r(n){return new J(8,!1,n)}function C(n){return new J(16,!1,n)}var we=class extends Te{constructor(t,o,i,c){super(t.span,c);this.layout=t,this.decoder=o,this.encoder=i}decode(t,o){return this.decoder(this.layout.decode(t,o))}encode(t,o,i){return this.layout.encode(this.encoder(t),o,i)}getSpan(t,o){return this.layout.getSpan(t,o)}};function m(n){return new we(Pe(32),e=>new Rt(e),e=>e.toBuffer(),n)}var Ae=class extends Ue{decode(e,t){return super.decode(e,t)}};function y(n,e,t){return new Ae(n,e,t)}function q(n,e,t){let o,i=typeof e=="number"?e:je(e)?e.toNumber():new Proxy(e,{get(c,d){if(!o){let p=Reflect.get(c,"count");o=je(p)?p.toNumber():p,Reflect.set(c,"count",o)}return Reflect.get(c,d)},set(c,d,p){return d==="count"&&(o=p),Reflect.set(c,d,p)}});return Ge(n,i,t)}var Nt=y([T("instruction"),r("amountIn"),r("minAmountOut")]),Dt=y([T("instruction"),r("maxAmountIn"),r("amountOut")]),va=y([T("instruction"),T("nonce")]),Mt=y([T("instruction"),T("nonce"),r("startTime")]),ze=y([r("status"),r("nonce"),r("maxOrder"),r("depth"),r("baseDecimal"),r("quoteDecimal"),r("state"),r("resetFlag"),r("minSize"),r("volMaxCutRatio"),r("amountWaveRatio"),r("baseLotSize"),r("quoteLotSize"),r("minPriceMultiplier"),r("maxPriceMultiplier"),r("systemDecimalValue"),r("minSeparateNumerator"),r("minSeparateDenominator"),r("tradeFeeNumerator"),r("tradeFeeDenominator"),r("pnlNumerator"),r("pnlDenominator"),r("swapFeeNumerator"),r("swapFeeDenominator"),r("baseNeedTakePnl"),r("quoteNeedTakePnl"),r("quoteTotalPnl"),r("baseTotalPnl"),r("poolOpenTime"),r("punishPcAmount"),r("punishCoinAmount"),r("orderbookToInitTime"),C("swapBaseInAmount"),C("swapQuoteOutAmount"),r("swapBase2QuoteFee"),C("swapQuoteInAmount"),C("swapBaseOutAmount"),r("swapQuote2BaseFee"),m("baseVault"),m("quoteVault"),m("baseMint"),m("quoteMint"),m("lpMint"),m("openOrders"),m("marketId"),m("marketProgramId"),m("targetOrders"),m("withdrawQueue"),m("lpVault"),m("owner"),r("lpReserve"),q(r(),3,"padding")]),Wa=y([r("accountType"),r("status"),r("nonce"),r("maxOrder"),r("depth"),r("baseDecimal"),r("quoteDecimal"),r("state"),r("resetFlag"),r("minSize"),r("volMaxCutRatio"),r("amountWaveRatio"),r("baseLotSize"),r("quoteLotSize"),r("minPriceMultiplier"),r("maxPriceMultiplier"),r("systemDecimalsValue"),r("abortTradeFactor"),r("priceTickMultiplier"),r("priceTick"),r("minSeparateNumerator"),r("minSeparateDenominator"),r("tradeFeeNumerator"),r("tradeFeeDenominator"),r("pnlNumerator"),r("pnlDenominator"),r("swapFeeNumerator"),r("swapFeeDenominator"),r("baseNeedTakePnl"),r("quoteNeedTakePnl"),r("quoteTotalPnl"),r("baseTotalPnl"),r("poolOpenTime"),r("punishPcAmount"),r("punishCoinAmount"),r("orderbookToInitTime"),C("swapBaseInAmount"),C("swapQuoteOutAmount"),C("swapQuoteInAmount"),C("swapBaseOutAmount"),r("swapQuote2BaseFee"),r("swapBase2QuoteFee"),m("baseVault"),m("quoteVault"),m("baseMint"),m("quoteMint"),m("lpMint"),m("modelDataAccount"),m("openOrders"),m("marketId"),m("marketProgramId"),m("targetOrders"),m("owner"),q(r(),64,"padding")]),_t=y([T("instruction"),r("baseAmountIn"),r("quoteAmountIn"),r("fixedSide"),r("otherAmountMin")]),Et=y([T("instruction"),r("lpAmount"),r("baseAmountMin"),r("quoteAmountMin")]);var qa=y([r("fee")]);var ou=h("Raydium_liquidity_instruction");function Qe({poolKeys:n}){let e=y([T("instruction"),T("simulateType")]),t=Buffer.alloc(e.span);e.encode({instruction:12,simulateType:0},t);let o=[P({pubkey:new R(n.id),isWritable:!1}),P({pubkey:new R(n.authority),isWritable:!1}),P({pubkey:new R(n.openOrders),isWritable:!1}),P({pubkey:new R(n.vault.A),isWritable:!1}),P({pubkey:new R(n.vault.B),isWritable:!1}),P({pubkey:new R(n.mintLp.address),isWritable:!1}),P({pubkey:new R(n.marketId),isWritable:!1}),P({pubkey:new R(n.marketEventQueue),isWritable:!1})];return{instruction:new Kt({programId:new R(n.programId),keys:o,data:t})}}import{PublicKey as Ot}from"@solana/web3.js";import Ye from"bn.js";var au=new Ye(25),uu=new Ye(1e4);var Ft=h("Raydium_liquidity_serum");function Xe({programId:n,marketId:e}){let t=[e.toBuffer()],o=0,i;for(;o<100;){try{let c=t.concat(Buffer.from([o]),Buffer.alloc(7));i=Ot.createProgramAddressSync(c,n)}catch(c){if(c instanceof TypeError)throw c;o++;continue}return{publicKey:i,nonce:o}}throw Ft.logWithError("unable to find a viable program address nonce","params",{programId:n,marketId:e}),new Error("unable to find a viable program address nonce")}var Vt=5e4,vt=y([r("x"),r("y"),r("price")]),Wt=y([r("accountType"),r("status"),r("multiplier"),r("validDataCount"),q(vt,Vt,"DataElement")]);function qt(n){let e=Wt.decode(n);return{accountType:e.accountType.toNumber(),status:e.status.toNumber(),multiplier:e.multiplier.toNumber(),validDataCount:e.validDataCount.toNumber(),DataElement:e.DataElement.map(t=>({x:t.x.toNumber(),y:t.y.toNumber(),price:t.price.toNumber()}))}}var $=class{constructor({connection:e,modelDataPubKey:t=he}){this._layoutData={accountType:0,status:0,multiplier:0,validDataCount:0,DataElement:[]};this.connection=e,this.modelDataPubKey=t}get stableModelData(){return this._layoutData}async initStableModelLayout(){if(this._layoutData.validDataCount===0&&this.connection){let e=await this.connection.getAccountInfo(this.modelDataPubKey);e&&(this._layoutData=qt(e==null?void 0:e.data))}}};var U=y([m("mint"),m("owner"),r("amount"),_("delegateOption"),m("delegate"),T("state"),_("isNativeOption"),r("isNative"),r("delegatedAmount"),_("closeAuthorityOption"),m("closeAuthority")]);import{Keypair as ku,PublicKey as Su}from"@solana/web3.js";import Lu from"bn.js";import{TOKEN_PROGRAM_ID as Nu}from"@solana/spl-token";var Mu=h("Raydium_Util");import{PublicKey as Vu,SystemProgram as Wu}from"@solana/web3.js";import Gu from"bn.js";import{createCloseAccountInstruction as Qu,createInitializeAccountInstruction as Yu,createTransferInstruction as Xu,TOKEN_PROGRAM_ID as Zu}from"@solana/spl-token";var Ze=y([_("mintAuthorityOption"),m("mintAuthority"),r("supply"),T("decimals"),T("isInitialized"),_("freezeAuthorityOption"),m("freezeAuthority")]);function Je({programId:n}){let{publicKey:e}=O([Buffer.from("amm_config_account_seed","utf-8")],n);return e}function E({name:n,programId:e,marketId:t}){let{publicKey:o}=O([e.toBuffer(),t.toBuffer(),Buffer.from(n,"utf-8")],e);return o}function Gt({programId:n,marketId:e}){let{publicKey:t}=O([n.toBuffer(),e.toBuffer(),Buffer.from("open_order_associated_seed","utf-8")],n);return t}function Ht({programId:n}){return O([Buffer.from([97,109,109,32,97,117,116,104,111,114,105,116,121])],n)}function Lc({version:n,marketVersion:e,marketId:t,baseMint:o,quoteMint:i,baseDecimals:c,quoteDecimals:d,programId:p,marketProgramId:x}){let l=E({name:"amm_associated_seed",programId:p,marketId:t}),f=E({name:"lp_mint_associated_seed",programId:p,marketId:t}),{publicKey:A,nonce:K}=Ht({programId:p}),D=E({name:"coin_vault_associated_seed",programId:p,marketId:t}),te=E({name:"pc_vault_associated_seed",programId:p,marketId:t}),ne=E({name:"temp_lp_token_associated_seed",programId:p,marketId:t}),re=Gt({programId:p,marketId:t}),oe=E({name:"target_associated_seed",programId:p,marketId:t}),j=E({name:"withdraw_associated_seed",programId:p,marketId:t}),{publicKey:Ie}=Xe({programId:x,marketId:t});return{id:l,baseMint:o,quoteMint:i,lpMint:f,baseDecimals:c,quoteDecimals:d,lpDecimals:c,version:n,programId:p,authority:A,nonce:K,baseVault:D,quoteVault:te,lpVault:ne,openOrders:re,targetOrders:oe,withdrawQueue:j,marketVersion:e,marketProgramId:x,marketId:t,marketAuthority:Ie,lookupTableAccount:H.default,configId:Je({programId:p})}}var ke;async function Cc({connection:n,poolKeysList:e,config:t,modelDataPubKey:o}){return e.find(c=>c.modelDataAccount)&&(ke||(ke=new $({connection:n,modelDataPubKey:o}),await ke.initStableModelLayout())),await Promise.all(e.map(async c=>{if(c.modelDataAccount){let d=Qe({poolKeys:c});return(await Me(n,[d.instruction],"GetPoolData")).map(l=>{let f=_e(l,"GetPoolData"),A=new G(I(f,"status")),K=Number(I(f,"coin_decimals")),D=Number(I(f,"pc_decimals")),te=Number(I(f,"lp_decimals")),ne=new G(I(f,"pool_coin_amount")),re=new G(I(f,"pool_pc_amount")),oe=new G(I(f,"pool_lp_supply")),j="0";try{j=I(f,"pool_open_time")}catch{}return{status:A,baseDecimals:K,quoteDecimals:D,lpDecimals:te,baseReserve:ne,quoteReserve:re,lpSupply:oe,startTime:new G(j)}})[0]}else{let[d,p,x,l]=await n.getMultipleAccountsInfo([new H(c.id),new H(c.vault.A),new H(c.vault.B),new H(c.mintLp.address)]);if(d===null)throw Error("fetch pool error");if(p===null)throw Error("fetch vaultAccA error");if(x===null)throw Error("fetch vaultAccB error");if(l===null)throw Error("fetch mintAccLp error");let f=ze.decode(d.data),A=U.decode(p.data),K=U.decode(x.data),D=Ze.decode(l.data);return{status:f.status,baseDecimals:f.baseDecimal.toNumber(),quoteDecimals:f.quoteDecimal.toNumber(),lpDecimals:D.decimals,baseReserve:A.amount.sub(f.baseNeedTakePnl),quoteReserve:K.amount.sub(f.quoteNeedTakePnl),lpSupply:f.lpReserve,startTime:f.poolOpenTime}}}))}var Se={volume:0,volumeQuote:0,volumeFee:0,apr:0,feeApr:0,priceMin:0,priceMax:0,rewardApr:[]},Rc=n=>{let e={},t=Ut.toBase58();return Object.keys(n).map(o=>{let i=n[o],[c,d]=[i.baseMint.toBase58(),i.quoteMint.toBase58()];e[o]={id:o,version:4,status:i.status.toNumber(),programId:i.programId.toBase58(),mintA:Z({address:c,programId:t,decimals:i.baseDecimal.toNumber()}),mintB:Z({address:d,programId:t,decimals:i.quoteDecimal.toNumber()}),rewardDefaultInfos:[],rewardDefaultPoolInfos:"Ecosystem",price:i.poolPrice.toNumber(),mintAmountA:new ee(i.mintAAmount.toString()).div(10**i.baseDecimal.toNumber()).toNumber(),mintAmountB:new ee(i.mintBAmount.toString()).div(10**i.quoteDecimal.toNumber()).toNumber(),baseReserve:i.baseReserve,quoteReserve:i.quoteReserve,feeRate:new ee(i.tradeFeeNumerator.toString()).div(i.tradeFeeDenominator.toString()).toNumber(),openTime:i.poolOpenTime.toString(),tvl:0,day:Se,week:Se,month:Se,pooltype:[],farmUpcomingCount:0,farmOngoingCount:0,farmFinishedCount:0,type:"Standard",marketId:i.marketId.toBase58(),configId:Je({programId:i.programId}).toBase58(),lpPrice:0,lpAmount:new ee(i.lpReserve.toString()).div(10**Math.min(i.baseDecimal.toNumber(),i.quoteDecimal.toNumber())).toNumber(),lpMint:Z({address:i.lpMint.toBase58(),programId:t,decimals:Math.min(i.baseDecimal.toNumber(),i.quoteDecimal.toNumber())}),burnPercent:0}}),e};export{Cc as fetchMultipleInfo,Je as getAssociatedConfigId,Gt as getAssociatedOpenOrders,Lc as getAssociatedPoolKeys,Ht as getLiquidityAssociatedAuthority,E as getLiquidityAssociatedId,Rc as toAmmComputePoolInfo};
//# sourceMappingURL=utils.mjs.map