var pt=Object.create;var K=Object.defineProperty,dt=Object.defineProperties,ft=Object.getOwnPropertyDescriptor,gt=Object.getOwnPropertyDescriptors,yt=Object.getOwnPropertyNames,ke=Object.getOwnPropertySymbols,bt=Object.getPrototypeOf,Ae=Object.prototype.hasOwnProperty,ht=Object.prototype.propertyIsEnumerable;var Se=(n,e,t)=>e in n?K(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,A=(n,e)=>{for(var t in e||(e={}))Ae.call(e,t)&&Se(n,t,e[t]);if(ke)for(var t of ke(e))ht.call(e,t)&&Se(n,t,e[t]);return n},B=(n,e)=>dt(n,gt(e));var Tt=(n,e)=>{for(var t in e)K(n,t,{get:e[t],enumerable:!0})},Ie=(n,e,t,i)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of yt(e))!Ae.call(n,s)&&s!==t&&K(n,s,{get:()=>e[s],enumerable:!(i=ft(e,s))||i.enumerable});return n};var x=(n,e,t)=>(t=n!=null?pt(bt(n)):{},Ie(e||!n||!n.__esModule?K(t,"default",{value:n,enumerable:!0}):t,n)),xt=n=>Ie(K({},"__esModule",{value:!0}),n);var Gt={};Tt(Gt,{createPoolV4InstructionV2:()=>Wt,makeAMMSwapInstruction:()=>Kt,makeAddLiquidityInstruction:()=>Ft,makeInitPoolInstructionV4:()=>qt,makeSimulatePoolInfoInstruction:()=>Ut,makeSwapFixedInInstruction:()=>Ze,makeSwapFixedOutInstruction:()=>Xe,removeLiquidityInstruction:()=>Vt,simulatePoolInfoInstruction:()=>vt});module.exports=xt(Gt);var l=require("@solana/web3.js"),M=require("@solana/spl-token");var Pt=require("@solana/web3.js");var q=require("lodash");var te=class{constructor(e){this.logLevel=e.logLevel!==void 0?e.logLevel:0,this.name=e.name}set level(e){this.logLevel=e}get time(){return Date.now().toString()}get moduleName(){return this.name}isLogLevel(e){return e<=this.logLevel}error(...e){return this.isLogLevel(0)?(console.error(this.time,this.name,"sdk logger error",...e),this):this}logWithError(...e){let t=e.map(i=>typeof i=="object"?JSON.stringify(i):i).join(", ");throw new Error(t)}warning(...e){return this.isLogLevel(1)?(console.warn(this.time,this.name,"sdk logger warning",...e),this):this}info(...e){return this.isLogLevel(2)?(console.info(this.time,this.name,"sdk logger info",...e),this):this}debug(...e){return this.isLogLevel(3)?(console.debug(this.time,this.name,"sdk logger debug",...e),this):this}},Be={},wt={};function w(n){let e=(0,q.get)(Be,n);if(!e){let t=(0,q.get)(wt,n);e=new te({name:n,logLevel:t}),(0,q.set)(Be,n,e)}return e}var J=require("@solana/spl-token"),Xt=w("Raydium_accountInfo_util");var I=x(require("bn.js")),Rt=x(require("decimal.js"));var _e=x(require("big.js")),j=x(require("bn.js"));var Le=x(require("toformat")),kt=Le.default,U=kt;var G=x(require("big.js")),Re=x(require("bn.js")),Me=x(require("decimal.js-light"));var E=x(require("bn.js"));var Ce=9007199254740991;function y(n){let e=w("Raydium_parseBigNumberish");if(n instanceof E.default)return n;if(typeof n=="string"){if(n.match(/^-?[0-9]+$/))return new E.default(n);e.logWithError(`invalid BigNumberish string: ${n}`)}return typeof n=="number"?(n%1&&e.logWithError(`BigNumberish number underflow: ${n}`),(n>=Ce||n<=-Ce)&&e.logWithError(`BigNumberish number overflow: ${n}`),new E.default(String(n))):typeof n=="bigint"?new E.default(n.toString()):(e.error(`invalid BigNumberish value: ${n}`),new E.default(0))}var Q=w("module/fraction"),re=U(G.default),H=U(Me.default),At={[0]:H.ROUND_DOWN,[1]:H.ROUND_HALF_UP,[2]:H.ROUND_UP},It={[0]:G.default.roundDown,[1]:G.default.roundHalfUp,[2]:G.default.roundUp},d=class{constructor(e,t=new Re.default(1)){this.numerator=y(e),this.denominator=y(t)}get quotient(){return this.numerator.div(this.denominator)}invert(){return new d(this.denominator,this.numerator)}add(e){let t=e instanceof d?e:new d(y(e));return this.denominator.eq(t.denominator)?new d(this.numerator.add(t.numerator),this.denominator):new d(this.numerator.mul(t.denominator).add(t.numerator.mul(this.denominator)),this.denominator.mul(t.denominator))}sub(e){let t=e instanceof d?e:new d(y(e));return this.denominator.eq(t.denominator)?new d(this.numerator.sub(t.numerator),this.denominator):new d(this.numerator.mul(t.denominator).sub(t.numerator.mul(this.denominator)),this.denominator.mul(t.denominator))}mul(e){let t=e instanceof d?e:new d(y(e));return new d(this.numerator.mul(t.numerator),this.denominator.mul(t.denominator))}div(e){let t=e instanceof d?e:new d(y(e));return new d(this.numerator.mul(t.denominator),this.denominator.mul(t.numerator))}toSignificant(e,t={groupSeparator:""},i=1){Number.isInteger(e)||Q.logWithError(`${e} is not an integer.`),e<=0&&Q.logWithError(`${e} is not positive.`),H.set({precision:e+1,rounding:At[i]});let s=new H(this.numerator.toString()).div(this.denominator.toString()).toSignificantDigits(e);return s.toFormat(s.decimalPlaces(),t)}toFixed(e,t={groupSeparator:""},i=1){return Number.isInteger(e)||Q.logWithError(`${e} is not an integer.`),e<0&&Q.logWithError(`${e} is negative.`),re.DP=e,re.RM=It[i]||1,new re(this.numerator.toString()).div(this.denominator.toString()).toFormat(e,t)}isZero(){return this.numerator.isZero()}};var Bt=w("Raydium_amount"),De=U(_e.default);function Lt(n,e){let t="0",i="0";if(n.includes(".")){let s=n.split(".");s.length===2?([t,i]=s,i=i.padEnd(e,"0")):Bt.logWithError(`invalid number string, num: ${n}`)}else t=n;return[t,i.slice(0,e)||i]}var L=class extends d{constructor(t,i,s=!0,g){let u=new j.default(0),b=oe.pow(new j.default(t.decimals));if(s)u=y(i);else{let m=new j.default(0),k=new j.default(0);if(typeof i=="string"||typeof i=="number"||typeof i=="bigint"){let[S,D]=Lt(i.toString(),t.decimals);m=y(S),k=y(D)}m=m.mul(b),u=m.add(k)}super(u,b);this.logger=w(g||"TokenAmount"),this.token=t}get raw(){return this.numerator}isZero(){return this.raw.isZero()}gt(t){return this.token.equals(t.token)||this.logger.logWithError("gt token not equals"),this.raw.gt(t.raw)}lt(t){return this.token.equals(t.token)||this.logger.logWithError("lt token not equals"),this.raw.lt(t.raw)}add(t){return this.token.equals(t.token)||this.logger.logWithError("add token not equals"),new L(this.token,this.raw.add(t.raw))}subtract(t){return this.token.equals(t.token)||this.logger.logWithError("sub token not equals"),new L(this.token,this.raw.sub(t.raw))}toSignificant(t=this.token.decimals,i,s=0){return super.toSignificant(t,i,s)}toFixed(t=this.token.decimals,i,s=0){return t>this.token.decimals&&this.logger.logWithError("decimals overflow"),super.toFixed(t,i,s)}toExact(t={groupSeparator:""}){return De.DP=this.token.decimals,new De(this.numerator.toString()).div(this.denominator.toString()).toFormat(t)}};var Ne=require("@solana/web3.js"),ie=require("@solana/spl-token"),Oe={chainId:101,address:Ne.PublicKey.default.toBase58(),programId:ie.TOKEN_PROGRAM_ID.toBase58(),decimals:9,symbol:"SOL",name:"solana",logoURI:"https://img-v1.raydium.io/icon/So11111111111111111111111111111111111111112.png",tags:[],priority:2,type:"raydium",extensions:{coingeckoId:"solana"}},_={chainId:101,address:"So11111111111111111111111111111111111111112",programId:ie.TOKEN_PROGRAM_ID.toBase58(),decimals:9,symbol:"WSOL",name:"Wrapped SOL",logoURI:"https://img-v1.raydium.io/icon/So11111111111111111111111111111111111111112.png",tags:[],priority:2,type:"raydium",extensions:{coingeckoId:"solana"}};var Z=require("@solana/web3.js");var f=require("@solana/web3.js"),Ee=require("@solana/spl-token");function r({pubkey:n,isSigner:e=!1,isWritable:t=!0}){return{pubkey:n,isWritable:t,isSigner:e}}var Pn=[r({pubkey:Ee.TOKEN_PROGRAM_ID,isWritable:!1}),r({pubkey:f.SystemProgram.programId,isWritable:!1}),r({pubkey:f.SYSVAR_RENT_PUBKEY,isWritable:!1})];function Fe({publicKey:n,transformSol:e}){let t=se(n.toString());if(t instanceof f.PublicKey)return e&&t.equals(z)?ne:t;if(e&&t.toString()===z.toBase58())return ne;if(typeof t=="string"){if(t===f.PublicKey.default.toBase58())return f.PublicKey.default;try{return new f.PublicKey(t)}catch{throw new Error("invalid public key")}}throw new Error("invalid public key")}function se(n){try{return new f.PublicKey(n)}catch{return n}}var kn=new f.PublicKey("MemoSq4gqABAXKb96qnH8TysNcWxMyWCqXgDLGmfcHr"),Sn=new f.PublicKey("MemoSq4gqABAXKb96qnH8TysNcWxMyWCqXgDLGmfcHr"),Ve=new f.PublicKey("SysvarRent111111111111111111111111111111111"),An=new f.PublicKey("SysvarC1ock11111111111111111111111111111111"),In=new f.PublicKey("metaqbxxUerdq28cj1RbAWkYQm3ybzjb6a8bt518x1s"),Bn=new f.PublicKey("Sysvar1nstructions1111111111111111111111111"),Ln=f.SystemProgram.programId,Cn=new f.PublicKey("4k3Dyjzvzp8eMZWUXbBCjEvwSkkk59S5iCNLY3QrkX6R"),Rn=new f.PublicKey("Ea5SjE2Y6yvCeW5dYTn7PYMuW5ikXkvbGdcmSnXeaLjS"),Mn=new f.PublicKey("SRMuApVNdxXokk5GT7XD5cUUgXMBCoAz2LHeuAoKWRt"),Dn=new f.PublicKey("EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v"),_n=new f.PublicKey("Es9vMFrzaCERmJfrF4H2FYD4KCoNkY11McCe8BenwNYB"),Nn=new f.PublicKey("mSoLzYCxHdYgdzU16g5QSh3i5K3z3KZK7ytfqcJm7So"),On=new f.PublicKey("7dHbWXmci3dT8UFYWYZweBLXgycu7Y3iL6trKn1Y7ARj"),En=new f.PublicKey("USDH1SM1ojwWUga67PGrgFWUHibbjqMvuMaDkRJTgkX"),Fn=new f.PublicKey("NRVwhjBQiUPYtfDT5zRBVJajzFQHaBUNtC7SNVvqRFa"),Vn=new f.PublicKey("ANAxByE6G2WjFp7A4NqtWYXb3mgruyzZYg3spfxe6Lbo"),Wn=new f.PublicKey("7vfCXTUXx5WJV5JADk17DUJ4ksgau7utNKj4b963voxs"),ne=new f.PublicKey("So11111111111111111111111111111111111111112"),z=f.PublicKey.default;var ae=class{constructor({mint:e,decimals:t,symbol:i,name:s,skipMint:g=!1,isToken2022:u=!1}){if(e===z.toBase58()||e instanceof Z.PublicKey&&z.equals(e)){this.decimals=_.decimals,this.symbol=_.symbol,this.name=_.name,this.mint=new Z.PublicKey(_.address),this.isToken2022=!1;return}this.decimals=t,this.symbol=i||e.toString().substring(0,6),this.name=s||e.toString().substring(0,6),this.mint=g?Z.PublicKey.default:Fe({publicKey:e}),this.isToken2022=u}equals(e){return this===e?!0:this.mint.equals(e.mint)}},N=ae;N.WSOL=new ae(B(A({},_),{mint:_.address}));var ue=class{constructor({decimals:e,symbol:t="UNKNOWN",name:i="UNKNOWN"}){this.decimals=e,this.symbol=t,this.name=i}equals(e){return this===e}},X=ue;X.SOL=new ue(Oe);var ve=x(require("bn.js"));var We=new d(new ve.default(100)),F=class extends d{toSignificant(e=5,t,i){return this.mul(We).toSignificant(e,t,i)}toFixed(e=2,t,i){return this.mul(We).toFixed(e,t,i)}};var Ct=w("Raydium_price"),C=class extends d{constructor(t){let{baseToken:i,quoteToken:s,numerator:g,denominator:u}=t;super(g,u);this.baseToken=i,this.quoteToken=s,this.scalar=new d(ce(i.decimals),ce(s.decimals))}get raw(){return new d(this.numerator,this.denominator)}get adjusted(){return super.mul(this.scalar)}invert(){return new C({baseToken:this.quoteToken,quoteToken:this.baseToken,denominator:this.numerator,numerator:this.denominator})}mul(t){this.quoteToken!==t.baseToken&&Ct.logWithError("mul token not equals");let i=super.mul(t);return new C({baseToken:this.baseToken,quoteToken:t.quoteToken,denominator:i.denominator,numerator:i.numerator})}toSignificant(t=this.quoteToken.decimals,i,s){return this.adjusted.toSignificant(t,i,s)}toFixed(t=this.quoteToken.decimals,i,s){return this.adjusted.toFixed(t,i,s)}};var le=new I.default(0),Ke=new I.default(1),Sr=new I.default(2),Ar=new I.default(3),Ir=new I.default(5),oe=new I.default(10),Br=new I.default(100),Lr=new I.default(1e3),Cr=new I.default(1e4);function ce(n){return oe.pow(y(n))}var Dt=require("@solana/web3.js"),_t=require("@solana/spl-token");var V=require("@solana/web3.js");var $={CreateAccount:"CreateAccount",InitAccount:"InitAccount",CreateATA:"CreateATA",CloseAccount:"CloseAccount",TransferAmount:"TransferAmount",InitMint:"InitMint",MintTo:"MintTo",InitMarket:"InitMarket",Util1216OwnerClaim:"Util1216OwnerClaim",SetComputeUnitPrice:"SetComputeUnitPrice",SetComputeUnitLimit:"SetComputeUnitLimit",ClmmCreatePool:"ClmmCreatePool",ClmmOpenPosition:"ClmmOpenPosition",ClmmIncreasePosition:"ClmmIncreasePosition",ClmmDecreasePosition:"ClmmDecreasePosition",ClmmClosePosition:"ClmmClosePosition",ClmmSwapBaseIn:"ClmmSwapBaseIn",ClmmSwapBaseOut:"ClmmSwapBaseOut",ClmmInitReward:"ClmmInitReward",ClmmSetReward:"ClmmSetReward",ClmmCollectReward:"ClmmCollectReward",ClmmLockPosition:"ClmmLockPosition",ClmmHarvestLockPosition:"ClmmHarvestLockPosition",AmmV4Swap:"AmmV4Swap",AmmV4AddLiquidity:"AmmV4AddLiquidity",AmmV4RemoveLiquidity:"AmmV4RemoveLiquidity",AmmV4SimulatePoolInfo:"AmmV4SimulatePoolInfo",AmmV4SwapBaseIn:"AmmV4SwapBaseIn",AmmV4SwapBaseOut:"AmmV4SwapBaseOut",AmmV4CreatePool:"AmmV4CreatePool",AmmV4InitPool:"AmmV4InitPool",AmmV5AddLiquidity:"AmmV5AddLiquidity",AmmV5RemoveLiquidity:"AmmV5RemoveLiquidity",AmmV5SimulatePoolInfo:"AmmV5SimulatePoolInfo",AmmV5SwapBaseIn:"AmmV5SwapBaseIn",AmmV5SwapBaseOut:"AmmV5SwapBaseOut",RouteSwap:"RouteSwap",RouteSwap1:"RouteSwap1",RouteSwap2:"RouteSwap2",FarmV3Deposit:"FarmV3Deposit",FarmV3Withdraw:"FarmV3Withdraw",FarmV3CreateLedger:"FarmV3CreateLedger",FarmV4Withdraw:"FarmV4Withdraw",FarmV5Deposit:"FarmV5Deposit",FarmV5Withdraw:"FarmV5Withdraw",FarmV5CreateLedger:"FarmV5CreateLedger",FarmV6Deposit:"FarmV6Deposit",FarmV6Withdraw:"FarmV6Withdraw",FarmV6Create:"FarmV6Create",FarmV6Restart:"FarmV6Restart",FarmV6CreatorAddReward:"FarmV6CreatorAddReward",FarmV6CreatorWithdraw:"FarmV6CreatorWithdraw",CpmmCreatePool:"CpmmCreatePool",CpmmAddLiquidity:"CpmmAddLiquidity",CpmmWithdrawLiquidity:"CpmmWithdrawLiquidity",CpmmSwapBaseIn:"CpmmSwapBaseIn",CpmmSwapBaseOut:"CpmmSwapBaseOut",CpmmLockLp:"CpmmLockLp",CpmmCollectLockFee:"CpmmCollectLockFee",TransferTip:"TransferTip"};var Mt=require("@solana/spl-token"),qr=w("Raydium_txUtil");var a=require("@solana/web3.js"),zr=new a.PublicKey("EhhTKczWMGQt46ynNeRX1WfeagwwJd7ufHvCDjRxjo5Q"),Yr=new a.PublicKey("CBuCnLe26faBpcBP2fktp4rp8abpcAnTWft6ZrP5Q4T"),Jr=new a.PublicKey("9KEPoZmtHUrBbhWN1v1KWLMkkvwY6WLtAVUCPRtRjP4z"),Qr=new a.PublicKey("FarmqiPv5eAj3j1GMdMCMUGXqPUvmquZtMy86QH6rzhG"),Zr=new a.PublicKey("CLaimxFqjHzgTJtAGHU47NPhg6qrc5sCnpC4tBLyABQS"),Xr=new a.PublicKey("srmqPvymJeFKQ4zGQed1GFppgkRHL9kaELCbyksJtPX"),$r=new a.PublicKey("9xQeWvG816bUx9EPjHmaT23yvVM2ZWbrrpZb9PusVFin"),eo=new a.PublicKey("675kPX9MHTjS2zt1qfr1NYHuzeLXfQM9H24wFSUt1Mp8"),to=new a.PublicKey("5quBtoiQqxF9Jv6KYKctB59NT3gtJD2Y65kdnB1Uev3h"),no=new a.PublicKey("CDSr3ssLcRB6XYPJwAfFt18MZvEZp4LjHcvzBVZ45duo"),ro=new a.PublicKey("CAMMCzo5YL8w4VFF8KVHrK22GGUsp5VTaW7grrKgrWqK"),oo=new a.PublicKey("LockrWmn6K5twhz3y9w1dQERbmgSaRkfnTeTKbpofwE"),io=new a.PublicKey("kN1kEznaF5Xbd8LYuqtEFcxzWSBk5Fv6ygX6SqEGJVy"),Y=new a.PublicKey("CDSr3ssLcRB6XYPJwAfFt18MZvEZp4LjHcvzBVZ45duo"),so=new a.PublicKey("routeUGWgWzqBWFcrCfv8tritsqukccJPu3q5GPP3xS"),ao=new a.PublicKey("7YttLkHDoNj9wyDur5pM1ejNaAvT9X4eqaYcHQqtj2G5"),uo=new a.PublicKey("6FJon3QE27qgPVggARueB22hLvoh22VzJpXv4rBEoSLF"),co=new a.PublicKey("CC12se5To1CdEuw7fDS27B7Geo5jJyL7t5UK2B44NgiH"),lo=new a.PublicKey("9HzJyW1qZsEiSfMUf6L2jo3CcTKAyBmSyKdwQeYisHrC"),mo=new a.PublicKey("DropEU8AvevN3UrXWXTMuz3rqnMczQVNjq3kcSdW2SQi"),po=new a.PublicKey("CPMMoo8L3F4NbTegBCKVNunggL7H1ZpdTHKxQB5qKP1C"),fo=new a.PublicKey("GpMZbSM2GgvTKHJirzeGfMFoaZ8UR2X7F4v8vHTvxFbL"),go=new a.PublicKey("DNXgeM9EiiaAbaWvwjHj9fQQLAX5ZsfHyvmYUNRAdNC8"),yo=new a.PublicKey("LockrWmn6K5twhz3y9w1dQERbmgSaRkfnTeTKbpofwE"),bo=new a.PublicKey("3f7GcQFG397GAaEnv51zR6tsTVihYRydnydDD1cXekxH"),ho=new a.PublicKey("LanMV9sAd7wArD4vJFi2qDdfnVhFxYSUg6eADduJ3uj"),To=new a.PublicKey("WLHv2UAZm6z4KyaaELi5pjdbJh6RESMva1Rnn8pJVVh"),xo=new a.PublicKey("DRay6fNdQ5J82H7xV6uq2aV3mNrUZ1J4PgSKsWgptcm6"),wo=new a.PublicKey("5xqNaZXX5eUi4p5HU4oz9i5QnwRNT2y6oN7yyn4qENeq"),Po=new a.PublicKey("4Bu96XjU84XjPDSpveTVf6LYGCkfW5FK7SNkREWcEfV4"),ko=new a.PublicKey("6s1xP3hpbAfFoNtUNF8mfHsjr2Bd97JxFJRWLbL6aHuX");var So={OPEN_BOOK_PROGRAM:new a.PublicKey("EoTcMgcDRTJVZDMZWBoU6rhYHZfkNTVEAfz3uUJRcYGj"),SERUM_PROGRAM_ID_V3:new a.PublicKey("Ray1111111111111111111111111111111111111111"),AMM_V4:new a.PublicKey("DRaya7Kj3aMWQSy19kSjvmuwq9docCHofyP9kanQGaav"),AMM_STABLE:new a.PublicKey("DRayDdXc1NZQ9C3hRWmoSf8zK4iapgMnjdNZWrfwsP8m"),CLMM_PROGRAM_ID:new a.PublicKey("DRayAUgENGQBKVaX8owNhgzkEDyoHTGVEGHVJT1E9pfH"),CLMM_LOCK_PROGRAM_ID:new a.PublicKey("DRay25Usp3YJAi7beckgpGUC7mGJ2cR1AVPxhYfwVCUX"),CLMM_LOCK_AUTH_ID:new a.PublicKey("6Aoh8h2Lw2m5UGxYR8AdAL87jTWYeKoxM52mJRzfYwN"),CREATE_CPMM_POOL_PROGRAM:new a.PublicKey("DRaycpLY18LhpbydsBWbVJtxpNv9oXPgjRSfpF2bWpYb"),CREATE_CPMM_POOL_AUTH:new a.PublicKey("CXniRufdq5xL8t8jZAPxsPZDpuudwuJSPWnbcD5Y5Nxq"),CREATE_CPMM_POOL_FEE_ACC:new a.PublicKey("3oE58BKVt8KuYkGxx8zBojugnymWmBiyafWgMrnb6eYy"),LOCK_CPMM_PROGRAM:new a.PublicKey("DRay25Usp3YJAi7beckgpGUC7mGJ2cR1AVPxhYfwVCUX"),LOCK_CPMM_AUTH:new a.PublicKey("7qWVV8UY2bRJfDLP4s37YzBPKUkVB46DStYJBpYbQzu3"),UTIL1216:a.PublicKey.default,Router:new a.PublicKey("DRaybByLpbUL57LJARs3j8BitTxVfzBg351EaMr5UTCd"),FARM_PROGRAM_ID_V3:new a.PublicKey("DRayWyrLmEW5KEeqs8kdTMMaBabapqagaBC7KWpGtJeZ"),FARM_PROGRAM_ID_V4:new a.PublicKey("Ray1111111111111111111111111111111111111111"),FARM_PROGRAM_ID_V5:new a.PublicKey("DRayiCGSZgku1GTK6rXD6mVDdingXy6APAH1R6R5L2LC"),FARM_PROGRAM_ID_V6:new a.PublicKey("DRayzbYakXs45ELHkzH6vC3fuhQqTAnv5A68gdFuvZyZ"),LAUNCHPAD_PROGRAM:new a.PublicKey("DRay6fNdQ5J82H7xV6uq2aV3mNrUZ1J4PgSKsWgptcm6"),LAUNCHPAD_AUTH:new a.PublicKey("5xqNaZXX5eUi4p5HU4oz9i5QnwRNT2y6oN7yyn4qENeq"),LAUNCHPAD_PLATFORM:new a.PublicKey("2Jx4KTDrVSdWNazuGpcA8n3ZLTRGGBDxAWhuKe2Xcj2a"),LAUNCHPAD_CONFIG:new a.PublicKey("7ZR4zD7PYfY2XxoG1Gxcy2EgEeGYrpxrwzPuwdUBssEt"),FEE_DESTINATION_ID:new a.PublicKey("9y8ENuuZ3b19quffx9hQvRVygG5ky6snHfRvGpuSfeJy"),MODEL_DATA_PUBKEY:new a.PublicKey("Ray1111111111111111111111111111111111111111")};var Nt=x(require("bn.js"));var qe=require("@solana/web3.js");var W=require("@solana/web3.js"),Ot=x(require("axios"));var Ue=require("@solana/web3.js"),Ge=x(require("bn.js"));function Et(n){return typeof n=="object"&&n!==null&&![N,L,Ue.PublicKey,d,Ge.default,C,F].some(e=>typeof e=="object"&&n instanceof e)}function O(n){return typeof n=="string"?se(n):Array.isArray(n)?n.map(e=>O(e)):Et(n)?Object.fromEntries(Object.entries(n).map(([e,t])=>[e,O(t)])):n}var He=x(require("bn.js")),ri=new He.default(1e6);var Je=require("@solana/web3.js"),v=x(require("bn.js"));var c=require("@solana/buffer-layout"),me=c.Layout,je=c.Structure;var ze=c.UInt;var Ye=c.seq;var pe=c.blob;var ee=class extends me{constructor(t,i,s){super(t,s);this.blob=pe(t),this.signed=i}decode(t,i=0){let s=new v.default(this.blob.decode(t,i),10,"le");return this.signed?s.fromTwos(this.span*8).clone():s}encode(t,i,s=0){return typeof t=="number"&&(t=new v.default(t)),this.signed&&(t=t.toTwos(this.span*8)),this.blob.encode(t.toArrayLike(Buffer,"le",this.span),i,s)}};function T(n){return new ze(1,n)}function o(n){return new ee(8,!1,n)}function R(n){return new ee(16,!1,n)}var de=class extends me{constructor(t,i,s,g){super(t.span,g);this.layout=t,this.decoder=i,this.encoder=s}decode(t,i){return this.decoder(this.layout.decode(t,i))}encode(t,i,s){return this.layout.encode(this.encoder(t),i,s)}getSpan(t,i){return this.layout.getSpan(t,i)}};function h(n){return new de(pe(32),e=>new Je.PublicKey(e),e=>e.toBuffer(),n)}var fe=class extends je{decode(e,t){return super.decode(e,t)}};function P(n,e,t){return new fe(n,e,t)}function ge(n,e,t){let i,s=typeof e=="number"?e:(0,v.isBN)(e)?e.toNumber():new Proxy(e,{get(g,u){if(!i){let b=Reflect.get(g,"count");i=(0,v.isBN)(b)?b.toNumber():b,Reflect.set(g,"count",i)}return Reflect.get(g,u)},set(g,u,b){return u==="count"&&(i=b),Reflect.set(g,u,b)}});return Ye(n,s,t)}var ye=P([T("instruction"),o("amountIn"),o("minAmountOut")]),be=P([T("instruction"),o("maxAmountIn"),o("amountOut")]),Fi=P([T("instruction"),T("nonce")]),he=P([T("instruction"),T("nonce"),o("startTime")]),Vi=P([o("status"),o("nonce"),o("maxOrder"),o("depth"),o("baseDecimal"),o("quoteDecimal"),o("state"),o("resetFlag"),o("minSize"),o("volMaxCutRatio"),o("amountWaveRatio"),o("baseLotSize"),o("quoteLotSize"),o("minPriceMultiplier"),o("maxPriceMultiplier"),o("systemDecimalValue"),o("minSeparateNumerator"),o("minSeparateDenominator"),o("tradeFeeNumerator"),o("tradeFeeDenominator"),o("pnlNumerator"),o("pnlDenominator"),o("swapFeeNumerator"),o("swapFeeDenominator"),o("baseNeedTakePnl"),o("quoteNeedTakePnl"),o("quoteTotalPnl"),o("baseTotalPnl"),o("poolOpenTime"),o("punishPcAmount"),o("punishCoinAmount"),o("orderbookToInitTime"),R("swapBaseInAmount"),R("swapQuoteOutAmount"),o("swapBase2QuoteFee"),R("swapQuoteInAmount"),R("swapBaseOutAmount"),o("swapQuote2BaseFee"),h("baseVault"),h("quoteVault"),h("baseMint"),h("quoteMint"),h("lpMint"),h("openOrders"),h("marketId"),h("marketProgramId"),h("targetOrders"),h("withdrawQueue"),h("lpVault"),h("owner"),o("lpReserve"),ge(o(),3,"padding")]),Wi=P([o("accountType"),o("status"),o("nonce"),o("maxOrder"),o("depth"),o("baseDecimal"),o("quoteDecimal"),o("state"),o("resetFlag"),o("minSize"),o("volMaxCutRatio"),o("amountWaveRatio"),o("baseLotSize"),o("quoteLotSize"),o("minPriceMultiplier"),o("maxPriceMultiplier"),o("systemDecimalsValue"),o("abortTradeFactor"),o("priceTickMultiplier"),o("priceTick"),o("minSeparateNumerator"),o("minSeparateDenominator"),o("tradeFeeNumerator"),o("tradeFeeDenominator"),o("pnlNumerator"),o("pnlDenominator"),o("swapFeeNumerator"),o("swapFeeDenominator"),o("baseNeedTakePnl"),o("quoteNeedTakePnl"),o("quoteTotalPnl"),o("baseTotalPnl"),o("poolOpenTime"),o("punishPcAmount"),o("punishCoinAmount"),o("orderbookToInitTime"),R("swapBaseInAmount"),R("swapQuoteOutAmount"),R("swapQuoteInAmount"),R("swapBaseOutAmount"),o("swapQuote2BaseFee"),o("swapBase2QuoteFee"),h("baseVault"),h("quoteVault"),h("baseMint"),h("quoteMint"),h("lpMint"),h("modelDataAccount"),h("openOrders"),h("marketId"),h("marketProgramId"),h("targetOrders"),h("owner"),ge(o(),64,"padding")]),Te=P([T("instruction"),o("baseAmountIn"),o("quoteAmountIn"),o("fixedSide"),o("otherAmountMin")]),xe=P([T("instruction"),o("lpAmount"),o("baseAmountMin"),o("quoteAmountMin")]);var vi=P([o("fee")]);var Qe=w("Raydium_liquidity_instruction");function Ft(n){let{poolInfo:e,poolKeys:t,userKeys:i,baseAmountIn:s,quoteAmountIn:g,fixedSide:u,otherAmountMin:b,modelDataPubKey:m=Y}=n,k=Buffer.alloc(Te.span);Te.encode({instruction:3,baseAmountIn:y(s),quoteAmountIn:y(g),otherAmountMin:y(b),fixedSide:u==="base"?le:Ke},k);let S=[r({pubkey:M.TOKEN_PROGRAM_ID,isWritable:!1}),r({pubkey:new l.PublicKey(e.id)}),r({pubkey:new l.PublicKey(t.authority),isWritable:!1}),r({pubkey:new l.PublicKey(t.openOrders),isWritable:!1}),r({pubkey:new l.PublicKey(t.targetOrders)}),r({pubkey:new l.PublicKey(e.lpMint.address)}),r({pubkey:new l.PublicKey(t.vault.A)}),r({pubkey:new l.PublicKey(t.vault.B)})];return e.pooltype.includes("StablePool")&&S.push(r({pubkey:m})),S.push(r({pubkey:new l.PublicKey(e.marketId),isWritable:!1}),r({pubkey:i.baseTokenAccount}),r({pubkey:i.quoteTokenAccount}),r({pubkey:i.lpTokenAccount}),r({pubkey:i.owner,isWritable:!1,isSigner:!0}),r({pubkey:new l.PublicKey(t.marketEventQueue),isWritable:!1})),new l.TransactionInstruction({programId:new l.PublicKey(e.programId),keys:S,data:k})}function Vt(n){let{poolInfo:e,poolKeys:t,userKeys:i,lpAmount:s,baseAmountMin:g,quoteAmountMin:u,modelDataPubKey:b=Y}=n,m=O(t),k=4;if(e.pooltype.includes("StablePool")&&(k=5),k===4||k===5){let S=Buffer.alloc(xe.span);xe.encode({instruction:4,lpAmount:y(s),baseAmountMin:y(g),quoteAmountMin:y(u)},S);let D=[r({pubkey:M.TOKEN_PROGRAM_ID,isWritable:!1}),r({pubkey:m.id}),r({pubkey:m.authority,isWritable:!1}),r({pubkey:m.openOrders}),r({pubkey:m.targetOrders}),r({pubkey:m.mintLp.address}),r({pubkey:m.vault.A}),r({pubkey:m.vault.B})];return k===5?D.push(r({pubkey:b})):(D.push(r({pubkey:m.id})),D.push(r({pubkey:m.id}))),D.push(r({pubkey:m.marketProgramId,isWritable:!1}),r({pubkey:m.marketId}),r({pubkey:m.marketBaseVault}),r({pubkey:m.marketQuoteVault}),r({pubkey:m.marketAuthority,isWritable:!1}),r({pubkey:i.lpTokenAccount}),r({pubkey:i.baseTokenAccount}),r({pubkey:i.quoteTokenAccount}),r({pubkey:i.owner,isWritable:!1,isSigner:!0}),r({pubkey:m.marketEventQueue}),r({pubkey:m.marketBids}),r({pubkey:m.marketAsks})),new l.TransactionInstruction({programId:m.programId,keys:D,data:S})}return new l.TransactionInstruction({programId:m.programId,keys:[]})}function Wt({programId:n,ammId:e,ammAuthority:t,ammOpenOrders:i,lpMint:s,coinMint:g,pcMint:u,coinVault:b,pcVault:m,withdrawQueue:k,ammTargetOrders:S,poolTempLp:D,marketProgramId:$e,marketId:et,userWallet:tt,userCoinVault:nt,userPcVault:rt,userLpVault:ot,nonce:it,openTime:st,coinAmount:at,pcAmount:ut,ammConfigId:ct,feeDestinationId:lt}){let we=P([T("instruction"),T("nonce"),o("openTime"),o("pcAmount"),o("coinAmount")]),mt=[{pubkey:M.TOKEN_PROGRAM_ID,isSigner:!1,isWritable:!1},{pubkey:M.ASSOCIATED_TOKEN_PROGRAM_ID,isSigner:!1,isWritable:!1},{pubkey:l.SystemProgram.programId,isSigner:!1,isWritable:!1},{pubkey:Ve,isSigner:!1,isWritable:!1},{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:t,isSigner:!1,isWritable:!1},{pubkey:i,isSigner:!1,isWritable:!0},{pubkey:s,isSigner:!1,isWritable:!0},{pubkey:g,isSigner:!1,isWritable:!1},{pubkey:u,isSigner:!1,isWritable:!1},{pubkey:b,isSigner:!1,isWritable:!0},{pubkey:m,isSigner:!1,isWritable:!0},{pubkey:S,isSigner:!1,isWritable:!0},{pubkey:ct,isSigner:!1,isWritable:!1},{pubkey:lt,isSigner:!1,isWritable:!0},{pubkey:$e,isSigner:!1,isWritable:!1},{pubkey:et,isSigner:!1,isWritable:!1},{pubkey:tt,isSigner:!0,isWritable:!0},{pubkey:nt,isSigner:!1,isWritable:!0},{pubkey:rt,isSigner:!1,isWritable:!0},{pubkey:ot,isSigner:!1,isWritable:!0}],Pe=Buffer.alloc(we.span);return we.encode({instruction:1,nonce:it,openTime:st,coinAmount:at,pcAmount:ut},Pe),{instruction:new l.TransactionInstruction({keys:mt,programId:n,data:Pe}),instructionType:$.AmmV4CreatePool}}function vt(n){let e=P([T("instruction"),T("simulateType")]),t=Buffer.alloc(e.span);e.encode({instruction:12,simulateType:0},t);let i=[r({pubkey:new l.PublicKey(n.id),isWritable:!1}),r({pubkey:new l.PublicKey(n.authority),isWritable:!1}),r({pubkey:new l.PublicKey(n.openOrders),isWritable:!1}),r({pubkey:new l.PublicKey(n.vault.A),isWritable:!1}),r({pubkey:new l.PublicKey(n.vault.B),isWritable:!1}),r({pubkey:new l.PublicKey(n.mintLp.address),isWritable:!1}),r({pubkey:new l.PublicKey(n.marketId),isWritable:!1}),r({pubkey:new l.PublicKey(n.marketEventQueue),isWritable:!1})];return new l.TransactionInstruction({programId:new l.PublicKey(n.programId),keys:i,data:t})}function Ze({poolKeys:n,userKeys:e,amountIn:t,minAmountOut:i,modelDataPubKey:s=Y},g){let u=O(n),b=Buffer.alloc(ye.span);ye.encode({instruction:9,amountIn:y(t),minAmountOut:y(i)},b);let m=[r({pubkey:M.TOKEN_PROGRAM_ID,isWritable:!1}),r({pubkey:u.id}),r({pubkey:u.authority,isWritable:!1}),r({pubkey:u.openOrders})];return g===4&&m.push(r({pubkey:u.targetOrders})),m.push(r({pubkey:u.vault.A}),r({pubkey:u.vault.B})),g===5&&m.push(r({pubkey:s})),m.push(r({pubkey:u.marketProgramId,isWritable:!1}),r({pubkey:u.marketId}),r({pubkey:u.marketBids}),r({pubkey:u.marketAsks}),r({pubkey:u.marketEventQueue}),r({pubkey:u.marketBaseVault}),r({pubkey:u.marketQuoteVault}),r({pubkey:u.marketAuthority,isWritable:!1}),r({pubkey:e.tokenAccountIn}),r({pubkey:e.tokenAccountOut}),r({pubkey:e.owner,isWritable:!1,isSigner:!0})),new l.TransactionInstruction({programId:u.programId,keys:m,data:b})}function Xe({poolKeys:n,userKeys:e,maxAmountIn:t,amountOut:i,modelDataPubKey:s=Y},g){let u=O(n),b=Buffer.alloc(be.span);be.encode({instruction:11,maxAmountIn:y(t),amountOut:y(i)},b);let m=[r({pubkey:M.TOKEN_PROGRAM_ID,isWritable:!1}),r({pubkey:u.id}),r({pubkey:u.authority,isWritable:!1}),r({pubkey:u.openOrders}),r({pubkey:u.targetOrders}),r({pubkey:u.vault.A}),r({pubkey:u.vault.B})];return g===5&&m.push(r({pubkey:s})),m.push(r({pubkey:u.marketProgramId,isWritable:!1}),r({pubkey:u.marketId}),r({pubkey:u.marketBids}),r({pubkey:u.marketAsks}),r({pubkey:u.marketEventQueue}),r({pubkey:u.marketBaseVault}),r({pubkey:u.marketQuoteVault}),r({pubkey:u.marketAuthority,isWritable:!1}),r({pubkey:e.tokenAccountIn}),r({pubkey:e.tokenAccountOut}),r({pubkey:e.owner,isWritable:!1,isSigner:!0})),new l.TransactionInstruction({programId:u.programId,keys:m,data:b})}function Kt(n){let{poolKeys:e,version:t,userKeys:i,amountIn:s,amountOut:g,fixedSide:u}=n;if(t===4||t===5){let b={poolKeys:e,userKeys:i};if(u==="in")return Ze(B(A({},b),{amountIn:s,minAmountOut:g}),t);if(u==="out")return Xe(B(A({},b),{maxAmountIn:s,amountOut:g}),t);Qe.logWithError("invalid params","params",n)}throw Qe.logWithError("invalid version","poolKeys.version",t),new Error("invalid version")}function qt({poolKeys:n,userKeys:e,startTime:t}){let i=Buffer.alloc(he.span);he.encode({instruction:0,nonce:5,startTime:y(t)},i);let s=O(n),g=[r({pubkey:M.TOKEN_PROGRAM_ID,isWritable:!1}),r({pubkey:l.SystemProgram.programId,isWritable:!1}),r({pubkey:l.SYSVAR_RENT_PUBKEY,isWritable:!1}),r({pubkey:s.id}),r({pubkey:s.authority,isWritable:!1}),r({pubkey:s.openOrders}),r({pubkey:s.mintLp.address}),r({pubkey:s.mintA.address,isWritable:!1}),r({pubkey:s.mintB.address,isWritable:!1}),r({pubkey:s.vault.A,isWritable:!1}),r({pubkey:s.vault.B,isWritable:!1}),r({pubkey:s.id}),r({pubkey:s.targetOrders}),r({pubkey:e.lpTokenAccount}),r({pubkey:s.id,isWritable:!1}),r({pubkey:s.marketProgramId,isWritable:!1}),r({pubkey:s.marketId,isWritable:!1}),r({pubkey:e.payer,isSigner:!0})];return new l.TransactionInstruction({programId:s.programId,keys:g,data:i})}function Ut({poolKeys:n}){let e=P([T("instruction"),T("simulateType")]),t=Buffer.alloc(e.span);e.encode({instruction:12,simulateType:0},t);let i=[r({pubkey:new l.PublicKey(n.id),isWritable:!1}),r({pubkey:new l.PublicKey(n.authority),isWritable:!1}),r({pubkey:new l.PublicKey(n.openOrders),isWritable:!1}),r({pubkey:new l.PublicKey(n.vault.A),isWritable:!1}),r({pubkey:new l.PublicKey(n.vault.B),isWritable:!1}),r({pubkey:new l.PublicKey(n.mintLp.address),isWritable:!1}),r({pubkey:new l.PublicKey(n.marketId),isWritable:!1}),r({pubkey:new l.PublicKey(n.marketEventQueue),isWritable:!1})];return{instruction:new l.TransactionInstruction({programId:new l.PublicKey(n.programId),keys:i,data:t})}}0&&(module.exports={createPoolV4InstructionV2,makeAMMSwapInstruction,makeAddLiquidityInstruction,makeInitPoolInstructionV4,makeSimulatePoolInfoInstruction,makeSwapFixedInInstruction,makeSwapFixedOutInstruction,removeLiquidityInstruction,simulatePoolInfoInstruction});
//# sourceMappingURL=instruction.js.map