var Te=Object.defineProperty,Pe=Object.defineProperties;var we=Object.getOwnPropertyDescriptors;var Z=Object.getOwnPropertySymbols;var Ae=Object.prototype.hasOwnProperty,Se=Object.prototype.propertyIsEnumerable;var J=(t,e,n)=>e in t?Te(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,B=(t,e)=>{for(var n in e||(e={}))Ae.call(e,n)&&J(t,n,e[n]);if(Z)for(var n of Z(e))Se.call(e,n)&&J(t,n,e[n]);return t},I=(t,e)=>Pe(t,we(e));import{PublicKey as an}from"@solana/web3.js";import te,{isBN as ne}from"bn.js";import{bits as ut,BitStructure as ct,blob as Be,Blob as lt,cstr as mt,f32 as pt,f32be as dt,f64 as ft,f64be as gt,greedy as ht,Layout as Le,ns64 as bt,ns64be as yt,nu64 as xt,nu64be as Tt,offset as Pt,s16 as wt,s16be as At,s24 as St,s24be as Bt,s32 as Lt,s32be as kt,s40 as Ct,s40be as It,s48 as Mt,s48be as Rt,s8 as Dt,seq as ke,struct as Et,Structure as Ce,u16 as Nt,u16be as _t,u24 as Ft,u24be as Ot,u32 as Vt,u32be as vt,u40 as Kt,u40be as Wt,u48 as Ut,u48be as qt,u8 as Gt,UInt as Ht,union as jt,Union as zt,unionLayoutDiscriminator as Xt,utf8 as Zt}from"@solana/buffer-layout";var Y=Le,Q=Ce;var $=ke;var ee=Be;var V=class extends Y{constructor(n,s,a){super(n,a);this.blob=ee(n),this.signed=s}decode(n,s=0){let a=new te(this.blob.decode(n,s),10,"le");return this.signed?a.fromTwos(this.span*8).clone():a}encode(n,s,a=0){return typeof n=="number"&&(n=new te(n)),this.signed&&(n=n.toTwos(this.span*8)),this.blob.encode(n.toArrayLike(Buffer,"le",this.span),s,a)}};function A(t){return new V(8,!1,t)}var v=class extends Q{decode(e,n){return super.decode(e,n)}};function K(t,e,n){return new v(t,e,n)}function re(t,e,n){let s,a=typeof e=="number"?e:ne(e)?e.toNumber():new Proxy(e,{get(u,r){if(!s){let o=Reflect.get(u,"count");s=ne(o)?o.toNumber():o,Reflect.set(u,"count",s)}return Reflect.get(u,r)},set(u,r,o){return r==="count"&&(s=o),Reflect.set(u,r,o)}});return $(t,a,n)}import{PublicKey as yn}from"@solana/web3.js";import{get as oe,set as Ie}from"lodash";var W=class{constructor(e){this.logLevel=e.logLevel!==void 0?e.logLevel:0,this.name=e.name}set level(e){this.logLevel=e}get time(){return Date.now().toString()}get moduleName(){return this.name}isLogLevel(e){return e<=this.logLevel}error(...e){return this.isLogLevel(0)?(console.error(this.time,this.name,"sdk logger error",...e),this):this}logWithError(...e){let n=e.map(s=>typeof s=="object"?JSON.stringify(s):s).join(", ");throw new Error(n)}warning(...e){return this.isLogLevel(1)?(console.warn(this.time,this.name,"sdk logger warning",...e),this):this}info(...e){return this.isLogLevel(2)?(console.info(this.time,this.name,"sdk logger info",...e),this):this}debug(...e){return this.isLogLevel(3)?(console.debug(this.time,this.name,"sdk logger debug",...e),this):this}},ie={},Me={};function x(t){let e=oe(ie,t);if(!e){let n=oe(Me,t);e=new W({name:t,logLevel:n}),Ie(ie,t,e)}return e}import{MINT_SIZE as wn,TOKEN_PROGRAM_ID as An,getTransferFeeConfig as Sn,unpackMint as Bn}from"@solana/spl-token";var Ln=x("Raydium_accountInfo_util");import w from"bn.js";import To from"decimal.js";import Ve from"big.js";import Hn from"bn.js";import Re from"toformat";var De=Re,R=De;import F from"big.js";import Ne from"bn.js";import _e from"decimal.js-light";import D from"bn.js";var se=9007199254740991;function P(t){let e=x("Raydium_parseBigNumberish");if(t instanceof D)return t;if(typeof t=="string"){if(t.match(/^-?[0-9]+$/))return new D(t);e.logWithError(`invalid BigNumberish string: ${t}`)}return typeof t=="number"?(t%1&&e.logWithError(`BigNumberish number underflow: ${t}`),(t>=se||t<=-se)&&e.logWithError(`BigNumberish number overflow: ${t}`),new D(String(t))):typeof t=="bigint"?new D(t.toString()):(e.error(`invalid BigNumberish value: ${t}`),new D(0))}var _=x("module/fraction"),q=R(F),E=R(_e),Fe={[0]:E.ROUND_DOWN,[1]:E.ROUND_HALF_UP,[2]:E.ROUND_UP},Oe={[0]:F.roundDown,[1]:F.roundHalfUp,[2]:F.roundUp},f=class{constructor(e,n=new Ne(1)){this.numerator=P(e),this.denominator=P(n)}get quotient(){return this.numerator.div(this.denominator)}invert(){return new f(this.denominator,this.numerator)}add(e){let n=e instanceof f?e:new f(P(e));return this.denominator.eq(n.denominator)?new f(this.numerator.add(n.numerator),this.denominator):new f(this.numerator.mul(n.denominator).add(n.numerator.mul(this.denominator)),this.denominator.mul(n.denominator))}sub(e){let n=e instanceof f?e:new f(P(e));return this.denominator.eq(n.denominator)?new f(this.numerator.sub(n.numerator),this.denominator):new f(this.numerator.mul(n.denominator).sub(n.numerator.mul(this.denominator)),this.denominator.mul(n.denominator))}mul(e){let n=e instanceof f?e:new f(P(e));return new f(this.numerator.mul(n.numerator),this.denominator.mul(n.denominator))}div(e){let n=e instanceof f?e:new f(P(e));return new f(this.numerator.mul(n.denominator),this.denominator.mul(n.numerator))}toSignificant(e,n={groupSeparator:""},s=1){Number.isInteger(e)||_.logWithError(`${e} is not an integer.`),e<=0&&_.logWithError(`${e} is not positive.`),E.set({precision:e+1,rounding:Fe[s]});let a=new E(this.numerator.toString()).div(this.denominator.toString()).toSignificantDigits(e);return a.toFormat(a.decimalPlaces(),n)}toFixed(e,n={groupSeparator:""},s=1){return Number.isInteger(e)||_.logWithError(`${e} is not an integer.`),e<0&&_.logWithError(`${e} is negative.`),q.DP=e,q.RM=Oe[s]||1,new q(this.numerator.toString()).div(this.denominator.toString()).toFormat(e,n)}isZero(){return this.numerator.isZero()}};var er=x("Raydium_amount"),tr=R(Ve);import{PublicKey as Ke}from"@solana/web3.js";import{TOKEN_PROGRAM_ID as ae}from"@solana/spl-token";var ue={chainId:101,address:Ke.default.toBase58(),programId:ae.toBase58(),decimals:9,symbol:"SOL",name:"solana",logoURI:"https://img-v1.raydium.io/icon/So11111111111111111111111111111111111111112.png",tags:[],priority:2,type:"raydium",extensions:{coingeckoId:"solana"}},L={chainId:101,address:"So11111111111111111111111111111111111111112",programId:ae.toBase58(),decimals:9,symbol:"WSOL",name:"Wrapped SOL",logoURI:"https://img-v1.raydium.io/icon/So11111111111111111111111111111111111111112.png",tags:[],priority:2,type:"raydium",extensions:{coingeckoId:"solana"}};import{PublicKey as H}from"@solana/web3.js";import{PublicKey as g,SystemProgram as ce,SYSVAR_RENT_PUBKEY as We}from"@solana/web3.js";import{TOKEN_PROGRAM_ID as Ue}from"@solana/spl-token";function G({pubkey:t,isSigner:e=!1,isWritable:n=!0}){return{pubkey:t,isWritable:n,isSigner:e}}var cr=[G({pubkey:Ue,isWritable:!1}),G({pubkey:ce.programId,isWritable:!1}),G({pubkey:We,isWritable:!1})];function le({publicKey:t,transformSol:e}){let n=me(t.toString());if(n instanceof g)return e&&n.equals(N)?U:n;if(e&&n.toString()===N.toBase58())return U;if(typeof n=="string"){if(n===g.default.toBase58())return g.default;try{return new g(n)}catch{throw new Error("invalid public key")}}throw new Error("invalid public key")}function me(t){try{return new g(t)}catch{return t}}var lr=new g("MemoSq4gqABAXKb96qnH8TysNcWxMyWCqXgDLGmfcHr"),mr=new g("MemoSq4gqABAXKb96qnH8TysNcWxMyWCqXgDLGmfcHr"),pr=new g("SysvarRent111111111111111111111111111111111"),dr=new g("SysvarC1ock11111111111111111111111111111111"),fr=new g("metaqbxxUerdq28cj1RbAWkYQm3ybzjb6a8bt518x1s"),gr=new g("Sysvar1nstructions1111111111111111111111111"),hr=ce.programId,br=new g("4k3Dyjzvzp8eMZWUXbBCjEvwSkkk59S5iCNLY3QrkX6R"),yr=new g("Ea5SjE2Y6yvCeW5dYTn7PYMuW5ikXkvbGdcmSnXeaLjS"),xr=new g("SRMuApVNdxXokk5GT7XD5cUUgXMBCoAz2LHeuAoKWRt"),Tr=new g("EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v"),Pr=new g("Es9vMFrzaCERmJfrF4H2FYD4KCoNkY11McCe8BenwNYB"),wr=new g("mSoLzYCxHdYgdzU16g5QSh3i5K3z3KZK7ytfqcJm7So"),Ar=new g("7dHbWXmci3dT8UFYWYZweBLXgycu7Y3iL6trKn1Y7ARj"),Sr=new g("USDH1SM1ojwWUga67PGrgFWUHibbjqMvuMaDkRJTgkX"),Br=new g("NRVwhjBQiUPYtfDT5zRBVJajzFQHaBUNtC7SNVvqRFa"),Lr=new g("ANAxByE6G2WjFp7A4NqtWYXb3mgruyzZYg3spfxe6Lbo"),kr=new g("7vfCXTUXx5WJV5JADk17DUJ4ksgau7utNKj4b963voxs"),U=new g("So11111111111111111111111111111111111111112"),N=g.default;var j=class{constructor({mint:e,decimals:n,symbol:s,name:a,skipMint:u=!1,isToken2022:r=!1}){if(e===N.toBase58()||e instanceof H&&N.equals(e)){this.decimals=L.decimals,this.symbol=L.symbol,this.name=L.name,this.mint=new H(L.address),this.isToken2022=!1;return}this.decimals=n,this.symbol=s||e.toString().substring(0,6),this.name=a||e.toString().substring(0,6),this.mint=u?H.default:le({publicKey:e}),this.isToken2022=r}equals(e){return this===e?!0:this.mint.equals(e.mint)}},M=j;M.WSOL=new j(I(B({},L),{mint:L.address}));var z=class{constructor({decimals:e,symbol:n="UNKNOWN",name:s="UNKNOWN"}){this.decimals=e,this.symbol=n,this.name=s}equals(e){return this===e}},O=z;O.SOL=new z(ue);import qe from"bn.js";var vr=new f(new qe(100));var Hr=x("Raydium_price");import{PublicKey as uo}from"@solana/web3.js";import lo from"bn.js";var Ge=new w(0),Mo=new w(1),Ro=new w(2),Do=new w(3),Eo=new w(5),ve=new w(10),No=new w(100),_o=new w(1e3),Fo=new w(1e4);import{PublicKey as ui}from"@solana/web3.js";import{TOKEN_PROGRAM_ID as li}from"@solana/spl-token";import{ComputeBudgetProgram as Go,Keypair as zo,PublicKey as Xo,Transaction as Jo,TransactionMessage as Qo,VersionedTransaction as $o}from"@solana/web3.js";import{TOKEN_PROGRAM_ID as ri}from"@solana/spl-token";var oi=x("Raydium_txUtil");import{PublicKey as i}from"@solana/web3.js";var fi=new i("EhhTKczWMGQt46ynNeRX1WfeagwwJd7ufHvCDjRxjo5Q"),gi=new i("CBuCnLe26faBpcBP2fktp4rp8abpcAnTWft6ZrP5Q4T"),hi=new i("9KEPoZmtHUrBbhWN1v1KWLMkkvwY6WLtAVUCPRtRjP4z"),bi=new i("FarmqiPv5eAj3j1GMdMCMUGXqPUvmquZtMy86QH6rzhG"),yi=new i("CLaimxFqjHzgTJtAGHU47NPhg6qrc5sCnpC4tBLyABQS"),xi=new i("srmqPvymJeFKQ4zGQed1GFppgkRHL9kaELCbyksJtPX"),Ti=new i("9xQeWvG816bUx9EPjHmaT23yvVM2ZWbrrpZb9PusVFin"),Pi=new i("675kPX9MHTjS2zt1qfr1NYHuzeLXfQM9H24wFSUt1Mp8"),wi=new i("5quBtoiQqxF9Jv6KYKctB59NT3gtJD2Y65kdnB1Uev3h"),Ai=new i("CDSr3ssLcRB6XYPJwAfFt18MZvEZp4LjHcvzBVZ45duo"),Si=new i("CAMMCzo5YL8w4VFF8KVHrK22GGUsp5VTaW7grrKgrWqK"),Bi=new i("LockrWmn6K5twhz3y9w1dQERbmgSaRkfnTeTKbpofwE"),Li=new i("kN1kEznaF5Xbd8LYuqtEFcxzWSBk5Fv6ygX6SqEGJVy"),ge=new i("CDSr3ssLcRB6XYPJwAfFt18MZvEZp4LjHcvzBVZ45duo"),ki=new i("routeUGWgWzqBWFcrCfv8tritsqukccJPu3q5GPP3xS"),Ci=new i("7YttLkHDoNj9wyDur5pM1ejNaAvT9X4eqaYcHQqtj2G5"),Ii=new i("6FJon3QE27qgPVggARueB22hLvoh22VzJpXv4rBEoSLF"),Mi=new i("CC12se5To1CdEuw7fDS27B7Geo5jJyL7t5UK2B44NgiH"),Ri=new i("9HzJyW1qZsEiSfMUf6L2jo3CcTKAyBmSyKdwQeYisHrC"),Di=new i("DropEU8AvevN3UrXWXTMuz3rqnMczQVNjq3kcSdW2SQi"),Ei=new i("CPMMoo8L3F4NbTegBCKVNunggL7H1ZpdTHKxQB5qKP1C"),Ni=new i("GpMZbSM2GgvTKHJirzeGfMFoaZ8UR2X7F4v8vHTvxFbL"),_i=new i("DNXgeM9EiiaAbaWvwjHj9fQQLAX5ZsfHyvmYUNRAdNC8"),Fi=new i("LockrWmn6K5twhz3y9w1dQERbmgSaRkfnTeTKbpofwE"),Oi=new i("3f7GcQFG397GAaEnv51zR6tsTVihYRydnydDD1cXekxH"),Vi=new i("LanMV9sAd7wArD4vJFi2qDdfnVhFxYSUg6eADduJ3uj"),vi=new i("WLHv2UAZm6z4KyaaELi5pjdbJh6RESMva1Rnn8pJVVh"),Ki=new i("DRay6fNdQ5J82H7xV6uq2aV3mNrUZ1J4PgSKsWgptcm6"),Wi=new i("5xqNaZXX5eUi4p5HU4oz9i5QnwRNT2y6oN7yyn4qENeq"),Ui=new i("4Bu96XjU84XjPDSpveTVf6LYGCkfW5FK7SNkREWcEfV4"),qi=new i("6s1xP3hpbAfFoNtUNF8mfHsjr2Bd97JxFJRWLbL6aHuX");var Gi={OPEN_BOOK_PROGRAM:new i("EoTcMgcDRTJVZDMZWBoU6rhYHZfkNTVEAfz3uUJRcYGj"),SERUM_PROGRAM_ID_V3:new i("Ray1111111111111111111111111111111111111111"),AMM_V4:new i("DRaya7Kj3aMWQSy19kSjvmuwq9docCHofyP9kanQGaav"),AMM_STABLE:new i("DRayDdXc1NZQ9C3hRWmoSf8zK4iapgMnjdNZWrfwsP8m"),CLMM_PROGRAM_ID:new i("DRayAUgENGQBKVaX8owNhgzkEDyoHTGVEGHVJT1E9pfH"),CLMM_LOCK_PROGRAM_ID:new i("DRay25Usp3YJAi7beckgpGUC7mGJ2cR1AVPxhYfwVCUX"),CLMM_LOCK_AUTH_ID:new i("6Aoh8h2Lw2m5UGxYR8AdAL87jTWYeKoxM52mJRzfYwN"),CREATE_CPMM_POOL_PROGRAM:new i("DRaycpLY18LhpbydsBWbVJtxpNv9oXPgjRSfpF2bWpYb"),CREATE_CPMM_POOL_AUTH:new i("CXniRufdq5xL8t8jZAPxsPZDpuudwuJSPWnbcD5Y5Nxq"),CREATE_CPMM_POOL_FEE_ACC:new i("3oE58BKVt8KuYkGxx8zBojugnymWmBiyafWgMrnb6eYy"),LOCK_CPMM_PROGRAM:new i("DRay25Usp3YJAi7beckgpGUC7mGJ2cR1AVPxhYfwVCUX"),LOCK_CPMM_AUTH:new i("7qWVV8UY2bRJfDLP4s37YzBPKUkVB46DStYJBpYbQzu3"),UTIL1216:i.default,Router:new i("DRaybByLpbUL57LJARs3j8BitTxVfzBg351EaMr5UTCd"),FARM_PROGRAM_ID_V3:new i("DRayWyrLmEW5KEeqs8kdTMMaBabapqagaBC7KWpGtJeZ"),FARM_PROGRAM_ID_V4:new i("Ray1111111111111111111111111111111111111111"),FARM_PROGRAM_ID_V5:new i("DRayiCGSZgku1GTK6rXD6mVDdingXy6APAH1R6R5L2LC"),FARM_PROGRAM_ID_V6:new i("DRayzbYakXs45ELHkzH6vC3fuhQqTAnv5A68gdFuvZyZ"),LAUNCHPAD_PROGRAM:new i("DRay6fNdQ5J82H7xV6uq2aV3mNrUZ1J4PgSKsWgptcm6"),LAUNCHPAD_AUTH:new i("5xqNaZXX5eUi4p5HU4oz9i5QnwRNT2y6oN7yyn4qENeq"),LAUNCHPAD_PLATFORM:new i("2Jx4KTDrVSdWNazuGpcA8n3ZLTRGGBDxAWhuKe2Xcj2a"),LAUNCHPAD_CONFIG:new i("7ZR4zD7PYfY2XxoG1Gxcy2EgEeGYrpxrwzPuwdUBssEt"),FEE_DESTINATION_ID:new i("9y8ENuuZ3b19quffx9hQvRVygG5ky6snHfRvGpuSfeJy"),MODEL_DATA_PUBKEY:new i("Ray1111111111111111111111111111111111111111")};import zi from"bn.js";import{PublicKey as je,AddressLookupTableAccount as he}from"@solana/web3.js";var ze={AcL1Vo8oy1ULiavEcjSUcwfBSForXMudcZvDZy5nzJkU:new he({key:new je("AcL1Vo8oy1ULiavEcjSUcwfBSForXMudcZvDZy5nzJkU"),state:he.deserialize(Buffer.from("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","base64"))})};import{PublicKey as ds,sendAndConfirmTransaction as fs,SystemProgram as bs,Transaction as ys,TransactionMessage as Ts,VersionedTransaction as Ps}from"@solana/web3.js";import As from"axios";import Xe from"bn.js";var Ms=new Xe(1e6);var C=5e4,Ze=K([A("x"),A("y"),A("price")]),Je=K([A("accountType"),A("status"),A("multiplier"),A("validDataCount"),re(Ze,C,"DataElement")]);function Ye(t,e){return[0,C-2]}function Qe(t){return[0,C-2]}function $e(t){return[0,C-2]}function et(t,e,n){let[s,a]=Ye(e,n),u=s,r=a,o=0,c=e*t.multiplier/n;for(;u<=r;){if(o=Math.floor((r+u)/2),o===0||o>=C-2)return[o,o,!1];let d=t.DataElement[o].x*t.multiplier/t.DataElement[o].y,l=t.DataElement[o-1].x*t.multiplier/t.DataElement[o-1].y,h=t.DataElement[o+1].x*t.multiplier/t.DataElement[o+1].y;if(c===d)return[o,o,!0];if(c===l)return[o-1,o-1,!0];if(c===h)return[o+1,o+1,!0];if(c<l)r=o-1;else{if(c>l&&c<d)return[o-1,o,!0];if(c>d&&c<h)return[o,o+1,!0];u=o+1}}return[o,o,!1]}function X(t,e,n){let[s,a,u]=et(t,e,n);if(!u)return 0;if(s===a){let r=t.DataElement[s].x;return e*t.multiplier/r}else{let r=t.DataElement[s].x,o=t.DataElement[s].y,c=t.DataElement[a].x,d=t.DataElement[a].y,l=n*(c*o-r*d),h=r*l,b=(c-r)*(e*o-r*n)*d,y=h+b;return e*t.multiplier*l/y}}function k(t,e,n){return e*t.multiplier/n}function ye(t,e,n){return e*n/t.multiplier}function tt(t,e){let[n,s]=Qe(e),a=n,u=s,r=0,o=e;for(;a<u;){if(r=Math.floor((u+a)/2),r<=0||r>C-2)return[r,r,!1];let c=t.DataElement[r].x,d=t.DataElement[r-1].x,l=t.DataElement[r+1].x;if(o===c)return[r,r,!0];if(o===d)return[r-1,r-1,!0];if(o===l)return[r+1,r+1,!0];if(o<d)u=r-1;else{if(o>d&&o<c)return[r-1,r,!0];if(o>c&&o<l)return[r,r+1,!0];a=r+1}}return[r,r,!1]}function nt(t,e){let[n,s]=$e(e),a=n,u=s,r=0,o=e;for(;a<=u;){if(r=Math.floor((u+a)/2),r<=0||r>=C-2)return[r,r,!1];let c=t.DataElement[r].y,d=t.DataElement[r-1].y,l=t.DataElement[r+1].y;if(o===c)return[r,r,!0];if(o===d)return[r-1,r-1,!0];if(o===l)return[r+1,r+1,!0];if(o<l)a=r+1;else{if(o<d&&o>c)return[r-1,r,!0];if(o<c&&o>l)return[r,r+1,!0];u=r-1}}return[r,r,!1]}function xe(t,e,n,s){let a=s?e+n:e-n,[u,r,o]=tt(t,a);if(!o)return[0,0,!1,o];if(u===r)return[t.DataElement[r].price,t.DataElement[r].y,!1,o];{let c=t.DataElement[u].x,d=t.DataElement[r].x,l=t.DataElement[u].price,h=t.DataElement[r].price,b=t.DataElement[u].y,y=t.DataElement[r].y;if(e>=c&&e<=d)return s?[h,y,!0,o]:[l,b,!0,o];{let T,S;return s?(T=l+(h-l)*(e-c)/(d-c),S=b-(a-c)*t.multiplier/h):(T=l+(h-l)*(e-c)/(d-c),S=y+(d-a)*t.multiplier/l),[T,S,!1,o]}}}function rt(t,e,n,s){let a=s?e-n:e+n,[u,r,o]=nt(t,a);if(!o)return[0,0,!1,o];if(u===r)return[t.DataElement[r].price,t.DataElement[r].x,!1,o];{let c=t.DataElement[u].x,d=t.DataElement[r].x,l=t.DataElement[u].price,h=t.DataElement[r].price,b=t.DataElement[u].y,y=t.DataElement[r].y;if(e>=y&&e<=b)return s?[h,d,!0,o]:[l,c,!0,o];{let T,S;return s?(T=l+(h-l)*(b-e)/(b-y),S=c+h*(b-a)/t.multiplier):(T=l+(h-l)*(b-e)/(b-y),S=d-l*(a-y)/t.multiplier),[T,S,!1,o]}}}function ot(t,e){let n=xe(t,e,0,!1);return n[3]?n[0]:0}function $s(t,e,n,s){let a=X(t,e,n),u=k(t,e,a),r=k(t,n,a),o=k(t,s,a),c=!0,[d,l,h,b]=xe(t,u,o,c);if(!b)return 0;if(h)return s*t.multiplier/d;{let y=r-l;return ye(t,y,a)}}function ea(t,e,n,s){let a=X(t,e,n),u=k(t,e,a),r=k(t,n,a),o=k(t,s,a),c=!1,[d,l,h,b]=rt(t,r,o,c);if(!b)return 0;if(h)return s*d/t.multiplier;{let y=u-l;return ye(t,y,a)}}function it(t){let e=Je.decode(t);return{accountType:e.accountType.toNumber(),status:e.status.toNumber(),multiplier:e.multiplier.toNumber(),validDataCount:e.validDataCount.toNumber(),DataElement:e.DataElement.map(n=>({x:n.x.toNumber(),y:n.y.toNumber(),price:n.price.toNumber()}))}}function ta(t,e,n,s){let a=ot(t,k(t,e,X(t,e,n)))/t.multiplier;return s?a:1/a}var be=class{constructor({connection:e,modelDataPubKey:n=ge}){this._layoutData={accountType:0,status:0,multiplier:0,validDataCount:0,DataElement:[]};this.connection=e,this.modelDataPubKey=n}get stableModelData(){return this._layoutData}async initStableModelLayout(){if(this._layoutData.validDataCount===0&&this.connection){let e=await this.connection.getAccountInfo(this.modelDataPubKey);e&&(this._layoutData=it(e==null?void 0:e.data))}}};export{Ze as DataElement,be as StableLayout,it as formatLayout,ea as getDxByDyBaseIn,$s as getDyByDxBaseIn,ta as getStablePrice,Je as modelDataInfoLayout};
//# sourceMappingURL=stable.mjs.map