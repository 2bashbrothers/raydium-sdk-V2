var Je=Object.defineProperty,Qe=Object.defineProperties;var Ze=Object.getOwnPropertyDescriptors;var ye=Object.getOwnPropertySymbols;var Xe=Object.prototype.hasOwnProperty,$e=Object.prototype.propertyIsEnumerable;var be=(r,e,t)=>e in r?Je(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,S=(r,e)=>{for(var t in e||(e={}))Xe.call(e,t)&&be(r,t,e[t]);if(ye)for(var t of ye(e))$e.call(e,t)&&be(r,t,e[t]);return r},A=(r,e)=>Qe(r,Ze(e));import{PublicKey as f,SystemProgram as Oe,SYSVAR_RENT_PUBKEY as Bt,TransactionInstruction as R}from"@solana/web3.js";import{ASSOCIATED_TOKEN_PROGRAM_ID as Lt,TOKEN_PROGRAM_ID as E}from"@solana/spl-token";import{PublicKey as Vt}from"@solana/web3.js";import{get as he,set as et}from"lodash";var Y=class{constructor(e){this.logLevel=e.logLevel!==void 0?e.logLevel:0,this.name=e.name}set level(e){this.logLevel=e}get time(){return Date.now().toString()}get moduleName(){return this.name}isLogLevel(e){return e<=this.logLevel}error(...e){return this.isLogLevel(0)?(console.error(this.time,this.name,"sdk logger error",...e),this):this}logWithError(...e){let t=e.map(i=>typeof i=="object"?JSON.stringify(i):i).join(", ");throw new Error(t)}warning(...e){return this.isLogLevel(1)?(console.warn(this.time,this.name,"sdk logger warning",...e),this):this}info(...e){return this.isLogLevel(2)?(console.info(this.time,this.name,"sdk logger info",...e),this):this}debug(...e){return this.isLogLevel(3)?(console.debug(this.time,this.name,"sdk logger debug",...e),this):this}},Te={},tt={};function x(r){let e=he(Te,r);if(!e){let t=he(tt,r);e=new Y({name:r,logLevel:t}),et(Te,r,e)}return e}import{MINT_SIZE as qt,TOKEN_PROGRAM_ID as Ut,getTransferFeeConfig as Gt,unpackMint as Ht}from"@solana/spl-token";var jt=x("Raydium_accountInfo_util");import L from"bn.js";import Ar from"decimal.js";import ct from"big.js";import G from"bn.js";import nt from"toformat";var rt=nt,F=rt;import U from"big.js";import it from"bn.js";import st from"decimal.js-light";import V from"bn.js";var xe=9007199254740991;function g(r){let e=x("Raydium_parseBigNumberish");if(r instanceof V)return r;if(typeof r=="string"){if(r.match(/^-?[0-9]+$/))return new V(r);e.logWithError(`invalid BigNumberish string: ${r}`)}return typeof r=="number"?(r%1&&e.logWithError(`BigNumberish number underflow: ${r}`),(r>=xe||r<=-xe)&&e.logWithError(`BigNumberish number overflow: ${r}`),new V(String(r))):typeof r=="bigint"?new V(r.toString()):(e.error(`invalid BigNumberish value: ${r}`),new V(0))}var q=x("module/fraction"),Q=F(U),W=F(st),at={[0]:W.ROUND_DOWN,[1]:W.ROUND_HALF_UP,[2]:W.ROUND_UP},ut={[0]:U.roundDown,[1]:U.roundHalfUp,[2]:U.roundUp},p=class{constructor(e,t=new it(1)){this.numerator=g(e),this.denominator=g(t)}get quotient(){return this.numerator.div(this.denominator)}invert(){return new p(this.denominator,this.numerator)}add(e){let t=e instanceof p?e:new p(g(e));return this.denominator.eq(t.denominator)?new p(this.numerator.add(t.numerator),this.denominator):new p(this.numerator.mul(t.denominator).add(t.numerator.mul(this.denominator)),this.denominator.mul(t.denominator))}sub(e){let t=e instanceof p?e:new p(g(e));return this.denominator.eq(t.denominator)?new p(this.numerator.sub(t.numerator),this.denominator):new p(this.numerator.mul(t.denominator).sub(t.numerator.mul(this.denominator)),this.denominator.mul(t.denominator))}mul(e){let t=e instanceof p?e:new p(g(e));return new p(this.numerator.mul(t.numerator),this.denominator.mul(t.denominator))}div(e){let t=e instanceof p?e:new p(g(e));return new p(this.numerator.mul(t.denominator),this.denominator.mul(t.numerator))}toSignificant(e,t={groupSeparator:""},i=1){Number.isInteger(e)||q.logWithError(`${e} is not an integer.`),e<=0&&q.logWithError(`${e} is not positive.`),W.set({precision:e+1,rounding:at[i]});let s=new W(this.numerator.toString()).div(this.denominator.toString()).toSignificantDigits(e);return s.toFormat(s.decimalPlaces(),t)}toFixed(e,t={groupSeparator:""},i=1){return Number.isInteger(e)||q.logWithError(`${e} is not an integer.`),e<0&&q.logWithError(`${e} is negative.`),Q.DP=e,Q.RM=ut[i]||1,new Q(this.numerator.toString()).div(this.denominator.toString()).toFormat(e,t)}isZero(){return this.numerator.isZero()}};var lt=x("Raydium_amount"),we=F(ct);function mt(r,e){let t="0",i="0";if(r.includes(".")){let s=r.split(".");s.length===2?([t,i]=s,i=i.padEnd(e,"0")):lt.logWithError(`invalid number string, num: ${r}`)}else t=r;return[t,i.slice(0,e)||i]}var I=class extends p{constructor(t,i,s=!0,d){let u=new G(0),y=Z.pow(new G(t.decimals));if(s)u=g(i);else{let c=new G(0),P=new G(0);if(typeof i=="string"||typeof i=="number"||typeof i=="bigint"){let[k,M]=mt(i.toString(),t.decimals);c=g(k),P=g(M)}c=c.mul(y),u=c.add(P)}super(u,y);this.logger=x(d||"TokenAmount"),this.token=t}get raw(){return this.numerator}isZero(){return this.raw.isZero()}gt(t){return this.token.equals(t.token)||this.logger.logWithError("gt token not equals"),this.raw.gt(t.raw)}lt(t){return this.token.equals(t.token)||this.logger.logWithError("lt token not equals"),this.raw.lt(t.raw)}add(t){return this.token.equals(t.token)||this.logger.logWithError("add token not equals"),new I(this.token,this.raw.add(t.raw))}subtract(t){return this.token.equals(t.token)||this.logger.logWithError("sub token not equals"),new I(this.token,this.raw.sub(t.raw))}toSignificant(t=this.token.decimals,i,s=0){return super.toSignificant(t,i,s)}toFixed(t=this.token.decimals,i,s=0){return t>this.token.decimals&&this.logger.logWithError("decimals overflow"),super.toFixed(t,i,s)}toExact(t={groupSeparator:""}){return we.DP=this.token.decimals,new we(this.numerator.toString()).div(this.denominator.toString()).toFormat(t)}};import{PublicKey as pt}from"@solana/web3.js";import{TOKEN_PROGRAM_ID as Pe}from"@solana/spl-token";var ke={chainId:101,address:pt.default.toBase58(),programId:Pe.toBase58(),decimals:9,symbol:"SOL",name:"solana",logoURI:"https://img-v1.raydium.io/icon/So11111111111111111111111111111111111111112.png",tags:[],priority:2,type:"raydium",extensions:{coingeckoId:"solana"}},D={chainId:101,address:"So11111111111111111111111111111111111111112",programId:Pe.toBase58(),decimals:9,symbol:"WSOL",name:"Wrapped SOL",logoURI:"https://img-v1.raydium.io/icon/So11111111111111111111111111111111111111112.png",tags:[],priority:2,type:"raydium",extensions:{coingeckoId:"solana"}};import{PublicKey as $}from"@solana/web3.js";import{PublicKey as b,SystemProgram as Se,SYSVAR_RENT_PUBKEY as dt}from"@solana/web3.js";import{TOKEN_PROGRAM_ID as ft}from"@solana/spl-token";function n({pubkey:r,isSigner:e=!1,isWritable:t=!0}){return{pubkey:r,isWritable:t,isSigner:e}}var Bn=[n({pubkey:ft,isWritable:!1}),n({pubkey:Se.programId,isWritable:!1}),n({pubkey:dt,isWritable:!1})];function Ae({publicKey:r,transformSol:e}){let t=X(r.toString());if(t instanceof b)return e&&t.equals(v)?J:t;if(e&&t.toString()===v.toBase58())return J;if(typeof t=="string"){if(t===b.default.toBase58())return b.default;try{return new b(t)}catch{throw new Error("invalid public key")}}throw new Error("invalid public key")}function X(r){try{return new b(r)}catch{return r}}var Ln=new b("MemoSq4gqABAXKb96qnH8TysNcWxMyWCqXgDLGmfcHr"),Cn=new b("MemoSq4gqABAXKb96qnH8TysNcWxMyWCqXgDLGmfcHr"),Ie=new b("SysvarRent111111111111111111111111111111111"),Rn=new b("SysvarC1ock11111111111111111111111111111111"),Mn=new b("metaqbxxUerdq28cj1RbAWkYQm3ybzjb6a8bt518x1s"),Dn=new b("Sysvar1nstructions1111111111111111111111111"),_n=Se.programId,Nn=new b("4k3Dyjzvzp8eMZWUXbBCjEvwSkkk59S5iCNLY3QrkX6R"),On=new b("Ea5SjE2Y6yvCeW5dYTn7PYMuW5ikXkvbGdcmSnXeaLjS"),En=new b("SRMuApVNdxXokk5GT7XD5cUUgXMBCoAz2LHeuAoKWRt"),Fn=new b("EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v"),Vn=new b("Es9vMFrzaCERmJfrF4H2FYD4KCoNkY11McCe8BenwNYB"),Wn=new b("mSoLzYCxHdYgdzU16g5QSh3i5K3z3KZK7ytfqcJm7So"),vn=new b("7dHbWXmci3dT8UFYWYZweBLXgycu7Y3iL6trKn1Y7ARj"),Kn=new b("USDH1SM1ojwWUga67PGrgFWUHibbjqMvuMaDkRJTgkX"),qn=new b("NRVwhjBQiUPYtfDT5zRBVJajzFQHaBUNtC7SNVvqRFa"),Un=new b("ANAxByE6G2WjFp7A4NqtWYXb3mgruyzZYg3spfxe6Lbo"),Gn=new b("7vfCXTUXx5WJV5JADk17DUJ4ksgau7utNKj4b963voxs"),J=new b("So11111111111111111111111111111111111111112"),v=b.default;var ee=class{constructor({mint:e,decimals:t,symbol:i,name:s,skipMint:d=!1,isToken2022:u=!1}){if(e===v.toBase58()||e instanceof $&&v.equals(e)){this.decimals=D.decimals,this.symbol=D.symbol,this.name=D.name,this.mint=new $(D.address),this.isToken2022=!1;return}this.decimals=t,this.symbol=i||e.toString().substring(0,6),this.name=s||e.toString().substring(0,6),this.mint=d?$.default:Ae({publicKey:e}),this.isToken2022=u}equals(e){return this===e?!0:this.mint.equals(e.mint)}},_=ee;_.WSOL=new ee(A(S({},D),{mint:D.address}));var te=class{constructor({decimals:e,symbol:t="UNKNOWN",name:i="UNKNOWN"}){this.decimals=e,this.symbol=t,this.name=i}equals(e){return this===e}},H=te;H.SOL=new te(ke);import gt from"bn.js";var Be=new p(new gt(100)),O=class extends p{toSignificant(e=5,t,i){return this.mul(Be).toSignificant(e,t,i)}toFixed(e=2,t,i){return this.mul(Be).toFixed(e,t,i)}};var yt=x("Raydium_price"),B=class extends p{constructor(t){let{baseToken:i,quoteToken:s,numerator:d,denominator:u}=t;super(d,u);this.baseToken=i,this.quoteToken=s,this.scalar=new p(ne(i.decimals),ne(s.decimals))}get raw(){return new p(this.numerator,this.denominator)}get adjusted(){return super.mul(this.scalar)}invert(){return new B({baseToken:this.quoteToken,quoteToken:this.baseToken,denominator:this.numerator,numerator:this.denominator})}mul(t){this.quoteToken!==t.baseToken&&yt.logWithError("mul token not equals");let i=super.mul(t);return new B({baseToken:this.baseToken,quoteToken:t.quoteToken,denominator:i.denominator,numerator:i.numerator})}toSignificant(t=this.quoteToken.decimals,i,s){return this.adjusted.toSignificant(t,i,s)}toFixed(t=this.quoteToken.decimals,i,s){return this.adjusted.toFixed(t,i,s)}};var re=new L(0),Le=new L(1),Nr=new L(2),Or=new L(3),Er=new L(5),Z=new L(10),Fr=new L(100),Vr=new L(1e3),Wr=new L(1e4);function ne(r){return Z.pow(g(r))}import{PublicKey as mo}from"@solana/web3.js";import{TOKEN_PROGRAM_ID as fo}from"@solana/spl-token";import{ComputeBudgetProgram as zr,Keypair as Qr,PublicKey as Zr,Transaction as $r,TransactionMessage as to,VersionedTransaction as no}from"@solana/web3.js";var j={CreateAccount:"CreateAccount",InitAccount:"InitAccount",CreateATA:"CreateATA",CloseAccount:"CloseAccount",TransferAmount:"TransferAmount",InitMint:"InitMint",MintTo:"MintTo",InitMarket:"InitMarket",Util1216OwnerClaim:"Util1216OwnerClaim",SetComputeUnitPrice:"SetComputeUnitPrice",SetComputeUnitLimit:"SetComputeUnitLimit",ClmmCreatePool:"ClmmCreatePool",ClmmOpenPosition:"ClmmOpenPosition",ClmmIncreasePosition:"ClmmIncreasePosition",ClmmDecreasePosition:"ClmmDecreasePosition",ClmmClosePosition:"ClmmClosePosition",ClmmSwapBaseIn:"ClmmSwapBaseIn",ClmmSwapBaseOut:"ClmmSwapBaseOut",ClmmInitReward:"ClmmInitReward",ClmmSetReward:"ClmmSetReward",ClmmCollectReward:"ClmmCollectReward",ClmmLockPosition:"ClmmLockPosition",ClmmHarvestLockPosition:"ClmmHarvestLockPosition",AmmV4Swap:"AmmV4Swap",AmmV4AddLiquidity:"AmmV4AddLiquidity",AmmV4RemoveLiquidity:"AmmV4RemoveLiquidity",AmmV4SimulatePoolInfo:"AmmV4SimulatePoolInfo",AmmV4SwapBaseIn:"AmmV4SwapBaseIn",AmmV4SwapBaseOut:"AmmV4SwapBaseOut",AmmV4CreatePool:"AmmV4CreatePool",AmmV4InitPool:"AmmV4InitPool",AmmV5AddLiquidity:"AmmV5AddLiquidity",AmmV5RemoveLiquidity:"AmmV5RemoveLiquidity",AmmV5SimulatePoolInfo:"AmmV5SimulatePoolInfo",AmmV5SwapBaseIn:"AmmV5SwapBaseIn",AmmV5SwapBaseOut:"AmmV5SwapBaseOut",RouteSwap:"RouteSwap",RouteSwap1:"RouteSwap1",RouteSwap2:"RouteSwap2",FarmV3Deposit:"FarmV3Deposit",FarmV3Withdraw:"FarmV3Withdraw",FarmV3CreateLedger:"FarmV3CreateLedger",FarmV4Withdraw:"FarmV4Withdraw",FarmV5Deposit:"FarmV5Deposit",FarmV5Withdraw:"FarmV5Withdraw",FarmV5CreateLedger:"FarmV5CreateLedger",FarmV6Deposit:"FarmV6Deposit",FarmV6Withdraw:"FarmV6Withdraw",FarmV6Create:"FarmV6Create",FarmV6Restart:"FarmV6Restart",FarmV6CreatorAddReward:"FarmV6CreatorAddReward",FarmV6CreatorWithdraw:"FarmV6CreatorWithdraw",CpmmCreatePool:"CpmmCreatePool",CpmmAddLiquidity:"CpmmAddLiquidity",CpmmWithdrawLiquidity:"CpmmWithdrawLiquidity",CpmmSwapBaseIn:"CpmmSwapBaseIn",CpmmSwapBaseOut:"CpmmSwapBaseOut",CpmmLockLp:"CpmmLockLp",CpmmCollectLockFee:"CpmmCollectLockFee",TransferTip:"TransferTip"};import{TOKEN_PROGRAM_ID as so}from"@solana/spl-token";var ao=x("Raydium_txUtil");import{PublicKey as a}from"@solana/web3.js";var ho=new a("EhhTKczWMGQt46ynNeRX1WfeagwwJd7ufHvCDjRxjo5Q"),To=new a("CBuCnLe26faBpcBP2fktp4rp8abpcAnTWft6ZrP5Q4T"),xo=new a("9KEPoZmtHUrBbhWN1v1KWLMkkvwY6WLtAVUCPRtRjP4z"),wo=new a("FarmqiPv5eAj3j1GMdMCMUGXqPUvmquZtMy86QH6rzhG"),Po=new a("CLaimxFqjHzgTJtAGHU47NPhg6qrc5sCnpC4tBLyABQS"),ko=new a("srmqPvymJeFKQ4zGQed1GFppgkRHL9kaELCbyksJtPX"),So=new a("9xQeWvG816bUx9EPjHmaT23yvVM2ZWbrrpZb9PusVFin"),Ao=new a("675kPX9MHTjS2zt1qfr1NYHuzeLXfQM9H24wFSUt1Mp8"),Io=new a("5quBtoiQqxF9Jv6KYKctB59NT3gtJD2Y65kdnB1Uev3h"),Bo=new a("CDSr3ssLcRB6XYPJwAfFt18MZvEZp4LjHcvzBVZ45duo"),Lo=new a("CAMMCzo5YL8w4VFF8KVHrK22GGUsp5VTaW7grrKgrWqK"),Co=new a("LockrWmn6K5twhz3y9w1dQERbmgSaRkfnTeTKbpofwE"),Ro=new a("kN1kEznaF5Xbd8LYuqtEFcxzWSBk5Fv6ygX6SqEGJVy"),K=new a("CDSr3ssLcRB6XYPJwAfFt18MZvEZp4LjHcvzBVZ45duo"),Mo=new a("routeUGWgWzqBWFcrCfv8tritsqukccJPu3q5GPP3xS"),Do=new a("7YttLkHDoNj9wyDur5pM1ejNaAvT9X4eqaYcHQqtj2G5"),_o=new a("6FJon3QE27qgPVggARueB22hLvoh22VzJpXv4rBEoSLF"),No=new a("CC12se5To1CdEuw7fDS27B7Geo5jJyL7t5UK2B44NgiH"),Oo=new a("9HzJyW1qZsEiSfMUf6L2jo3CcTKAyBmSyKdwQeYisHrC"),Eo=new a("DropEU8AvevN3UrXWXTMuz3rqnMczQVNjq3kcSdW2SQi"),Fo=new a("CPMMoo8L3F4NbTegBCKVNunggL7H1ZpdTHKxQB5qKP1C"),Vo=new a("GpMZbSM2GgvTKHJirzeGfMFoaZ8UR2X7F4v8vHTvxFbL"),Wo=new a("DNXgeM9EiiaAbaWvwjHj9fQQLAX5ZsfHyvmYUNRAdNC8"),vo=new a("LockrWmn6K5twhz3y9w1dQERbmgSaRkfnTeTKbpofwE"),Ko=new a("3f7GcQFG397GAaEnv51zR6tsTVihYRydnydDD1cXekxH"),qo=new a("LanMV9sAd7wArD4vJFi2qDdfnVhFxYSUg6eADduJ3uj"),Uo=new a("WLHv2UAZm6z4KyaaELi5pjdbJh6RESMva1Rnn8pJVVh"),Go=new a("DRay6fNdQ5J82H7xV6uq2aV3mNrUZ1J4PgSKsWgptcm6"),Ho=new a("5xqNaZXX5eUi4p5HU4oz9i5QnwRNT2y6oN7yyn4qENeq"),jo=new a("4Bu96XjU84XjPDSpveTVf6LYGCkfW5FK7SNkREWcEfV4"),zo=new a("6s1xP3hpbAfFoNtUNF8mfHsjr2Bd97JxFJRWLbL6aHuX");var Yo={OPEN_BOOK_PROGRAM:new a("EoTcMgcDRTJVZDMZWBoU6rhYHZfkNTVEAfz3uUJRcYGj"),SERUM_PROGRAM_ID_V3:new a("Ray1111111111111111111111111111111111111111"),AMM_V4:new a("DRaya7Kj3aMWQSy19kSjvmuwq9docCHofyP9kanQGaav"),AMM_STABLE:new a("DRayDdXc1NZQ9C3hRWmoSf8zK4iapgMnjdNZWrfwsP8m"),CLMM_PROGRAM_ID:new a("DRayAUgENGQBKVaX8owNhgzkEDyoHTGVEGHVJT1E9pfH"),CLMM_LOCK_PROGRAM_ID:new a("DRay25Usp3YJAi7beckgpGUC7mGJ2cR1AVPxhYfwVCUX"),CLMM_LOCK_AUTH_ID:new a("6Aoh8h2Lw2m5UGxYR8AdAL87jTWYeKoxM52mJRzfYwN"),CREATE_CPMM_POOL_PROGRAM:new a("DRaycpLY18LhpbydsBWbVJtxpNv9oXPgjRSfpF2bWpYb"),CREATE_CPMM_POOL_AUTH:new a("CXniRufdq5xL8t8jZAPxsPZDpuudwuJSPWnbcD5Y5Nxq"),CREATE_CPMM_POOL_FEE_ACC:new a("3oE58BKVt8KuYkGxx8zBojugnymWmBiyafWgMrnb6eYy"),LOCK_CPMM_PROGRAM:new a("DRay25Usp3YJAi7beckgpGUC7mGJ2cR1AVPxhYfwVCUX"),LOCK_CPMM_AUTH:new a("7qWVV8UY2bRJfDLP4s37YzBPKUkVB46DStYJBpYbQzu3"),UTIL1216:a.default,Router:new a("DRaybByLpbUL57LJARs3j8BitTxVfzBg351EaMr5UTCd"),FARM_PROGRAM_ID_V3:new a("DRayWyrLmEW5KEeqs8kdTMMaBabapqagaBC7KWpGtJeZ"),FARM_PROGRAM_ID_V4:new a("Ray1111111111111111111111111111111111111111"),FARM_PROGRAM_ID_V5:new a("DRayiCGSZgku1GTK6rXD6mVDdingXy6APAH1R6R5L2LC"),FARM_PROGRAM_ID_V6:new a("DRayzbYakXs45ELHkzH6vC3fuhQqTAnv5A68gdFuvZyZ"),LAUNCHPAD_PROGRAM:new a("DRay6fNdQ5J82H7xV6uq2aV3mNrUZ1J4PgSKsWgptcm6"),LAUNCHPAD_AUTH:new a("5xqNaZXX5eUi4p5HU4oz9i5QnwRNT2y6oN7yyn4qENeq"),LAUNCHPAD_PLATFORM:new a("2Jx4KTDrVSdWNazuGpcA8n3ZLTRGGBDxAWhuKe2Xcj2a"),LAUNCHPAD_CONFIG:new a("7ZR4zD7PYfY2XxoG1Gxcy2EgEeGYrpxrwzPuwdUBssEt"),FEE_DESTINATION_ID:new a("9y8ENuuZ3b19quffx9hQvRVygG5ky6snHfRvGpuSfeJy"),MODEL_DATA_PUBKEY:new a("Ray1111111111111111111111111111111111111111")};import Zo from"bn.js";import{PublicKey as ni,AddressLookupTableAccount as ri}from"@solana/web3.js";import{PublicKey as wi,sendAndConfirmTransaction as Pi,SystemProgram as Ai,Transaction as Ii,TransactionMessage as Li,VersionedTransaction as Ci}from"@solana/web3.js";import Mi from"axios";import{PublicKey as bt}from"@solana/web3.js";import ht from"bn.js";function Tt(r){return typeof r=="object"&&r!==null&&![_,I,bt,p,ht,B,O].some(e=>typeof e=="object"&&r instanceof e)}function N(r){return typeof r=="string"?X(r):Array.isArray(r)?r.map(e=>N(e)):Tt(r)?Object.fromEntries(Object.entries(r).map(([e,t])=>[e,N(t)])):r}import xt from"bn.js";var Gi=new xt(1e6);import{PublicKey as It}from"@solana/web3.js";import De,{isBN as _e}from"bn.js";import{bits as ps,BitStructure as ds,blob as wt,Blob as fs,cstr as gs,f32 as ys,f32be as bs,f64 as hs,f64be as Ts,greedy as xs,Layout as Pt,ns64 as ws,ns64be as Ps,nu64 as ks,nu64be as Ss,offset as As,s16 as Is,s16be as Bs,s24 as Ls,s24be as Cs,s32 as Rs,s32be as Ms,s40 as Ds,s40be as _s,s48 as Ns,s48be as Os,s8 as Es,seq as kt,struct as Fs,Structure as St,u16 as Vs,u16be as Ws,u24 as vs,u24be as Ks,u32 as qs,u32be as Us,u40 as Gs,u40be as Hs,u48 as js,u48be as zs,u8 as Ys,UInt as At,union as Js,Union as Qs,unionLayoutDiscriminator as Zs,utf8 as Xs}from"@solana/buffer-layout";var oe=Pt,Ce=St;var Re=At;var Me=kt;var ie=wt;var z=class extends oe{constructor(t,i,s){super(t,s);this.blob=ie(t),this.signed=i}decode(t,i=0){let s=new De(this.blob.decode(t,i),10,"le");return this.signed?s.fromTwos(this.span*8).clone():s}encode(t,i,s=0){return typeof t=="number"&&(t=new De(t)),this.signed&&(t=t.toTwos(this.span*8)),this.blob.encode(t.toArrayLike(Buffer,"le",this.span),i,s)}};function T(r){return new Re(1,r)}function o(r){return new z(8,!1,r)}function C(r){return new z(16,!1,r)}var se=class extends oe{constructor(t,i,s,d){super(t.span,d);this.layout=t,this.decoder=i,this.encoder=s}decode(t,i){return this.decoder(this.layout.decode(t,i))}encode(t,i,s){return this.layout.encode(this.encoder(t),i,s)}getSpan(t,i){return this.layout.getSpan(t,i)}};function h(r){return new se(ie(32),e=>new It(e),e=>e.toBuffer(),r)}var ae=class extends Ce{decode(e,t){return super.decode(e,t)}};function w(r,e,t){return new ae(r,e,t)}function ue(r,e,t){let i,s=typeof e=="number"?e:_e(e)?e.toNumber():new Proxy(e,{get(d,u){if(!i){let y=Reflect.get(d,"count");i=_e(y)?y.toNumber():y,Reflect.set(d,"count",i)}return Reflect.get(d,u)},set(d,u,y){return u==="count"&&(i=y),Reflect.set(d,u,y)}});return Me(r,s,t)}var ce=w([T("instruction"),o("amountIn"),o("minAmountOut")]),le=w([T("instruction"),o("maxAmountIn"),o("amountOut")]),fa=w([T("instruction"),T("nonce")]),me=w([T("instruction"),T("nonce"),o("startTime")]),ga=w([o("status"),o("nonce"),o("maxOrder"),o("depth"),o("baseDecimal"),o("quoteDecimal"),o("state"),o("resetFlag"),o("minSize"),o("volMaxCutRatio"),o("amountWaveRatio"),o("baseLotSize"),o("quoteLotSize"),o("minPriceMultiplier"),o("maxPriceMultiplier"),o("systemDecimalValue"),o("minSeparateNumerator"),o("minSeparateDenominator"),o("tradeFeeNumerator"),o("tradeFeeDenominator"),o("pnlNumerator"),o("pnlDenominator"),o("swapFeeNumerator"),o("swapFeeDenominator"),o("baseNeedTakePnl"),o("quoteNeedTakePnl"),o("quoteTotalPnl"),o("baseTotalPnl"),o("poolOpenTime"),o("punishPcAmount"),o("punishCoinAmount"),o("orderbookToInitTime"),C("swapBaseInAmount"),C("swapQuoteOutAmount"),o("swapBase2QuoteFee"),C("swapQuoteInAmount"),C("swapBaseOutAmount"),o("swapQuote2BaseFee"),h("baseVault"),h("quoteVault"),h("baseMint"),h("quoteMint"),h("lpMint"),h("openOrders"),h("marketId"),h("marketProgramId"),h("targetOrders"),h("withdrawQueue"),h("lpVault"),h("owner"),o("lpReserve"),ue(o(),3,"padding")]),ya=w([o("accountType"),o("status"),o("nonce"),o("maxOrder"),o("depth"),o("baseDecimal"),o("quoteDecimal"),o("state"),o("resetFlag"),o("minSize"),o("volMaxCutRatio"),o("amountWaveRatio"),o("baseLotSize"),o("quoteLotSize"),o("minPriceMultiplier"),o("maxPriceMultiplier"),o("systemDecimalsValue"),o("abortTradeFactor"),o("priceTickMultiplier"),o("priceTick"),o("minSeparateNumerator"),o("minSeparateDenominator"),o("tradeFeeNumerator"),o("tradeFeeDenominator"),o("pnlNumerator"),o("pnlDenominator"),o("swapFeeNumerator"),o("swapFeeDenominator"),o("baseNeedTakePnl"),o("quoteNeedTakePnl"),o("quoteTotalPnl"),o("baseTotalPnl"),o("poolOpenTime"),o("punishPcAmount"),o("punishCoinAmount"),o("orderbookToInitTime"),C("swapBaseInAmount"),C("swapQuoteOutAmount"),C("swapQuoteInAmount"),C("swapBaseOutAmount"),o("swapQuote2BaseFee"),o("swapBase2QuoteFee"),h("baseVault"),h("quoteVault"),h("baseMint"),h("quoteMint"),h("lpMint"),h("modelDataAccount"),h("openOrders"),h("marketId"),h("marketProgramId"),h("targetOrders"),h("owner"),ue(o(),64,"padding")]),pe=w([T("instruction"),o("baseAmountIn"),o("quoteAmountIn"),o("fixedSide"),o("otherAmountMin")]),de=w([T("instruction"),o("lpAmount"),o("baseAmountMin"),o("quoteAmountMin")]);var ba=w([o("fee")]);var Ne=x("Raydium_liquidity_instruction");function La(r){let{poolInfo:e,poolKeys:t,userKeys:i,baseAmountIn:s,quoteAmountIn:d,fixedSide:u,otherAmountMin:y,modelDataPubKey:c=K}=r,P=Buffer.alloc(pe.span);pe.encode({instruction:3,baseAmountIn:g(s),quoteAmountIn:g(d),otherAmountMin:g(y),fixedSide:u==="base"?re:Le},P);let k=[n({pubkey:E,isWritable:!1}),n({pubkey:new f(e.id)}),n({pubkey:new f(t.authority),isWritable:!1}),n({pubkey:new f(t.openOrders),isWritable:!1}),n({pubkey:new f(t.targetOrders)}),n({pubkey:new f(e.lpMint.address)}),n({pubkey:new f(t.vault.A)}),n({pubkey:new f(t.vault.B)})];return e.pooltype.includes("StablePool")&&k.push(n({pubkey:c})),k.push(n({pubkey:new f(e.marketId),isWritable:!1}),n({pubkey:i.baseTokenAccount}),n({pubkey:i.quoteTokenAccount}),n({pubkey:i.lpTokenAccount}),n({pubkey:i.owner,isWritable:!1,isSigner:!0}),n({pubkey:new f(t.marketEventQueue),isWritable:!1})),new R({programId:new f(e.programId),keys:k,data:P})}function Ca(r){let{poolInfo:e,poolKeys:t,userKeys:i,lpAmount:s,baseAmountMin:d,quoteAmountMin:u,modelDataPubKey:y=K}=r,c=N(t),P=4;if(e.pooltype.includes("StablePool")&&(P=5),P===4||P===5){let k=Buffer.alloc(de.span);de.encode({instruction:4,lpAmount:g(s),baseAmountMin:g(d),quoteAmountMin:g(u)},k);let M=[n({pubkey:E,isWritable:!1}),n({pubkey:c.id}),n({pubkey:c.authority,isWritable:!1}),n({pubkey:c.openOrders}),n({pubkey:c.targetOrders}),n({pubkey:c.mintLp.address}),n({pubkey:c.vault.A}),n({pubkey:c.vault.B})];return P===5?M.push(n({pubkey:y})):(M.push(n({pubkey:c.id})),M.push(n({pubkey:c.id}))),M.push(n({pubkey:c.marketProgramId,isWritable:!1}),n({pubkey:c.marketId}),n({pubkey:c.marketBaseVault}),n({pubkey:c.marketQuoteVault}),n({pubkey:c.marketAuthority,isWritable:!1}),n({pubkey:i.lpTokenAccount}),n({pubkey:i.baseTokenAccount}),n({pubkey:i.quoteTokenAccount}),n({pubkey:i.owner,isWritable:!1,isSigner:!0}),n({pubkey:c.marketEventQueue}),n({pubkey:c.marketBids}),n({pubkey:c.marketAsks})),new R({programId:c.programId,keys:M,data:k})}return new R({programId:c.programId,keys:[]})}function Ra({programId:r,ammId:e,ammAuthority:t,ammOpenOrders:i,lpMint:s,coinMint:d,pcMint:u,coinVault:y,pcVault:c,withdrawQueue:P,ammTargetOrders:k,poolTempLp:M,marketProgramId:Ee,marketId:Fe,userWallet:Ve,userCoinVault:We,userPcVault:ve,userLpVault:Ke,nonce:qe,openTime:Ue,coinAmount:Ge,pcAmount:He,ammConfigId:je,feeDestinationId:ze}){let fe=w([T("instruction"),T("nonce"),o("openTime"),o("pcAmount"),o("coinAmount")]),Ye=[{pubkey:E,isSigner:!1,isWritable:!1},{pubkey:Lt,isSigner:!1,isWritable:!1},{pubkey:Oe.programId,isSigner:!1,isWritable:!1},{pubkey:Ie,isSigner:!1,isWritable:!1},{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:t,isSigner:!1,isWritable:!1},{pubkey:i,isSigner:!1,isWritable:!0},{pubkey:s,isSigner:!1,isWritable:!0},{pubkey:d,isSigner:!1,isWritable:!1},{pubkey:u,isSigner:!1,isWritable:!1},{pubkey:y,isSigner:!1,isWritable:!0},{pubkey:c,isSigner:!1,isWritable:!0},{pubkey:k,isSigner:!1,isWritable:!0},{pubkey:je,isSigner:!1,isWritable:!1},{pubkey:ze,isSigner:!1,isWritable:!0},{pubkey:Ee,isSigner:!1,isWritable:!1},{pubkey:Fe,isSigner:!1,isWritable:!1},{pubkey:Ve,isSigner:!0,isWritable:!0},{pubkey:We,isSigner:!1,isWritable:!0},{pubkey:ve,isSigner:!1,isWritable:!0},{pubkey:Ke,isSigner:!1,isWritable:!0}],ge=Buffer.alloc(fe.span);return fe.encode({instruction:1,nonce:qe,openTime:Ue,coinAmount:Ge,pcAmount:He},ge),{instruction:new R({keys:Ye,programId:r,data:ge}),instructionType:j.AmmV4CreatePool}}function Ma(r){let e=w([T("instruction"),T("simulateType")]),t=Buffer.alloc(e.span);e.encode({instruction:12,simulateType:0},t);let i=[n({pubkey:new f(r.id),isWritable:!1}),n({pubkey:new f(r.authority),isWritable:!1}),n({pubkey:new f(r.openOrders),isWritable:!1}),n({pubkey:new f(r.vault.A),isWritable:!1}),n({pubkey:new f(r.vault.B),isWritable:!1}),n({pubkey:new f(r.mintLp.address),isWritable:!1}),n({pubkey:new f(r.marketId),isWritable:!1}),n({pubkey:new f(r.marketEventQueue),isWritable:!1})];return new R({programId:new f(r.programId),keys:i,data:t})}function Ct({poolKeys:r,userKeys:e,amountIn:t,minAmountOut:i,modelDataPubKey:s=K},d){let u=N(r),y=Buffer.alloc(ce.span);ce.encode({instruction:9,amountIn:g(t),minAmountOut:g(i)},y);let c=[n({pubkey:E,isWritable:!1}),n({pubkey:u.id}),n({pubkey:u.authority,isWritable:!1}),n({pubkey:u.openOrders})];return d===4&&c.push(n({pubkey:u.targetOrders})),c.push(n({pubkey:u.vault.A}),n({pubkey:u.vault.B})),d===5&&c.push(n({pubkey:s})),c.push(n({pubkey:u.marketProgramId,isWritable:!1}),n({pubkey:u.marketId}),n({pubkey:u.marketBids}),n({pubkey:u.marketAsks}),n({pubkey:u.marketEventQueue}),n({pubkey:u.marketBaseVault}),n({pubkey:u.marketQuoteVault}),n({pubkey:u.marketAuthority,isWritable:!1}),n({pubkey:e.tokenAccountIn}),n({pubkey:e.tokenAccountOut}),n({pubkey:e.owner,isWritable:!1,isSigner:!0})),new R({programId:u.programId,keys:c,data:y})}function Rt({poolKeys:r,userKeys:e,maxAmountIn:t,amountOut:i,modelDataPubKey:s=K},d){let u=N(r),y=Buffer.alloc(le.span);le.encode({instruction:11,maxAmountIn:g(t),amountOut:g(i)},y);let c=[n({pubkey:E,isWritable:!1}),n({pubkey:u.id}),n({pubkey:u.authority,isWritable:!1}),n({pubkey:u.openOrders}),n({pubkey:u.targetOrders}),n({pubkey:u.vault.A}),n({pubkey:u.vault.B})];return d===5&&c.push(n({pubkey:s})),c.push(n({pubkey:u.marketProgramId,isWritable:!1}),n({pubkey:u.marketId}),n({pubkey:u.marketBids}),n({pubkey:u.marketAsks}),n({pubkey:u.marketEventQueue}),n({pubkey:u.marketBaseVault}),n({pubkey:u.marketQuoteVault}),n({pubkey:u.marketAuthority,isWritable:!1}),n({pubkey:e.tokenAccountIn}),n({pubkey:e.tokenAccountOut}),n({pubkey:e.owner,isWritable:!1,isSigner:!0})),new R({programId:u.programId,keys:c,data:y})}function Da(r){let{poolKeys:e,version:t,userKeys:i,amountIn:s,amountOut:d,fixedSide:u}=r;if(t===4||t===5){let y={poolKeys:e,userKeys:i};if(u==="in")return Ct(A(S({},y),{amountIn:s,minAmountOut:d}),t);if(u==="out")return Rt(A(S({},y),{maxAmountIn:s,amountOut:d}),t);Ne.logWithError("invalid params","params",r)}throw Ne.logWithError("invalid version","poolKeys.version",t),new Error("invalid version")}function _a({poolKeys:r,userKeys:e,startTime:t}){let i=Buffer.alloc(me.span);me.encode({instruction:0,nonce:5,startTime:g(t)},i);let s=N(r),d=[n({pubkey:E,isWritable:!1}),n({pubkey:Oe.programId,isWritable:!1}),n({pubkey:Bt,isWritable:!1}),n({pubkey:s.id}),n({pubkey:s.authority,isWritable:!1}),n({pubkey:s.openOrders}),n({pubkey:s.mintLp.address}),n({pubkey:s.mintA.address,isWritable:!1}),n({pubkey:s.mintB.address,isWritable:!1}),n({pubkey:s.vault.A,isWritable:!1}),n({pubkey:s.vault.B,isWritable:!1}),n({pubkey:s.id}),n({pubkey:s.targetOrders}),n({pubkey:e.lpTokenAccount}),n({pubkey:s.id,isWritable:!1}),n({pubkey:s.marketProgramId,isWritable:!1}),n({pubkey:s.marketId,isWritable:!1}),n({pubkey:e.payer,isSigner:!0})];return new R({programId:s.programId,keys:d,data:i})}function Na({poolKeys:r}){let e=w([T("instruction"),T("simulateType")]),t=Buffer.alloc(e.span);e.encode({instruction:12,simulateType:0},t);let i=[n({pubkey:new f(r.id),isWritable:!1}),n({pubkey:new f(r.authority),isWritable:!1}),n({pubkey:new f(r.openOrders),isWritable:!1}),n({pubkey:new f(r.vault.A),isWritable:!1}),n({pubkey:new f(r.vault.B),isWritable:!1}),n({pubkey:new f(r.mintLp.address),isWritable:!1}),n({pubkey:new f(r.marketId),isWritable:!1}),n({pubkey:new f(r.marketEventQueue),isWritable:!1})];return{instruction:new R({programId:new f(r.programId),keys:i,data:t})}}export{Ra as createPoolV4InstructionV2,Da as makeAMMSwapInstruction,La as makeAddLiquidityInstruction,_a as makeInitPoolInstructionV4,Na as makeSimulatePoolInfoInstruction,Ct as makeSwapFixedInInstruction,Rt as makeSwapFixedOutInstruction,Ca as removeLiquidityInstruction,Ma as simulatePoolInfoInstruction};
//# sourceMappingURL=instruction.mjs.map