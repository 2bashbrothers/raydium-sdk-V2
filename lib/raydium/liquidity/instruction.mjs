var Je=Object.defineProperty,Xe=Object.defineProperties;var $e=Object.getOwnPropertyDescriptors;var ye=Object.getOwnPropertySymbols;var et=Object.prototype.hasOwnProperty,tt=Object.prototype.propertyIsEnumerable;var be=(r,e,t)=>e in r?Je(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,A=(r,e)=>{for(var t in e||(e={}))et.call(e,t)&&be(r,t,e[t]);if(ye)for(var t of ye(e))tt.call(e,t)&&be(r,t,e[t]);return r},S=(r,e)=>Xe(r,$e(e));import{PublicKey as f,SystemProgram as _e,SYSVAR_RENT_PUBKEY as Dt,TransactionInstruction as D}from"@solana/web3.js";import{ASSOCIATED_TOKEN_PROGRAM_ID as Mt,TOKEN_PROGRAM_ID as F}from"@solana/spl-token";import{PublicKey as Kt}from"@solana/web3.js";import{get as he,set as nt}from"lodash";var Q=class{constructor(e){this.logLevel=e.logLevel!==void 0?e.logLevel:0,this.name=e.name}set level(e){this.logLevel=e}get time(){return Date.now().toString()}get moduleName(){return this.name}isLogLevel(e){return e<=this.logLevel}error(...e){return this.isLogLevel(0)?(console.error(this.time,this.name,"sdk logger error",...e),this):this}logWithError(...e){let t=e.map(o=>typeof o=="object"?JSON.stringify(o):o).join(", ");throw new Error(t)}warning(...e){return this.isLogLevel(1)?(console.warn(this.time,this.name,"sdk logger warning",...e),this):this}info(...e){return this.isLogLevel(2)?(console.info(this.time,this.name,"sdk logger info",...e),this):this}debug(...e){return this.isLogLevel(3)?(console.debug(this.time,this.name,"sdk logger debug",...e),this):this}},Te={},rt={};function x(r){let e=he(Te,r);if(!e){let t=he(rt,r);e=new Q({name:r,logLevel:t}),nt(Te,r,e)}return e}import{MINT_SIZE as Ht,TOKEN_PROGRAM_ID as jt,getTransferFeeConfig as zt,unpackMint as Qt}from"@solana/spl-token";var Zt=x("Raydium_accountInfo_util");import B from"bn.js";import Nr from"decimal.js";import mt from"big.js";import G from"bn.js";import it from"toformat";var ot=it,_=ot;import U from"big.js";import at from"bn.js";import ut from"decimal.js-light";import V from"bn.js";var xe=9007199254740991;function g(r){let e=x("Raydium_parseBigNumberish");if(r instanceof V)return r;if(typeof r=="string"){if(r.match(/^-?[0-9]+$/))return new V(r);e.logWithError(`invalid BigNumberish string: ${r}`)}return typeof r=="number"?(r%1&&e.logWithError(`BigNumberish number underflow: ${r}`),(r>=xe||r<=-xe)&&e.logWithError(`BigNumberish number overflow: ${r}`),new V(String(r))):typeof r=="bigint"?new V(r.toString()):(e.error(`invalid BigNumberish value: ${r}`),new V(0))}var q=x("module/fraction"),Y=_(U),W=_(ut),ct={[0]:W.ROUND_DOWN,[1]:W.ROUND_HALF_UP,[2]:W.ROUND_UP},lt={[0]:U.roundDown,[1]:U.roundHalfUp,[2]:U.roundUp},p=class{constructor(e,t=new at(1)){this.numerator=g(e),this.denominator=g(t)}get quotient(){return this.numerator.div(this.denominator)}invert(){return new p(this.denominator,this.numerator)}add(e){let t=e instanceof p?e:new p(g(e));return this.denominator.eq(t.denominator)?new p(this.numerator.add(t.numerator),this.denominator):new p(this.numerator.mul(t.denominator).add(t.numerator.mul(this.denominator)),this.denominator.mul(t.denominator))}sub(e){let t=e instanceof p?e:new p(g(e));return this.denominator.eq(t.denominator)?new p(this.numerator.sub(t.numerator),this.denominator):new p(this.numerator.mul(t.denominator).sub(t.numerator.mul(this.denominator)),this.denominator.mul(t.denominator))}mul(e){let t=e instanceof p?e:new p(g(e));return new p(this.numerator.mul(t.numerator),this.denominator.mul(t.denominator))}div(e){let t=e instanceof p?e:new p(g(e));return new p(this.numerator.mul(t.denominator),this.denominator.mul(t.numerator))}toSignificant(e,t={groupSeparator:""},o=1){Number.isInteger(e)||q.logWithError(`${e} is not an integer.`),e<=0&&q.logWithError(`${e} is not positive.`),W.set({precision:e+1,rounding:ct[o]});let s=new W(this.numerator.toString()).div(this.denominator.toString()).toSignificantDigits(e);return s.toFormat(s.decimalPlaces(),t)}toFixed(e,t={groupSeparator:""},o=1){return Number.isInteger(e)||q.logWithError(`${e} is not an integer.`),e<0&&q.logWithError(`${e} is negative.`),Y.DP=e,Y.RM=lt[o]||1,new Y(this.numerator.toString()).div(this.denominator.toString()).toFormat(e,t)}isZero(){return this.numerator.isZero()}};var pt=x("Raydium_amount"),Pe=_(mt);function dt(r,e){let t="0",o="0";if(r.includes(".")){let s=r.split(".");s.length===2?([t,o]=s,o=o.padEnd(e,"0")):pt.logWithError(`invalid number string, num: ${r}`)}else t=r;return[t,o.slice(0,e)||o]}var I=class extends p{constructor(t,o,s=!0,d){let u=new G(0),y=J.pow(new G(t.decimals));if(s)u=g(o);else{let c=new G(0),w=new G(0);if(typeof o=="string"||typeof o=="number"||typeof o=="bigint"){let[k,M]=dt(o.toString(),t.decimals);c=g(k),w=g(M)}c=c.mul(y),u=c.add(w)}super(u,y);this.logger=x(d||"TokenAmount"),this.token=t}get raw(){return this.numerator}isZero(){return this.raw.isZero()}gt(t){return this.token.equals(t.token)||this.logger.logWithError("gt token not equals"),this.raw.gt(t.raw)}lt(t){return this.token.equals(t.token)||this.logger.logWithError("lt token not equals"),this.raw.lt(t.raw)}add(t){return this.token.equals(t.token)||this.logger.logWithError("add token not equals"),new I(this.token,this.raw.add(t.raw))}subtract(t){return this.token.equals(t.token)||this.logger.logWithError("sub token not equals"),new I(this.token,this.raw.sub(t.raw))}toSignificant(t=this.token.decimals,o,s=0){return super.toSignificant(t,o,s)}toFixed(t=this.token.decimals,o,s=0){return t>this.token.decimals&&this.logger.logWithError("decimals overflow"),super.toFixed(t,o,s)}toExact(t={groupSeparator:""}){return Pe.DP=this.token.decimals,new Pe(this.numerator.toString()).div(this.denominator.toString()).toFormat(t)}};import{PublicKey as ft}from"@solana/web3.js";import{TOKEN_PROGRAM_ID as we}from"@solana/spl-token";var ke={chainId:101,address:ft.default.toBase58(),programId:we.toBase58(),decimals:9,symbol:"SOL",name:"solana",logoURI:"https://img-v1.raydium.io/icon/So11111111111111111111111111111111111111112.png",tags:[],priority:2,type:"raydium",extensions:{coingeckoId:"solana"}},R={chainId:101,address:"So11111111111111111111111111111111111111112",programId:we.toBase58(),decimals:9,symbol:"WSOL",name:"Wrapped SOL",logoURI:"https://img-v1.raydium.io/icon/So11111111111111111111111111111111111111112.png",tags:[],priority:2,type:"raydium",extensions:{coingeckoId:"solana"}};import{PublicKey as $}from"@solana/web3.js";import{PublicKey as b,SystemProgram as Ae,SYSVAR_RENT_PUBKEY as gt}from"@solana/web3.js";import{TOKEN_PROGRAM_ID as yt}from"@solana/spl-token";function n({pubkey:r,isSigner:e=!1,isWritable:t=!0}){return{pubkey:r,isWritable:t,isSigner:e}}var Dn=[n({pubkey:yt,isWritable:!1}),n({pubkey:Ae.programId,isWritable:!1}),n({pubkey:gt,isWritable:!1})];function Se({publicKey:r,transformSol:e}){let t=X(r.toString());if(t instanceof b)return e&&t.equals(v)?Z:t;if(e&&t.toString()===v.toBase58())return Z;if(typeof t=="string"){if(t===b.default.toBase58())return b.default;try{return new b(t)}catch{throw new Error("invalid public key")}}throw new Error("invalid public key")}function X(r){try{return new b(r)}catch{return r}}var Mn=new b("MemoSq4gqABAXKb96qnH8TysNcWxMyWCqXgDLGmfcHr"),Rn=new b("MemoSq4gqABAXKb96qnH8TysNcWxMyWCqXgDLGmfcHr"),Ie=new b("SysvarRent111111111111111111111111111111111"),Nn=new b("SysvarC1ock11111111111111111111111111111111"),On=new b("metaqbxxUerdq28cj1RbAWkYQm3ybzjb6a8bt518x1s"),En=new b("Sysvar1nstructions1111111111111111111111111"),Fn=Ae.programId,_n=new b("4k3Dyjzvzp8eMZWUXbBCjEvwSkkk59S5iCNLY3QrkX6R"),Vn=new b("Ea5SjE2Y6yvCeW5dYTn7PYMuW5ikXkvbGdcmSnXeaLjS"),Wn=new b("SRMuApVNdxXokk5GT7XD5cUUgXMBCoAz2LHeuAoKWRt"),vn=new b("EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v"),Kn=new b("Es9vMFrzaCERmJfrF4H2FYD4KCoNkY11McCe8BenwNYB"),qn=new b("mSoLzYCxHdYgdzU16g5QSh3i5K3z3KZK7ytfqcJm7So"),Un=new b("7dHbWXmci3dT8UFYWYZweBLXgycu7Y3iL6trKn1Y7ARj"),Gn=new b("USDH1SM1ojwWUga67PGrgFWUHibbjqMvuMaDkRJTgkX"),Hn=new b("NRVwhjBQiUPYtfDT5zRBVJajzFQHaBUNtC7SNVvqRFa"),jn=new b("ANAxByE6G2WjFp7A4NqtWYXb3mgruyzZYg3spfxe6Lbo"),zn=new b("7vfCXTUXx5WJV5JADk17DUJ4ksgau7utNKj4b963voxs"),Z=new b("So11111111111111111111111111111111111111112"),v=b.default;var ee=class{constructor({mint:e,decimals:t,symbol:o,name:s,skipMint:d=!1,isToken2022:u=!1}){if(e===v.toBase58()||e instanceof $&&v.equals(e)){this.decimals=R.decimals,this.symbol=R.symbol,this.name=R.name,this.mint=new $(R.address),this.isToken2022=!1;return}this.decimals=t,this.symbol=o||e.toString().substring(0,6),this.name=s||e.toString().substring(0,6),this.mint=d?$.default:Se({publicKey:e}),this.isToken2022=u}equals(e){return this===e?!0:this.mint.equals(e.mint)}},N=ee;N.WSOL=new ee(S(A({},R),{mint:R.address}));var te=class{constructor({decimals:e,symbol:t="UNKNOWN",name:o="UNKNOWN"}){this.decimals=e,this.symbol=t,this.name=o}equals(e){return this===e}},H=te;H.SOL=new te(ke);import bt from"bn.js";var Le=new p(new bt(100)),E=class extends p{toSignificant(e=5,t,o){return this.mul(Le).toSignificant(e,t,o)}toFixed(e=2,t,o){return this.mul(Le).toFixed(e,t,o)}};var ht=x("Raydium_price"),L=class extends p{constructor(t){let{baseToken:o,quoteToken:s,numerator:d,denominator:u}=t;super(d,u);this.baseToken=o,this.quoteToken=s,this.scalar=new p(ne(o.decimals),ne(s.decimals))}get raw(){return new p(this.numerator,this.denominator)}get adjusted(){return super.mul(this.scalar)}invert(){return new L({baseToken:this.quoteToken,quoteToken:this.baseToken,denominator:this.numerator,numerator:this.denominator})}mul(t){this.quoteToken!==t.baseToken&&ht.logWithError("mul token not equals");let o=super.mul(t);return new L({baseToken:this.baseToken,quoteToken:t.quoteToken,denominator:o.denominator,numerator:o.numerator})}toSignificant(t=this.quoteToken.decimals,o,s){return this.adjusted.toSignificant(t,o,s)}toFixed(t=this.quoteToken.decimals,o,s){return this.adjusted.toFixed(t,o,s)}};import{PublicKey as Tt}from"@solana/web3.js";import xt from"bn.js";function Be(r){return typeof r=="object"&&r!==null&&![N,I,Tt,p,xt,L,E].some(e=>typeof e=="object"&&r instanceof e)}function O(r){return typeof r=="string"?X(r):Array.isArray(r)?r.map(e=>O(e)):Be(r)?Object.fromEntries(Object.entries(r).map(([e,t])=>[e,O(t)])):r}var re=new B(0),Ce=new B(1),Ur=new B(2),Gr=new B(3),Hr=new B(5),J=new B(10),jr=new B(100),zr=new B(1e3),Qr=new B(1e4);function ne(r){return J.pow(g(r))}import{PublicKey as xi}from"@solana/web3.js";import{TOKEN_PROGRAM_ID as wi}from"@solana/spl-token";import{ComputeBudgetProgram as ni,Keypair as oi,PublicKey as si,Transaction as ui,TransactionMessage as li,VersionedTransaction as mi}from"@solana/web3.js";var j={CreateAccount:"CreateAccount",InitAccount:"InitAccount",CreateATA:"CreateATA",CloseAccount:"CloseAccount",TransferAmount:"TransferAmount",InitMint:"InitMint",MintTo:"MintTo",InitMarket:"InitMarket",Util1216OwnerClaim:"Util1216OwnerClaim",SetComputeUnitPrice:"SetComputeUnitPrice",SetComputeUnitLimit:"SetComputeUnitLimit",ClmmCreatePool:"ClmmCreatePool",ClmmOpenPosition:"ClmmOpenPosition",ClmmIncreasePosition:"ClmmIncreasePosition",ClmmDecreasePosition:"ClmmDecreasePosition",ClmmClosePosition:"ClmmClosePosition",ClmmSwapBaseIn:"ClmmSwapBaseIn",ClmmSwapBaseOut:"ClmmSwapBaseOut",ClmmInitReward:"ClmmInitReward",ClmmSetReward:"ClmmSetReward",ClmmCollectReward:"ClmmCollectReward",ClmmLockPosition:"ClmmLockPosition",ClmmHarvestLockPosition:"ClmmHarvestLockPosition",AmmV4Swap:"AmmV4Swap",AmmV4AddLiquidity:"AmmV4AddLiquidity",AmmV4RemoveLiquidity:"AmmV4RemoveLiquidity",AmmV4SimulatePoolInfo:"AmmV4SimulatePoolInfo",AmmV4SwapBaseIn:"AmmV4SwapBaseIn",AmmV4SwapBaseOut:"AmmV4SwapBaseOut",AmmV4CreatePool:"AmmV4CreatePool",AmmV4InitPool:"AmmV4InitPool",AmmV5AddLiquidity:"AmmV5AddLiquidity",AmmV5RemoveLiquidity:"AmmV5RemoveLiquidity",AmmV5SimulatePoolInfo:"AmmV5SimulatePoolInfo",AmmV5SwapBaseIn:"AmmV5SwapBaseIn",AmmV5SwapBaseOut:"AmmV5SwapBaseOut",RouteSwap:"RouteSwap",RouteSwap1:"RouteSwap1",RouteSwap2:"RouteSwap2",FarmV3Deposit:"FarmV3Deposit",FarmV3Withdraw:"FarmV3Withdraw",FarmV3CreateLedger:"FarmV3CreateLedger",FarmV4Withdraw:"FarmV4Withdraw",FarmV5Deposit:"FarmV5Deposit",FarmV5Withdraw:"FarmV5Withdraw",FarmV5CreateLedger:"FarmV5CreateLedger",FarmV6Deposit:"FarmV6Deposit",FarmV6Withdraw:"FarmV6Withdraw",FarmV6Create:"FarmV6Create",FarmV6Restart:"FarmV6Restart",FarmV6CreatorAddReward:"FarmV6CreatorAddReward",FarmV6CreatorWithdraw:"FarmV6CreatorWithdraw",CpmmCreatePool:"CpmmCreatePool",CpmmAddLiquidity:"CpmmAddLiquidity",CpmmWithdrawLiquidity:"CpmmWithdrawLiquidity",CpmmSwapBaseIn:"CpmmSwapBaseIn",CpmmSwapBaseOut:"CpmmSwapBaseOut",CpmmLockLp:"CpmmLockLp",CpmmCollectLockFee:"CpmmCollectLockFee",TransferTip:"TransferTip"};import{TOKEN_PROGRAM_ID as gi}from"@solana/spl-token";var yi=x("Raydium_txUtil");import{PublicKey as a}from"@solana/web3.js";var Ii=new a("EhhTKczWMGQt46ynNeRX1WfeagwwJd7ufHvCDjRxjo5Q"),Li=new a("CBuCnLe26faBpcBP2fktp4rp8abpcAnTWft6ZrP5Q4T"),Bi=new a("9KEPoZmtHUrBbhWN1v1KWLMkkvwY6WLtAVUCPRtRjP4z"),Ci=new a("FarmqiPv5eAj3j1GMdMCMUGXqPUvmquZtMy86QH6rzhG"),Di=new a("CLaimxFqjHzgTJtAGHU47NPhg6qrc5sCnpC4tBLyABQS"),Mi=new a("srmqPvymJeFKQ4zGQed1GFppgkRHL9kaELCbyksJtPX"),Ri=new a("9xQeWvG816bUx9EPjHmaT23yvVM2ZWbrrpZb9PusVFin"),Ni=new a("675kPX9MHTjS2zt1qfr1NYHuzeLXfQM9H24wFSUt1Mp8"),Oi=new a("5quBtoiQqxF9Jv6KYKctB59NT3gtJD2Y65kdnB1Uev3h"),Ei=new a("CDSr3ssLcRB6XYPJwAfFt18MZvEZp4LjHcvzBVZ45duo"),Fi=new a("CAMMCzo5YL8w4VFF8KVHrK22GGUsp5VTaW7grrKgrWqK"),_i=new a("LockrWmn6K5twhz3y9w1dQERbmgSaRkfnTeTKbpofwE"),Vi=new a("kN1kEznaF5Xbd8LYuqtEFcxzWSBk5Fv6ygX6SqEGJVy"),K=new a("CDSr3ssLcRB6XYPJwAfFt18MZvEZp4LjHcvzBVZ45duo"),Wi=new a("routeUGWgWzqBWFcrCfv8tritsqukccJPu3q5GPP3xS"),vi=new a("7YttLkHDoNj9wyDur5pM1ejNaAvT9X4eqaYcHQqtj2G5"),Ki=new a("6FJon3QE27qgPVggARueB22hLvoh22VzJpXv4rBEoSLF"),qi=new a("CC12se5To1CdEuw7fDS27B7Geo5jJyL7t5UK2B44NgiH"),Ui=new a("9HzJyW1qZsEiSfMUf6L2jo3CcTKAyBmSyKdwQeYisHrC"),Gi=new a("DropEU8AvevN3UrXWXTMuz3rqnMczQVNjq3kcSdW2SQi"),Hi=new a("CPMMoo8L3F4NbTegBCKVNunggL7H1ZpdTHKxQB5qKP1C"),ji=new a("GpMZbSM2GgvTKHJirzeGfMFoaZ8UR2X7F4v8vHTvxFbL"),zi=new a("DNXgeM9EiiaAbaWvwjHj9fQQLAX5ZsfHyvmYUNRAdNC8"),Qi=new a("LockrWmn6K5twhz3y9w1dQERbmgSaRkfnTeTKbpofwE"),Zi=new a("3f7GcQFG397GAaEnv51zR6tsTVihYRydnydDD1cXekxH"),Yi=new a("LanMV9sAd7wArD4vJFi2qDdfnVhFxYSUg6eADduJ3uj"),Ji=new a("WLHv2UAZm6z4KyaaELi5pjdbJh6RESMva1Rnn8pJVVh"),Xi=new a("DRay6fNdQ5J82H7xV6uq2aV3mNrUZ1J4PgSKsWgptcm6"),$i=new a("5xqNaZXX5eUi4p5HU4oz9i5QnwRNT2y6oN7yyn4qENeq"),eo=new a("4Bu96XjU84XjPDSpveTVf6LYGCkfW5FK7SNkREWcEfV4"),to=new a("6s1xP3hpbAfFoNtUNF8mfHsjr2Bd97JxFJRWLbL6aHuX");var no={OPEN_BOOK_PROGRAM:new a("EoTcMgcDRTJVZDMZWBoU6rhYHZfkNTVEAfz3uUJRcYGj"),SERUM_PROGRAM_ID_V3:new a("Ray1111111111111111111111111111111111111111"),AMM_V4:new a("DRaya7Kj3aMWQSy19kSjvmuwq9docCHofyP9kanQGaav"),AMM_STABLE:new a("DRayDdXc1NZQ9C3hRWmoSf8zK4iapgMnjdNZWrfwsP8m"),CLMM_PROGRAM_ID:new a("DRayAUgENGQBKVaX8owNhgzkEDyoHTGVEGHVJT1E9pfH"),CLMM_LOCK_PROGRAM_ID:new a("DRay25Usp3YJAi7beckgpGUC7mGJ2cR1AVPxhYfwVCUX"),CLMM_LOCK_AUTH_ID:new a("6Aoh8h2Lw2m5UGxYR8AdAL87jTWYeKoxM52mJRzfYwN"),CREATE_CPMM_POOL_PROGRAM:new a("DRaycpLY18LhpbydsBWbVJtxpNv9oXPgjRSfpF2bWpYb"),CREATE_CPMM_POOL_AUTH:new a("CXniRufdq5xL8t8jZAPxsPZDpuudwuJSPWnbcD5Y5Nxq"),CREATE_CPMM_POOL_FEE_ACC:new a("3oE58BKVt8KuYkGxx8zBojugnymWmBiyafWgMrnb6eYy"),LOCK_CPMM_PROGRAM:new a("DRay25Usp3YJAi7beckgpGUC7mGJ2cR1AVPxhYfwVCUX"),LOCK_CPMM_AUTH:new a("7qWVV8UY2bRJfDLP4s37YzBPKUkVB46DStYJBpYbQzu3"),UTIL1216:a.default,Router:new a("DRaybByLpbUL57LJARs3j8BitTxVfzBg351EaMr5UTCd"),FARM_PROGRAM_ID_V3:new a("DRayWyrLmEW5KEeqs8kdTMMaBabapqagaBC7KWpGtJeZ"),FARM_PROGRAM_ID_V4:new a("Ray1111111111111111111111111111111111111111"),FARM_PROGRAM_ID_V5:new a("DRayiCGSZgku1GTK6rXD6mVDdingXy6APAH1R6R5L2LC"),FARM_PROGRAM_ID_V6:new a("DRayzbYakXs45ELHkzH6vC3fuhQqTAnv5A68gdFuvZyZ"),LAUNCHPAD_PROGRAM:new a("DRay6fNdQ5J82H7xV6uq2aV3mNrUZ1J4PgSKsWgptcm6"),LAUNCHPAD_AUTH:new a("5xqNaZXX5eUi4p5HU4oz9i5QnwRNT2y6oN7yyn4qENeq"),LAUNCHPAD_PLATFORM:new a("2Jx4KTDrVSdWNazuGpcA8n3ZLTRGGBDxAWhuKe2Xcj2a"),LAUNCHPAD_CONFIG:new a("7ZR4zD7PYfY2XxoG1Gxcy2EgEeGYrpxrwzPuwdUBssEt"),FEE_DESTINATION_ID:new a("9y8ENuuZ3b19quffx9hQvRVygG5ky6snHfRvGpuSfeJy"),MODEL_DATA_PUBKEY:new a("Ray1111111111111111111111111111111111111111")};import oo from"bn.js";import{PublicKey as Pt,AddressLookupTableAccount as De}from"@solana/web3.js";var wt={AcL1Vo8oy1ULiavEcjSUcwfBSForXMudcZvDZy5nzJkU:new De({key:new Pt("AcL1Vo8oy1ULiavEcjSUcwfBSForXMudcZvDZy5nzJkU"),state:De.deserialize(Buffer.from("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","base64"))})};import{PublicKey as Io,sendAndConfirmTransaction as Lo,SystemProgram as Do,Transaction as Mo,TransactionMessage as No,VersionedTransaction as Oo}from"@solana/web3.js";import Fo from"axios";import kt from"bn.js";var Uo=new kt(1e6);import{PublicKey as Ct}from"@solana/web3.js";import Oe,{isBN as Ee}from"bn.js";import{bits as ms,BitStructure as ps,blob as At,Blob as ds,cstr as fs,f32 as gs,f32be as ys,f64 as bs,f64be as hs,greedy as Ts,Layout as St,ns64 as xs,ns64be as Ps,nu64 as ws,nu64be as ks,offset as As,s16 as Ss,s16be as Is,s24 as Ls,s24be as Bs,s32 as Cs,s32be as Ds,s40 as Ms,s40be as Rs,s48 as Ns,s48be as Os,s8 as Es,seq as It,struct as Fs,Structure as Lt,u16 as _s,u16be as Vs,u24 as Ws,u24be as vs,u32 as Ks,u32be as qs,u40 as Us,u40be as Gs,u48 as Hs,u48be as js,u8 as zs,UInt as Bt,union as Qs,Union as Zs,unionLayoutDiscriminator as Ys,utf8 as Js}from"@solana/buffer-layout";var ie=St,Me=Lt;var Re=Bt;var Ne=It;var oe=At;var z=class extends ie{constructor(t,o,s){super(t,s);this.blob=oe(t),this.signed=o}decode(t,o=0){let s=new Oe(this.blob.decode(t,o),10,"le");return this.signed?s.fromTwos(this.span*8).clone():s}encode(t,o,s=0){return typeof t=="number"&&(t=new Oe(t)),this.signed&&(t=t.toTwos(this.span*8)),this.blob.encode(t.toArrayLike(Buffer,"le",this.span),o,s)}};function T(r){return new Re(1,r)}function i(r){return new z(8,!1,r)}function C(r){return new z(16,!1,r)}var se=class extends ie{constructor(t,o,s,d){super(t.span,d);this.layout=t,this.decoder=o,this.encoder=s}decode(t,o){return this.decoder(this.layout.decode(t,o))}encode(t,o,s){return this.layout.encode(this.encoder(t),o,s)}getSpan(t,o){return this.layout.getSpan(t,o)}};function h(r){return new se(oe(32),e=>new Ct(e),e=>e.toBuffer(),r)}var ae=class extends Me{decode(e,t){return super.decode(e,t)}};function P(r,e,t){return new ae(r,e,t)}function ue(r,e,t){let o,s=typeof e=="number"?e:Ee(e)?e.toNumber():new Proxy(e,{get(d,u){if(!o){let y=Reflect.get(d,"count");o=Ee(y)?y.toNumber():y,Reflect.set(d,"count",o)}return Reflect.get(d,u)},set(d,u,y){return u==="count"&&(o=y),Reflect.set(d,u,y)}});return Ne(r,s,t)}var ce=P([T("instruction"),i("amountIn"),i("minAmountOut")]),le=P([T("instruction"),i("maxAmountIn"),i("amountOut")]),da=P([T("instruction"),T("nonce")]),me=P([T("instruction"),T("nonce"),i("startTime")]),fa=P([i("status"),i("nonce"),i("maxOrder"),i("depth"),i("baseDecimal"),i("quoteDecimal"),i("state"),i("resetFlag"),i("minSize"),i("volMaxCutRatio"),i("amountWaveRatio"),i("baseLotSize"),i("quoteLotSize"),i("minPriceMultiplier"),i("maxPriceMultiplier"),i("systemDecimalValue"),i("minSeparateNumerator"),i("minSeparateDenominator"),i("tradeFeeNumerator"),i("tradeFeeDenominator"),i("pnlNumerator"),i("pnlDenominator"),i("swapFeeNumerator"),i("swapFeeDenominator"),i("baseNeedTakePnl"),i("quoteNeedTakePnl"),i("quoteTotalPnl"),i("baseTotalPnl"),i("poolOpenTime"),i("punishPcAmount"),i("punishCoinAmount"),i("orderbookToInitTime"),C("swapBaseInAmount"),C("swapQuoteOutAmount"),i("swapBase2QuoteFee"),C("swapQuoteInAmount"),C("swapBaseOutAmount"),i("swapQuote2BaseFee"),h("baseVault"),h("quoteVault"),h("baseMint"),h("quoteMint"),h("lpMint"),h("openOrders"),h("marketId"),h("marketProgramId"),h("targetOrders"),h("withdrawQueue"),h("lpVault"),h("owner"),i("lpReserve"),ue(i(),3,"padding")]),ga=P([i("accountType"),i("status"),i("nonce"),i("maxOrder"),i("depth"),i("baseDecimal"),i("quoteDecimal"),i("state"),i("resetFlag"),i("minSize"),i("volMaxCutRatio"),i("amountWaveRatio"),i("baseLotSize"),i("quoteLotSize"),i("minPriceMultiplier"),i("maxPriceMultiplier"),i("systemDecimalsValue"),i("abortTradeFactor"),i("priceTickMultiplier"),i("priceTick"),i("minSeparateNumerator"),i("minSeparateDenominator"),i("tradeFeeNumerator"),i("tradeFeeDenominator"),i("pnlNumerator"),i("pnlDenominator"),i("swapFeeNumerator"),i("swapFeeDenominator"),i("baseNeedTakePnl"),i("quoteNeedTakePnl"),i("quoteTotalPnl"),i("baseTotalPnl"),i("poolOpenTime"),i("punishPcAmount"),i("punishCoinAmount"),i("orderbookToInitTime"),C("swapBaseInAmount"),C("swapQuoteOutAmount"),C("swapQuoteInAmount"),C("swapBaseOutAmount"),i("swapQuote2BaseFee"),i("swapBase2QuoteFee"),h("baseVault"),h("quoteVault"),h("baseMint"),h("quoteMint"),h("lpMint"),h("modelDataAccount"),h("openOrders"),h("marketId"),h("marketProgramId"),h("targetOrders"),h("owner"),ue(i(),64,"padding")]),pe=P([T("instruction"),i("baseAmountIn"),i("quoteAmountIn"),i("fixedSide"),i("otherAmountMin")]),de=P([T("instruction"),i("lpAmount"),i("baseAmountMin"),i("quoteAmountMin")]);var ya=P([i("fee")]);var Fe=x("Raydium_liquidity_instruction");function La(r){let{poolInfo:e,poolKeys:t,userKeys:o,baseAmountIn:s,quoteAmountIn:d,fixedSide:u,otherAmountMin:y,modelDataPubKey:c=K}=r,w=Buffer.alloc(pe.span);pe.encode({instruction:3,baseAmountIn:g(s),quoteAmountIn:g(d),otherAmountMin:g(y),fixedSide:u==="base"?re:Ce},w);let k=[n({pubkey:F,isWritable:!1}),n({pubkey:new f(e.id)}),n({pubkey:new f(t.authority),isWritable:!1}),n({pubkey:new f(t.openOrders),isWritable:!1}),n({pubkey:new f(t.targetOrders)}),n({pubkey:new f(e.lpMint.address)}),n({pubkey:new f(t.vault.A)}),n({pubkey:new f(t.vault.B)})];return e.pooltype.includes("StablePool")&&k.push(n({pubkey:c})),k.push(n({pubkey:new f(e.marketId),isWritable:!1}),n({pubkey:o.baseTokenAccount}),n({pubkey:o.quoteTokenAccount}),n({pubkey:o.lpTokenAccount}),n({pubkey:o.owner,isWritable:!1,isSigner:!0}),n({pubkey:new f(t.marketEventQueue),isWritable:!1})),new D({programId:new f(e.programId),keys:k,data:w})}function Ba(r){let{poolInfo:e,poolKeys:t,userKeys:o,lpAmount:s,baseAmountMin:d,quoteAmountMin:u,modelDataPubKey:y=K}=r,c=O(t),w=4;if(e.pooltype.includes("StablePool")&&(w=5),w===4||w===5){let k=Buffer.alloc(de.span);de.encode({instruction:4,lpAmount:g(s),baseAmountMin:g(d),quoteAmountMin:g(u)},k);let M=[n({pubkey:F,isWritable:!1}),n({pubkey:c.id}),n({pubkey:c.authority,isWritable:!1}),n({pubkey:c.openOrders}),n({pubkey:c.targetOrders}),n({pubkey:c.mintLp.address}),n({pubkey:c.vault.A}),n({pubkey:c.vault.B})];return w===5?M.push(n({pubkey:y})):(M.push(n({pubkey:c.id})),M.push(n({pubkey:c.id}))),M.push(n({pubkey:c.marketProgramId,isWritable:!1}),n({pubkey:c.marketId}),n({pubkey:c.marketBaseVault}),n({pubkey:c.marketQuoteVault}),n({pubkey:c.marketAuthority,isWritable:!1}),n({pubkey:o.lpTokenAccount}),n({pubkey:o.baseTokenAccount}),n({pubkey:o.quoteTokenAccount}),n({pubkey:o.owner,isWritable:!1,isSigner:!0}),n({pubkey:c.marketEventQueue}),n({pubkey:c.marketBids}),n({pubkey:c.marketAsks})),new D({programId:c.programId,keys:M,data:k})}return new D({programId:c.programId,keys:[]})}function Ca({programId:r,ammId:e,ammAuthority:t,ammOpenOrders:o,lpMint:s,coinMint:d,pcMint:u,coinVault:y,pcVault:c,withdrawQueue:w,ammTargetOrders:k,poolTempLp:M,marketProgramId:Ve,marketId:We,userWallet:ve,userCoinVault:Ke,userPcVault:qe,userLpVault:Ue,nonce:Ge,openTime:He,coinAmount:je,pcAmount:ze,ammConfigId:Qe,feeDestinationId:Ze}){let fe=P([T("instruction"),T("nonce"),i("openTime"),i("pcAmount"),i("coinAmount")]),Ye=[{pubkey:F,isSigner:!1,isWritable:!1},{pubkey:Mt,isSigner:!1,isWritable:!1},{pubkey:_e.programId,isSigner:!1,isWritable:!1},{pubkey:Ie,isSigner:!1,isWritable:!1},{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:t,isSigner:!1,isWritable:!1},{pubkey:o,isSigner:!1,isWritable:!0},{pubkey:s,isSigner:!1,isWritable:!0},{pubkey:d,isSigner:!1,isWritable:!1},{pubkey:u,isSigner:!1,isWritable:!1},{pubkey:y,isSigner:!1,isWritable:!0},{pubkey:c,isSigner:!1,isWritable:!0},{pubkey:k,isSigner:!1,isWritable:!0},{pubkey:Qe,isSigner:!1,isWritable:!1},{pubkey:Ze,isSigner:!1,isWritable:!0},{pubkey:Ve,isSigner:!1,isWritable:!1},{pubkey:We,isSigner:!1,isWritable:!1},{pubkey:ve,isSigner:!0,isWritable:!0},{pubkey:Ke,isSigner:!1,isWritable:!0},{pubkey:qe,isSigner:!1,isWritable:!0},{pubkey:Ue,isSigner:!1,isWritable:!0}],ge=Buffer.alloc(fe.span);return fe.encode({instruction:1,nonce:Ge,openTime:He,coinAmount:je,pcAmount:ze},ge),{instruction:new D({keys:Ye,programId:r,data:ge}),instructionType:j.AmmV4CreatePool}}function Da(r){let e=P([T("instruction"),T("simulateType")]),t=Buffer.alloc(e.span);e.encode({instruction:12,simulateType:0},t);let o=[n({pubkey:new f(r.id),isWritable:!1}),n({pubkey:new f(r.authority),isWritable:!1}),n({pubkey:new f(r.openOrders),isWritable:!1}),n({pubkey:new f(r.vault.A),isWritable:!1}),n({pubkey:new f(r.vault.B),isWritable:!1}),n({pubkey:new f(r.mintLp.address),isWritable:!1}),n({pubkey:new f(r.marketId),isWritable:!1}),n({pubkey:new f(r.marketEventQueue),isWritable:!1})];return new D({programId:new f(r.programId),keys:o,data:t})}function Rt({poolKeys:r,userKeys:e,amountIn:t,minAmountOut:o,modelDataPubKey:s=K},d){let u=O(r),y=Buffer.alloc(ce.span);ce.encode({instruction:9,amountIn:g(t),minAmountOut:g(o)},y);let c=[n({pubkey:F,isWritable:!1}),n({pubkey:u.id}),n({pubkey:u.authority,isWritable:!1}),n({pubkey:u.openOrders})];return d===4&&c.push(n({pubkey:u.targetOrders})),c.push(n({pubkey:u.vault.A}),n({pubkey:u.vault.B})),d===5&&c.push(n({pubkey:s})),c.push(n({pubkey:u.marketProgramId,isWritable:!1}),n({pubkey:u.marketId}),n({pubkey:u.marketBids}),n({pubkey:u.marketAsks}),n({pubkey:u.marketEventQueue}),n({pubkey:u.marketBaseVault}),n({pubkey:u.marketQuoteVault}),n({pubkey:u.marketAuthority,isWritable:!1}),n({pubkey:e.tokenAccountIn}),n({pubkey:e.tokenAccountOut}),n({pubkey:e.owner,isWritable:!1,isSigner:!0})),new D({programId:u.programId,keys:c,data:y})}function Nt({poolKeys:r,userKeys:e,maxAmountIn:t,amountOut:o,modelDataPubKey:s=K},d){let u=O(r),y=Buffer.alloc(le.span);le.encode({instruction:11,maxAmountIn:g(t),amountOut:g(o)},y);let c=[n({pubkey:F,isWritable:!1}),n({pubkey:u.id}),n({pubkey:u.authority,isWritable:!1}),n({pubkey:u.openOrders}),n({pubkey:u.targetOrders}),n({pubkey:u.vault.A}),n({pubkey:u.vault.B})];return d===5&&c.push(n({pubkey:s})),c.push(n({pubkey:u.marketProgramId,isWritable:!1}),n({pubkey:u.marketId}),n({pubkey:u.marketBids}),n({pubkey:u.marketAsks}),n({pubkey:u.marketEventQueue}),n({pubkey:u.marketBaseVault}),n({pubkey:u.marketQuoteVault}),n({pubkey:u.marketAuthority,isWritable:!1}),n({pubkey:e.tokenAccountIn}),n({pubkey:e.tokenAccountOut}),n({pubkey:e.owner,isWritable:!1,isSigner:!0})),new D({programId:u.programId,keys:c,data:y})}function Ma(r){let{poolKeys:e,version:t,userKeys:o,amountIn:s,amountOut:d,fixedSide:u}=r;if(t===4||t===5){let y={poolKeys:e,userKeys:o};if(u==="in")return Rt(S(A({},y),{amountIn:s,minAmountOut:d}),t);if(u==="out")return Nt(S(A({},y),{maxAmountIn:s,amountOut:d}),t);Fe.logWithError("invalid params","params",r)}throw Fe.logWithError("invalid version","poolKeys.version",t),new Error("invalid version")}function Ra({poolKeys:r,userKeys:e,startTime:t}){let o=Buffer.alloc(me.span);me.encode({instruction:0,nonce:5,startTime:g(t)},o);let s=O(r),d=[n({pubkey:F,isWritable:!1}),n({pubkey:_e.programId,isWritable:!1}),n({pubkey:Dt,isWritable:!1}),n({pubkey:s.id}),n({pubkey:s.authority,isWritable:!1}),n({pubkey:s.openOrders}),n({pubkey:s.mintLp.address}),n({pubkey:s.mintA.address,isWritable:!1}),n({pubkey:s.mintB.address,isWritable:!1}),n({pubkey:s.vault.A,isWritable:!1}),n({pubkey:s.vault.B,isWritable:!1}),n({pubkey:s.id}),n({pubkey:s.targetOrders}),n({pubkey:e.lpTokenAccount}),n({pubkey:s.id,isWritable:!1}),n({pubkey:s.marketProgramId,isWritable:!1}),n({pubkey:s.marketId,isWritable:!1}),n({pubkey:e.payer,isSigner:!0})];return new D({programId:s.programId,keys:d,data:o})}function Na({poolKeys:r}){let e=P([T("instruction"),T("simulateType")]),t=Buffer.alloc(e.span);e.encode({instruction:12,simulateType:0},t);let o=[n({pubkey:new f(r.id),isWritable:!1}),n({pubkey:new f(r.authority),isWritable:!1}),n({pubkey:new f(r.openOrders),isWritable:!1}),n({pubkey:new f(r.vault.A),isWritable:!1}),n({pubkey:new f(r.vault.B),isWritable:!1}),n({pubkey:new f(r.mintLp.address),isWritable:!1}),n({pubkey:new f(r.marketId),isWritable:!1}),n({pubkey:new f(r.marketEventQueue),isWritable:!1})];return{instruction:new D({programId:new f(r.programId),keys:o,data:t})}}export{Ca as createPoolV4InstructionV2,Ma as makeAMMSwapInstruction,La as makeAddLiquidityInstruction,Ra as makeInitPoolInstructionV4,Na as makeSimulatePoolInfoInstruction,Rt as makeSwapFixedInInstruction,Nt as makeSwapFixedOutInstruction,Ba as removeLiquidityInstruction,Da as simulatePoolInfoInstruction};
//# sourceMappingURL=instruction.mjs.map