{"version":3,"sources":["../../../../src/raydium/launchpad/curve/func.ts"],"sourcesContent":["import BN from \"bn.js\";\r\nimport Decimal from \"decimal.js\";\r\n\r\n\r\nexport class MathLaunch {\r\n  static _Q64 = new Decimal(new BN(1).shln(64).toString())\r\n\r\n  static _multipler(decimals: number) {\r\n    return new Decimal(10).pow(decimals)\r\n  }\r\n\r\n  static getPrice({priceX64, decimalA, decimalB}: {priceX64: BN, decimalA: number, decimalB: number}){\r\n    const priceWithDecimals = new Decimal(priceX64.toString()).div(this._Q64)\r\n    const price = priceWithDecimals.mul(this._multipler(decimalA)).div(this._multipler(decimalB))\r\n\r\n    return price\r\n  }\r\n\r\n  static getPriceX64({price, decimalA, decimalB}: {price: Decimal, decimalA: number, decimalB: number}) {\r\n    const priceWithDecimals = price.mul(this._multipler(decimalB)).div(this._multipler(decimalA))\r\n    const priceX64 = new BN(priceWithDecimals.mul(this._Q64).toFixed(0))\r\n    return priceX64\r\n  }\r\n}\r\n\r\nexport function checkPoolToAmm({supply, totalFundRaisingB, totalLockedAmount, totalSellA, migrateType ,decimalsA}: {\r\n  supply: BN, totalSellA: BN, totalLockedAmount: BN, totalFundRaisingB: BN, migrateType: 'amm' | 'cpmm', decimalsA: number,\r\n}) {\r\n  const migrateAmountA = supply.sub(totalSellA).sub(totalLockedAmount)\r\n  const liquidity = new BN(new Decimal(migrateAmountA.mul(totalFundRaisingB).toString()).sqrt().toFixed(0))\r\n\r\n  if (migrateType === 'amm') {\r\n    if (liquidity.gt(new BN(10).pow(new BN(decimalsA)))) return true\r\n  } else if (migrateType === 'cpmm') {\r\n    if (liquidity.gt(new BN(100))) return true\r\n  } else {\r\n    throw Error('migrate type error')\r\n  }\r\n\r\n  return false\r\n}\r\n"],"mappings":"6iBAAA,0EAAA,MAAe,oBACf,EAAoB,yBAGb,OAAiB,OAGf,YAAW,EAAkB,CAClC,MAAO,IAAI,WAAQ,EAAE,EAAE,IAAI,CAAQ,CACrC,OAEO,UAAS,CAAC,WAAU,WAAU,YAA8D,CAIjG,MAFc,AADY,IAAI,WAAQ,EAAS,SAAS,CAAC,EAAE,IAAI,KAAK,IAAI,EACxC,IAAI,KAAK,WAAW,CAAQ,CAAC,EAAE,IAAI,KAAK,WAAW,CAAQ,CAAC,CAG9F,OAEO,aAAY,CAAC,QAAO,WAAU,YAAiE,CACpG,GAAM,GAAoB,EAAM,IAAI,KAAK,WAAW,CAAQ,CAAC,EAAE,IAAI,KAAK,WAAW,CAAQ,CAAC,EAE5F,MADiB,IAAI,WAAG,EAAkB,IAAI,KAAK,IAAI,EAAE,QAAQ,CAAC,CAAC,CAErE,CACF,EAlBS,AADF,EACE,KAAO,GAAI,WAAQ,GAAI,WAAG,CAAC,EAAE,KAAK,EAAE,EAAE,SAAS,CAAC,EAoBlD,WAAwB,CAAC,SAAQ,oBAAmB,oBAAmB,aAAY,cAAa,aAEpG,CACD,GAAM,GAAiB,EAAO,IAAI,CAAU,EAAE,IAAI,CAAiB,EAC7D,EAAY,GAAI,WAAG,GAAI,WAAQ,EAAe,IAAI,CAAiB,EAAE,SAAS,CAAC,EAAE,KAAK,EAAE,QAAQ,CAAC,CAAC,EAExG,GAAI,IAAgB,OAClB,GAAI,EAAU,GAAG,GAAI,WAAG,EAAE,EAAE,IAAI,GAAI,WAAG,CAAS,CAAC,CAAC,EAAG,MAAO,WACnD,IAAgB,QACzB,GAAI,EAAU,GAAG,GAAI,WAAG,GAAG,CAAC,EAAG,MAAO,OAEtC,MAAM,OAAM,oBAAoB,EAGlC,MAAO,EACT","names":[]}