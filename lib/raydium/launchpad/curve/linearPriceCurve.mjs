var st=Object.defineProperty,at=Object.defineProperties;var ct=Object.getOwnPropertyDescriptors;var Be=Object.getOwnPropertySymbols;var ut=Object.prototype.hasOwnProperty,lt=Object.prototype.propertyIsEnumerable;var he=(n,e,t)=>e in n?st(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,x=(n,e)=>{for(var t in e||(e={}))ut.call(e,t)&&he(n,t,e[t]);if(Be)for(var t of Be(e))lt.call(e,t)&&he(n,t,e[t]);return n},B=(n,e)=>at(n,ct(e));import A from"bn.js";import L from"decimal.js";import{PublicKey as Ul}from"@solana/web3.js";import zl from"bn.js";import jl from"decimal.js";import{PublicKey as kn}from"@solana/web3.js";import{get as Ie,set as mt}from"lodash";var te=class{constructor(e){this.logLevel=e.logLevel!==void 0?e.logLevel:0,this.name=e.name}set level(e){this.logLevel=e}get time(){return Date.now().toString()}get moduleName(){return this.name}isLogLevel(e){return e<=this.logLevel}error(...e){return this.isLogLevel(0)?(console.error(this.time,this.name,"sdk logger error",...e),this):this}logWithError(...e){let t=e.map(i=>typeof i=="object"?JSON.stringify(i):i).join(", ");throw new Error(t)}warning(...e){return this.isLogLevel(1)?(console.warn(this.time,this.name,"sdk logger warning",...e),this):this}info(...e){return this.isLogLevel(2)?(console.info(this.time,this.name,"sdk logger info",...e),this):this}debug(...e){return this.isLogLevel(3)?(console.debug(this.time,this.name,"sdk logger debug",...e),this):this}},Se={},dt={};function y(n){let e=Ie(Se,n);if(!e){let t=Ie(dt,n);e=new te({name:n,logLevel:t}),mt(Se,n,e)}return e}import{MINT_SIZE as In,TOKEN_PROGRAM_ID as Sn,getTransferFeeConfig as Cn,unpackMint as Kn}from"@solana/spl-token";var Rn=y("Raydium_accountInfo_util");import S from"bn.js";import Pr from"decimal.js";import wt from"big.js";import jn from"bn.js";import pt from"toformat";var ft=pt,O=ft;import j from"big.js";import yt from"bn.js";import gt from"decimal.js-light";import E from"bn.js";var Ke=9007199254740991;function h(n){let e=y("Raydium_parseBigNumberish");if(n instanceof E)return n;if(typeof n=="string"){if(n.match(/^-?[0-9]+$/))return new E(n);e.logWithError(`invalid BigNumberish string: ${n}`)}return typeof n=="number"?(n%1&&e.logWithError(`BigNumberish number underflow: ${n}`),(n>=Ke||n<=-Ke)&&e.logWithError(`BigNumberish number overflow: ${n}`),new E(String(n))):typeof n=="bigint"?new E(n.toString()):(e.error(`invalid BigNumberish value: ${n}`),new E(0))}var H=y("module/fraction"),ne=O(j),D=O(gt),Pt={[0]:D.ROUND_DOWN,[1]:D.ROUND_HALF_UP,[2]:D.ROUND_UP},At={[0]:j.roundDown,[1]:j.roundHalfUp,[2]:j.roundUp},m=class{constructor(e,t=new yt(1)){this.numerator=h(e),this.denominator=h(t)}get quotient(){return this.numerator.div(this.denominator)}invert(){return new m(this.denominator,this.numerator)}add(e){let t=e instanceof m?e:new m(h(e));return this.denominator.eq(t.denominator)?new m(this.numerator.add(t.numerator),this.denominator):new m(this.numerator.mul(t.denominator).add(t.numerator.mul(this.denominator)),this.denominator.mul(t.denominator))}sub(e){let t=e instanceof m?e:new m(h(e));return this.denominator.eq(t.denominator)?new m(this.numerator.sub(t.numerator),this.denominator):new m(this.numerator.mul(t.denominator).sub(t.numerator.mul(this.denominator)),this.denominator.mul(t.denominator))}mul(e){let t=e instanceof m?e:new m(h(e));return new m(this.numerator.mul(t.numerator),this.denominator.mul(t.denominator))}div(e){let t=e instanceof m?e:new m(h(e));return new m(this.numerator.mul(t.denominator),this.denominator.mul(t.numerator))}toSignificant(e,t={groupSeparator:""},i=1){Number.isInteger(e)||H.logWithError(`${e} is not an integer.`),e<=0&&H.logWithError(`${e} is not positive.`),D.set({precision:e+1,rounding:Pt[i]});let a=new D(this.numerator.toString()).div(this.denominator.toString()).toSignificantDigits(e);return a.toFormat(a.decimalPlaces(),t)}toFixed(e,t={groupSeparator:""},i=1){return Number.isInteger(e)||H.logWithError(`${e} is not an integer.`),e<0&&H.logWithError(`${e} is negative.`),ne.DP=e,ne.RM=At[i]||1,new ne(this.numerator.toString()).div(this.denominator.toString()).toFormat(e,t)}isZero(){return this.numerator.isZero()}};var ii=y("Raydium_amount"),ri=O(wt);import{PublicKey as kt}from"@solana/web3.js";import{TOKEN_PROGRAM_ID as Re}from"@solana/spl-token";var ie={chainId:101,address:kt.default.toBase58(),programId:Re.toBase58(),decimals:9,symbol:"SOL",name:"solana",logoURI:"https://img-v1.raydium.io/icon/So11111111111111111111111111111111111111112.png",tags:[],priority:2,type:"raydium",extensions:{coingeckoId:"solana"}},K={chainId:101,address:"So11111111111111111111111111111111111111112",programId:Re.toBase58(),decimals:9,symbol:"WSOL",name:"Wrapped SOL",logoURI:"https://img-v1.raydium.io/icon/So11111111111111111111111111111111111111112.png",tags:[],priority:2,type:"raydium",extensions:{coingeckoId:"solana"}};import{PublicKey as oe}from"@solana/web3.js";import{PublicKey as d,SystemProgram as Le,SYSVAR_RENT_PUBKEY as xt}from"@solana/web3.js";import{TOKEN_PROGRAM_ID as Bt}from"@solana/spl-token";function re({pubkey:n,isSigner:e=!1,isWritable:t=!0}){return{pubkey:n,isWritable:t,isSigner:e}}var di=[re({pubkey:Bt,isWritable:!1}),re({pubkey:Le.programId,isWritable:!1}),re({pubkey:xt,isWritable:!1})];function Ne({publicKey:n,transformSol:e}){let t=Me(n.toString());if(t instanceof d)return e&&t.equals(V)?z:t;if(e&&t.toString()===V.toBase58())return z;if(typeof t=="string"){if(t===d.default.toBase58())return d.default;try{return new d(t)}catch{throw new Error("invalid public key")}}throw new Error("invalid public key")}function Me(n){try{return new d(n)}catch{return n}}var ht=new d("MemoSq4gqABAXKb96qnH8TysNcWxMyWCqXgDLGmfcHr"),It=new d("MemoSq4gqABAXKb96qnH8TysNcWxMyWCqXgDLGmfcHr"),St=new d("SysvarRent111111111111111111111111111111111"),pi=new d("SysvarC1ock11111111111111111111111111111111"),Fe=new d("metaqbxxUerdq28cj1RbAWkYQm3ybzjb6a8bt518x1s"),fi=new d("Sysvar1nstructions1111111111111111111111111"),bi=Le.programId,yi=new d("4k3Dyjzvzp8eMZWUXbBCjEvwSkkk59S5iCNLY3QrkX6R"),gi=new d("Ea5SjE2Y6yvCeW5dYTn7PYMuW5ikXkvbGdcmSnXeaLjS"),Pi=new d("SRMuApVNdxXokk5GT7XD5cUUgXMBCoAz2LHeuAoKWRt"),Ai=new d("EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v"),wi=new d("Es9vMFrzaCERmJfrF4H2FYD4KCoNkY11McCe8BenwNYB"),Ti=new d("mSoLzYCxHdYgdzU16g5QSh3i5K3z3KZK7ytfqcJm7So"),ki=new d("7dHbWXmci3dT8UFYWYZweBLXgycu7Y3iL6trKn1Y7ARj"),xi=new d("USDH1SM1ojwWUga67PGrgFWUHibbjqMvuMaDkRJTgkX"),Bi=new d("NRVwhjBQiUPYtfDT5zRBVJajzFQHaBUNtC7SNVvqRFa"),hi=new d("ANAxByE6G2WjFp7A4NqtWYXb3mgruyzZYg3spfxe6Lbo"),Ii=new d("7vfCXTUXx5WJV5JADk17DUJ4ksgau7utNKj4b963voxs"),z=new d("So11111111111111111111111111111111111111112"),V=d.default;var se=class{constructor({mint:e,decimals:t,symbol:i,name:a,skipMint:l=!1,isToken2022:P=!1}){if(e===V.toBase58()||e instanceof oe&&V.equals(e)){this.decimals=K.decimals,this.symbol=K.symbol,this.name=K.name,this.mint=new oe(K.address),this.isToken2022=!1;return}this.decimals=t,this.symbol=i||e.toString().substring(0,6),this.name=a||e.toString().substring(0,6),this.mint=l?oe.default:Ne({publicKey:e}),this.isToken2022=P}equals(e){return this===e?!0:this.mint.equals(e.mint)}},R=se;R.WSOL=new se(B(x({},K),{mint:K.address}));var ae=class{constructor({decimals:e,symbol:t="UNKNOWN",name:i="UNKNOWN"}){this.decimals=e,this.symbol=t,this.name=i}equals(e){return this===e}},Q=ae;Q.SOL=new ae(ie);import Ct from"bn.js";var Vi=new m(new Ct(100));var Ui=y("Raydium_price");import{PublicKey as ar}from"@solana/web3.js";import ur from"bn.js";var Kt=new S(0),Cr=new S(1),Kr=new S(2),Rr=new S(3),Lr=new S(5),Tt=new S(10),Nr=new S(100),Mr=new S(1e3),Fr=new S(1e4);import{PublicKey as oo}from"@solana/web3.js";import{TOKEN_PROGRAM_ID as ao}from"@solana/spl-token";import{ComputeBudgetProgram as qr,Keypair as Xr,PublicKey as zr,Transaction as jr,TransactionMessage as Zr,VersionedTransaction as Yr}from"@solana/web3.js";import{TOKEN_PROGRAM_ID as to}from"@solana/spl-token";var no=y("Raydium_txUtil");import{PublicKey as r}from"@solana/web3.js";var mo=new r("EhhTKczWMGQt46ynNeRX1WfeagwwJd7ufHvCDjRxjo5Q"),po=new r("CBuCnLe26faBpcBP2fktp4rp8abpcAnTWft6ZrP5Q4T"),fo=new r("9KEPoZmtHUrBbhWN1v1KWLMkkvwY6WLtAVUCPRtRjP4z"),bo=new r("FarmqiPv5eAj3j1GMdMCMUGXqPUvmquZtMy86QH6rzhG"),yo=new r("CLaimxFqjHzgTJtAGHU47NPhg6qrc5sCnpC4tBLyABQS"),go=new r("srmqPvymJeFKQ4zGQed1GFppgkRHL9kaELCbyksJtPX"),Po=new r("9xQeWvG816bUx9EPjHmaT23yvVM2ZWbrrpZb9PusVFin"),Ao=new r("675kPX9MHTjS2zt1qfr1NYHuzeLXfQM9H24wFSUt1Mp8"),wo=new r("5quBtoiQqxF9Jv6KYKctB59NT3gtJD2Y65kdnB1Uev3h"),To=new r("CDSr3ssLcRB6XYPJwAfFt18MZvEZp4LjHcvzBVZ45duo"),Lt=new r("CAMMCzo5YL8w4VFF8KVHrK22GGUsp5VTaW7grrKgrWqK"),Nt=new r("LockrWmn6K5twhz3y9w1dQERbmgSaRkfnTeTKbpofwE"),Mt=new r("kN1kEznaF5Xbd8LYuqtEFcxzWSBk5Fv6ygX6SqEGJVy"),ko=new r("CDSr3ssLcRB6XYPJwAfFt18MZvEZp4LjHcvzBVZ45duo"),xo=new r("routeUGWgWzqBWFcrCfv8tritsqukccJPu3q5GPP3xS"),Bo=new r("7YttLkHDoNj9wyDur5pM1ejNaAvT9X4eqaYcHQqtj2G5"),ho=new r("6FJon3QE27qgPVggARueB22hLvoh22VzJpXv4rBEoSLF"),Io=new r("CC12se5To1CdEuw7fDS27B7Geo5jJyL7t5UK2B44NgiH"),So=new r("9HzJyW1qZsEiSfMUf6L2jo3CcTKAyBmSyKdwQeYisHrC"),Co=new r("DropEU8AvevN3UrXWXTMuz3rqnMczQVNjq3kcSdW2SQi"),Ko=new r("CPMMoo8L3F4NbTegBCKVNunggL7H1ZpdTHKxQB5qKP1C"),Ro=new r("GpMZbSM2GgvTKHJirzeGfMFoaZ8UR2X7F4v8vHTvxFbL"),Lo=new r("DNXgeM9EiiaAbaWvwjHj9fQQLAX5ZsfHyvmYUNRAdNC8"),No=new r("LockrWmn6K5twhz3y9w1dQERbmgSaRkfnTeTKbpofwE"),Mo=new r("3f7GcQFG397GAaEnv51zR6tsTVihYRydnydDD1cXekxH"),Fo=new r("LanMV9sAd7wArD4vJFi2qDdfnVhFxYSUg6eADduJ3uj"),Oo=new r("WLHv2UAZm6z4KyaaELi5pjdbJh6RESMva1Rnn8pJVVh"),Eo=new r("DRay6fNdQ5J82H7xV6uq2aV3mNrUZ1J4PgSKsWgptcm6"),Do=new r("5xqNaZXX5eUi4p5HU4oz9i5QnwRNT2y6oN7yyn4qENeq"),Vo=new r("4Bu96XjU84XjPDSpveTVf6LYGCkfW5FK7SNkREWcEfV4"),vo=new r("6s1xP3hpbAfFoNtUNF8mfHsjr2Bd97JxFJRWLbL6aHuX");var _o={OPEN_BOOK_PROGRAM:new r("EoTcMgcDRTJVZDMZWBoU6rhYHZfkNTVEAfz3uUJRcYGj"),SERUM_PROGRAM_ID_V3:new r("Ray1111111111111111111111111111111111111111"),AMM_V4:new r("DRaya7Kj3aMWQSy19kSjvmuwq9docCHofyP9kanQGaav"),AMM_STABLE:new r("DRayDdXc1NZQ9C3hRWmoSf8zK4iapgMnjdNZWrfwsP8m"),CLMM_PROGRAM_ID:new r("DRayAUgENGQBKVaX8owNhgzkEDyoHTGVEGHVJT1E9pfH"),CLMM_LOCK_PROGRAM_ID:new r("DRay25Usp3YJAi7beckgpGUC7mGJ2cR1AVPxhYfwVCUX"),CLMM_LOCK_AUTH_ID:new r("6Aoh8h2Lw2m5UGxYR8AdAL87jTWYeKoxM52mJRzfYwN"),CREATE_CPMM_POOL_PROGRAM:new r("DRaycpLY18LhpbydsBWbVJtxpNv9oXPgjRSfpF2bWpYb"),CREATE_CPMM_POOL_AUTH:new r("CXniRufdq5xL8t8jZAPxsPZDpuudwuJSPWnbcD5Y5Nxq"),CREATE_CPMM_POOL_FEE_ACC:new r("3oE58BKVt8KuYkGxx8zBojugnymWmBiyafWgMrnb6eYy"),LOCK_CPMM_PROGRAM:new r("DRay25Usp3YJAi7beckgpGUC7mGJ2cR1AVPxhYfwVCUX"),LOCK_CPMM_AUTH:new r("7qWVV8UY2bRJfDLP4s37YzBPKUkVB46DStYJBpYbQzu3"),UTIL1216:r.default,Router:new r("DRaybByLpbUL57LJARs3j8BitTxVfzBg351EaMr5UTCd"),FARM_PROGRAM_ID_V3:new r("DRayWyrLmEW5KEeqs8kdTMMaBabapqagaBC7KWpGtJeZ"),FARM_PROGRAM_ID_V4:new r("Ray1111111111111111111111111111111111111111"),FARM_PROGRAM_ID_V5:new r("DRayiCGSZgku1GTK6rXD6mVDdingXy6APAH1R6R5L2LC"),FARM_PROGRAM_ID_V6:new r("DRayzbYakXs45ELHkzH6vC3fuhQqTAnv5A68gdFuvZyZ"),LAUNCHPAD_PROGRAM:new r("DRay6fNdQ5J82H7xV6uq2aV3mNrUZ1J4PgSKsWgptcm6"),LAUNCHPAD_AUTH:new r("5xqNaZXX5eUi4p5HU4oz9i5QnwRNT2y6oN7yyn4qENeq"),LAUNCHPAD_PLATFORM:new r("2Jx4KTDrVSdWNazuGpcA8n3ZLTRGGBDxAWhuKe2Xcj2a"),LAUNCHPAD_CONFIG:new r("7ZR4zD7PYfY2XxoG1Gxcy2EgEeGYrpxrwzPuwdUBssEt"),FEE_DESTINATION_ID:new r("9y8ENuuZ3b19quffx9hQvRVygG5ky6snHfRvGpuSfeJy"),MODEL_DATA_PUBKEY:new r("Ray1111111111111111111111111111111111111111")};import Y from"bn.js";function me(n,e){if(n.isZero())return new Y(0);let t=n.div(e);return t.isZero()?new Y(1):n.mod(e).gt(new Y(0))?t.add(new Y(1)):t}import{PublicKey as Ft,AddressLookupTableAccount as Oe}from"@solana/web3.js";var Ot={AcL1Vo8oy1ULiavEcjSUcwfBSForXMudcZvDZy5nzJkU:new Oe({key:new Ft("AcL1Vo8oy1ULiavEcjSUcwfBSForXMudcZvDZy5nzJkU"),state:Oe.deserialize(Buffer.from("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","base64"))})};import{PublicKey as os,sendAndConfirmTransaction as ss,SystemProgram as us,Transaction as ls,TransactionMessage as ds,VersionedTransaction as ps}from"@solana/web3.js";import bs from"axios";import Vt from"bn.js";var ks=new Vt(1e6);import{AccountLayout as Yl,createAssociatedTokenAccountIdempotentInstruction as Jl,TOKEN_2022_PROGRAM_ID as $l,TOKEN_PROGRAM_ID as em}from"@solana/spl-token";import{PublicKey as Xs}from"@solana/web3.js";import{MintLayout as Hs,TOKEN_PROGRAM_ID as Qs}from"@solana/spl-token";import{Keypair as pl,PublicKey as fl,SystemProgram as yl,TransactionInstruction as gl}from"@solana/web3.js";import Al from"bn.js";import{ASSOCIATED_TOKEN_PROGRAM_ID as kl,TOKEN_2022_PROGRAM_ID as xl,TOKEN_PROGRAM_ID as Bl}from"@solana/spl-token";import{PublicKey as Ht}from"@solana/web3.js";import _e,{isBN as We}from"bn.js";import{bits as aa,BitStructure as ca,blob as vt,Blob as ua,cstr as la,f32 as ma,f32be as da,f64 as pa,f64be as fa,greedy as ba,Layout as _t,ns64 as ya,ns64be as ga,nu64 as Pa,nu64be as Aa,offset as wa,s16 as Ta,s16be as ka,s24 as xa,s24be as Ba,s32 as Wt,s32be as ha,s40 as Ia,s40be as Sa,s48 as Ca,s48be as Ka,s8 as Ra,seq as qt,struct as La,Structure as Gt,u16 as Ut,u16be as Na,u24 as Ma,u24be as Fa,u32 as Oa,u32be as Ea,u40 as Da,u40be as Va,u48 as va,u48be as _a,u8 as Xt,UInt as zt,union as Wa,Union as qa,unionLayoutDiscriminator as Ga,utf8 as Ua}from"@solana/buffer-layout";var de=_t,De=Gt;var pe=zt;var Ve=Xt,v=Ut;var C=Wt;var ve=qt;var w=vt;var N=class extends de{constructor(t,i,a){super(t,a);this.blob=w(t),this.signed=i}decode(t,i=0){let a=new _e(this.blob.decode(t,i),10,"le");return this.signed?a.fromTwos(this.span*8).clone():a}encode(t,i,a=0){return typeof t=="number"&&(t=new _e(t)),this.signed&&(t=t.toTwos(this.span*8)),this.blob.encode(t.toArrayLike(Buffer,"le",this.span),i,a)}};function g(n){return new pe(1,n)}function M(n){return new pe(4,n)}function c(n){return new N(8,!1,n)}function p(n){return new N(16,!1,n)}function qe(n){return new N(8,!0,n)}function Ge(n){return new N(16,!0,n)}var J=class extends de{constructor(t,i,a,l){super(t.span,l);this.layout=t,this.decoder=i,this.encoder=a}decode(t,i){return this.decoder(this.layout.decode(t,i))}encode(t,i,a){return this.layout.encode(this.encoder(t),i,a)}getSpan(t,i){return this.layout.getSpan(t,i)}};function u(n){return new J(w(32),e=>new Ht(e),e=>e.toBuffer(),n)}function be(n){return new J(Ve(),jt,Qt,n)}function jt(n){if(n===0)return!1;if(n===1)return!0;throw new Error("Invalid bool: "+n)}function Qt(n){return n?1:0}var fe=class extends De{decode(e,t){return super.decode(e,t)}};function b(n,e,t){return new fe(n,e,t)}function f(n,e,t){let i,a=typeof e=="number"?e:We(e)?e.toNumber():new Proxy(e,{get(l,P){if(!i){let k=Reflect.get(l,"count");i=We(k)?k.toNumber():k,Reflect.set(l,"count",i)}return Reflect.get(l,P)},set(l,P,k){return P==="count"&&(i=k),Reflect.set(l,P,k)}});return ve(n,a,t)}import Xu from"bn.js";import Hu from"decimal.js";import T from"bn.js";var ye=new T(0),Ue=new T(1),Xe=new T(-1),I=new T(1).shln(64),ze=new T(1).shln(128),ge=I.sub(Ue);var Zt=ze.subn(1),F=-443636,_=-F,Pe=new T("4295048016"),Ae=new T("79226673521066979257578248091"),rc=new T("4295048017"),oc=new T("79226673521066979257578248090");var Yt=new T(10).pow(new T(6));var sc=new T("18446744073700000000");import Ru from"bn.js";import Nu from"decimal.js";var pc=Buffer.from("amm_config","utf8"),fc=Buffer.from("pool","utf8"),bc=Buffer.from("pool_vault","utf8"),yc=Buffer.from("pool_reward_vault","utf8"),gc=Buffer.from("position","utf8"),Pc=Buffer.from("tick_array","utf8"),Ac=Buffer.from("operation","utf8"),wc=Buffer.from("pool_tick_array_bitmap_extension","utf8"),Tc=Buffer.from("observation","utf8");var kc=Buffer.from("locked_position","utf8");var xc=Buffer.from("support_mint","utf8");import{PublicKey as iu}from"@solana/web3.js";import{TOKEN_2022_PROGRAM_ID as ou}from"@solana/spl-token";import au from"bn.js";import uu from"decimal.js";import Ic from"bn.js";import Cc from"decimal.js";var ke=14;var $=60;var nn=b([w(8),g("bump"),v("index"),u(""),M("protocolFeeRate"),M("tradeFeeRate"),v("tickSpacing"),f(c(),8,"")]),rn=b([M("blockTimestamp"),qe("tickCumulative"),f(c(),4)]),nt=b([w(8),be("initialized"),c("recentEpoch"),v("observationIndex"),u("poolId"),f(rn,100,"observations"),f(c(),4)]),on=b([g("rewardState"),c("openTime"),c("endTime"),c("lastUpdateTime"),p("emissionsPerSecondX64"),c("rewardTotalEmissioned"),c("rewardClaimed"),u("tokenMint"),u("tokenVault"),u("creator"),p("rewardGrowthGlobalX64")]),$e=b([w(8),g("bump"),u("ammConfig"),u("creator"),u("mintA"),u("mintB"),u("vaultA"),u("vaultB"),u("observationId"),g("mintDecimalsA"),g("mintDecimalsB"),v("tickSpacing"),p("liquidity"),p("sqrtPriceX64"),C("tickCurrent"),M(),p("feeGrowthGlobalX64A"),p("feeGrowthGlobalX64B"),c("protocolFeesTokenA"),c("protocolFeesTokenB"),p("swapInAmountTokenA"),p("swapOutAmountTokenB"),p("swapInAmountTokenB"),p("swapOutAmountTokenA"),g("status"),f(g(),7,""),f(on,3,"rewardInfos"),f(c(),16,"tickArrayBitmap"),c("totalFeesTokenA"),c("totalFeesClaimedTokenA"),c("totalFeesTokenB"),c("totalFeesClaimedTokenB"),c("fundFeesTokenA"),c("fundFeesTokenB"),c("startTime"),f(c(),15*4-3,"padding")]),sn=b([p("growthInsideLastX64"),c("rewardAmountOwed")]),et=b([w(8),g("bump"),u("nftMint"),u("poolId"),C("tickLower"),C("tickUpper"),p("liquidity"),p("feeGrowthInsideLastX64A"),p("feeGrowthInsideLastX64B"),c("tokenFeesOwedA"),c("tokenFeesOwedB"),f(sn,3,"rewardInfos"),f(c(),8,"")]),nl=b([w(8),g("bump"),u("poolId"),C("tickLowerIndex"),C("tickUpperIndex"),p("liquidity"),p("feeGrowthInsideLastX64A"),p("feeGrowthInsideLastX64B"),c("tokenFeesOwedA"),c("tokenFeesOwedB"),f(p(),3,"rewardGrowthInside"),f(c(),8,"")]),an=b([C("tick"),Ge("liquidityNet"),p("liquidityGross"),p("feeGrowthOutsideX64A"),p("feeGrowthOutsideX64B"),f(p(),3,"rewardGrowthsOutsideX64"),f(M(),13,"")]),Ze=b([w(8),u("poolId"),C("startTickIndex"),f(an,$,"ticks"),g("initializedTickCount"),f(g(),115,"")]),cn=b([w(329),f(u(),100,"whitelistMints")]),tn=b([w(8),u("poolId"),f(f(c(),8),ke,"positiveTickArrayBitmap"),f(f(c(),8),ke,"negativeTickArrayBitmap")]),il=b([c(),g("bump"),u("owner"),u("poolId"),u("positionId"),u("nftAccount"),f(c(),8)]),un=b([w(8),g("bump"),u("lockOwner"),u("poolId"),u("positionId"),u("nftAccount"),u("lockNftMint"),c("recentEpoch"),f(c(),8)]);nt.span;var Ml=y("Raydium_Clmm");var ee=class{static getPoolInitPriceByPool({poolInfo:e,decimalA:t,decimalB:i}){throw Error()}static getPoolInitPriceByInit({a:e,b:t,decimalA:i,decimalB:a}){throw Error()}static getPoolPrice({poolInfo:e,decimalA:t,decimalB:i}){throw Error()}static getPoolEndPrice({supply:e,totalSell:t,totalLockedAmount:i,totalFundRaising:a,migrateFee:l,decimalA:P,decimalB:k}){throw Error()}static getPoolEndPriceReal({poolInfo:e,decimalA:t,decimalB:i}){throw Error()}static getInitParam({supply:e,totalFundRaising:t,totalSell:i,totalLockedAmount:a,migrateFee:l}){throw Error()}static buyExactIn({poolInfo:e,amount:t}){throw Error()}static buyExactOut({poolInfo:e,amount:t}){throw Error()}static sellExactIn({poolInfo:e,amount:t}){throw Error()}static sellExactOut({poolInfo:e,amount:t}){throw Error()}};import it from"bn.js";import xe from"decimal.js";var G=class{static _multipler(e){return new xe(10).pow(e)}static getPrice({priceX64:e,decimalA:t,decimalB:i}){return new xe(e.toString()).div(this._Q64).mul(this._multipler(t)).div(this._multipler(i))}static getPriceX64({price:e,decimalA:t,decimalB:i}){let a=e.mul(this._multipler(i)).div(this._multipler(t));return new it(a.mul(this._Q64).toFixed(0))}};G._Q64=new xe(new it(1).shln(64).toString());var rt=class extends ee{static getPoolInitPriceByPool({poolInfo:e,decimalA:t,decimalB:i}){return new L(0)}static getPoolInitPriceByInit({a:e,b:t,decimalA:i,decimalB:a}){return new L(0)}static getPoolPrice({poolInfo:e,decimalA:t,decimalB:i}){return new L(e.virtualA.mul(e.realA).toString()).div(G._Q64).mul(10**(t-i))}static getPoolEndPrice({supply:e,totalSell:t,totalLockedAmount:i,totalFundRaising:a,migrateFee:l,decimalA:P,decimalB:k}){return new L(a.sub(l).toString()).div(e.sub(t).sub(i).toString()).mul(10**(P-k))}static getPoolEndPriceReal({poolInfo:e,decimalA:t,decimalB:i}){let a=e.totalSellA.sub(e.realA),l=e.totalFundRaisingB.sub(e.realB);return new L(e.virtualB.add(e.realB).add(l).toString()).div(e.virtualA.sub(e.realA).add(a).toString()).mul(10**(t-i))}static getInitParam({supply:e,totalFundRaising:t,totalSell:i,totalLockedAmount:a,migrateFee:l}){let P=e.sub(a);if(P.lte(new A(0)))throw Error("supplyMinusLocked need gt 0");let k=t.mul(new A(3)).sub(l),U=t.mul(new A(2)).mul(P).div(k),ot=U.mul(U),X=t.mul(new A(2)).mul(I).div(ot);if(!X.gt(new A(0)))throw Error("a need gt 0");if(!ge.gt(X))throw Error("a need lt u64 max");if(X.lt(new A(0))||U.lt(new A(0)))throw Error("invalid input 0");return{a:X,b:new A(0),c:U}}static buyExactIn({poolInfo:e,amount:t}){let i=e.realB.add(t),a=new A(2).mul(i).mul(I).div(e.virtualA);return new A(new L(a.toString()).sqrt().toFixed(0)).sub(e.realA)}static buyExactOut({poolInfo:e,amount:t}){let i=e.realA.add(t),a=i.mul(i);return me(e.virtualA.mul(a),new A(2).mul(I)).sub(e.realB)}static sellExactIn({poolInfo:e,amount:t}){let i=e.realA.sub(t),a=i.mul(i),l=me(e.virtualA.mul(a),new A(2).mul(I));return e.realB.sub(l)}static sellExactOut({poolInfo:e,amount:t}){let i=e.realB.sub(t),a=new A(2).mul(i).mul(I).div(e.virtualA),l=new A(new L(a.toString()).sqrt().toFixed(0));return e.realA.sub(l)}};export{rt as LinearPriceCurve};
//# sourceMappingURL=linearPriceCurve.mjs.map