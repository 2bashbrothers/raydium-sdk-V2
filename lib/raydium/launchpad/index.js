var ci=Object.create;var Ke=Object.defineProperty,li=Object.defineProperties,mi=Object.getOwnPropertyDescriptor,di=Object.getOwnPropertyDescriptors,pi=Object.getOwnPropertyNames,Mt=Object.getOwnPropertySymbols,fi=Object.getPrototypeOf,Et=Object.prototype.hasOwnProperty,bi=Object.prototype.propertyIsEnumerable;var Ot=(i,e,t)=>e in i?Ke(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,L=(i,e)=>{for(var t in e||(e={}))Et.call(e,t)&&Ot(i,t,e[t]);if(Mt)for(var t of Mt(e))bi.call(e,t)&&Ot(i,t,e[t]);return i},v=(i,e)=>li(i,di(e));var yi=(i,e)=>{for(var t in e)Ke(i,t,{get:e[t],enumerable:!0})},vt=(i,e,t,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let r of pi(e))!Et.call(i,r)&&r!==t&&Ke(i,r,{get:()=>e[r],enumerable:!(n=mi(e,r))||n.enumerable});return i};var w=(i,e,t)=>(t=i!=null?ci(fi(i)):{},vt(e||!i||!i.__esModule?Ke(t,"default",{value:i,enumerable:!0}):t,i)),gi=i=>vt(Ke({},"__esModule",{value:!0}),i);var Cr={};yi(Cr,{AUTH_SEED:()=>Fn,BondingCurveParam:()=>Je,CONFIG_SEED:()=>Mn,CREATOR_FEE_VAULT_AUTH_SEED:()=>Wn,CpmmCreatorFeeOn:()=>Rt,Curve:()=>Se,CurveBase:()=>oe,FixedPriceCurve:()=>qe,LaunchConstantProductCurve:()=>Ve,LaunchpadConfig:()=>ln,LaunchpadPool:()=>dn,LaunchpadPoolInitParam:()=>Kr,LaunchpadVesting:()=>Gi,LinearPriceCurve:()=>Ue,MathLaunch:()=>Ie,PLATFORM_FEE_VAULT_AUTH_SEED:()=>vn,PLATFORM_SEED:()=>En,POOL_VESTING_SEED:()=>On,PlatformConfig:()=>fn,PlatformCurveParam:()=>pn,VestingSchedule:()=>mn,anchorDataBuf:()=>_,buyExactInInstruction:()=>Jn,buyExactOutInstruction:()=>$n,checkPoolToAmm:()=>Ir,claimCreatorFee:()=>ui,claimPlatformFee:()=>ri,claimPlatformFeeFromVault:()=>ai,claimVestedToken:()=>ni,createPlatformConfig:()=>oi,createVestingAccount:()=>ii,getPdaCpiEvent:()=>re,getPdaCreatorFeeVaultAuth:()=>Yn,getPdaCreatorVault:()=>Hn,getPdaLaunchpadAuth:()=>Dn,getPdaLaunchpadConfigId:()=>kr,getPdaLaunchpadPoolId:()=>Vn,getPdaLaunchpadVaultId:()=>_n,getPdaPlatformFeeVaultAuth:()=>zn,getPdaPlatformId:()=>Gn,getPdaPlatformVault:()=>Xn,getPdaVestId:()=>Un,initialize:()=>Br,initializeV2:()=>Zn,initializeWithToken2022:()=>Qn,removePlatformCurveParamInstruction:()=>xr,sellExactInInstruction:()=>ei,sellExactOut:()=>ti,u8ToBytes:()=>qn,updatePlatformConfig:()=>si,updatePlatformCurveParamInstruction:()=>hr});module.exports=gi(Cr);var Ai=require("@solana/web3.js");var Ce=require("lodash");var nt=class{constructor(e){this.logLevel=e.logLevel!==void 0?e.logLevel:0,this.name=e.name}set level(e){this.logLevel=e}get time(){return Date.now().toString()}get moduleName(){return this.name}isLogLevel(e){return e<=this.logLevel}error(...e){return this.isLogLevel(0)?(console.error(this.time,this.name,"sdk logger error",...e),this):this}logWithError(...e){let t=e.map(n=>typeof n=="object"?JSON.stringify(n):n).join(", ");throw new Error(t)}warning(...e){return this.isLogLevel(1)?(console.warn(this.time,this.name,"sdk logger warning",...e),this):this}info(...e){return this.isLogLevel(2)?(console.info(this.time,this.name,"sdk logger info",...e),this):this}debug(...e){return this.isLogLevel(3)?(console.debug(this.time,this.name,"sdk logger debug",...e),this):this}},Wt={},Pi={};function q(i){let e=(0,Ce.get)(Wt,i);if(!e){let t=(0,Ce.get)(Pi,i);e=new nt({name:i,logLevel:t}),(0,Ce.set)(Wt,i,e)}return e}var Xe=require("@solana/spl-token"),vr=q("Raydium_accountInfo_util");var Z=w(require("bn.js")),Ci=w(require("decimal.js"));var Ut=w(require("big.js")),hi=w(require("bn.js"));var Vt=w(require("toformat")),Ti=Vt.default,Ne=Ti;var Re=w(require("big.js")),qt=w(require("bn.js")),Gt=w(require("decimal.js-light"));var Pe=w(require("bn.js"));var _t=9007199254740991;function J(i){let e=q("Raydium_parseBigNumberish");if(i instanceof Pe.default)return i;if(typeof i=="string"){if(i.match(/^-?[0-9]+$/))return new Pe.default(i);e.logWithError(`invalid BigNumberish string: ${i}`)}return typeof i=="number"?(i%1&&e.logWithError(`BigNumberish number underflow: ${i}`),(i>=_t||i<=-_t)&&e.logWithError(`BigNumberish number overflow: ${i}`),new Pe.default(String(i))):typeof i=="bigint"?new Pe.default(i.toString()):(e.error(`invalid BigNumberish value: ${i}`),new Pe.default(0))}var He=q("module/fraction"),it=Ne(Re.default),Le=Ne(Gt.default),ki={[0]:Le.ROUND_DOWN,[1]:Le.ROUND_HALF_UP,[2]:Le.ROUND_UP},Bi={[0]:Re.default.roundDown,[1]:Re.default.roundHalfUp,[2]:Re.default.roundUp},F=class{constructor(e,t=new qt.default(1)){this.numerator=J(e),this.denominator=J(t)}get quotient(){return this.numerator.div(this.denominator)}invert(){return new F(this.denominator,this.numerator)}add(e){let t=e instanceof F?e:new F(J(e));return this.denominator.eq(t.denominator)?new F(this.numerator.add(t.numerator),this.denominator):new F(this.numerator.mul(t.denominator).add(t.numerator.mul(this.denominator)),this.denominator.mul(t.denominator))}sub(e){let t=e instanceof F?e:new F(J(e));return this.denominator.eq(t.denominator)?new F(this.numerator.sub(t.numerator),this.denominator):new F(this.numerator.mul(t.denominator).sub(t.numerator.mul(this.denominator)),this.denominator.mul(t.denominator))}mul(e){let t=e instanceof F?e:new F(J(e));return new F(this.numerator.mul(t.numerator),this.denominator.mul(t.denominator))}div(e){let t=e instanceof F?e:new F(J(e));return new F(this.numerator.mul(t.denominator),this.denominator.mul(t.numerator))}toSignificant(e,t={groupSeparator:""},n=1){Number.isInteger(e)||He.logWithError(`${e} is not an integer.`),e<=0&&He.logWithError(`${e} is not positive.`),Le.set({precision:e+1,rounding:ki[n]});let r=new Le(this.numerator.toString()).div(this.denominator.toString()).toSignificantDigits(e);return r.toFormat(r.decimalPlaces(),t)}toFixed(e,t={groupSeparator:""},n=1){return Number.isInteger(e)||He.logWithError(`${e} is not an integer.`),e<0&&He.logWithError(`${e} is negative.`),it.DP=e,it.RM=Bi[n]||1,new it(this.numerator.toString()).div(this.denominator.toString()).toFormat(e,t)}isZero(){return this.numerator.isZero()}};var no=q("Raydium_amount"),io=Ne(Ut.default);var Xt=require("@solana/web3.js"),rt=require("@solana/spl-token"),ot={chainId:101,address:Xt.PublicKey.default.toBase58(),programId:rt.TOKEN_PROGRAM_ID.toBase58(),decimals:9,symbol:"SOL",name:"solana",logoURI:"https://img-v1.raydium.io/icon/So11111111111111111111111111111111111111112.png",tags:[],priority:2,type:"raydium",extensions:{coingeckoId:"solana"}},ae={chainId:101,address:"So11111111111111111111111111111111111111112",programId:rt.TOKEN_PROGRAM_ID.toBase58(),decimals:9,symbol:"WSOL",name:"Wrapped SOL",logoURI:"https://img-v1.raydium.io/icon/So11111111111111111111111111111111111111112.png",tags:[],priority:2,type:"raydium",extensions:{coingeckoId:"solana"}};var je=require("@solana/web3.js");var C=require("@solana/web3.js"),zt=require("@solana/spl-token");function st({pubkey:i,isSigner:e=!1,isWritable:t=!0}){return{pubkey:i,isWritable:t,isSigner:e}}var ao=[st({pubkey:zt.TOKEN_PROGRAM_ID,isWritable:!1}),st({pubkey:C.SystemProgram.programId,isWritable:!1}),st({pubkey:C.SYSVAR_RENT_PUBKEY,isWritable:!1})];function Ht({publicKey:i,transformSol:e}){let t=Yt(i.toString());if(t instanceof C.PublicKey)return e&&t.equals(Fe)?ze:t;if(e&&t.toString()===Fe.toBase58())return ze;if(typeof t=="string"){if(t===C.PublicKey.default.toBase58())return C.PublicKey.default;try{return new C.PublicKey(t)}catch{throw new Error("invalid public key")}}throw new Error("invalid public key")}function Yt(i){try{return new C.PublicKey(i)}catch{return i}}var Ii=new C.PublicKey("MemoSq4gqABAXKb96qnH8TysNcWxMyWCqXgDLGmfcHr"),Si=new C.PublicKey("MemoSq4gqABAXKb96qnH8TysNcWxMyWCqXgDLGmfcHr"),Ye=new C.PublicKey("SysvarRent111111111111111111111111111111111"),uo=new C.PublicKey("SysvarC1ock11111111111111111111111111111111"),Me=new C.PublicKey("metaqbxxUerdq28cj1RbAWkYQm3ybzjb6a8bt518x1s"),co=new C.PublicKey("Sysvar1nstructions1111111111111111111111111"),lo=C.SystemProgram.programId,mo=new C.PublicKey("4k3Dyjzvzp8eMZWUXbBCjEvwSkkk59S5iCNLY3QrkX6R"),po=new C.PublicKey("Ea5SjE2Y6yvCeW5dYTn7PYMuW5ikXkvbGdcmSnXeaLjS"),fo=new C.PublicKey("SRMuApVNdxXokk5GT7XD5cUUgXMBCoAz2LHeuAoKWRt"),bo=new C.PublicKey("EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v"),yo=new C.PublicKey("Es9vMFrzaCERmJfrF4H2FYD4KCoNkY11McCe8BenwNYB"),go=new C.PublicKey("mSoLzYCxHdYgdzU16g5QSh3i5K3z3KZK7ytfqcJm7So"),Po=new C.PublicKey("7dHbWXmci3dT8UFYWYZweBLXgycu7Y3iL6trKn1Y7ARj"),Ao=new C.PublicKey("USDH1SM1ojwWUga67PGrgFWUHibbjqMvuMaDkRJTgkX"),To=new C.PublicKey("NRVwhjBQiUPYtfDT5zRBVJajzFQHaBUNtC7SNVvqRFa"),wo=new C.PublicKey("ANAxByE6G2WjFp7A4NqtWYXb3mgruyzZYg3spfxe6Lbo"),ko=new C.PublicKey("7vfCXTUXx5WJV5JADk17DUJ4ksgau7utNKj4b963voxs"),ze=new C.PublicKey("So11111111111111111111111111111111111111112"),Fe=C.PublicKey.default;var at=class{constructor({mint:e,decimals:t,symbol:n,name:r,skipMint:o=!1,isToken2022:a=!1}){if(e===Fe.toBase58()||e instanceof je.PublicKey&&Fe.equals(e)){this.decimals=ae.decimals,this.symbol=ae.symbol,this.name=ae.name,this.mint=new je.PublicKey(ae.address),this.isToken2022=!1;return}this.decimals=t,this.symbol=n||e.toString().substring(0,6),this.name=r||e.toString().substring(0,6),this.mint=o?je.PublicKey.default:Ht({publicKey:e}),this.isToken2022=a}equals(e){return this===e?!0:this.mint.equals(e.mint)}},ue=at;ue.WSOL=new at(v(L({},ae),{mint:ae.address}));var ut=class{constructor({decimals:e,symbol:t="UNKNOWN",name:n="UNKNOWN"}){this.decimals=e,this.symbol=t,this.name=n}equals(e){return this===e}},Ze=ut;Ze.SOL=new ut(ot);var jt=w(require("bn.js"));var Lo=new F(new jt.default(100));var Wo=q("Raydium_price");var Ki=new Z.default(0),ls=new Z.default(1),ms=new Z.default(2),ds=new Z.default(3),ps=new Z.default(5),xi=new Z.default(10),fs=new Z.default(100),bs=new Z.default(1e3),ys=new Z.default(1e4);function Zt(i,e,t){return i.mul(e).add(t).sub(new Z.default(1)).div(t)}var Ri=require("@solana/web3.js"),Li=require("@solana/spl-token");var me=require("@solana/web3.js");var Ni=require("@solana/spl-token"),Cs=q("Raydium_txUtil");function U(i,e){let[t,n]=me.PublicKey.findProgramAddressSync(i,e);return{publicKey:t,nonce:n}}var m=require("@solana/web3.js"),Fs=new m.PublicKey("EhhTKczWMGQt46ynNeRX1WfeagwwJd7ufHvCDjRxjo5Q"),Ms=new m.PublicKey("CBuCnLe26faBpcBP2fktp4rp8abpcAnTWft6ZrP5Q4T"),Os=new m.PublicKey("9KEPoZmtHUrBbhWN1v1KWLMkkvwY6WLtAVUCPRtRjP4z"),Es=new m.PublicKey("FarmqiPv5eAj3j1GMdMCMUGXqPUvmquZtMy86QH6rzhG"),vs=new m.PublicKey("CLaimxFqjHzgTJtAGHU47NPhg6qrc5sCnpC4tBLyABQS"),Ws=new m.PublicKey("srmqPvymJeFKQ4zGQed1GFppgkRHL9kaELCbyksJtPX"),Ds=new m.PublicKey("9xQeWvG816bUx9EPjHmaT23yvVM2ZWbrrpZb9PusVFin"),Vs=new m.PublicKey("675kPX9MHTjS2zt1qfr1NYHuzeLXfQM9H24wFSUt1Mp8"),_s=new m.PublicKey("5quBtoiQqxF9Jv6KYKctB59NT3gtJD2Y65kdnB1Uev3h"),qs=new m.PublicKey("CDSr3ssLcRB6XYPJwAfFt18MZvEZp4LjHcvzBVZ45duo"),Fi=new m.PublicKey("CAMMCzo5YL8w4VFF8KVHrK22GGUsp5VTaW7grrKgrWqK"),Mi=new m.PublicKey("LockrWmn6K5twhz3y9w1dQERbmgSaRkfnTeTKbpofwE"),Oi=new m.PublicKey("kN1kEznaF5Xbd8LYuqtEFcxzWSBk5Fv6ygX6SqEGJVy"),Gs=new m.PublicKey("CDSr3ssLcRB6XYPJwAfFt18MZvEZp4LjHcvzBVZ45duo"),Us=new m.PublicKey("routeUGWgWzqBWFcrCfv8tritsqukccJPu3q5GPP3xS"),Xs=new m.PublicKey("7YttLkHDoNj9wyDur5pM1ejNaAvT9X4eqaYcHQqtj2G5"),zs=new m.PublicKey("6FJon3QE27qgPVggARueB22hLvoh22VzJpXv4rBEoSLF"),Hs=new m.PublicKey("CC12se5To1CdEuw7fDS27B7Geo5jJyL7t5UK2B44NgiH"),Ys=new m.PublicKey("9HzJyW1qZsEiSfMUf6L2jo3CcTKAyBmSyKdwQeYisHrC"),js=new m.PublicKey("DropEU8AvevN3UrXWXTMuz3rqnMczQVNjq3kcSdW2SQi"),Zs=new m.PublicKey("CPMMoo8L3F4NbTegBCKVNunggL7H1ZpdTHKxQB5qKP1C"),Qs=new m.PublicKey("GpMZbSM2GgvTKHJirzeGfMFoaZ8UR2X7F4v8vHTvxFbL"),Js=new m.PublicKey("DNXgeM9EiiaAbaWvwjHj9fQQLAX5ZsfHyvmYUNRAdNC8"),$s=new m.PublicKey("LockrWmn6K5twhz3y9w1dQERbmgSaRkfnTeTKbpofwE"),ea=new m.PublicKey("3f7GcQFG397GAaEnv51zR6tsTVihYRydnydDD1cXekxH"),Ei=new m.PublicKey("LanMV9sAd7wArD4vJFi2qDdfnVhFxYSUg6eADduJ3uj"),ta=new m.PublicKey("WLHv2UAZm6z4KyaaELi5pjdbJh6RESMva1Rnn8pJVVh"),na=new m.PublicKey("DRay6fNdQ5J82H7xV6uq2aV3mNrUZ1J4PgSKsWgptcm6"),ia=new m.PublicKey("5xqNaZXX5eUi4p5HU4oz9i5QnwRNT2y6oN7yyn4qENeq"),ra=new m.PublicKey("4Bu96XjU84XjPDSpveTVf6LYGCkfW5FK7SNkREWcEfV4"),oa=new m.PublicKey("6s1xP3hpbAfFoNtUNF8mfHsjr2Bd97JxFJRWLbL6aHuX");var sa={OPEN_BOOK_PROGRAM:new m.PublicKey("EoTcMgcDRTJVZDMZWBoU6rhYHZfkNTVEAfz3uUJRcYGj"),SERUM_PROGRAM_ID_V3:new m.PublicKey("Ray1111111111111111111111111111111111111111"),AMM_V4:new m.PublicKey("DRaya7Kj3aMWQSy19kSjvmuwq9docCHofyP9kanQGaav"),AMM_STABLE:new m.PublicKey("DRayDdXc1NZQ9C3hRWmoSf8zK4iapgMnjdNZWrfwsP8m"),CLMM_PROGRAM_ID:new m.PublicKey("DRayAUgENGQBKVaX8owNhgzkEDyoHTGVEGHVJT1E9pfH"),CLMM_LOCK_PROGRAM_ID:new m.PublicKey("DRay25Usp3YJAi7beckgpGUC7mGJ2cR1AVPxhYfwVCUX"),CLMM_LOCK_AUTH_ID:new m.PublicKey("6Aoh8h2Lw2m5UGxYR8AdAL87jTWYeKoxM52mJRzfYwN"),CREATE_CPMM_POOL_PROGRAM:new m.PublicKey("DRaycpLY18LhpbydsBWbVJtxpNv9oXPgjRSfpF2bWpYb"),CREATE_CPMM_POOL_AUTH:new m.PublicKey("CXniRufdq5xL8t8jZAPxsPZDpuudwuJSPWnbcD5Y5Nxq"),CREATE_CPMM_POOL_FEE_ACC:new m.PublicKey("3oE58BKVt8KuYkGxx8zBojugnymWmBiyafWgMrnb6eYy"),LOCK_CPMM_PROGRAM:new m.PublicKey("DRay25Usp3YJAi7beckgpGUC7mGJ2cR1AVPxhYfwVCUX"),LOCK_CPMM_AUTH:new m.PublicKey("7qWVV8UY2bRJfDLP4s37YzBPKUkVB46DStYJBpYbQzu3"),UTIL1216:m.PublicKey.default,Router:new m.PublicKey("DRaybByLpbUL57LJARs3j8BitTxVfzBg351EaMr5UTCd"),FARM_PROGRAM_ID_V3:new m.PublicKey("DRayWyrLmEW5KEeqs8kdTMMaBabapqagaBC7KWpGtJeZ"),FARM_PROGRAM_ID_V4:new m.PublicKey("Ray1111111111111111111111111111111111111111"),FARM_PROGRAM_ID_V5:new m.PublicKey("DRayiCGSZgku1GTK6rXD6mVDdingXy6APAH1R6R5L2LC"),FARM_PROGRAM_ID_V6:new m.PublicKey("DRayzbYakXs45ELHkzH6vC3fuhQqTAnv5A68gdFuvZyZ"),LAUNCHPAD_PROGRAM:new m.PublicKey("DRay6fNdQ5J82H7xV6uq2aV3mNrUZ1J4PgSKsWgptcm6"),LAUNCHPAD_AUTH:new m.PublicKey("5xqNaZXX5eUi4p5HU4oz9i5QnwRNT2y6oN7yyn4qENeq"),LAUNCHPAD_PLATFORM:new m.PublicKey("2Jx4KTDrVSdWNazuGpcA8n3ZLTRGGBDxAWhuKe2Xcj2a"),LAUNCHPAD_CONFIG:new m.PublicKey("7ZR4zD7PYfY2XxoG1Gxcy2EgEeGYrpxrwzPuwdUBssEt"),FEE_DESTINATION_ID:new m.PublicKey("9y8ENuuZ3b19quffx9hQvRVygG5ky6snHfRvGpuSfeJy"),MODEL_DATA_PUBKEY:new m.PublicKey("Ray1111111111111111111111111111111111111111")};var D=w(require("bn.js")),Oe=1e4;function dt(i,e){let{div:t,mod:n}=i.divmod(e);return n.gt(new D.default(0))?t.add(new D.default(1)):t}function de(i,e){if(i.isZero())return new D.default(0);let t=i.div(e);return t.isZero()?new D.default(1):i.mod(e).gt(new D.default(0))?t.add(new D.default(1)):t}function pt(i,e,t){if(e===void 0)return{amount:i,fee:void 0,expirationTime:void 0};let n=Math.floor(t/432e3),r=n<e.newerTransferFee.epoch?e.olderTransferFee:e.newerTransferFee,o=new D.default(r.maximumFee.toString()),a=n<e.newerTransferFee.epoch?(Number(e.newerTransferFee.epoch)*432e3-t)*400/1e3:void 0,u=dt(i.mul(new D.default(r.transferFeeBasisPoints)),new D.default(Oe)),g=u.gt(o)?o:u;return{amount:i,fee:g,expirationTime:a}}function ft(i,e,t){if(e===void 0)return{amount:i,fee:void 0,expirationTime:void 0};let n=Math.floor(t/432e3),r=n<e.newerTransferFee.epoch?e.olderTransferFee:e.newerTransferFee,o=new D.default(r.maximumFee.toString()),a=n<e.newerTransferFee.epoch?(Number(e.newerTransferFee.epoch)*432e3-t)*400/1e3:void 0;if(r.transferFeeBasisPoints===Oe){let u=new D.default(r.maximumFee.toString());return{amount:i.add(u),fee:u,expirationTime:a}}else{let u=dt(i.mul(new D.default(Oe)),new D.default(Oe-r.transferFeeBasisPoints)),g=new D.default(r.maximumFee.toString()),y=u.sub(i).gt(g)?i.add(g):u,P=dt(y.mul(new D.default(r.transferFeeBasisPoints)),new D.default(Oe)),b=P.gt(o)?o:P;return{amount:y,fee:b,expirationTime:a}}}var Jt=require("@solana/web3.js");var Ae=require("@solana/web3.js"),vi=w(require("axios"));var Wi=require("@solana/web3.js"),Di=w(require("bn.js"));var tn=w(require("bn.js")),pe=new tn.default(1e6);var sn=require("@solana/web3.js"),Te=w(require("bn.js"));var d=require("@solana/buffer-layout"),bt=d.Layout,nn=d.Structure;var yt=d.UInt;var rn=d.u8,ne=d.u16;var gt=d.u32;var ie=d.s32;var on=d.seq;var X=d.blob;var Pt=d.offset;var we=class extends bt{constructor(t,n,r){super(t,r);this.blob=X(t),this.signed=n}decode(t,n=0){let r=new Te.default(this.blob.decode(t,n),10,"le");return this.signed?r.fromTwos(this.span*8).clone():r}encode(t,n,r=0){return typeof t=="number"&&(t=new Te.default(t)),this.signed&&(t=t.toTwos(this.span*8)),this.blob.encode(t.toArrayLike(Buffer,"le",this.span),n,r)}};function c(i){return new yt(1,i)}function ke(i){return new yt(4,i)}function s(i){return new we(8,!1,i)}function O(i){return new we(16,!1,i)}function an(i){return new we(8,!0,i)}function un(i){return new we(16,!0,i)}var fe=class extends bt{constructor(t,n,r,o){super(t.span,o);this.layout=t,this.decoder=n,this.encoder=r}decode(t,n){return this.decoder(this.layout.decode(t,n))}encode(t,n,r){return this.layout.encode(this.encoder(t),n,r)}getSpan(t,n){return this.layout.getSpan(t,n)}};function p(i){return new fe(X(32),e=>new sn.PublicKey(e),e=>e.toBuffer(),i)}function Tt(i){return new fe(rn(),Vi,_i,i)}function Vi(i){if(i===0)return!1;if(i===1)return!0;throw new Error("Invalid bool: "+i)}function _i(i){return i?1:0}function cn(i,e){let t=gt("length"),n=f([t,B(i,Pt(t,-t.span),"values")]);return new fe(n,({values:r})=>r,r=>({values:r}),e)}function qi(i){let e=gt("length"),t=f([e,X(Pt(e,-e.span),"data")]);return new fe(t,({data:n})=>n,n=>({data:n}),i)}function V(i){return new fe(qi(),e=>e.toString("utf-8"),e=>Buffer.from(e,"utf-8"),i)}var At=class extends nn{decode(e,t){return super.decode(e,t)}};function f(i,e,t){return new At(i,e,t)}function B(i,e,t){let n,r=typeof e=="number"?e:(0,Te.isBN)(e)?e.toNumber():new Proxy(e,{get(o,a){if(!n){let u=Reflect.get(o,"count");n=(0,Te.isBN)(u)?u.toNumber():u,Reflect.set(o,"count",n)}return Reflect.get(o,a)},set(o,a,u){return a==="count"&&(n=u),Reflect.set(o,a,u)}});return on(i,r,t)}var H=require("@solana/spl-token"),I=require("@solana/web3.js"),ee=w(require("bn.js"));var ln=f([s(),s("epoch"),c("curveType"),ne("index"),s("migrateFee"),s("tradeFeeRate"),s("maxShareFeeRate"),s("minSupplyA"),s("maxLockRate"),s("minSellRateA"),s("minMigrateRateA"),s("minFundRaisingB"),p("mintB"),p("protocolFeeOwner"),p("migrateFeeOwner"),p("migrateToAmmWallet"),p("migrateToCpmmWallet"),B(s(),16)]),mn=f([s("totalLockedAmount"),s("cliffPeriod"),s("unlockPeriod"),s("startTime"),s("totalAllocatedShare")]),dn=f([s(),s("epoch"),c("bump"),c("status"),c("mintDecimalsA"),c("mintDecimalsB"),c("migrateType"),s("supply"),s("totalSellA"),s("virtualA"),s("virtualB"),s("realA"),s("realB"),s("totalFundRaisingB"),s("protocolFee"),s("platformFee"),s("migrateFee"),mn.replicate("vestingSchedule"),p("configId"),p("platformId"),p("mintA"),p("mintB"),p("vaultA"),p("vaultB"),p("creator"),c("mintProgramFlag"),c("cpmmCreatorFeeOn"),B(c(),62)]),Gi=f([s(),s("epoch"),p("poolId"),p("beneficiary"),s("claimedAmount"),s("tokenShareAmount"),B(s(),8)]),Je=f([c("migrateType"),c("migrateCpmmFeeOn"),s("supply"),s("totalSellA"),s("totalFundRaisingB"),s("totalLockedAmount"),s("cliffPeriod"),s("unlockPeriod")]),pn=f([s("epoch"),c("index"),p("configId"),Je.replicate("bondingCurveParam"),B(s(),50)]),fn=f([s(),s("epoch"),p("platformClaimFeeWallet"),p("platformLockNftWallet"),s("platformScale"),s("creatorScale"),s("burnScale"),s("feeRate"),B(c(),64,"name"),B(c(),256,"web"),B(c(),256,"img"),p("cpConfigId"),s("creatorFeeRate"),p("transferFeeExtensionAuth"),B(c(),180),cn(pn,"platformCurve")]);var Ar=require("@solana/web3.js"),Tr=w(require("bn.js")),wr=w(require("decimal.js"));var tt=require("@solana/spl-token");var Ui=require("@solana/web3.js"),bn=require("@solana/spl-token");var et=require("@solana/web3.js"),gr=w(require("bn.js"));var Ct=require("@solana/spl-token");var rr=w(require("bn.js")),or=w(require("decimal.js"));var z=w(require("bn.js")),wt=new z.default(0),yn=new z.default(1),gn=new z.default(-1),$=new z.default(1).shln(64),Pn=new z.default(1).shln(128),kt=$.sub(yn);var Xi=Pn.subn(1),Be=-443636,Ee=-Be,Bt=new z.default("4295048016"),ht=new z.default("79226673521066979257578248091"),Iu=new z.default("4295048017"),Su=new z.default("79226673521066979257578248090");var zi=new z.default(10).pow(new z.default(6));var Ku=new z.default("18446744073700000000");var nr=w(require("bn.js")),ir=w(require("decimal.js"));function xt(i){let e=new ArrayBuffer(2);return new DataView(e).setUint16(0,i,!1),new Uint8Array(e)}var Mu=Buffer.from("amm_config","utf8"),An=Buffer.from("pool","utf8"),Tn=Buffer.from("pool_vault","utf8"),Ou=Buffer.from("pool_reward_vault","utf8"),Eu=Buffer.from("position","utf8"),vu=Buffer.from("tick_array","utf8"),Wu=Buffer.from("operation","utf8"),Du=Buffer.from("pool_tick_array_bitmap_extension","utf8"),Vu=Buffer.from("observation","utf8");var _u=Buffer.from("locked_position","utf8");var qu=Buffer.from("support_mint","utf8");var Qi=require("@solana/web3.js"),Ji=require("@solana/spl-token"),$i=w(require("bn.js")),er=w(require("decimal.js"));var Hi=w(require("bn.js")),Yi=w(require("decimal.js"));var Kt=14;var $e=60;var sr=f([X(8),c("bump"),ne("index"),p(""),ke("protocolFeeRate"),ke("tradeFeeRate"),ne("tickSpacing"),B(s(),8,"")]),ar=f([ke("blockTimestamp"),an("tickCumulative"),B(s(),4)]),Rn=f([X(8),Tt("initialized"),s("recentEpoch"),ne("observationIndex"),p("poolId"),B(ar,100,"observations"),B(s(),4)]),ur=f([c("rewardState"),s("openTime"),s("endTime"),s("lastUpdateTime"),O("emissionsPerSecondX64"),s("rewardTotalEmissioned"),s("rewardClaimed"),p("tokenMint"),p("tokenVault"),p("creator"),O("rewardGrowthGlobalX64")]),Kn=f([X(8),c("bump"),p("ammConfig"),p("creator"),p("mintA"),p("mintB"),p("vaultA"),p("vaultB"),p("observationId"),c("mintDecimalsA"),c("mintDecimalsB"),ne("tickSpacing"),O("liquidity"),O("sqrtPriceX64"),ie("tickCurrent"),ke(),O("feeGrowthGlobalX64A"),O("feeGrowthGlobalX64B"),s("protocolFeesTokenA"),s("protocolFeesTokenB"),O("swapInAmountTokenA"),O("swapOutAmountTokenB"),O("swapInAmountTokenB"),O("swapOutAmountTokenA"),c("status"),B(c(),7,""),B(ur,3,"rewardInfos"),B(s(),16,"tickArrayBitmap"),s("totalFeesTokenA"),s("totalFeesClaimedTokenA"),s("totalFeesTokenB"),s("totalFeesClaimedTokenB"),s("fundFeesTokenA"),s("fundFeesTokenB"),s("startTime"),B(s(),15*4-3,"padding")]),cr=f([O("growthInsideLastX64"),s("rewardAmountOwed")]),Cn=f([X(8),c("bump"),p("nftMint"),p("poolId"),ie("tickLower"),ie("tickUpper"),O("liquidity"),O("feeGrowthInsideLastX64A"),O("feeGrowthInsideLastX64B"),s("tokenFeesOwedA"),s("tokenFeesOwedB"),B(cr,3,"rewardInfos"),B(s(),8,"")]),nl=f([X(8),c("bump"),p("poolId"),ie("tickLowerIndex"),ie("tickUpperIndex"),O("liquidity"),O("feeGrowthInsideLastX64A"),O("feeGrowthInsideLastX64B"),s("tokenFeesOwedA"),s("tokenFeesOwedB"),B(O(),3,"rewardGrowthInside"),B(s(),8,"")]),lr=f([ie("tick"),un("liquidityNet"),O("liquidityGross"),O("feeGrowthOutsideX64A"),O("feeGrowthOutsideX64B"),B(O(),3,"rewardGrowthsOutsideX64"),B(ke(),13,"")]),hn=f([X(8),p("poolId"),ie("startTickIndex"),B(lr,$e,"ticks"),c("initializedTickCount"),B(c(),115,"")]),mr=f([X(329),B(p(),100,"whitelistMints")]),tr=f([X(8),p("poolId"),B(B(s(),8),Kt,"positiveTickArrayBitmap"),B(B(s(),8),Kt,"negativeTickArrayBitmap")]),il=f([s(),c("bump"),p("owner"),p("poolId"),p("positionId"),p("nftAccount"),B(s(),8)]),dr=f([X(8),c("bump"),p("lockOwner"),p("poolId"),p("positionId"),p("nftAccount"),p("lockNftMint"),s("recentEpoch"),B(s(),8)]);Rn.span;var wl=q("Raydium_Clmm");var Fn=Buffer.from("vault_auth_seed","utf8"),Mn=Buffer.from("global_config","utf8"),On=Buffer.from("pool_vesting","utf8"),En=Buffer.from("platform_config","utf8"),vn=Buffer.from("platform_fee_vault_auth_seed","utf8"),Wn=Buffer.from("creator_fee_vault_auth_seed","utf8");function Dn(i){return U([Fn],i)}function kr(i,e,t,n){return U([Mn,e.toBuffer(),qn(t),xt(n)],i)}function Vn(i,e,t){return U([An,e.toBuffer(),t.toBuffer()],i)}function _n(i,e,t){return U([Tn,e.toBuffer(),t.toBuffer()],i)}function re(i){return U([Buffer.from("__event_authority","utf8")],i)}function qn(i){let e=new ArrayBuffer(1);return new DataView(e).setUint8(0,i),new Uint8Array(e)}function Gn(i,e){return U([En,e.toBuffer()],i)}function Un(i,e,t){return U([On,e.toBuffer(),t.toBuffer()],i)}function Xn(i,e,t){return U([e.toBuffer(),t.toBuffer()],i)}function zn(i){return U([vn],i)}function Hn(i,e,t){return U([e.toBuffer(),t.toBuffer()],i)}function Yn(i){return U([Wn],i)}var _={initialize:Buffer.from([175,175,109,31,13,152,155,237]),initializeV2:Buffer.from([67,153,175,39,218,16,38,32]),buyExactIn:Buffer.from([250,234,13,123,213,156,19,236]),buyExactOut:Buffer.from([24,211,116,40,105,3,153,56]),sellExactIn:Buffer.from([149,39,222,155,211,124,152,26]),sellExactOut:Buffer.from([95,200,71,34,8,9,11,166]),createVestingAccount:Buffer.from([129,178,2,13,217,172,230,218]),claimVestedToken:Buffer.from([49,33,104,30,189,157,79,35]),createPlatformConfig:Buffer.from([176,90,196,175,253,113,220,20]),claimPlatformFee:Buffer.from([156,39,208,135,76,237,61,72]),updatePlaformConfig:Buffer.from([195,60,76,129,146,45,67,143]),initializeWithToken2022:Buffer.from([37,190,126,222,44,154,171,17]),claimPlatformFeeFromVault:Buffer.from([117,241,198,168,248,218,80,29]),claimCreatorFee:Buffer.from([26,97,138,203,132,171,141,252]),updatePlatformCurveParam:Buffer.from([138,144,138,250,220,128,4,57]),removePlatformCurveParam:Buffer.from([27,30,62,169,93,224,24,145])};function Br(i,e,t,n,r,o,a,u,g,y,P,b,K,S,T,k,A,E,h,R){throw new Error("*** launchlab initialize has been deprecated, please use initializeV2 instead! ***")}function Zn(i,e,t,n,r,o,a,u,g,y,P,b,K,S,T,k,A,E,h,R,N){let x=f([c("decimals"),V("name"),V("symbol"),V("uri")]),M=f([s("totalLockedAmount"),s("cliffPeriod"),s("unlockPeriod"),c("cpmmCreatorFeeOn")]),j=f([c("index"),s("supply"),s("totalFundRaisingB"),c("migrateType")]),le=f([c("index"),s("supply"),s("totalSellA"),s("totalFundRaisingB"),c("migrateType")]),ge=[{pubkey:e,isSigner:!0,isWritable:!0},{pubkey:t,isSigner:!1,isWritable:!1},{pubkey:n,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!1,isWritable:!1},{pubkey:o,isSigner:!1,isWritable:!1},{pubkey:a,isSigner:!1,isWritable:!0},{pubkey:u,isSigner:!0,isWritable:!0},{pubkey:g,isSigner:!1,isWritable:!1},{pubkey:y,isSigner:!1,isWritable:!0},{pubkey:P,isSigner:!1,isWritable:!0},{pubkey:b,isSigner:!1,isWritable:!0},{pubkey:H.TOKEN_PROGRAM_ID,isSigner:!1,isWritable:!1},{pubkey:H.TOKEN_PROGRAM_ID,isSigner:!1,isWritable:!1},{pubkey:Me,isSigner:!1,isWritable:!1},{pubkey:I.SystemProgram.programId,isSigner:!1,isWritable:!1},{pubkey:Ye,isSigner:!1,isWritable:!1},{pubkey:re(i).publicKey,isSigner:!1,isWritable:!1},{pubkey:i,isSigner:!1,isWritable:!1}],se=Buffer.alloc(Buffer.from(S,"utf-8").length+Buffer.from(T,"utf-8").length+Buffer.from(k,"utf-8").length+4*3+1),Q=Buffer.alloc(M.span),te=Buffer.alloc(A.type==="ConstantCurve"?le.span:j.span);return x.encode({decimals:K,name:S,symbol:T,uri:k},se),A.type==="ConstantCurve"?le.encode(v(L({index:0},A),{migrateType:A.migrateType==="amm"?0:1}),te):A.type==="FixedCurve"?j.encode(v(L({index:1},A),{migrateType:A.migrateType==="amm"?0:1}),te):A.type==="LinearCurve"&&j.encode(v(L({index:2},A),{migrateType:A.migrateType==="amm"?0:1}),te),M.encode({totalLockedAmount:E,cliffPeriod:h,unlockPeriod:R,cpmmCreatorFeeOn:N},Q),new I.TransactionInstruction({keys:ge,programId:i,data:Buffer.from([..._.initializeV2,...se,...te,...Q])})}function Qn(i,e,t,n,r,o,a,u,g,y,P,b,K,S,T,k,A,E,h,R,N){let x=f([c("decimals"),V("name"),V("symbol"),V("uri")]),M=f([s("totalLockedAmount"),s("cliffPeriod"),s("unlockPeriod"),c("cpmmCreatorFeeOn"),c("transferFeeExtensionParamsOption"),f([ne("transferFeeBasePoints"),s("maxinumFee")]).replicate("transferFeeExtensionParams")]),j=f([c("index"),s("supply"),s("totalFundRaisingB"),c("migrateType")]),le=f([c("index"),s("supply"),s("totalSellA"),s("totalFundRaisingB"),c("migrateType")]),ge=[{pubkey:e,isSigner:!0,isWritable:!0},{pubkey:t,isSigner:!1,isWritable:!1},{pubkey:n,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!1,isWritable:!1},{pubkey:o,isSigner:!1,isWritable:!1},{pubkey:a,isSigner:!1,isWritable:!0},{pubkey:u,isSigner:!0,isWritable:!0},{pubkey:g,isSigner:!1,isWritable:!1},{pubkey:y,isSigner:!1,isWritable:!0},{pubkey:P,isSigner:!1,isWritable:!0},{pubkey:H.TOKEN_2022_PROGRAM_ID,isSigner:!1,isWritable:!1},{pubkey:H.TOKEN_PROGRAM_ID,isSigner:!1,isWritable:!1},{pubkey:I.SystemProgram.programId,isSigner:!1,isWritable:!1},{pubkey:re(i).publicKey,isSigner:!1,isWritable:!1},{pubkey:i,isSigner:!1,isWritable:!1}],se=Buffer.alloc(Buffer.from(K,"utf-8").length+Buffer.from(S,"utf-8").length+Buffer.from(T,"utf-8").length+4*3+1),Q=Buffer.alloc(M.span),te=Buffer.alloc(k.type==="ConstantCurve"?le.span:j.span);return x.encode({decimals:b,name:K,symbol:S,uri:T},se),k.type==="ConstantCurve"?le.encode(v(L({index:0},k),{migrateType:k.migrateType==="amm"?0:1}),te):k.type==="FixedCurve"?j.encode(v(L({index:1},k),{migrateType:k.migrateType==="amm"?0:1}),te):k.type==="LinearCurve"&&j.encode(v(L({index:2},k),{migrateType:k.migrateType==="amm"?0:1}),te),M.encode({totalLockedAmount:A,cliffPeriod:E,unlockPeriod:h,cpmmCreatorFeeOn:R,transferFeeExtensionParamsOption:N?1:0,transferFeeExtensionParams:N!=null?N:{transferFeeBasePoints:0,maxinumFee:new ee.default(0)}},Q),new I.TransactionInstruction({keys:ge,programId:i,data:Buffer.from([..._.initializeWithToken2022,...se,...te,...Q])})}function Jn(i,e,t,n,r,o,a,u,g,y,P,b,K,S,T,k,A,E,h,R){let N=f([s("amountB"),s("minAmountA"),s("shareFeeRate")]),x=[{pubkey:e,isSigner:!0,isWritable:!0},{pubkey:t,isSigner:!1,isWritable:!1},{pubkey:n,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!1,isWritable:!1},{pubkey:o,isSigner:!1,isWritable:!0},{pubkey:a,isSigner:!1,isWritable:!0},{pubkey:u,isSigner:!1,isWritable:!0},{pubkey:g,isSigner:!1,isWritable:!0},{pubkey:y,isSigner:!1,isWritable:!0},{pubkey:P,isSigner:!1,isWritable:!1},{pubkey:b,isSigner:!1,isWritable:!1},{pubkey:K,isSigner:!1,isWritable:!1},{pubkey:S,isSigner:!1,isWritable:!1},{pubkey:re(i).publicKey,isSigner:!1,isWritable:!1},{pubkey:i,isSigner:!1,isWritable:!1}];R&&x.push({pubkey:R,isSigner:!1,isWritable:!0}),x.push({pubkey:I.SystemProgram.programId,isSigner:!1,isWritable:!1}),x.push({pubkey:T,isSigner:!1,isWritable:!0}),x.push({pubkey:k,isSigner:!1,isWritable:!0});let M=Buffer.alloc(N.span);return N.encode({amountB:A,minAmountA:E,shareFeeRate:h!=null?h:new ee.default(0)},M),new I.TransactionInstruction({keys:x,programId:i,data:Buffer.from([..._.buyExactIn,...M])})}function $n(i,e,t,n,r,o,a,u,g,y,P,b,K,S,T,k,A,E,h,R){let N=f([s("amountA"),s("maxAmountB"),s("shareFeeRate")]),x=[{pubkey:e,isSigner:!0,isWritable:!0},{pubkey:t,isSigner:!1,isWritable:!1},{pubkey:n,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!1,isWritable:!1},{pubkey:o,isSigner:!1,isWritable:!0},{pubkey:a,isSigner:!1,isWritable:!0},{pubkey:u,isSigner:!1,isWritable:!0},{pubkey:g,isSigner:!1,isWritable:!0},{pubkey:y,isSigner:!1,isWritable:!0},{pubkey:P,isSigner:!1,isWritable:!1},{pubkey:b,isSigner:!1,isWritable:!1},{pubkey:K,isSigner:!1,isWritable:!1},{pubkey:S,isSigner:!1,isWritable:!1},{pubkey:re(i).publicKey,isSigner:!1,isWritable:!1},{pubkey:i,isSigner:!1,isWritable:!1}];R&&x.push({pubkey:R,isSigner:!1,isWritable:!0}),x.push({pubkey:I.SystemProgram.programId,isSigner:!1,isWritable:!1}),x.push({pubkey:T,isSigner:!1,isWritable:!0}),x.push({pubkey:k,isSigner:!1,isWritable:!0});let M=Buffer.alloc(N.span);return N.encode({amountA:A,maxAmountB:E,shareFeeRate:h!=null?h:new ee.default(0)},M),new I.TransactionInstruction({keys:x,programId:i,data:Buffer.from([..._.buyExactOut,...M])})}function ei(i,e,t,n,r,o,a,u,g,y,P,b,K,S,T,k,A,E,h,R){let N=f([s("amountA"),s("minAmountB"),s("shareFeeRate")]),x=[{pubkey:e,isSigner:!0,isWritable:!0},{pubkey:t,isSigner:!1,isWritable:!1},{pubkey:n,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!1,isWritable:!1},{pubkey:o,isSigner:!1,isWritable:!0},{pubkey:a,isSigner:!1,isWritable:!0},{pubkey:u,isSigner:!1,isWritable:!0},{pubkey:g,isSigner:!1,isWritable:!0},{pubkey:y,isSigner:!1,isWritable:!0},{pubkey:P,isSigner:!1,isWritable:!1},{pubkey:b,isSigner:!1,isWritable:!1},{pubkey:K,isSigner:!1,isWritable:!1},{pubkey:S,isSigner:!1,isWritable:!1},{pubkey:re(i).publicKey,isSigner:!1,isWritable:!1},{pubkey:i,isSigner:!1,isWritable:!1}];R&&x.push({pubkey:R,isSigner:!1,isWritable:!0}),x.push({pubkey:I.SystemProgram.programId,isSigner:!1,isWritable:!1}),x.push({pubkey:T,isSigner:!1,isWritable:!0}),x.push({pubkey:k,isSigner:!1,isWritable:!0});let M=Buffer.alloc(N.span);return N.encode({amountA:A,minAmountB:E,shareFeeRate:h!=null?h:new ee.default(0)},M),new I.TransactionInstruction({keys:x,programId:i,data:Buffer.from([..._.sellExactIn,...M])})}function ti(i,e,t,n,r,o,a,u,g,y,P,b,K,S,T,k,A,E,h,R){let N=f([s("amountB"),s("maxAmountA"),s("shareFeeRate")]),x=[{pubkey:e,isSigner:!0,isWritable:!0},{pubkey:t,isSigner:!1,isWritable:!1},{pubkey:n,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!1,isWritable:!1},{pubkey:o,isSigner:!1,isWritable:!0},{pubkey:a,isSigner:!1,isWritable:!0},{pubkey:u,isSigner:!1,isWritable:!0},{pubkey:g,isSigner:!1,isWritable:!0},{pubkey:y,isSigner:!1,isWritable:!0},{pubkey:P,isSigner:!1,isWritable:!1},{pubkey:b,isSigner:!1,isWritable:!1},{pubkey:K,isSigner:!1,isWritable:!1},{pubkey:S,isSigner:!1,isWritable:!1},{pubkey:re(i).publicKey,isSigner:!1,isWritable:!1},{pubkey:i,isSigner:!1,isWritable:!1}];R&&x.push({pubkey:R,isSigner:!1,isWritable:!0}),x.push({pubkey:I.SystemProgram.programId,isSigner:!1,isWritable:!1}),x.push({pubkey:T,isSigner:!1,isWritable:!0}),x.push({pubkey:k,isSigner:!1,isWritable:!0});let M=Buffer.alloc(N.span);return N.encode({amountB:A,maxAmountA:E,shareFeeRate:h!=null?h:new ee.default(0)},M),new I.TransactionInstruction({keys:x,programId:i,data:Buffer.from([..._.sellExactOut,...M])})}function ni(i,e,t,n,r,o,a,u,g){let y=f([]),P=[{pubkey:e,isSigner:!0,isWritable:!0},{pubkey:t,isSigner:!1,isWritable:!1},{pubkey:n,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!1,isWritable:!0},{pubkey:a,isSigner:!1,isWritable:!0},{pubkey:o,isSigner:!1,isWritable:!0},{pubkey:u,isSigner:!1,isWritable:!1},{pubkey:g,isSigner:!1,isWritable:!1},{pubkey:I.SystemProgram.programId,isSigner:!1,isWritable:!1},{pubkey:H.ASSOCIATED_TOKEN_PROGRAM_ID,isSigner:!1,isWritable:!1}],b=Buffer.alloc(y.span);return y.encode({},b),new I.TransactionInstruction({keys:P,programId:i,data:Buffer.from([..._.claimVestedToken,...b])})}function ii(i,e,t,n,r,o){let a=f([s("shareAmount")]),u=[{pubkey:e,isSigner:!0,isWritable:!0},{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!1,isWritable:!0},{pubkey:I.SystemProgram.programId,isSigner:!1,isWritable:!1}],g=Buffer.alloc(a.span);return a.encode({shareAmount:o},g),new I.TransactionInstruction({keys:u,programId:i,data:Buffer.from([..._.createVestingAccount,...g])})}function ri(i,e,t,n,r,o,a,u,g){let y=[{pubkey:e,isSigner:!0,isWritable:!0},{pubkey:t,isSigner:!1,isWritable:!1},{pubkey:n,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!1,isWritable:!0},{pubkey:o,isSigner:!1,isWritable:!0},{pubkey:a,isSigner:!1,isWritable:!0},{pubkey:u,isSigner:!1,isWritable:!0},{pubkey:g,isSigner:!1,isWritable:!0},{pubkey:I.SystemProgram.programId,isSigner:!1,isWritable:!0},{pubkey:H.ASSOCIATED_TOKEN_PROGRAM_ID,isSigner:!1,isWritable:!0}];return new I.TransactionInstruction({keys:y,programId:i,data:_.claimPlatformFee})}function oi(i,e,t,n,r,o,a,u,g,y,P,b,K){let S=f([s("platformScale"),s("creatorScale"),s("burnScale"),s("feeRate"),V("name"),V("web"),V("img"),s("creatorFeeRate")]),T=[{pubkey:e,isSigner:!0,isWritable:!0},{pubkey:t,isSigner:!1,isWritable:!1},{pubkey:n,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!1,isWritable:!0},{pubkey:o,isSigner:!1,isWritable:!0},{pubkey:I.SystemProgram.programId,isSigner:!1,isWritable:!1},{pubkey:a,isSigner:!1,isWritable:!1}],k=Buffer.alloc(8*5+Buffer.from(P,"utf-8").length+Buffer.from(b,"utf-8").length+Buffer.from(K,"utf-8").length+4*3);return S.encode({platformScale:u.platformScale,creatorScale:u.creatorScale,burnScale:u.burnScale,feeRate:g,name:P,web:b,img:K,creatorFeeRate:y},k),new I.TransactionInstruction({keys:T,programId:i,data:Buffer.from([..._.createPlatformConfig,...k])})}function si(i,e,t,n){let r=[{pubkey:e,isSigner:!0,isWritable:!1},{pubkey:t,isSigner:!1,isWritable:!0}],o;if(n.type==="updateClaimFeeWallet"){let a=f([c("index"),p("value")]);o=Buffer.alloc(a.span),a.encode({index:0,value:n.value},o)}else if(n.type==="updateLockNftWallet"){let a=f([c("index"),p("value")]);o=Buffer.alloc(a.span),a.encode({index:1,value:n.value},o)}else if(n.type==="migrateCpLockNftScale"){let a=f([c("index"),s("platformScale"),s("creatorScale"),s("burnScale")]);o=Buffer.alloc(a.span),a.encode(L({index:2},n.value),o)}else if(n.type==="updateFeeRate"){let a=f([c("index"),s("value")]);o=Buffer.alloc(a.span),a.encode({index:3,value:n.value},o)}else if(n.type==="updateImg"||n.type==="updateName"||n.type==="updateWeb"){let a=f([c("index"),V("value")]);o=Buffer.alloc(Buffer.from(n.value,"utf-8").length+4+1*1),n.type==="updateName"?a.encode({index:4,value:n.value},o):n.type==="updateWeb"?a.encode({index:5,value:n.value},o):n.type==="updateImg"&&a.encode({index:6,value:n.value},o)}else if(n.type==="updateCpConfigId"){r.push({pubkey:n.value,isSigner:!1,isWritable:!1});let a=f([c("index")]);o=Buffer.alloc(a.span),a.encode({index:7},o)}else if(n.type==="updateAll"){r.push({pubkey:n.value.cpConfigId,isSigner:!1,isWritable:!1});let a=f([c("index"),p("platformClaimFeeWallet"),p("platformLockNftWallet"),s("platformScale"),s("creatorScale"),s("burnScale"),s("feeRate"),V("name"),V("web"),V("img"),p("transferFeeExtensionAuth"),s("creatorFeeRate")]);o=Buffer.alloc(1+32+32+8*4+4*3+Buffer.from(n.value.name,"utf-8").length+Buffer.from(n.value.web,"utf-8").length+Buffer.from(n.value.img,"utf-8").length+32+8),a.encode({index:8,platformClaimFeeWallet:n.value.platformClaimFeeWallet,platformLockNftWallet:n.value.platformLockNftWallet,platformScale:n.value.migrateCpLockNftScale.platformScale,creatorScale:n.value.migrateCpLockNftScale.creatorScale,burnScale:n.value.migrateCpLockNftScale.burnScale,feeRate:n.value.feeRate,name:n.value.name,web:n.value.web,img:n.value.img,transferFeeExtensionAuth:n.value.transferFeeExtensionAuth,creatorFeeRate:n.value.creatorFeeRate},o)}else throw Error("updateInfo params type error");return new I.TransactionInstruction({keys:r,programId:i,data:Buffer.from([..._.updatePlaformConfig,...o])})}function ai(i,e,t,n,r,o,a,u){let g=[{pubkey:t,isSigner:!0,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!1},{pubkey:e,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!1,isWritable:!0},{pubkey:o,isSigner:!1,isWritable:!0},{pubkey:a,isSigner:!1,isWritable:!1},{pubkey:u,isSigner:!1,isWritable:!1},{pubkey:I.SystemProgram.programId,isSigner:!1,isWritable:!1},{pubkey:H.ASSOCIATED_TOKEN_PROGRAM_ID,isSigner:!1,isWritable:!1}];return new I.TransactionInstruction({keys:g,programId:i,data:_.claimPlatformFeeFromVault})}function ui(i,e,t,n,r,o,a){let u=[{pubkey:e,isSigner:!0,isWritable:!0},{pubkey:t,isSigner:!1,isWritable:!1},{pubkey:n,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!1,isWritable:!0},{pubkey:o,isSigner:!1,isWritable:!1},{pubkey:a,isSigner:!1,isWritable:!1},{pubkey:I.SystemProgram.programId,isSigner:!1,isWritable:!1},{pubkey:H.ASSOCIATED_TOKEN_PROGRAM_ID,isSigner:!1,isWritable:!1}];return new I.TransactionInstruction({keys:u,programId:i,data:_.claimCreatorFee})}var jn=255,Nt=new ee.default("18446744073709551615");function hr(i,e,t,n,r,o){let a=[{pubkey:e,isSigner:!0,isWritable:!0},{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!1},{pubkey:I.SystemProgram.programId,isSigner:!1,isWritable:!1}],u=Buffer.alloc(1*2+8*6+c().span);return c().encode(r,u),Je.encode({migrateType:o.migrateType?o.migrateType:jn,migrateCpmmFeeOn:o.migrateCpmmFeeOn?o.migrateCpmmFeeOn:jn,supply:o.supply?o.supply:new ee.default(0),totalSellA:o.totalSellA?o.totalSellA:new ee.default(0),totalFundRaisingB:o.totalFundRaisingB?o.totalFundRaisingB:new ee.default(0),totalLockedAmount:o.totalLockedAmount?o.totalLockedAmount:Nt,cliffPeriod:o.cliffPeriod?o.cliffPeriod:Nt,unlockPeriod:o.unlockPeriod?o.unlockPeriod:Nt},u,1),new I.TransactionInstruction({keys:a,programId:i,data:Buffer.from([..._.updatePlatformCurveParam,...u])})}function xr(i,e,t,n){let r=[{pubkey:e,isSigner:!0,isWritable:!1},{pubkey:t,isSigner:!1,isWritable:!0}],o=Buffer.alloc(c().span);return c().encode(n,o),new I.TransactionInstruction({keys:r,programId:i,data:Buffer.from([..._.removePlatformCurveParam,...o,1,2])})}var Rt=(t=>(t[t.OnlyTokenB=0]="OnlyTokenB",t[t.BothToken=1]="BothToken",t))(Rt||{});var De=w(require("bn.js")),he=w(require("decimal.js"));var oe=class{static getPoolInitPriceByPool({poolInfo:e,decimalA:t,decimalB:n}){throw Error()}static getPoolInitPriceByInit({a:e,b:t,decimalA:n,decimalB:r}){throw Error()}static getPoolPrice({poolInfo:e,decimalA:t,decimalB:n}){throw Error()}static getPoolEndPrice({supply:e,totalSell:t,totalLockedAmount:n,totalFundRaising:r,migrateFee:o,decimalA:a,decimalB:u}){throw Error()}static getPoolEndPriceReal({poolInfo:e,decimalA:t,decimalB:n}){throw Error()}static getInitParam({supply:e,totalFundRaising:t,totalSell:n,totalLockedAmount:r,migrateFee:o}){throw Error()}static buyExactIn({poolInfo:e,amount:t}){throw Error()}static buyExactOut({poolInfo:e,amount:t}){throw Error()}static sellExactIn({poolInfo:e,amount:t}){throw Error()}static sellExactOut({poolInfo:e,amount:t}){throw Error()}};var Ve=class extends oe{static getPoolInitPriceByPool({poolInfo:e,decimalA:t,decimalB:n}){return new he.default(e.virtualB.toString()).div(e.virtualA.toString()).mul(10**(t-n))}static getPoolInitPriceByInit({a:e,b:t,decimalA:n,decimalB:r}){return new he.default(t.toString()).div(e.toString()).mul(10**(n-r))}static getPoolPrice({poolInfo:e,decimalA:t,decimalB:n}){return new he.default(e.virtualB.add(e.realB).toString()).div(e.virtualA.sub(e.realA).toString()).mul(10**(t-n))}static getPoolEndPrice({supply:e,totalSell:t,totalLockedAmount:n,totalFundRaising:r,migrateFee:o,decimalA:a,decimalB:u}){return new he.default(r.sub(o).toString()).div(e.sub(t).sub(n).toString()).mul(10**(a-u))}static getPoolEndPriceReal({poolInfo:e,decimalA:t,decimalB:n}){let r=e.totalSellA.sub(e.realA),o=e.totalFundRaisingB.sub(e.realB);return new he.default(e.virtualB.add(e.realB.add(o)).toString()).div(e.virtualA.sub(e.realA.add(r)).toString()).mul(10**(t-n))}static getInitParam({supply:e,totalFundRaising:t,totalSell:n,totalLockedAmount:r,migrateFee:o}){if(e.lte(n))throw Error("supply need gt total sell");let a=e.sub(n).sub(r);if(a.lte(new De.default(0)))throw Error("supplyMinusSellLocked <= 0");let u=t.sub(o);if(u.lte(new De.default(0)))throw Error("tfMinusMf <= 0");let g=u.mul(n).mul(n).div(a),y=u.mul(n).div(a).sub(t),P=g.div(y),b=t.mul(t).div(y);if(P.lt(new De.default(0))||b.lt(new De.default(0)))throw Error("invalid input 0");return{a:P,b,c:n}}static buyExactIn({poolInfo:e,amount:t}){return this.getAmountOut({amountIn:t,inputReserve:e.virtualB.add(e.realB),outputReserve:e.virtualA.sub(e.realA)})}static buyExactOut({poolInfo:e,amount:t}){return this.getAmountIn({amountOut:t,inputReserve:e.virtualB.add(e.realB),outputReserve:e.virtualA.sub(e.realA)})}static sellExactIn({poolInfo:e,amount:t}){return this.getAmountOut({amountIn:t,inputReserve:e.virtualA.sub(e.realA),outputReserve:e.virtualB.add(e.realB)})}static sellExactOut({poolInfo:e,amount:t}){return this.getAmountIn({amountOut:t,inputReserve:e.virtualA.sub(e.realA),outputReserve:e.virtualB.add(e.realB)})}static getAmountOut({amountIn:e,inputReserve:t,outputReserve:n}){let r=e.mul(n),o=t.add(e);return r.div(o)}static getAmountIn({amountOut:e,inputReserve:t,outputReserve:n}){let r=t.mul(e),o=n.sub(e);return de(r,o)}};var Y=w(require("bn.js")),Lt=w(require("decimal.js"));var _e=w(require("bn.js")),xe=w(require("decimal.js"));var qe=class extends oe{static getPoolInitPriceByPool({poolInfo:e,decimalA:t,decimalB:n}){return new xe.default(e.virtualB.toString()).div(e.virtualA.toString()).mul(10**(t-n))}static getPoolInitPriceByInit({a:e,b:t,decimalA:n,decimalB:r}){return new xe.default(t.toString()).div(e.toString()).mul(10**(n-r))}static getPoolPrice({poolInfo:e,decimalA:t,decimalB:n}){return new xe.default(e.virtualB.toString()).div(e.virtualA.toString()).mul(10**(t-n))}static getPoolEndPrice({supply:e,totalSell:t,totalLockedAmount:n,totalFundRaising:r,migrateFee:o,decimalA:a,decimalB:u}){return new xe.default(r.sub(o).toString()).div(e.sub(t).sub(n).toString()).mul(10**(a-u))}static getPoolEndPriceReal({poolInfo:e,decimalA:t,decimalB:n}){let r=e.totalSellA.sub(e.realA),o=e.totalFundRaisingB.sub(e.realB);return new xe.default(e.virtualB.add(e.realB).add(o).toString()).div(e.virtualA.sub(e.realA).add(r).toString()).mul(10**(t-n))}static getInitParam({supply:e,totalFundRaising:t,totalSell:n,totalLockedAmount:r,migrateFee:o}){let a=e.sub(r);if(a.lte(new _e.default(0)))throw Error("invalid input 1");let u=new _e.default(2).mul(t).sub(o),y=t.mul(a).div(u);if(y.lt(new _e.default(0))||t.lt(new _e.default(0)))throw Error("invalid input 0");return{a:y,b:t,c:y}}static buyExactIn({poolInfo:e,amount:t}){return this.getAmountOut({amountIn:t,initInput:e.virtualB,initOutput:e.virtualA})}static buyExactOut({poolInfo:e,amount:t}){return this.getAmountIn({amountOut:t,initInput:e.virtualB,initOutput:e.virtualA})}static sellExactIn({poolInfo:e,amount:t}){return this.getAmountOut({amountIn:t,initInput:e.virtualA,initOutput:e.virtualB})}static sellExactOut({poolInfo:e,amount:t}){return this.getAmountIn({amountOut:t,initInput:e.virtualA,initOutput:e.virtualB})}static getAmountOut({amountIn:e,initInput:t,initOutput:n}){return n.mul(e).div(t)}static getAmountIn({amountOut:e,initInput:t,initOutput:n}){let r=t.mul(e);return de(r,n)}};var G=w(require("bn.js")),ce=w(require("decimal.js"));var be=w(require("bn.js")),Ge=w(require("decimal.js")),Ie=class{static _multipler(e){return new Ge.default(10).pow(e)}static getPrice({priceX64:e,decimalA:t,decimalB:n}){return new Ge.default(e.toString()).div(this._Q64).mul(this._multipler(t)).div(this._multipler(n))}static getPriceX64({price:e,decimalA:t,decimalB:n}){let r=e.mul(this._multipler(n)).div(this._multipler(t));return new be.default(r.mul(this._Q64).toFixed(0))}};Ie._Q64=new Ge.default(new be.default(1).shln(64).toString());function Ir({supply:i,totalFundRaisingB:e,totalLockedAmount:t,totalSellA:n,migrateType:r,decimalsA:o}){let a=i.sub(n).sub(t),u=new be.default(new Ge.default(a.mul(e).toString()).sqrt().toFixed(0));if(r==="amm"){if(u.gt(new be.default(10).pow(new be.default(o))))return!0}else if(r==="cpmm"){if(u.gt(new be.default(100)))return!0}else throw Error("migrate type error");return!1}var Ue=class extends oe{static getPoolInitPriceByPool({poolInfo:e,decimalA:t,decimalB:n}){return new ce.default(0)}static getPoolInitPriceByInit({a:e,b:t,decimalA:n,decimalB:r}){return new ce.default(0)}static getPoolPrice({poolInfo:e,decimalA:t,decimalB:n}){return new ce.default(e.virtualA.mul(e.realA).toString()).div(Ie._Q64).mul(10**(t-n))}static getPoolEndPrice({supply:e,totalSell:t,totalLockedAmount:n,totalFundRaising:r,migrateFee:o,decimalA:a,decimalB:u}){return new ce.default(r.sub(o).toString()).div(e.sub(t).sub(n).toString()).mul(10**(a-u))}static getPoolEndPriceReal({poolInfo:e,decimalA:t,decimalB:n}){let r=e.totalSellA.sub(e.realA),o=e.totalFundRaisingB.sub(e.realB);return new ce.default(e.virtualB.add(e.realB).add(o).toString()).div(e.virtualA.sub(e.realA).add(r).toString()).mul(10**(t-n))}static getInitParam({supply:e,totalFundRaising:t,totalSell:n,totalLockedAmount:r,migrateFee:o}){let a=e.sub(r);if(a.lte(new G.default(0)))throw Error("supplyMinusLocked need gt 0");let u=t.mul(new G.default(3)).sub(o),y=t.mul(new G.default(2)).mul(a).div(u),P=y.mul(y),b=t.mul(new G.default(2)).mul($).div(P);if(!b.gt(new G.default(0)))throw Error("a need gt 0");if(!kt.gt(b))throw Error("a need lt u64 max");if(b.lt(new G.default(0))||y.lt(new G.default(0)))throw Error("invalid input 0");return{a:b,b:new G.default(0),c:y}}static buyExactIn({poolInfo:e,amount:t}){let n=e.realB.add(t),r=new G.default(2).mul(n).mul($).div(e.virtualA);return new G.default(new ce.default(r.toString()).sqrt().toFixed(0)).sub(e.realA)}static buyExactOut({poolInfo:e,amount:t}){let n=e.realA.add(t),r=n.mul(n);return de(e.virtualA.mul(r),new G.default(2).mul($)).sub(e.realB)}static sellExactIn({poolInfo:e,amount:t}){let n=e.realA.sub(t),r=n.mul(n),o=de(e.virtualA.mul(r),new G.default(2).mul($));return e.realB.sub(o)}static sellExactOut({poolInfo:e,amount:t}){let n=e.realB.sub(t),r=new G.default(2).mul(n).mul($).div(e.virtualA),o=new G.default(new ce.default(r.toString()).sqrt().toFixed(0));return e.realA.sub(o)}};var Se=class{static getPoolCurvePointByPoolInfo({curveType:e,pointCount:t,poolInfo:n}){return this.getPoolCurvePointByInit({curveType:e,pointCount:t,supply:n.supply,totalFundRaising:n.totalFundRaisingB,totalSell:n.totalSellA,totalLockedAmount:n.vestingSchedule.totalLockedAmount,migrateFee:n.migrateFee,decimalA:n.mintDecimalsA,decimalB:n.mintDecimalsB})}static getPoolCurvePointByInit({curveType:e,pointCount:t,supply:n,totalFundRaising:r,totalSell:o,totalLockedAmount:a,migrateFee:u,decimalA:g,decimalB:y}){if(t<3)throw Error("point count < 3");let P=this.getCurve(e),b=P.getInitParam({supply:n,totalFundRaising:r,totalSell:o,totalLockedAmount:a,migrateFee:u}),K=P.getPoolInitPriceByInit(v(L({},b),{decimalA:g,decimalB:y})),S=r.div(new Y.default(t-1)),T=new Y.default(0),k=[{price:K,totalSellSupply:0}],{a:A,b:E}=b,h=T,R=T;for(let N=1;N<t;N++){let x=N!==t-1?S:r.sub(R),M=this.buyExactIn({poolInfo:{virtualA:A,virtualB:E,realA:h,realB:R,totalFundRaisingB:r,totalSellA:o},amountB:x,protocolFeeRate:T,platformFeeRate:T,curveType:e,shareFeeRate:T,creatorFeeRate:T,transferFeeConfigA:void 0,slot:0});h=h.add(M.amountA.amount),R=R.add(M.amountB);let j=this.getPrice({poolInfo:{virtualA:A,virtualB:E,realA:h,realB:R},decimalA:g,decimalB:y,curveType:e});k.push({price:j,totalSellSupply:new Lt.default(h.toString()).div(10**g).toNumber()})}return k}static getPoolInitPriceByPool({poolInfo:e,decimalA:t,decimalB:n,curveType:r}){return this.getCurve(r).getPoolInitPriceByPool({poolInfo:e,decimalA:t,decimalB:n})}static getPoolInitPriceByInit({a:e,b:t,decimalA:n,decimalB:r,curveType:o}){return this.getCurve(o).getPoolInitPriceByInit({a:e,b:t,decimalA:n,decimalB:r})}static getPrice({poolInfo:e,curveType:t,decimalA:n,decimalB:r}){return this.getCurve(t).getPoolPrice({poolInfo:e,decimalA:n,decimalB:r})}static getEndPrice({poolInfo:e,curveType:t,decimalA:n,decimalB:r}){return this.getCurve(t).getPoolPrice({poolInfo:e,decimalA:n,decimalB:r})}static getPoolEndPriceReal({poolInfo:e,curveType:t,decimalA:n,decimalB:r}){return this.getCurve(t).getPoolEndPriceReal({poolInfo:e,decimalA:n,decimalB:r})}static checkParam({supply:e,totalFundRaising:t,totalSell:n,totalLockedAmount:r,decimals:o,config:a,migrateType:u}){if(Number(o)!==6)throw Error("decimals = 6");if(e.mul(a.maxLockRate).div(pe).lt(r))throw Error("total lock amount gte max lock amount");if(e.lt(a.minSupplyA.mul(new Y.default(10**o))))throw Error("supply lt min supply");let y=e.mul(a.minSellRateA).div(pe);if(n.lt(y))throw Error("invalid input");if(t.lt(a.minFundRaisingB))throw Error("total fund raising lt min fund raising");let P=e.sub(n).sub(r),b=e.mul(a.minMigrateRateA).div(pe);if(P.lt(b))throw Error("migrate lt min migrate amoount");let K=e.sub(n).sub(r),S=new Y.default(new Lt.default(K.mul(t).toString()).sqrt().toFixed(0));if(u==="amm"){let T=new Y.default(10).pow(new Y.default(o));if(S.lte(T))throw Error("check migrate lp error")}else if(u==="cpmm"){let T=new Y.default(100);if(S.lte(T))throw Error("check migrate lp error")}else throw Error("migrate type error")}static buyExactIn({poolInfo:e,amountB:t,protocolFeeRate:n,platformFeeRate:r,curveType:o,shareFeeRate:a,creatorFeeRate:u,transferFeeConfigA:g,slot:y}){let P=this.totalFeeRate({protocolFeeRate:n,platformFeeRate:r,shareFeeRate:a,creatorFeeRate:u}),b=this.calculateFee({amount:t,feeRate:P}),K=t.sub(b),S=this.getCurve(o),T=S.buyExactIn({poolInfo:e,amount:K}),k=e.totalSellA.sub(e.realA),A,E,h;if(T.gt(k)){A=k;let N=S.buyExactOut({poolInfo:e,amount:A});E=this.calculatePreFee({postFeeAmount:N,feeRate:P}),h=E.sub(N)}else A=T,E=t,h=b;let R=this.splitFee({totalFee:h,protocolFeeRate:n,platformFeeRate:r,shareFeeRate:a,creatorFeeRate:u});return{amountA:pt(A,g,y),amountB:E,splitFee:R}}static buyExactOut({poolInfo:e,amountA:t,protocolFeeRate:n,platformFeeRate:r,curveType:o,shareFeeRate:a,creatorFeeRate:u,transferFeeConfigA:g,slot:y}){let P=e.totalSellA.sub(e.realA),b=ft(t,g,y),K=b.fee?b.amount.add(b.fee):b.amount;t.gt(P)&&(K=P);let T=this.getCurve(o).buyExactOut({poolInfo:e,amount:K}),k=this.totalFeeRate({protocolFeeRate:n,platformFeeRate:r,shareFeeRate:a,creatorFeeRate:u}),A=this.calculatePreFee({postFeeAmount:T,feeRate:k}),E=A.sub(T),h=this.splitFee({totalFee:E,protocolFeeRate:n,platformFeeRate:r,shareFeeRate:a,creatorFeeRate:u});return{amountA:b,amountB:A,splitFee:h}}static sellExactIn({poolInfo:e,amountA:t,protocolFeeRate:n,platformFeeRate:r,curveType:o,shareFeeRate:a,creatorFeeRate:u,transferFeeConfigA:g,slot:y}){let P=this.getCurve(o),b=pt(t,g,y),K=b.fee?b.amount.sub(b.fee):b.amount,S=P.sellExactIn({poolInfo:e,amount:K}),T=this.calculateFee({amount:S,feeRate:this.totalFeeRate({protocolFeeRate:n,platformFeeRate:r,shareFeeRate:a,creatorFeeRate:u})}),k=this.splitFee({totalFee:T,protocolFeeRate:n,platformFeeRate:r,shareFeeRate:a,creatorFeeRate:u});return{amountA:b,amountB:S.sub(T),splitFee:k}}static sellExactOut({poolInfo:e,amountB:t,protocolFeeRate:n,platformFeeRate:r,curveType:o,shareFeeRate:a,creatorFeeRate:u,transferFeeConfigA:g,slot:y}){let P=this.totalFeeRate({protocolFeeRate:n,platformFeeRate:r,shareFeeRate:a,creatorFeeRate:u}),b=this.calculatePreFee({postFeeAmount:t,feeRate:P});if(e.realB.lt(b))throw Error("Insufficient liquidity");let K=b.sub(t),T=Se.getCurve(o).sellExactOut({poolInfo:e,amount:b});if(T.gt(e.realA))throw Error();let k=this.splitFee({totalFee:K,protocolFeeRate:n,platformFeeRate:r,shareFeeRate:a,creatorFeeRate:u});return{amountA:ft(T,g,y),amountB:t,splitFee:k}}static splitFee({totalFee:e,protocolFeeRate:t,platformFeeRate:n,shareFeeRate:r,creatorFeeRate:o}){let a=this.totalFeeRate({protocolFeeRate:t,platformFeeRate:n,shareFeeRate:r,creatorFeeRate:o}),u=a.isZero()?new Y.default(0):e.mul(n).div(a),g=a.isZero()?new Y.default(0):e.mul(r).div(a),y=a.isZero()?new Y.default(0):e.mul(o).div(a),P=e.sub(u).sub(g).sub(y);return{platformFee:u,shareFee:g,protocolFee:P,creatorFee:y}}static calculateFee({amount:e,feeRate:t}){return Zt(e,t,pe)}static calculatePreFee({postFeeAmount:e,feeRate:t}){if(t.isZero())return e;let n=e.mul(pe),r=pe.sub(t);return n.add(r).sub(new Y.default(1)).div(r)}static totalFeeRate({protocolFeeRate:e,platformFeeRate:t,shareFeeRate:n,creatorFeeRate:r}){if(e.add(t).add(n).add(r).gt(new Y.default(1e6)))throw Error("total fee rate gt 1_000_000");return e.add(t).add(n).add(r)}static getCurve(e){switch(e){case 0:return Ve;case 1:return qe;case 2:return Ue}throw Error("find curve error")}};var ye=require("@solana/spl-token"),W=w(require("bn.js")),Ft=require("@solana/web3.js");var Sr=w(require("decimal.js")),Kr={initPriceX64:new W.default("515752397214619"),supply:new W.default(1e15),totalSellA:new W.default(7931e11),totalFundRaisingB:new W.default(85e9),totalLockedAmount:new W.default("0"),cliffPeriod:new W.default("0"),unlockPeriod:new W.default("0"),decimals:6,virtualA:new W.default("1073471847374405"),virtualB:new W.default("30050573465"),realA:new W.default(0),realB:new W.default(0),protocolFee:new W.default(0),platformId:new Ft.PublicKey("4Bu96XjU84XjPDSpveTVf6LYGCkfW5FK7SNkREWcEfV4"),vestingSchedule:{totalLockedAmount:new W.default(0),cliffPeriod:new W.default(0),unlockPeriod:new W.default(0),startTime:new W.default(0),totalAllocatedShare:new W.default(0)}},Cd=new W.default(1e4);0&&(module.exports={AUTH_SEED,BondingCurveParam,CONFIG_SEED,CREATOR_FEE_VAULT_AUTH_SEED,CpmmCreatorFeeOn,Curve,CurveBase,FixedPriceCurve,LaunchConstantProductCurve,LaunchpadConfig,LaunchpadPool,LaunchpadPoolInitParam,LaunchpadVesting,LinearPriceCurve,MathLaunch,PLATFORM_FEE_VAULT_AUTH_SEED,PLATFORM_SEED,POOL_VESTING_SEED,PlatformConfig,PlatformCurveParam,VestingSchedule,anchorDataBuf,buyExactInInstruction,buyExactOutInstruction,checkPoolToAmm,claimCreatorFee,claimPlatformFee,claimPlatformFeeFromVault,claimVestedToken,createPlatformConfig,createVestingAccount,getPdaCpiEvent,getPdaCreatorFeeVaultAuth,getPdaCreatorVault,getPdaLaunchpadAuth,getPdaLaunchpadConfigId,getPdaLaunchpadPoolId,getPdaLaunchpadVaultId,getPdaPlatformFeeVaultAuth,getPdaPlatformId,getPdaPlatformVault,getPdaVestId,initialize,initializeV2,initializeWithToken2022,removePlatformCurveParamInstruction,sellExactInInstruction,sellExactOut,u8ToBytes,updatePlatformConfig,updatePlatformCurveParamInstruction});
//# sourceMappingURL=index.js.map