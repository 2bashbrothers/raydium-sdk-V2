var vt=Object.defineProperty,_t=Object.defineProperties;var qt=Object.getOwnPropertyDescriptors;var Ye=Object.getOwnPropertySymbols;var Gt=Object.prototype.hasOwnProperty,Ut=Object.prototype.propertyIsEnumerable;var Qe=(n,e,t)=>e in n?vt(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,O=(n,e)=>{for(var t in e||(e={}))Gt.call(e,t)&&Qe(n,t,e[t]);if(Ye)for(var t of Ye(e))Ut.call(e,t)&&Qe(n,t,e[t]);return n},F=(n,e)=>_t(n,qt(e));import{PublicKey as $t}from"@solana/web3.js";import tt,{isBN as nt}from"bn.js";import{bits as di,BitStructure as pi,blob as Xt,Blob as fi,cstr as bi,f32 as yi,f32be as gi,f64 as Pi,f64be as Ai,greedy as ki,Layout as Ht,ns64 as wi,ns64be as Ti,nu64 as xi,nu64be as hi,offset as Bi,s16 as Ii,s16be as Si,s24 as Ki,s24be as Ci,s32 as zt,s32be as Li,s40 as Ni,s40be as Ri,s48 as Mi,s48be as Oi,s8 as Fi,seq as jt,struct as Ei,Structure as Zt,u16 as Yt,u16be as Vi,u24 as Wi,u24be as Di,u32 as vi,u32be as _i,u40 as qi,u40be as Gi,u48 as Ui,u48be as Xi,u8 as Qt,UInt as Jt,union as Hi,Union as zi,unionLayoutDiscriminator as ji,utf8 as Zi}from"@solana/buffer-layout";var Be=Ht,Je=Zt;var Ie=Jt;var $e=Qt,U=Yt;var D=zt;var et=jt;var L=Xt;var j=class extends Be{constructor(t,i,c){super(t,c);this.blob=L(t),this.signed=i}decode(t,i=0){let c=new tt(this.blob.decode(t,i),10,"le");return this.signed?c.fromTwos(this.span*8).clone():c}encode(t,i,c=0){return typeof t=="number"&&(t=new tt(t)),this.signed&&(t=t.toTwos(this.span*8)),this.blob.encode(t.toArrayLike(Buffer,"le",this.span),i,c)}};function x(n){return new Ie(1,n)}function Z(n){return new Ie(4,n)}function r(n){return new j(8,!1,n)}function P(n){return new j(16,!1,n)}function it(n){return new j(8,!0,n)}function rt(n){return new j(16,!0,n)}var le=class extends Be{constructor(t,i,c,m){super(t.span,m);this.layout=t,this.decoder=i,this.encoder=c}decode(t,i){return this.decoder(this.layout.decode(t,i))}encode(t,i,c){return this.layout.encode(this.encoder(t),i,c)}getSpan(t,i){return this.layout.getSpan(t,i)}};function l(n){return new le(L(32),e=>new $t(e),e=>e.toBuffer(),n)}function X(n){return new le($e(),en,tn,n)}function en(n){if(n===0)return!1;if(n===1)return!0;throw new Error("Invalid bool: "+n)}function tn(n){return n?1:0}var Se=class extends Je{decode(e,t){return super.decode(e,t)}};function f(n,e,t){return new Se(n,e,t)}function b(n,e,t){let i,c=typeof e=="number"?e:nt(e)?e.toNumber():new Proxy(e,{get(m,u){if(!i){let d=Reflect.get(m,"count");i=nt(d)?d.toNumber():d,Reflect.set(m,"count",i)}return Reflect.get(m,u)},set(m,u,d){return u==="count"&&(i=d),Reflect.set(m,u,d)}});return et(n,c,t)}var lr=f([L(8),x("bump"),X("disableCreatePool"),U("index"),r("tradeFeeRate"),r("protocolFeeRate"),r("fundFeeRate"),r("createPoolFee"),l("protocolOwner"),l("fundOwner"),b(r(),16)]),mr=f([L(8),l("configId"),l("poolCreator"),l("vaultA"),l("vaultB"),l("mintLp"),l("mintA"),l("mintB"),l("mintProgramA"),l("mintProgramB"),l("observationId"),x("bump"),x("status"),x("lpDecimals"),x("mintDecimalA"),x("mintDecimalB"),r("lpAmount"),r("protocolFeesMintA"),r("protocolFeesMintB"),r("fundFeesMintA"),r("fundFeesMintB"),r("openTime"),b(r(),32)]);import{PublicKey as ce,TransactionInstruction as H,Keypair as oi,SystemProgram as si}from"@solana/web3.js";import{ASSOCIATED_TOKEN_PROGRAM_ID as Ft,TOKEN_2022_PROGRAM_ID as ze,TOKEN_PROGRAM_ID as G}from"@solana/spl-token";import{PublicKey as Ar}from"@solana/web3.js";import{get as ot,set as nn}from"lodash";var Ke=class{constructor(e){this.logLevel=e.logLevel!==void 0?e.logLevel:0,this.name=e.name}set level(e){this.logLevel=e}get time(){return Date.now().toString()}get moduleName(){return this.name}isLogLevel(e){return e<=this.logLevel}error(...e){return this.isLogLevel(0)?(console.error(this.time,this.name,"sdk logger error",...e),this):this}logWithError(...e){let t=e.map(i=>typeof i=="object"?JSON.stringify(i):i).join(", ");throw new Error(t)}warning(...e){return this.isLogLevel(1)?(console.warn(this.time,this.name,"sdk logger warning",...e),this):this}info(...e){return this.isLogLevel(2)?(console.info(this.time,this.name,"sdk logger info",...e),this):this}debug(...e){return this.isLogLevel(3)?(console.debug(this.time,this.name,"sdk logger debug",...e),this):this}},st={},rn={};function C(n){let e=ot(st,n);if(!e){let t=ot(rn,n);e=new Ke({name:n,logLevel:t}),nn(st,n,e)}return e}import{MINT_SIZE as xr,TOKEN_PROGRAM_ID as hr,getTransferFeeConfig as Br,unpackMint as Ir}from"@solana/spl-token";var Sr=C("Raydium_accountInfo_util");import V from"bn.js";import bs from"decimal.js";import dn from"big.js";import Xr from"bn.js";import on from"toformat";var sn=on,te=sn;import pe from"big.js";import cn from"bn.js";import un from"decimal.js-light";import ne from"bn.js";var ct=9007199254740991;function E(n){let e=C("Raydium_parseBigNumberish");if(n instanceof ne)return n;if(typeof n=="string"){if(n.match(/^-?[0-9]+$/))return new ne(n);e.logWithError(`invalid BigNumberish string: ${n}`)}return typeof n=="number"?(n%1&&e.logWithError(`BigNumberish number underflow: ${n}`),(n>=ct||n<=-ct)&&e.logWithError(`BigNumberish number overflow: ${n}`),new ne(String(n))):typeof n=="bigint"?new ne(n.toString()):(e.error(`invalid BigNumberish value: ${n}`),new ne(0))}var de=C("module/fraction"),Ce=te(pe),ie=te(un),ln={[0]:ie.ROUND_DOWN,[1]:ie.ROUND_HALF_UP,[2]:ie.ROUND_UP},mn={[0]:pe.roundDown,[1]:pe.roundHalfUp,[2]:pe.roundUp},y=class{constructor(e,t=new cn(1)){this.numerator=E(e),this.denominator=E(t)}get quotient(){return this.numerator.div(this.denominator)}invert(){return new y(this.denominator,this.numerator)}add(e){let t=e instanceof y?e:new y(E(e));return this.denominator.eq(t.denominator)?new y(this.numerator.add(t.numerator),this.denominator):new y(this.numerator.mul(t.denominator).add(t.numerator.mul(this.denominator)),this.denominator.mul(t.denominator))}sub(e){let t=e instanceof y?e:new y(E(e));return this.denominator.eq(t.denominator)?new y(this.numerator.sub(t.numerator),this.denominator):new y(this.numerator.mul(t.denominator).sub(t.numerator.mul(this.denominator)),this.denominator.mul(t.denominator))}mul(e){let t=e instanceof y?e:new y(E(e));return new y(this.numerator.mul(t.numerator),this.denominator.mul(t.denominator))}div(e){let t=e instanceof y?e:new y(E(e));return new y(this.numerator.mul(t.denominator),this.denominator.mul(t.numerator))}toSignificant(e,t={groupSeparator:""},i=1){Number.isInteger(e)||de.logWithError(`${e} is not an integer.`),e<=0&&de.logWithError(`${e} is not positive.`),ie.set({precision:e+1,rounding:ln[i]});let c=new ie(this.numerator.toString()).div(this.denominator.toString()).toSignificantDigits(e);return c.toFormat(c.decimalPlaces(),t)}toFixed(e,t={groupSeparator:""},i=1){return Number.isInteger(e)||de.logWithError(`${e} is not an integer.`),e<0&&de.logWithError(`${e} is negative.`),Ce.DP=e,Ce.RM=mn[i]||1,new Ce(this.numerator.toString()).div(this.denominator.toString()).toFormat(e,t)}isZero(){return this.numerator.isZero()}};var eo=C("Raydium_amount"),to=te(dn);import{PublicKey as fn}from"@solana/web3.js";import{TOKEN_PROGRAM_ID as ut}from"@solana/spl-token";var Le={chainId:101,address:fn.default.toBase58(),programId:ut.toBase58(),decimals:9,symbol:"SOL",name:"solana",logoURI:"https://img-v1.raydium.io/icon/So11111111111111111111111111111111111111112.png",tags:[],priority:2,type:"raydium",extensions:{coingeckoId:"solana"}},_={chainId:101,address:"So11111111111111111111111111111111111111112",programId:ut.toBase58(),decimals:9,symbol:"WSOL",name:"Wrapped SOL",logoURI:"https://img-v1.raydium.io/icon/So11111111111111111111111111111111111111112.png",tags:[],priority:2,type:"raydium",extensions:{coingeckoId:"solana"}};import{PublicKey as Re}from"@solana/web3.js";import{PublicKey as A,SystemProgram as lt,SYSVAR_RENT_PUBKEY as bn}from"@solana/web3.js";import{TOKEN_PROGRAM_ID as yn}from"@solana/spl-token";function Ne({pubkey:n,isSigner:e=!1,isWritable:t=!0}){return{pubkey:n,isWritable:t,isSigner:e}}var uo=[Ne({pubkey:yn,isWritable:!1}),Ne({pubkey:lt.programId,isWritable:!1}),Ne({pubkey:bn,isWritable:!1})];function mt({publicKey:n,transformSol:e}){let t=dt(n.toString());if(t instanceof A)return e&&t.equals(re)?me:t;if(e&&t.toString()===re.toBase58())return me;if(typeof t=="string"){if(t===A.default.toBase58())return A.default;try{return new A(t)}catch{throw new Error("invalid public key")}}throw new Error("invalid public key")}function dt(n){try{return new A(n)}catch{return n}}var gn=new A("MemoSq4gqABAXKb96qnH8TysNcWxMyWCqXgDLGmfcHr"),fe=new A("MemoSq4gqABAXKb96qnH8TysNcWxMyWCqXgDLGmfcHr"),be=new A("SysvarRent111111111111111111111111111111111"),lo=new A("SysvarC1ock11111111111111111111111111111111"),Y=new A("metaqbxxUerdq28cj1RbAWkYQm3ybzjb6a8bt518x1s"),mo=new A("Sysvar1nstructions1111111111111111111111111"),pt=lt.programId,po=new A("4k3Dyjzvzp8eMZWUXbBCjEvwSkkk59S5iCNLY3QrkX6R"),fo=new A("Ea5SjE2Y6yvCeW5dYTn7PYMuW5ikXkvbGdcmSnXeaLjS"),bo=new A("SRMuApVNdxXokk5GT7XD5cUUgXMBCoAz2LHeuAoKWRt"),yo=new A("EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v"),go=new A("Es9vMFrzaCERmJfrF4H2FYD4KCoNkY11McCe8BenwNYB"),Po=new A("mSoLzYCxHdYgdzU16g5QSh3i5K3z3KZK7ytfqcJm7So"),Ao=new A("7dHbWXmci3dT8UFYWYZweBLXgycu7Y3iL6trKn1Y7ARj"),ko=new A("USDH1SM1ojwWUga67PGrgFWUHibbjqMvuMaDkRJTgkX"),wo=new A("NRVwhjBQiUPYtfDT5zRBVJajzFQHaBUNtC7SNVvqRFa"),To=new A("ANAxByE6G2WjFp7A4NqtWYXb3mgruyzZYg3spfxe6Lbo"),xo=new A("7vfCXTUXx5WJV5JADk17DUJ4ksgau7utNKj4b963voxs"),me=new A("So11111111111111111111111111111111111111112"),re=A.default;var Me=class{constructor({mint:e,decimals:t,symbol:i,name:c,skipMint:m=!1,isToken2022:u=!1}){if(e===re.toBase58()||e instanceof Re&&re.equals(e)){this.decimals=_.decimals,this.symbol=_.symbol,this.name=_.name,this.mint=new Re(_.address),this.isToken2022=!1;return}this.decimals=t,this.symbol=i||e.toString().substring(0,6),this.name=c||e.toString().substring(0,6),this.mint=m?Re.default:mt({publicKey:e}),this.isToken2022=u}equals(e){return this===e?!0:this.mint.equals(e.mint)}},q=Me;q.WSOL=new Me(F(O({},_),{mint:_.address}));var Oe=class{constructor({decimals:e,symbol:t="UNKNOWN",name:i="UNKNOWN"}){this.decimals=e,this.symbol=t,this.name=i}equals(e){return this===e}},ye=Oe;ye.SOL=new Oe(Le);import Pn from"bn.js";var Fo=new y(new Pn(100));var _o=C("Raydium_price");import{PublicKey as rs}from"@solana/web3.js";import ss from"bn.js";var An=new V(0),Bs=new V(1),Is=new V(2),Ss=new V(3),Ks=new V(5),pn=new V(10),Cs=new V(100),Ls=new V(1e3),Ns=new V(1e4);function ft(n,e,t){return n.mul(e).add(t).sub(new V(1)).div(t)}function Ve(n,e,t){return n.mul(e).div(t)}import{PublicKey as wn}from"@solana/web3.js";import{TOKEN_PROGRAM_ID as Tn}from"@solana/spl-token";import{ComputeBudgetProgram as Ds,Keypair as qs,PublicKey as kn,Transaction as Us,TransactionMessage as Hs,VersionedTransaction as zs}from"@solana/web3.js";var Q={CreateAccount:"CreateAccount",InitAccount:"InitAccount",CreateATA:"CreateATA",CloseAccount:"CloseAccount",TransferAmount:"TransferAmount",InitMint:"InitMint",MintTo:"MintTo",InitMarket:"InitMarket",Util1216OwnerClaim:"Util1216OwnerClaim",SetComputeUnitPrice:"SetComputeUnitPrice",SetComputeUnitLimit:"SetComputeUnitLimit",ClmmCreatePool:"ClmmCreatePool",ClmmOpenPosition:"ClmmOpenPosition",ClmmIncreasePosition:"ClmmIncreasePosition",ClmmDecreasePosition:"ClmmDecreasePosition",ClmmClosePosition:"ClmmClosePosition",ClmmSwapBaseIn:"ClmmSwapBaseIn",ClmmSwapBaseOut:"ClmmSwapBaseOut",ClmmInitReward:"ClmmInitReward",ClmmSetReward:"ClmmSetReward",ClmmCollectReward:"ClmmCollectReward",ClmmLockPosition:"ClmmLockPosition",ClmmHarvestLockPosition:"ClmmHarvestLockPosition",AmmV4Swap:"AmmV4Swap",AmmV4AddLiquidity:"AmmV4AddLiquidity",AmmV4RemoveLiquidity:"AmmV4RemoveLiquidity",AmmV4SimulatePoolInfo:"AmmV4SimulatePoolInfo",AmmV4SwapBaseIn:"AmmV4SwapBaseIn",AmmV4SwapBaseOut:"AmmV4SwapBaseOut",AmmV4CreatePool:"AmmV4CreatePool",AmmV4InitPool:"AmmV4InitPool",AmmV5AddLiquidity:"AmmV5AddLiquidity",AmmV5RemoveLiquidity:"AmmV5RemoveLiquidity",AmmV5SimulatePoolInfo:"AmmV5SimulatePoolInfo",AmmV5SwapBaseIn:"AmmV5SwapBaseIn",AmmV5SwapBaseOut:"AmmV5SwapBaseOut",RouteSwap:"RouteSwap",RouteSwap1:"RouteSwap1",RouteSwap2:"RouteSwap2",FarmV3Deposit:"FarmV3Deposit",FarmV3Withdraw:"FarmV3Withdraw",FarmV3CreateLedger:"FarmV3CreateLedger",FarmV4Withdraw:"FarmV4Withdraw",FarmV5Deposit:"FarmV5Deposit",FarmV5Withdraw:"FarmV5Withdraw",FarmV5CreateLedger:"FarmV5CreateLedger",FarmV6Deposit:"FarmV6Deposit",FarmV6Withdraw:"FarmV6Withdraw",FarmV6Create:"FarmV6Create",FarmV6Restart:"FarmV6Restart",FarmV6CreatorAddReward:"FarmV6CreatorAddReward",FarmV6CreatorWithdraw:"FarmV6CreatorWithdraw",CpmmCreatePool:"CpmmCreatePool",CpmmAddLiquidity:"CpmmAddLiquidity",CpmmWithdrawLiquidity:"CpmmWithdrawLiquidity",CpmmSwapBaseIn:"CpmmSwapBaseIn",CpmmSwapBaseOut:"CpmmSwapBaseOut",CpmmLockLp:"CpmmLockLp",CpmmCollectLockFee:"CpmmCollectLockFee",TransferTip:"TransferTip"};import{TOKEN_PROGRAM_ID as Qs}from"@solana/spl-token";var Js=C("Raydium_txUtil");function R(n,e){let[t,i]=kn.findProgramAddressSync(n,e);return{publicKey:t,nonce:i}}function J(n,e,t){return R([n.toBuffer(),(t!=null?t:Tn).toBuffer(),e.toBuffer()],new wn("ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL"))}import{PublicKey as o}from"@solana/web3.js";var oa=new o("EhhTKczWMGQt46ynNeRX1WfeagwwJd7ufHvCDjRxjo5Q"),sa=new o("CBuCnLe26faBpcBP2fktp4rp8abpcAnTWft6ZrP5Q4T"),aa=new o("9KEPoZmtHUrBbhWN1v1KWLMkkvwY6WLtAVUCPRtRjP4z"),ca=new o("FarmqiPv5eAj3j1GMdMCMUGXqPUvmquZtMy86QH6rzhG"),ua=new o("CLaimxFqjHzgTJtAGHU47NPhg6qrc5sCnpC4tBLyABQS"),la=new o("srmqPvymJeFKQ4zGQed1GFppgkRHL9kaELCbyksJtPX"),ma=new o("9xQeWvG816bUx9EPjHmaT23yvVM2ZWbrrpZb9PusVFin"),da=new o("675kPX9MHTjS2zt1qfr1NYHuzeLXfQM9H24wFSUt1Mp8"),pa=new o("5quBtoiQqxF9Jv6KYKctB59NT3gtJD2Y65kdnB1Uev3h"),fa=new o("CDSr3ssLcRB6XYPJwAfFt18MZvEZp4LjHcvzBVZ45duo"),xn=new o("CAMMCzo5YL8w4VFF8KVHrK22GGUsp5VTaW7grrKgrWqK"),hn=new o("LockrWmn6K5twhz3y9w1dQERbmgSaRkfnTeTKbpofwE"),Bn=new o("kN1kEznaF5Xbd8LYuqtEFcxzWSBk5Fv6ygX6SqEGJVy"),ba=new o("CDSr3ssLcRB6XYPJwAfFt18MZvEZp4LjHcvzBVZ45duo"),ya=new o("routeUGWgWzqBWFcrCfv8tritsqukccJPu3q5GPP3xS"),ga=new o("7YttLkHDoNj9wyDur5pM1ejNaAvT9X4eqaYcHQqtj2G5"),Pa=new o("6FJon3QE27qgPVggARueB22hLvoh22VzJpXv4rBEoSLF"),Aa=new o("CC12se5To1CdEuw7fDS27B7Geo5jJyL7t5UK2B44NgiH"),ka=new o("9HzJyW1qZsEiSfMUf6L2jo3CcTKAyBmSyKdwQeYisHrC"),wa=new o("DropEU8AvevN3UrXWXTMuz3rqnMczQVNjq3kcSdW2SQi"),bt=new o("CPMMoo8L3F4NbTegBCKVNunggL7H1ZpdTHKxQB5qKP1C"),yt=new o("GpMZbSM2GgvTKHJirzeGfMFoaZ8UR2X7F4v8vHTvxFbL"),Ta=new o("DNXgeM9EiiaAbaWvwjHj9fQQLAX5ZsfHyvmYUNRAdNC8"),xa=new o("LockrWmn6K5twhz3y9w1dQERbmgSaRkfnTeTKbpofwE"),ha=new o("3f7GcQFG397GAaEnv51zR6tsTVihYRydnydDD1cXekxH"),Ba=new o("LanMV9sAd7wArD4vJFi2qDdfnVhFxYSUg6eADduJ3uj"),Ia=new o("WLHv2UAZm6z4KyaaELi5pjdbJh6RESMva1Rnn8pJVVh"),Sa=new o("DRay6fNdQ5J82H7xV6uq2aV3mNrUZ1J4PgSKsWgptcm6"),Ka=new o("5xqNaZXX5eUi4p5HU4oz9i5QnwRNT2y6oN7yyn4qENeq"),Ca=new o("4Bu96XjU84XjPDSpveTVf6LYGCkfW5FK7SNkREWcEfV4"),La=new o("6s1xP3hpbAfFoNtUNF8mfHsjr2Bd97JxFJRWLbL6aHuX");var Na={OPEN_BOOK_PROGRAM:new o("EoTcMgcDRTJVZDMZWBoU6rhYHZfkNTVEAfz3uUJRcYGj"),SERUM_PROGRAM_ID_V3:new o("Ray1111111111111111111111111111111111111111"),AMM_V4:new o("DRaya7Kj3aMWQSy19kSjvmuwq9docCHofyP9kanQGaav"),AMM_STABLE:new o("DRayDdXc1NZQ9C3hRWmoSf8zK4iapgMnjdNZWrfwsP8m"),CLMM_PROGRAM_ID:new o("DRayAUgENGQBKVaX8owNhgzkEDyoHTGVEGHVJT1E9pfH"),CLMM_LOCK_PROGRAM_ID:new o("DRay25Usp3YJAi7beckgpGUC7mGJ2cR1AVPxhYfwVCUX"),CLMM_LOCK_AUTH_ID:new o("6Aoh8h2Lw2m5UGxYR8AdAL87jTWYeKoxM52mJRzfYwN"),CREATE_CPMM_POOL_PROGRAM:new o("DRaycpLY18LhpbydsBWbVJtxpNv9oXPgjRSfpF2bWpYb"),CREATE_CPMM_POOL_AUTH:new o("CXniRufdq5xL8t8jZAPxsPZDpuudwuJSPWnbcD5Y5Nxq"),CREATE_CPMM_POOL_FEE_ACC:new o("3oE58BKVt8KuYkGxx8zBojugnymWmBiyafWgMrnb6eYy"),LOCK_CPMM_PROGRAM:new o("DRay25Usp3YJAi7beckgpGUC7mGJ2cR1AVPxhYfwVCUX"),LOCK_CPMM_AUTH:new o("7qWVV8UY2bRJfDLP4s37YzBPKUkVB46DStYJBpYbQzu3"),UTIL1216:o.default,Router:new o("DRaybByLpbUL57LJARs3j8BitTxVfzBg351EaMr5UTCd"),FARM_PROGRAM_ID_V3:new o("DRayWyrLmEW5KEeqs8kdTMMaBabapqagaBC7KWpGtJeZ"),FARM_PROGRAM_ID_V4:new o("Ray1111111111111111111111111111111111111111"),FARM_PROGRAM_ID_V5:new o("DRayiCGSZgku1GTK6rXD6mVDdingXy6APAH1R6R5L2LC"),FARM_PROGRAM_ID_V6:new o("DRayzbYakXs45ELHkzH6vC3fuhQqTAnv5A68gdFuvZyZ"),LAUNCHPAD_PROGRAM:new o("DRay6fNdQ5J82H7xV6uq2aV3mNrUZ1J4PgSKsWgptcm6"),LAUNCHPAD_AUTH:new o("5xqNaZXX5eUi4p5HU4oz9i5QnwRNT2y6oN7yyn4qENeq"),LAUNCHPAD_PLATFORM:new o("2Jx4KTDrVSdWNazuGpcA8n3ZLTRGGBDxAWhuKe2Xcj2a"),LAUNCHPAD_CONFIG:new o("7ZR4zD7PYfY2XxoG1Gxcy2EgEeGYrpxrwzPuwdUBssEt"),FEE_DESTINATION_ID:new o("9y8ENuuZ3b19quffx9hQvRVygG5ky6snHfRvGpuSfeJy"),MODEL_DATA_PUBKEY:new o("Ray1111111111111111111111111111111111111111")};import gt from"bn.js";function We(n,e){let{div:t,mod:i}=n.divmod(e);return i.gt(new gt(0))?t.add(new gt(1)):t}import{PublicKey as In,AddressLookupTableAccount as Pt}from"@solana/web3.js";var Sn={AcL1Vo8oy1ULiavEcjSUcwfBSForXMudcZvDZy5nzJkU:new Pt({key:new In("AcL1Vo8oy1ULiavEcjSUcwfBSForXMudcZvDZy5nzJkU"),state:Pt.deserialize(Buffer.from("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","base64"))})};import{PublicKey as Ya,sendAndConfirmTransaction as Qa,SystemProgram as ec,Transaction as tc,TransactionMessage as ic,VersionedTransaction as rc}from"@solana/web3.js";import sc from"axios";import Ln from"bn.js";var Pe=new Ln(1e6);var Nn=Buffer.from("vault_and_lp_mint_auth_seed","utf8"),Rn=Buffer.from("amm_config","utf8"),Mn=Buffer.from("pool","utf8"),On=Buffer.from("pool_lp_mint","utf8"),Fn=Buffer.from("pool_vault","utf8"),En=Buffer.from("observation","utf8");function Vn(n){return R([Nn],n)}function Oc(n,e){return R([Rn,vn(e)],n)}function De(n,e,t,i){return R([Mn,e.toBuffer(),t.toBuffer(),i.toBuffer()],n)}function Wn(n,e){return R([On,e.toBuffer()],n)}function kt(n,e,t){return R([Fn,e.toBuffer(),t.toBuffer()],n)}function Dn(n,e){return R([En,e.toBuffer()],n)}function vn(n){let e=new ArrayBuffer(2);return new DataView(e).setUint16(0,n,!1),new Uint8Array(e)}function Fc({poolId:n,programId:e,configId:t,mintA:i,mintB:c}){let m=Vn(e).publicKey,u=n||De(e,t,i,c).publicKey,d=Wn(e,u).publicKey,k=kt(e,u,i).publicKey,p=kt(e,u,c).publicKey,h=Dn(e,u).publicKey;return{poolId:u,configId:t,authority:m,lpMint:d,vaultA:k,vaultB:p,observationId:h}}var _n=Buffer.from("locked_liquidity","utf8");function wt(n,e){return R([_n,e.toBuffer()],n)}import{PublicKey as qm}from"@solana/web3.js";import Um from"bn.js";import Hm from"decimal.js";import{AccountLayout as Zm,createAssociatedTokenAccountIdempotentInstruction as Ym,TOKEN_2022_PROGRAM_ID as Qm,TOKEN_PROGRAM_ID as Jm}from"@solana/spl-token";import{PublicKey as Dc}from"@solana/web3.js";import{MintLayout as _c,TOKEN_PROGRAM_ID as Gc}from"@solana/spl-token";import{Keypair as mm,PublicKey as dm,SystemProgram as fm,TransactionInstruction as bm}from"@solana/web3.js";import gm from"bn.js";import{ASSOCIATED_TOKEN_PROGRAM_ID as km,TOKEN_2022_PROGRAM_ID as wm,TOKEN_PROGRAM_ID as Tm}from"@solana/spl-token";import Ul from"bn.js";import Hl from"decimal.js";import M from"bn.js";var ve=new M(0),Tt=new M(1),xt=new M(-1),Ae=new M(1).shln(64),ht=new M(1).shln(128),qn=Ae.sub(Tt);var Gn=ht.subn(1),$=-443636,oe=-$,_e=new M("4295048016"),qe=new M("79226673521066979257578248091"),iu=new M("4295048017"),ru=new M("79226673521066979257578248090");var Un=new M(10).pow(new M(6));var ou=new M("18446744073700000000");import Cl from"bn.js";import Nl from"decimal.js";var du=Buffer.from("amm_config","utf8"),pu=Buffer.from("pool","utf8"),fu=Buffer.from("pool_vault","utf8"),bu=Buffer.from("pool_reward_vault","utf8"),yu=Buffer.from("position","utf8"),gu=Buffer.from("tick_array","utf8"),Pu=Buffer.from("operation","utf8"),Au=Buffer.from("pool_tick_array_bitmap_extension","utf8"),ku=Buffer.from("observation","utf8");function Ge(n){return R([Buffer.from("metadata","utf8"),Y.toBuffer(),n.toBuffer()],Y)}var wu=Buffer.from("locked_position","utf8");var Tu=Buffer.from("support_mint","utf8");import{PublicKey as nl}from"@solana/web3.js";import{TOKEN_2022_PROGRAM_ID as rl}from"@solana/spl-token";import sl from"bn.js";import cl from"decimal.js";import Bu from"bn.js";import Su from"decimal.js";var He=14;var ke=60;var Zn=f([L(8),x("bump"),U("index"),l(""),Z("protocolFeeRate"),Z("tradeFeeRate"),U("tickSpacing"),b(r(),8,"")]),Yn=f([Z("blockTimestamp"),it("tickCumulative"),b(r(),4)]),Ot=f([L(8),X("initialized"),r("recentEpoch"),U("observationIndex"),l("poolId"),b(Yn,100,"observations"),b(r(),4)]),Qn=f([x("rewardState"),r("openTime"),r("endTime"),r("lastUpdateTime"),P("emissionsPerSecondX64"),r("rewardTotalEmissioned"),r("rewardClaimed"),l("tokenMint"),l("tokenVault"),l("creator"),P("rewardGrowthGlobalX64")]),Nt=f([L(8),x("bump"),l("ammConfig"),l("creator"),l("mintA"),l("mintB"),l("vaultA"),l("vaultB"),l("observationId"),x("mintDecimalsA"),x("mintDecimalsB"),U("tickSpacing"),P("liquidity"),P("sqrtPriceX64"),D("tickCurrent"),Z(),P("feeGrowthGlobalX64A"),P("feeGrowthGlobalX64B"),r("protocolFeesTokenA"),r("protocolFeesTokenB"),P("swapInAmountTokenA"),P("swapOutAmountTokenB"),P("swapInAmountTokenB"),P("swapOutAmountTokenA"),x("status"),b(x(),7,""),b(Qn,3,"rewardInfos"),b(r(),16,"tickArrayBitmap"),r("totalFeesTokenA"),r("totalFeesClaimedTokenA"),r("totalFeesTokenB"),r("totalFeesClaimedTokenB"),r("fundFeesTokenA"),r("fundFeesTokenB"),r("startTime"),b(r(),15*4-3,"padding")]),Jn=f([P("growthInsideLastX64"),r("rewardAmountOwed")]),Rt=f([L(8),x("bump"),l("nftMint"),l("poolId"),D("tickLower"),D("tickUpper"),P("liquidity"),P("feeGrowthInsideLastX64A"),P("feeGrowthInsideLastX64B"),r("tokenFeesOwedA"),r("tokenFeesOwedB"),b(Jn,3,"rewardInfos"),b(r(),8,"")]),tm=f([L(8),x("bump"),l("poolId"),D("tickLowerIndex"),D("tickUpperIndex"),P("liquidity"),P("feeGrowthInsideLastX64A"),P("feeGrowthInsideLastX64B"),r("tokenFeesOwedA"),r("tokenFeesOwedB"),b(P(),3,"rewardGrowthInside"),b(r(),8,"")]),$n=f([D("tick"),rt("liquidityNet"),P("liquidityGross"),P("feeGrowthOutsideX64A"),P("feeGrowthOutsideX64B"),b(P(),3,"rewardGrowthsOutsideX64"),b(Z(),13,"")]),Kt=f([L(8),l("poolId"),D("startTickIndex"),b($n,ke,"ticks"),x("initializedTickCount"),b(x(),115,"")]),ei=f([L(329),b(l(),100,"whitelistMints")]),jn=f([L(8),l("poolId"),b(b(r(),8),He,"positiveTickArrayBitmap"),b(b(r(),8),He,"negativeTickArrayBitmap")]),nm=f([r(),x("bump"),l("owner"),l("poolId"),l("positionId"),l("nftAccount"),b(r(),8)]),ti=f([L(8),x("bump"),l("lockOwner"),l("poolId"),l("positionId"),l("nftAccount"),l("lockNftMint"),r("recentEpoch"),b(r(),8)]);Ot.span;var Nm=C("Raydium_Clmm");var ai=C("Raydium_cpmm"),z={initialize:[175,175,109,31,13,152,155,237],deposit:[242,35,198,137,82,225,242,182],withdraw:[183,18,70,156,148,109,161,34],swapBaseInput:[143,190,90,218,196,30,51,222],swapBaseOutput:[55,217,98,86,163,74,180,173],lockCpLiquidity:[216,157,29,78,38,51,31,26],collectCpFee:[8,30,51,199,209,184,247,133]};function Gd(n,e,t,i,c,m,u,d,k,p,h,S,K,B,w,I,g,T,N,W){let v=f([r("amountMaxA"),r("amountMaxB"),r("openTime")]),Wt=De(n,t,m,u).publicKey,Dt=[{pubkey:e,isSigner:!0,isWritable:!1},{pubkey:t,isSigner:!1,isWritable:!1},{pubkey:i,isSigner:!1,isWritable:!1},{pubkey:c,isSigner:!c.equals(Wt),isWritable:!0},{pubkey:m,isSigner:!1,isWritable:!1},{pubkey:u,isSigner:!1,isWritable:!1},{pubkey:d,isSigner:!1,isWritable:!0},{pubkey:k,isSigner:!1,isWritable:!0},{pubkey:p,isSigner:!1,isWritable:!0},{pubkey:h,isSigner:!1,isWritable:!0},{pubkey:S,isSigner:!1,isWritable:!0},{pubkey:K,isSigner:!1,isWritable:!0},{pubkey:B,isSigner:!1,isWritable:!0},{pubkey:g,isSigner:!1,isWritable:!0},{pubkey:G,isSigner:!1,isWritable:!1},{pubkey:w,isSigner:!1,isWritable:!1},{pubkey:I,isSigner:!1,isWritable:!1},{pubkey:Ft,isSigner:!1,isWritable:!1},{pubkey:pt,isSigner:!1,isWritable:!1},{pubkey:be,isSigner:!1,isWritable:!1}],Ze=Buffer.alloc(v.span);return v.encode({amountMaxA:T,amountMaxB:N,openTime:W},Ze),new H({keys:Dt,programId:n,data:Buffer.from([...z.initialize,...Ze])})}function Ud(n,e,t,i,c,m,u,d,k,p,h,S,K,B,w){let I=f([r("lpAmount"),r("amountMaxA"),r("amountMaxB")]),g=[{pubkey:e,isSigner:!0,isWritable:!1},{pubkey:t,isSigner:!1,isWritable:!1},{pubkey:i,isSigner:!1,isWritable:!0},{pubkey:c,isSigner:!1,isWritable:!0},{pubkey:m,isSigner:!1,isWritable:!0},{pubkey:u,isSigner:!1,isWritable:!0},{pubkey:d,isSigner:!1,isWritable:!0},{pubkey:k,isSigner:!1,isWritable:!0},{pubkey:G,isSigner:!1,isWritable:!1},{pubkey:ze,isSigner:!1,isWritable:!1},{pubkey:p,isSigner:!1,isWritable:!1},{pubkey:h,isSigner:!1,isWritable:!1},{pubkey:S,isSigner:!1,isWritable:!0}],T=Buffer.alloc(I.span);return ai.debug("cpmm deposit data",{lpAmount:K.toString(),amountMaxA:B.toString(),amountMaxB:w.toString()}),I.encode({lpAmount:K,amountMaxA:B,amountMaxB:w},T),new H({keys:g,programId:n,data:Buffer.from([...z.deposit,...T])})}function Xd(n,e,t,i,c,m,u,d,k,p,h,S,K,B,w){let I=f([r("lpAmount"),r("amountMinA"),r("amountMinB")]),g=[{pubkey:e,isSigner:!0,isWritable:!1},{pubkey:t,isSigner:!1,isWritable:!1},{pubkey:i,isSigner:!1,isWritable:!0},{pubkey:c,isSigner:!1,isWritable:!0},{pubkey:m,isSigner:!1,isWritable:!0},{pubkey:u,isSigner:!1,isWritable:!0},{pubkey:d,isSigner:!1,isWritable:!0},{pubkey:k,isSigner:!1,isWritable:!0},{pubkey:G,isSigner:!1,isWritable:!1},{pubkey:ze,isSigner:!1,isWritable:!1},{pubkey:p,isSigner:!1,isWritable:!1},{pubkey:h,isSigner:!1,isWritable:!1},{pubkey:S,isSigner:!1,isWritable:!0},{pubkey:fe,isSigner:!1,isWritable:!1}],T=Buffer.alloc(I.span);return I.encode({lpAmount:K,amountMinA:B,amountMinB:w},T),new H({keys:g,programId:n,data:Buffer.from([...z.withdraw,...T])})}function Hd(n,e,t,i,c,m,u,d,k,p,h,S,K,B,w,I){let g=f([r("amountIn"),r("amounOutMin")]),T=[{pubkey:e,isSigner:!0,isWritable:!1},{pubkey:t,isSigner:!1,isWritable:!1},{pubkey:i,isSigner:!1,isWritable:!1},{pubkey:c,isSigner:!1,isWritable:!0},{pubkey:m,isSigner:!1,isWritable:!0},{pubkey:u,isSigner:!1,isWritable:!0},{pubkey:d,isSigner:!1,isWritable:!0},{pubkey:k,isSigner:!1,isWritable:!0},{pubkey:p,isSigner:!1,isWritable:!1},{pubkey:h,isSigner:!1,isWritable:!1},{pubkey:S,isSigner:!1,isWritable:!1},{pubkey:K,isSigner:!1,isWritable:!1},{pubkey:B,isSigner:!1,isWritable:!0}],N=Buffer.alloc(g.span);return g.encode({amountIn:w,amounOutMin:I},N),new H({keys:T,programId:n,data:Buffer.from([...z.swapBaseInput,...N])})}function zd(n,e,t,i,c,m,u,d,k,p,h,S,K,B,w,I){let g=f([r("amountInMax"),r("amountOut")]),T=[{pubkey:e,isSigner:!0,isWritable:!1},{pubkey:t,isSigner:!1,isWritable:!1},{pubkey:i,isSigner:!1,isWritable:!1},{pubkey:c,isSigner:!1,isWritable:!0},{pubkey:m,isSigner:!1,isWritable:!0},{pubkey:u,isSigner:!1,isWritable:!0},{pubkey:d,isSigner:!1,isWritable:!0},{pubkey:k,isSigner:!1,isWritable:!0},{pubkey:p,isSigner:!1,isWritable:!1},{pubkey:h,isSigner:!1,isWritable:!1},{pubkey:S,isSigner:!1,isWritable:!1},{pubkey:K,isSigner:!1,isWritable:!1},{pubkey:B,isSigner:!1,isWritable:!0}],N=Buffer.alloc(g.span);return g.encode({amountInMax:w,amountOut:I},N),new H({keys:T,programId:n,data:Buffer.from([...z.swapBaseOutput,...N])})}async function jd(n){var g;let{ownerInfo:e,poolInfo:t,poolKeys:i,feeNftOwner:c,getEphemeralSigners:m}=n,u=[],[d,k]=[new ce(t.id),new ce(t.lpMint.address)],p;if(m)p=new ce((await m(1))[0]);else{let T=oi.generate();u.push(T),p=T.publicKey}let{publicKey:h}=J(c,p,G),{publicKey:S}=Ge(p),{publicKey:K}=wt(n.lockProgram,p),{publicKey:B}=J(e.wallet,k,G),{publicKey:w}=J(n.lockAuthProgram,k,G),I=ci({programId:n.lockProgram,auth:n.lockAuthProgram,payer:e.feePayer,liquidityOwner:e.wallet,nftOwner:c,nftMint:p,nftAccount:h,poolId:d,lockPda:K,mintLp:k,userLpVault:B,lockLpVault:w,poolVaultA:new ce(i.vault.A),poolVaultB:new ce(i.vault.B),metadataAccount:S,lpAmount:n.lpAmount,withMetadata:(g=n.withMetadata)!=null?g:!0});return{address:{nftMint:p,nftAccount:h,metadataAccount:S,lockPda:K,userLpVault:B,lockLpVault:w},instructions:[I],signers:u,instructionTypes:[Q.CpmmLockLp],lookupTableAddress:[]}}function ci({programId:n,auth:e,payer:t,liquidityOwner:i,nftOwner:c,nftMint:m,nftAccount:u,poolId:d,lockPda:k,mintLp:p,userLpVault:h,lockLpVault:S,poolVaultA:K,poolVaultB:B,metadataAccount:w,lpAmount:I,withMetadata:g}){let T=[{pubkey:e,isSigner:!1,isWritable:!1},{pubkey:t,isSigner:!0,isWritable:!0},{pubkey:i,isSigner:!0,isWritable:!1},{pubkey:c,isSigner:!1,isWritable:!1},{pubkey:m,isSigner:!0,isWritable:!0},{pubkey:u,isSigner:!1,isWritable:!0},{pubkey:d,isSigner:!1,isWritable:!1},{pubkey:k,isSigner:!1,isWritable:!0},{pubkey:p,isSigner:!1,isWritable:!1},{pubkey:h,isSigner:!1,isWritable:!0},{pubkey:S,isSigner:!1,isWritable:!0},{pubkey:K,isSigner:!1,isWritable:!0},{pubkey:B,isSigner:!1,isWritable:!0},{pubkey:w,isSigner:!1,isWritable:!0},{pubkey:be,isSigner:!1,isWritable:!1},{pubkey:si.programId,isSigner:!1,isWritable:!1},{pubkey:G,isSigner:!1,isWritable:!1},{pubkey:Ft,isSigner:!1,isWritable:!1},{pubkey:Y,isSigner:!1,isWritable:!1}],N=f([r("lpAmount"),X("withMetadata")]),W=Buffer.alloc(N.span);N.encode({lpAmount:I,withMetadata:g},W);let v=Buffer.from([...z.lockCpLiquidity,...W]);return new H({keys:T,programId:n,data:v})}function Zd({programId:n,nftOwner:e,auth:t,nftAccount:i,lockPda:c,poolId:m,mintLp:u,userVaultA:d,userVaultB:k,poolVaultA:p,poolVaultB:h,mintA:S,mintB:K,lockLpVault:B,lpFeeAmount:w,cpmmProgram:I,cpmmAuthProgram:g}){let T=[{pubkey:t,isSigner:!1,isWritable:!1},{pubkey:e,isSigner:!0,isWritable:!1},{pubkey:i,isSigner:!1,isWritable:!0},{pubkey:c,isSigner:!1,isWritable:!0},{pubkey:I!=null?I:bt,isSigner:!1,isWritable:!1},{pubkey:g!=null?g:yt,isSigner:!1,isWritable:!1},{pubkey:m,isSigner:!1,isWritable:!0},{pubkey:u,isSigner:!1,isWritable:!0},{pubkey:d,isSigner:!1,isWritable:!0},{pubkey:k,isSigner:!1,isWritable:!0},{pubkey:p,isSigner:!1,isWritable:!0},{pubkey:h,isSigner:!1,isWritable:!0},{pubkey:S,isSigner:!1,isWritable:!1},{pubkey:K,isSigner:!1,isWritable:!1},{pubkey:B,isSigner:!1,isWritable:!0},{pubkey:G,isSigner:!1,isWritable:!1},{pubkey:ze,isSigner:!1,isWritable:!1},{pubkey:fe,isSigner:!1,isWritable:!1}],N=f([r("lpFeeAmount")]),W=Buffer.alloc(N.span);N.encode({lpFeeAmount:w},W);let v=Buffer.from([...z.collectCpFee,...W]);return new H({keys:T,programId:n,data:v})}import je from"bn.js";import he from"decimal.js-light";import ue from"bn.js";function we(n,e){if(e.isZero())throw Error("divisor is zero");return n.mod(e)}function ui(n,e){if(e.isZero())throw Error("rhs is zero");let t=n.div(e);if(t.isZero())throw Error("quotient is zero");let i=we(n,e);return i.gt(ee)&&(t=t.add(new ue(1)),e=n.div(t),i=we(n,t),i.gt(ee)&&(e=e.add(new ue(1)))),[t,e]}var ee=new ue(0),Te=class{static swapWithoutFees(e,t,i){let c=t.mul(i),m=t.add(e),[u]=ui(c,m),d=i.sub(u);if(d.isZero())throw Error("destinationAmountSwapped is zero");return{destinationAmountSwapped:d}}static lpTokensToTradingTokens(e,t,i,c,m){let u=e.mul(i).div(t),d=e.mul(c).div(t);if(m===0)return{tokenAmount0:u,tokenAmount1:d};if(m===1)return we(e.mul(i),t).gt(ee)&&u.gt(ee)&&(u=u.add(new ue(1))),we(e.mul(c),t).gt(ee)&&d.gt(ee)&&(d=d.add(new ue(1))),{tokenAmount0:u,tokenAmount1:d};throw Error("roundDirection value error")}};var xe=class{static tradingFee(e,t){return ft(e,t,Pe)}static protocolFee(e,t){return Ve(e,t,Pe)}static fundFee(e,t){return Ve(e,t,Pe)}};var Et=(t=>(t[t.Floor=0]="Floor",t[t.Ceiling=1]="Ceiling",t))(Et||{}),Vt=class{static validate_supply(e,t){if(e.isZero())throw Error("tokenAmount0 is zero");if(t.isZero())throw Error("tokenAmount1 is zero")}static swap(e,t,i,c){let m=xe.tradingFee(e,c),u=e.sub(m),{destinationAmountSwapped:d}=Te.swapWithoutFees(u,t,i);return{newSwapDestinationAmount:i.sub(d),sourceAmountSwapped:e,destinationAmountSwapped:d,tradeFee:m}}static swapBaseOut({poolMintA:e,poolMintB:t,tradeFeeRate:i,baseReserve:c,quoteReserve:m,outputMint:u,outputAmount:d}){let[k,p,h,S,K]=t.address===u.toString()?[c,m,e.decimals,t.decimals,e.address]:[m,c,t.decimals,e.decimals,t.address],B=new he(p.toString()).div(10**S).div(new he(k.toString()).div(10**h)),w=d.gte(p)?p.sub(new je(1)):d,I=p.sub(w),g=We(k.mul(w),I),T=We(g.mul(new je(1e6)),new je(1e6).sub(i)),N=T.sub(g),W=new he(w.toString()).div(10**S).div(new he(T.toString()).div(10**h)),v=B.isZero()?0:W.sub(B).div(B).abs().toNumber();return{amountRealOut:w,amountIn:T,amountInWithoutFee:g,tradeFee:N,priceImpact:v}}};export{Te as ConstantProductCurve,lr as CpmmConfigInfoLayout,xe as CpmmFee,mr as CpmmPoolInfoLayout,Vt as CurveCalculator,_n as LOCK_LIQUIDITY_SEED,Et as RoundDirection,Zd as collectCpFeeInstruction,ci as cpmmLockPositionInstruction,wt as getCpLockPda,Oc as getCpmmPdaAmmConfigId,De as getCpmmPdaPoolId,Fc as getCreatePoolKeys,Wn as getPdaLpMint,Dn as getPdaObservationId,Vn as getPdaPoolAuthority,kt as getPdaVault,jd as makeCpmmLockInstruction,Gd as makeCreateCpmmPoolInInstruction,Ud as makeDepositCpmmInInstruction,Hd as makeSwapCpmmBaseInInstruction,zd as makeSwapCpmmBaseOutInstruction,Xd as makeWithdrawCpmmInInstruction};
//# sourceMappingURL=index.mjs.map