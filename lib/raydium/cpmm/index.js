var dn=Object.create;var ce=Object.defineProperty,pn=Object.defineProperties,fn=Object.getOwnPropertyDescriptor,bn=Object.getOwnPropertyDescriptors,yn=Object.getOwnPropertyNames,mt=Object.getOwnPropertySymbols,gn=Object.getPrototypeOf,pt=Object.prototype.hasOwnProperty,Pn=Object.prototype.propertyIsEnumerable;var dt=(n,e,t)=>e in n?ce(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,V=(n,e)=>{for(var t in e||(e={}))pt.call(e,t)&&dt(n,t,e[t]);if(mt)for(var t of mt(e))Pn.call(e,t)&&dt(n,t,e[t]);return n},D=(n,e)=>pn(n,bn(e));var kn=(n,e)=>{for(var t in e)ce(n,t,{get:e[t],enumerable:!0})},ft=(n,e,t,i)=>{if(e&&typeof e=="object"||typeof e=="function")for(let o of yn(e))!pt.call(n,o)&&o!==t&&ce(n,o,{get:()=>e[o],enumerable:!(i=fn(e,o))||i.enumerable});return n};var P=(n,e,t)=>(t=n!=null?dn(gn(n)):{},ft(e||!n||!n.__esModule?ce(t,"default",{value:n,enumerable:!0}):t,n)),An=n=>ft(ce({},"__esModule",{value:!0}),n);var Hi={};kn(Hi,{ConstantProductCurve:()=>ae,CpmmConfigInfoLayout:()=>xn,CpmmFee:()=>F,CpmmPermission:()=>Bn,CpmmPoolInfoLayout:()=>hn,CurveCalculator:()=>ct,FeeOn:()=>wt,LOCK_LIQUIDITY_SEED:()=>Xt,RoundDirection:()=>at,TradeDirection:()=>cn,TradeDirectionOpposite:()=>ln,collectCpFeeInstruction:()=>Gi,cpmmLockPositionInstruction:()=>an,getCpLockPda:()=>Qe,getCpmmPdaAmmConfigId:()=>ei,getCpmmPdaPoolId:()=>Le,getCreatePoolKeys:()=>ni,getPdaLpMint:()=>Gt,getPdaObservationId:()=>Ut,getPdaPermissionId:()=>ii,getPdaPoolAuthority:()=>qt,getPdaVault:()=>Ze,initializeWithPermission:()=>Xi,makeCollectCreatorFeeInstruction:()=>Ui,makeCpmmLockInstruction:()=>qi,makeCreateCpmmPoolInInstruction:()=>Wi,makeDepositCpmmInInstruction:()=>Vi,makeSwapCpmmBaseInInstruction:()=>Di,makeSwapCpmmBaseOutInstruction:()=>vi,makeWithdrawCpmmInInstruction:()=>_i});module.exports=An(Hi);var Pt=require("@solana/web3.js"),J=P(require("bn.js"));var u=require("@solana/buffer-layout"),We=u.Layout,bt=u.Structure;var Ve=u.UInt;var yt=u.u8,j=u.u16;var G=u.s32;var gt=u.seq;var N=u.blob;var $=class extends We{constructor(t,i,o){super(t,o);this.blob=N(t),this.signed=i}decode(t,i=0){let o=new J.default(this.blob.decode(t,i),10,"le");return this.signed?o.fromTwos(this.span*8).clone():o}encode(t,i,o=0){return typeof t=="number"&&(t=new J.default(t)),this.signed&&(t=t.toTwos(this.span*8)),this.blob.encode(t.toArrayLike(Buffer,"le",this.span),i,o)}};function I(n){return new Ve(1,n)}function ee(n){return new Ve(4,n)}function r(n){return new $(8,!1,n)}function K(n){return new $(16,!1,n)}function kt(n){return new $(8,!0,n)}function At(n){return new $(16,!0,n)}var Ae=class extends We{constructor(t,i,o,c){super(t.span,c);this.layout=t,this.decoder=i,this.encoder=o}decode(t,i){return this.decoder(this.layout.decode(t,i))}encode(t,i,o){return this.layout.encode(this.encoder(t),i,o)}getSpan(t,i){return this.layout.getSpan(t,i)}};function m(n){return new Ae(N(32),e=>new Pt.PublicKey(e),e=>e.toBuffer(),n)}function z(n){return new Ae(yt(),wn,Tn,n)}function wn(n){if(n===0)return!1;if(n===1)return!0;throw new Error("Invalid bool: "+n)}function Tn(n){return n?1:0}var _e=class extends bt{decode(e,t){return super.decode(e,t)}};function w(n,e,t){return new _e(n,e,t)}function T(n,e,t){let i,o=typeof e=="number"?e:(0,J.isBN)(e)?e.toNumber():new Proxy(e,{get(c,l){if(!i){let p=Reflect.get(c,"count");i=(0,J.isBN)(p)?p.toNumber():p,Reflect.set(c,"count",i)}return Reflect.get(c,l)},set(c,l,p){return l==="count"&&(i=p),Reflect.set(c,l,p)}});return gt(n,o,t)}var xn=w([N(8),I("bump"),z("disableCreatePool"),j("index"),r("tradeFeeRate"),r("protocolFeeRate"),r("fundFeeRate"),r("createPoolFee"),m("protocolOwner"),m("fundOwner"),r("creatorFeeRate"),T(r(),15)]),hn=w([N(8),m("configId"),m("poolCreator"),m("vaultA"),m("vaultB"),m("mintLp"),m("mintA"),m("mintB"),m("mintProgramA"),m("mintProgramB"),m("observationId"),I("bump"),I("status"),I("lpDecimals"),I("mintDecimalA"),I("mintDecimalB"),r("lpAmount"),r("protocolFeesMintA"),r("protocolFeesMintB"),r("fundFeesMintA"),r("fundFeesMintB"),r("openTime"),r("epoch"),I("feeOn"),z("enableCreatorFee"),T(I(),6),r("creatorFeesMintA"),r("creatorFeesMintB"),T(r(),28)]),Bn=w([N(8),m("configId"),T(r(),30)]);var wt=(i=>(i[i.BothToken=0]="BothToken",i[i.OnlyTokenA=1]="OnlyTokenA",i[i.OnlyTokenB=2]="OnlyTokenB",i))(wt||{});var L=require("@solana/web3.js"),R=require("@solana/spl-token");var Sn=require("@solana/web3.js");var le=require("lodash");var De=class{constructor(e){this.logLevel=e.logLevel!==void 0?e.logLevel:0,this.name=e.name}set level(e){this.logLevel=e}get time(){return Date.now().toString()}get moduleName(){return this.name}isLogLevel(e){return e<=this.logLevel}error(...e){return this.isLogLevel(0)?(console.error(this.time,this.name,"sdk logger error",...e),this):this}logWithError(...e){let t=e.map(i=>typeof i=="object"?JSON.stringify(i):i).join(", ");throw new Error(t)}warning(...e){return this.isLogLevel(1)?(console.warn(this.time,this.name,"sdk logger warning",...e),this):this}info(...e){return this.isLogLevel(2)?(console.info(this.time,this.name,"sdk logger info",...e),this):this}debug(...e){return this.isLogLevel(3)?(console.debug(this.time,this.name,"sdk logger debug",...e),this):this}},Tt={},In={};function M(n){let e=(0,le.get)(Tt,n);if(!e){let t=(0,le.get)(In,n);e=new De({name:n,logLevel:t}),(0,le.set)(Tt,n,e)}return e}var we=require("@solana/spl-token"),fr=M("Raydium_accountInfo_util");var _=P(require("bn.js")),En=P(require("decimal.js"));var Kt=P(require("big.js")),Nn=P(require("bn.js"));var ht=P(require("toformat")),Kn=ht.default,me=Kn;var de=P(require("big.js")),It=P(require("bn.js")),St=P(require("decimal.js-light"));var te=P(require("bn.js"));var Bt=9007199254740991;function v(n){let e=M("Raydium_parseBigNumberish");if(n instanceof te.default)return n;if(typeof n=="string"){if(n.match(/^-?[0-9]+$/))return new te.default(n);e.logWithError(`invalid BigNumberish string: ${n}`)}return typeof n=="number"?(n%1&&e.logWithError(`BigNumberish number underflow: ${n}`),(n>=Bt||n<=-Bt)&&e.logWithError(`BigNumberish number overflow: ${n}`),new te.default(String(n))):typeof n=="bigint"?new te.default(n.toString()):(e.error(`invalid BigNumberish value: ${n}`),new te.default(0))}var xe=M("module/fraction"),ve=me(de.default),pe=me(St.default),Ln={[0]:pe.ROUND_DOWN,[1]:pe.ROUND_HALF_UP,[2]:pe.ROUND_UP},Rn={[0]:de.default.roundDown,[1]:de.default.roundHalfUp,[2]:de.default.roundUp},S=class{constructor(e,t=new It.default(1)){this.numerator=v(e),this.denominator=v(t)}get quotient(){return this.numerator.div(this.denominator)}invert(){return new S(this.denominator,this.numerator)}add(e){let t=e instanceof S?e:new S(v(e));return this.denominator.eq(t.denominator)?new S(this.numerator.add(t.numerator),this.denominator):new S(this.numerator.mul(t.denominator).add(t.numerator.mul(this.denominator)),this.denominator.mul(t.denominator))}sub(e){let t=e instanceof S?e:new S(v(e));return this.denominator.eq(t.denominator)?new S(this.numerator.sub(t.numerator),this.denominator):new S(this.numerator.mul(t.denominator).sub(t.numerator.mul(this.denominator)),this.denominator.mul(t.denominator))}mul(e){let t=e instanceof S?e:new S(v(e));return new S(this.numerator.mul(t.numerator),this.denominator.mul(t.denominator))}div(e){let t=e instanceof S?e:new S(v(e));return new S(this.numerator.mul(t.denominator),this.denominator.mul(t.numerator))}toSignificant(e,t={groupSeparator:""},i=1){Number.isInteger(e)||xe.logWithError(`${e} is not an integer.`),e<=0&&xe.logWithError(`${e} is not positive.`),pe.set({precision:e+1,rounding:Ln[i]});let o=new pe(this.numerator.toString()).div(this.denominator.toString()).toSignificantDigits(e);return o.toFormat(o.decimalPlaces(),t)}toFixed(e,t={groupSeparator:""},i=1){return Number.isInteger(e)||xe.logWithError(`${e} is not an integer.`),e<0&&xe.logWithError(`${e} is negative.`),ve.DP=e,ve.RM=Rn[i]||1,new ve(this.numerator.toString()).div(this.denominator.toString()).toFormat(e,t)}isZero(){return this.numerator.isZero()}};var Mr=M("Raydium_amount"),Or=me(Kt.default);var Ct=require("@solana/web3.js"),qe=require("@solana/spl-token"),Ge={chainId:101,address:Ct.PublicKey.default.toBase58(),programId:qe.TOKEN_PROGRAM_ID.toBase58(),decimals:9,symbol:"SOL",name:"solana",logoURI:"https://img-v1.raydium.io/icon/So11111111111111111111111111111111111111112.png",tags:[],priority:2,type:"raydium",extensions:{coingeckoId:"solana"}},H={chainId:101,address:"So11111111111111111111111111111111111111112",programId:qe.TOKEN_PROGRAM_ID.toBase58(),decimals:9,symbol:"WSOL",name:"Wrapped SOL",logoURI:"https://img-v1.raydium.io/icon/So11111111111111111111111111111111111111112.png",tags:[],priority:2,type:"raydium",extensions:{coingeckoId:"solana"}};var Ie=require("@solana/web3.js");var k=require("@solana/web3.js"),Lt=require("@solana/spl-token");function Ue({pubkey:n,isSigner:e=!1,isWritable:t=!0}){return{pubkey:n,isWritable:t,isSigner:e}}var Vr=[Ue({pubkey:Lt.TOKEN_PROGRAM_ID,isWritable:!1}),Ue({pubkey:k.SystemProgram.programId,isWritable:!1}),Ue({pubkey:k.SYSVAR_RENT_PUBKEY,isWritable:!1})];function Rt({publicKey:n,transformSol:e}){let t=Nt(n.toString());if(t instanceof k.PublicKey)return e&&t.equals(fe)?Te:t;if(e&&t.toString()===fe.toBase58())return Te;if(typeof t=="string"){if(t===k.PublicKey.default.toBase58())return k.PublicKey.default;try{return new k.PublicKey(t)}catch{throw new Error("invalid public key")}}throw new Error("invalid public key")}function Nt(n){try{return new k.PublicKey(n)}catch{return n}}var On=new k.PublicKey("MemoSq4gqABAXKb96qnH8TysNcWxMyWCqXgDLGmfcHr"),he=new k.PublicKey("MemoSq4gqABAXKb96qnH8TysNcWxMyWCqXgDLGmfcHr"),Be=new k.PublicKey("SysvarRent111111111111111111111111111111111"),_r=new k.PublicKey("SysvarC1ock11111111111111111111111111111111"),ne=new k.PublicKey("metaqbxxUerdq28cj1RbAWkYQm3ybzjb6a8bt518x1s"),Dr=new k.PublicKey("Sysvar1nstructions1111111111111111111111111"),Mt=k.SystemProgram.programId,vr=new k.PublicKey("4k3Dyjzvzp8eMZWUXbBCjEvwSkkk59S5iCNLY3QrkX6R"),qr=new k.PublicKey("Ea5SjE2Y6yvCeW5dYTn7PYMuW5ikXkvbGdcmSnXeaLjS"),Gr=new k.PublicKey("SRMuApVNdxXokk5GT7XD5cUUgXMBCoAz2LHeuAoKWRt"),Ur=new k.PublicKey("EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v"),Xr=new k.PublicKey("Es9vMFrzaCERmJfrF4H2FYD4KCoNkY11McCe8BenwNYB"),zr=new k.PublicKey("mSoLzYCxHdYgdzU16g5QSh3i5K3z3KZK7ytfqcJm7So"),Hr=new k.PublicKey("7dHbWXmci3dT8UFYWYZweBLXgycu7Y3iL6trKn1Y7ARj"),Yr=new k.PublicKey("USDH1SM1ojwWUga67PGrgFWUHibbjqMvuMaDkRJTgkX"),jr=new k.PublicKey("NRVwhjBQiUPYtfDT5zRBVJajzFQHaBUNtC7SNVvqRFa"),Zr=new k.PublicKey("ANAxByE6G2WjFp7A4NqtWYXb3mgruyzZYg3spfxe6Lbo"),Qr=new k.PublicKey("7vfCXTUXx5WJV5JADk17DUJ4ksgau7utNKj4b963voxs"),Te=new k.PublicKey("So11111111111111111111111111111111111111112"),fe=k.PublicKey.default;var Xe=class{constructor({mint:e,decimals:t,symbol:i,name:o,skipMint:c=!1,isToken2022:l=!1}){if(e===fe.toBase58()||e instanceof Ie.PublicKey&&fe.equals(e)){this.decimals=H.decimals,this.symbol=H.symbol,this.name=H.name,this.mint=new Ie.PublicKey(H.address),this.isToken2022=!1;return}this.decimals=t,this.symbol=i||e.toString().substring(0,6),this.name=o||e.toString().substring(0,6),this.mint=c?Ie.PublicKey.default:Rt({publicKey:e}),this.isToken2022=l}equals(e){return this===e?!0:this.mint.equals(e.mint)}},Y=Xe;Y.WSOL=new Xe(D(V({},H),{mint:H.address}));var ze=class{constructor({decimals:e,symbol:t="UNKNOWN",name:i="UNKNOWN"}){this.decimals=e,this.symbol=t,this.name=i}equals(e){return this===e}},Se=ze;Se.SOL=new ze(Ge);var Ot=P(require("bn.js"));var ao=new S(new Ot.default(100));var fo=M("Raydium_price");var Fn=new _.default(0),Do=new _.default(1),vo=new _.default(2),qo=new _.default(3),Go=new _.default(5),Mn=new _.default(10),Uo=new _.default(100),Xo=new _.default(1e3),zo=new _.default(1e4);function je(n,e,t){return n.mul(e).add(t).sub(new _.default(1)).div(t)}function Ce(n,e,t){return n.mul(e).div(t)}var Ft=require("@solana/web3.js"),Et=require("@solana/spl-token");var Z=require("@solana/web3.js");var ie={CreateAccount:"CreateAccount",InitAccount:"InitAccount",CreateATA:"CreateATA",CloseAccount:"CloseAccount",TransferAmount:"TransferAmount",InitMint:"InitMint",MintTo:"MintTo",InitMarket:"InitMarket",Util1216OwnerClaim:"Util1216OwnerClaim",SetComputeUnitPrice:"SetComputeUnitPrice",SetComputeUnitLimit:"SetComputeUnitLimit",ClmmCreatePool:"ClmmCreatePool",ClmmOpenPosition:"ClmmOpenPosition",ClmmIncreasePosition:"ClmmIncreasePosition",ClmmDecreasePosition:"ClmmDecreasePosition",ClmmClosePosition:"ClmmClosePosition",ClmmSwapBaseIn:"ClmmSwapBaseIn",ClmmSwapBaseOut:"ClmmSwapBaseOut",ClmmInitReward:"ClmmInitReward",ClmmSetReward:"ClmmSetReward",ClmmCollectReward:"ClmmCollectReward",ClmmLockPosition:"ClmmLockPosition",ClmmHarvestLockPosition:"ClmmHarvestLockPosition",AmmV4Swap:"AmmV4Swap",AmmV4AddLiquidity:"AmmV4AddLiquidity",AmmV4RemoveLiquidity:"AmmV4RemoveLiquidity",AmmV4SimulatePoolInfo:"AmmV4SimulatePoolInfo",AmmV4SwapBaseIn:"AmmV4SwapBaseIn",AmmV4SwapBaseOut:"AmmV4SwapBaseOut",AmmV4CreatePool:"AmmV4CreatePool",AmmV4InitPool:"AmmV4InitPool",AmmV5AddLiquidity:"AmmV5AddLiquidity",AmmV5RemoveLiquidity:"AmmV5RemoveLiquidity",AmmV5SimulatePoolInfo:"AmmV5SimulatePoolInfo",AmmV5SwapBaseIn:"AmmV5SwapBaseIn",AmmV5SwapBaseOut:"AmmV5SwapBaseOut",RouteSwap:"RouteSwap",RouteSwap1:"RouteSwap1",RouteSwap2:"RouteSwap2",FarmV3Deposit:"FarmV3Deposit",FarmV3Withdraw:"FarmV3Withdraw",FarmV3CreateLedger:"FarmV3CreateLedger",FarmV4Withdraw:"FarmV4Withdraw",FarmV5Deposit:"FarmV5Deposit",FarmV5Withdraw:"FarmV5Withdraw",FarmV5CreateLedger:"FarmV5CreateLedger",FarmV6Deposit:"FarmV6Deposit",FarmV6Withdraw:"FarmV6Withdraw",FarmV6Create:"FarmV6Create",FarmV6Restart:"FarmV6Restart",FarmV6CreatorAddReward:"FarmV6CreatorAddReward",FarmV6CreatorWithdraw:"FarmV6CreatorWithdraw",CpmmCreatePool:"CpmmCreatePool",CpmmAddLiquidity:"CpmmAddLiquidity",CpmmWithdrawLiquidity:"CpmmWithdrawLiquidity",CpmmSwapBaseIn:"CpmmSwapBaseIn",CpmmSwapBaseOut:"CpmmSwapBaseOut",CpmmLockLp:"CpmmLockLp",CpmmCollectLockFee:"CpmmCollectLockFee",TransferTip:"TransferTip"};var Wn=require("@solana/spl-token"),os=M("Raydium_txUtil");function E(n,e){let[t,i]=Z.PublicKey.findProgramAddressSync(n,e);return{publicKey:t,nonce:i}}function re(n,e,t){return E([n.toBuffer(),(t!=null?t:Et.TOKEN_PROGRAM_ID).toBuffer(),e.toBuffer()],new Ft.PublicKey("ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL"))}var s=require("@solana/web3.js"),cs=new s.PublicKey("EhhTKczWMGQt46ynNeRX1WfeagwwJd7ufHvCDjRxjo5Q"),ls=new s.PublicKey("CBuCnLe26faBpcBP2fktp4rp8abpcAnTWft6ZrP5Q4T"),ms=new s.PublicKey("9KEPoZmtHUrBbhWN1v1KWLMkkvwY6WLtAVUCPRtRjP4z"),ds=new s.PublicKey("FarmqiPv5eAj3j1GMdMCMUGXqPUvmquZtMy86QH6rzhG"),ps=new s.PublicKey("CLaimxFqjHzgTJtAGHU47NPhg6qrc5sCnpC4tBLyABQS"),fs=new s.PublicKey("srmqPvymJeFKQ4zGQed1GFppgkRHL9kaELCbyksJtPX"),bs=new s.PublicKey("9xQeWvG816bUx9EPjHmaT23yvVM2ZWbrrpZb9PusVFin"),ys=new s.PublicKey("675kPX9MHTjS2zt1qfr1NYHuzeLXfQM9H24wFSUt1Mp8"),gs=new s.PublicKey("5quBtoiQqxF9Jv6KYKctB59NT3gtJD2Y65kdnB1Uev3h"),Ps=new s.PublicKey("CDSr3ssLcRB6XYPJwAfFt18MZvEZp4LjHcvzBVZ45duo"),Vn=new s.PublicKey("CAMMCzo5YL8w4VFF8KVHrK22GGUsp5VTaW7grrKgrWqK"),_n=new s.PublicKey("LockrWmn6K5twhz3y9w1dQERbmgSaRkfnTeTKbpofwE"),Dn=new s.PublicKey("kN1kEznaF5Xbd8LYuqtEFcxzWSBk5Fv6ygX6SqEGJVy"),ks=new s.PublicKey("CDSr3ssLcRB6XYPJwAfFt18MZvEZp4LjHcvzBVZ45duo"),As=new s.PublicKey("routeUGWgWzqBWFcrCfv8tritsqukccJPu3q5GPP3xS"),ws=new s.PublicKey("7YttLkHDoNj9wyDur5pM1ejNaAvT9X4eqaYcHQqtj2G5"),Ts=new s.PublicKey("6FJon3QE27qgPVggARueB22hLvoh22VzJpXv4rBEoSLF"),xs=new s.PublicKey("CC12se5To1CdEuw7fDS27B7Geo5jJyL7t5UK2B44NgiH"),hs=new s.PublicKey("9HzJyW1qZsEiSfMUf6L2jo3CcTKAyBmSyKdwQeYisHrC"),Bs=new s.PublicKey("DropEU8AvevN3UrXWXTMuz3rqnMczQVNjq3kcSdW2SQi"),Wt=new s.PublicKey("CPMMoo8L3F4NbTegBCKVNunggL7H1ZpdTHKxQB5qKP1C"),Vt=new s.PublicKey("GpMZbSM2GgvTKHJirzeGfMFoaZ8UR2X7F4v8vHTvxFbL"),Is=new s.PublicKey("DNXgeM9EiiaAbaWvwjHj9fQQLAX5ZsfHyvmYUNRAdNC8"),Ss=new s.PublicKey("LockrWmn6K5twhz3y9w1dQERbmgSaRkfnTeTKbpofwE"),Ks=new s.PublicKey("3f7GcQFG397GAaEnv51zR6tsTVihYRydnydDD1cXekxH"),Cs=new s.PublicKey("LanMV9sAd7wArD4vJFi2qDdfnVhFxYSUg6eADduJ3uj"),Ls=new s.PublicKey("WLHv2UAZm6z4KyaaELi5pjdbJh6RESMva1Rnn8pJVVh"),Rs=new s.PublicKey("DRay6fNdQ5J82H7xV6uq2aV3mNrUZ1J4PgSKsWgptcm6"),Ns=new s.PublicKey("5xqNaZXX5eUi4p5HU4oz9i5QnwRNT2y6oN7yyn4qENeq"),Ms=new s.PublicKey("4Bu96XjU84XjPDSpveTVf6LYGCkfW5FK7SNkREWcEfV4"),Os=new s.PublicKey("6s1xP3hpbAfFoNtUNF8mfHsjr2Bd97JxFJRWLbL6aHuX");var Fs={OPEN_BOOK_PROGRAM:new s.PublicKey("EoTcMgcDRTJVZDMZWBoU6rhYHZfkNTVEAfz3uUJRcYGj"),SERUM_PROGRAM_ID_V3:new s.PublicKey("Ray1111111111111111111111111111111111111111"),AMM_V4:new s.PublicKey("DRaya7Kj3aMWQSy19kSjvmuwq9docCHofyP9kanQGaav"),AMM_STABLE:new s.PublicKey("DRayDdXc1NZQ9C3hRWmoSf8zK4iapgMnjdNZWrfwsP8m"),CLMM_PROGRAM_ID:new s.PublicKey("DRayAUgENGQBKVaX8owNhgzkEDyoHTGVEGHVJT1E9pfH"),CLMM_LOCK_PROGRAM_ID:new s.PublicKey("DRay25Usp3YJAi7beckgpGUC7mGJ2cR1AVPxhYfwVCUX"),CLMM_LOCK_AUTH_ID:new s.PublicKey("6Aoh8h2Lw2m5UGxYR8AdAL87jTWYeKoxM52mJRzfYwN"),CREATE_CPMM_POOL_PROGRAM:new s.PublicKey("DRaycpLY18LhpbydsBWbVJtxpNv9oXPgjRSfpF2bWpYb"),CREATE_CPMM_POOL_AUTH:new s.PublicKey("CXniRufdq5xL8t8jZAPxsPZDpuudwuJSPWnbcD5Y5Nxq"),CREATE_CPMM_POOL_FEE_ACC:new s.PublicKey("3oE58BKVt8KuYkGxx8zBojugnymWmBiyafWgMrnb6eYy"),LOCK_CPMM_PROGRAM:new s.PublicKey("DRay25Usp3YJAi7beckgpGUC7mGJ2cR1AVPxhYfwVCUX"),LOCK_CPMM_AUTH:new s.PublicKey("7qWVV8UY2bRJfDLP4s37YzBPKUkVB46DStYJBpYbQzu3"),UTIL1216:s.PublicKey.default,Router:new s.PublicKey("DRaybByLpbUL57LJARs3j8BitTxVfzBg351EaMr5UTCd"),FARM_PROGRAM_ID_V3:new s.PublicKey("DRayWyrLmEW5KEeqs8kdTMMaBabapqagaBC7KWpGtJeZ"),FARM_PROGRAM_ID_V4:new s.PublicKey("Ray1111111111111111111111111111111111111111"),FARM_PROGRAM_ID_V5:new s.PublicKey("DRayiCGSZgku1GTK6rXD6mVDdingXy6APAH1R6R5L2LC"),FARM_PROGRAM_ID_V6:new s.PublicKey("DRayzbYakXs45ELHkzH6vC3fuhQqTAnv5A68gdFuvZyZ"),LAUNCHPAD_PROGRAM:new s.PublicKey("DRay6fNdQ5J82H7xV6uq2aV3mNrUZ1J4PgSKsWgptcm6"),LAUNCHPAD_AUTH:new s.PublicKey("5xqNaZXX5eUi4p5HU4oz9i5QnwRNT2y6oN7yyn4qENeq"),LAUNCHPAD_PLATFORM:new s.PublicKey("2Jx4KTDrVSdWNazuGpcA8n3ZLTRGGBDxAWhuKe2Xcj2a"),LAUNCHPAD_CONFIG:new s.PublicKey("7ZR4zD7PYfY2XxoG1Gxcy2EgEeGYrpxrwzPuwdUBssEt"),FEE_DESTINATION_ID:new s.PublicKey("9y8ENuuZ3b19quffx9hQvRVygG5ky6snHfRvGpuSfeJy"),MODEL_DATA_PUBKEY:new s.PublicKey("Ray1111111111111111111111111111111111111111")};var vn=P(require("bn.js"));var Dt=require("@solana/web3.js");var oe=require("@solana/web3.js"),Un=P(require("axios"));var Xn=require("@solana/web3.js"),zn=P(require("bn.js"));var vt=P(require("bn.js")),Q=new vt.default(1e6);var Hn=Buffer.from("vault_and_lp_mint_auth_seed","utf8"),Yn=Buffer.from("amm_config","utf8"),jn=Buffer.from("pool","utf8"),Zn=Buffer.from("pool_lp_mint","utf8"),Qn=Buffer.from("pool_vault","utf8"),Jn=Buffer.from("observation","utf8"),$n=Buffer.from("permission","utf8");function qt(n){return E([Hn],n)}function ei(n,e){return E([Yn,ti(e)],n)}function Le(n,e,t,i){return E([jn,e.toBuffer(),t.toBuffer(),i.toBuffer()],n)}function Gt(n,e){return E([Zn,e.toBuffer()],n)}function Ze(n,e,t){return E([Qn,e.toBuffer(),t.toBuffer()],n)}function Ut(n,e){return E([Jn,e.toBuffer()],n)}function ti(n){let e=new ArrayBuffer(2);return new DataView(e).setUint16(0,n,!1),new Uint8Array(e)}function ni({poolId:n,programId:e,configId:t,mintA:i,mintB:o}){let c=qt(e).publicKey,l=n||Le(e,t,i,o).publicKey,p=Gt(e,l).publicKey,y=Ze(e,l,i).publicKey,d=Ze(e,l,o).publicKey,f=Ut(e,l).publicKey;return{poolId:l,configId:t,authority:c,lpMint:p,vaultA:y,vaultB:d,observationId:f}}var Xt=Buffer.from("locked_liquidity","utf8");function Qe(n,e){return E([Xt,e.toBuffer()],n)}function ii(n,e){return E([$n,e.toBuffer()],n)}var Mi=require("@solana/web3.js"),Oi=P(require("bn.js")),Fi=P(require("decimal.js"));var Oe=require("@solana/spl-token");var ri=require("@solana/web3.js"),zt=require("@solana/spl-token");var Me=require("@solana/web3.js"),Ni=P(require("bn.js"));var ot=require("@solana/spl-token");var Ai=P(require("bn.js")),wi=P(require("decimal.js"));var W=P(require("bn.js")),Je=new W.default(0),Ht=new W.default(1),Yt=new W.default(-1),Re=new W.default(1).shln(64),jt=new W.default(1).shln(128),oi=Re.sub(Ht);var si=jt.subn(1),se=-443636,be=-se,$e=new W.default("4295048016"),et=new W.default("79226673521066979257578248091"),Ha=new W.default("4295048017"),Ya=new W.default("79226673521066979257578248090");var ai=new W.default(10).pow(new W.default(6));var ja=new W.default("18446744073700000000");var Pi=P(require("bn.js")),ki=P(require("decimal.js"));var nu=Buffer.from("amm_config","utf8"),iu=Buffer.from("pool","utf8"),ru=Buffer.from("pool_vault","utf8"),ou=Buffer.from("pool_reward_vault","utf8"),su=Buffer.from("position","utf8"),au=Buffer.from("tick_array","utf8"),uu=Buffer.from("operation","utf8"),cu=Buffer.from("pool_tick_array_bitmap_extension","utf8"),lu=Buffer.from("observation","utf8");function tt(n){return E([Buffer.from("metadata","utf8"),ne.toBuffer(),n.toBuffer()],ne)}var mu=Buffer.from("locked_position","utf8");var du=Buffer.from("support_mint","utf8");var pi=require("@solana/web3.js"),fi=require("@solana/spl-token"),bi=P(require("bn.js")),yi=P(require("decimal.js"));var ui=P(require("bn.js")),ci=P(require("decimal.js"));var rt=14;var Ne=60;var Ti=w([N(8),I("bump"),j("index"),m(""),ee("protocolFeeRate"),ee("tradeFeeRate"),j("tickSpacing"),T(r(),8,"")]),xi=w([ee("blockTimestamp"),kt("tickCumulative"),T(r(),4)]),sn=w([N(8),z("initialized"),r("recentEpoch"),j("observationIndex"),m("poolId"),T(xi,100,"observations"),T(r(),4)]),hi=w([I("rewardState"),r("openTime"),r("endTime"),r("lastUpdateTime"),K("emissionsPerSecondX64"),r("rewardTotalEmissioned"),r("rewardClaimed"),m("tokenMint"),m("tokenVault"),m("creator"),K("rewardGrowthGlobalX64")]),nn=w([N(8),I("bump"),m("ammConfig"),m("creator"),m("mintA"),m("mintB"),m("vaultA"),m("vaultB"),m("observationId"),I("mintDecimalsA"),I("mintDecimalsB"),j("tickSpacing"),K("liquidity"),K("sqrtPriceX64"),G("tickCurrent"),ee(),K("feeGrowthGlobalX64A"),K("feeGrowthGlobalX64B"),r("protocolFeesTokenA"),r("protocolFeesTokenB"),K("swapInAmountTokenA"),K("swapOutAmountTokenB"),K("swapInAmountTokenB"),K("swapOutAmountTokenA"),I("status"),T(I(),7,""),T(hi,3,"rewardInfos"),T(r(),16,"tickArrayBitmap"),r("totalFeesTokenA"),r("totalFeesClaimedTokenA"),r("totalFeesTokenB"),r("totalFeesClaimedTokenB"),r("fundFeesTokenA"),r("fundFeesTokenB"),r("startTime"),T(r(),15*4-3,"padding")]),Bi=w([K("growthInsideLastX64"),r("rewardAmountOwed")]),rn=w([N(8),I("bump"),m("nftMint"),m("poolId"),G("tickLower"),G("tickUpper"),K("liquidity"),K("feeGrowthInsideLastX64A"),K("feeGrowthInsideLastX64B"),r("tokenFeesOwedA"),r("tokenFeesOwedB"),T(Bi,3,"rewardInfos"),T(r(),8,"")]),Ic=w([N(8),I("bump"),m("poolId"),G("tickLowerIndex"),G("tickUpperIndex"),K("liquidity"),K("feeGrowthInsideLastX64A"),K("feeGrowthInsideLastX64B"),r("tokenFeesOwedA"),r("tokenFeesOwedB"),T(K(),3,"rewardGrowthInside"),T(r(),8,"")]),Ii=w([G("tick"),At("liquidityNet"),K("liquidityGross"),K("feeGrowthOutsideX64A"),K("feeGrowthOutsideX64B"),T(K(),3,"rewardGrowthsOutsideX64"),T(ee(),13,"")]),$t=w([N(8),m("poolId"),G("startTickIndex"),T(Ii,Ne,"ticks"),I("initializedTickCount"),T(I(),115,"")]),Si=w([N(329),T(m(),100,"whitelistMints")]),gi=w([N(8),m("poolId"),T(T(r(),8),rt,"positiveTickArrayBitmap"),T(T(r(),8),rt,"negativeTickArrayBitmap")]),Sc=w([r(),I("bump"),m("owner"),m("poolId"),m("positionId"),m("nftAccount"),T(r(),8)]),Ki=w([N(8),I("bump"),m("lockOwner"),m("poolId"),m("positionId"),m("nftAccount"),m("lockNftMint"),r("recentEpoch"),T(r(),8)]);sn.span;var Xc=M("Raydium_Clmm");var Ei=M("Raydium_cpmm"),U={initialize:[175,175,109,31,13,152,155,237],deposit:[242,35,198,137,82,225,242,182],withdraw:[183,18,70,156,148,109,161,34],swapBaseInput:[143,190,90,218,196,30,51,222],swapBaseOutput:[55,217,98,86,163,74,180,173],lockCpLiquidity:[216,157,29,78,38,51,31,26],collectCpFee:[8,30,51,199,209,184,247,133],createPermissionPda:Buffer.from([135,136,2,216,137,169,181,202]),closePermissionPda:Buffer.from([156,84,32,118,69,135,70,123]),initializeWithPermission:Buffer.from([63,55,254,65,49,178,89,121]),collectCreatorFee:Buffer.from([20,22,86,123,198,28,219,132])};function Wi(n,e,t,i,o,c,l,p,y,d,f,g,A,x,B,h,b,C,O,q){let X=w([r("amountMaxA"),r("amountMaxB"),r("openTime")]),Fe=Le(n,t,c,l).publicKey,Ee=[{pubkey:e,isSigner:!0,isWritable:!1},{pubkey:t,isSigner:!1,isWritable:!1},{pubkey:i,isSigner:!1,isWritable:!1},{pubkey:o,isSigner:!o.equals(Fe),isWritable:!0},{pubkey:c,isSigner:!1,isWritable:!1},{pubkey:l,isSigner:!1,isWritable:!1},{pubkey:p,isSigner:!1,isWritable:!0},{pubkey:y,isSigner:!1,isWritable:!0},{pubkey:d,isSigner:!1,isWritable:!0},{pubkey:f,isSigner:!1,isWritable:!0},{pubkey:g,isSigner:!1,isWritable:!0},{pubkey:A,isSigner:!1,isWritable:!0},{pubkey:x,isSigner:!1,isWritable:!0},{pubkey:b,isSigner:!1,isWritable:!0},{pubkey:R.TOKEN_PROGRAM_ID,isSigner:!1,isWritable:!1},{pubkey:B,isSigner:!1,isWritable:!1},{pubkey:h,isSigner:!1,isWritable:!1},{pubkey:R.ASSOCIATED_TOKEN_PROGRAM_ID,isSigner:!1,isWritable:!1},{pubkey:Mt,isSigner:!1,isWritable:!1},{pubkey:Be,isSigner:!1,isWritable:!1}],ue=Buffer.alloc(X.span);return X.encode({amountMaxA:C,amountMaxB:O,openTime:q},ue),new L.TransactionInstruction({keys:Ee,programId:n,data:Buffer.from([...U.initialize,...ue])})}function Vi(n,e,t,i,o,c,l,p,y,d,f,g,A,x,B){let h=w([r("lpAmount"),r("amountMaxA"),r("amountMaxB")]),b=[{pubkey:e,isSigner:!0,isWritable:!1},{pubkey:t,isSigner:!1,isWritable:!1},{pubkey:i,isSigner:!1,isWritable:!0},{pubkey:o,isSigner:!1,isWritable:!0},{pubkey:c,isSigner:!1,isWritable:!0},{pubkey:l,isSigner:!1,isWritable:!0},{pubkey:p,isSigner:!1,isWritable:!0},{pubkey:y,isSigner:!1,isWritable:!0},{pubkey:R.TOKEN_PROGRAM_ID,isSigner:!1,isWritable:!1},{pubkey:R.TOKEN_2022_PROGRAM_ID,isSigner:!1,isWritable:!1},{pubkey:d,isSigner:!1,isWritable:!1},{pubkey:f,isSigner:!1,isWritable:!1},{pubkey:g,isSigner:!1,isWritable:!0}],C=Buffer.alloc(h.span);return Ei.debug("cpmm deposit data",{lpAmount:A.toString(),amountMaxA:x.toString(),amountMaxB:B.toString()}),h.encode({lpAmount:A,amountMaxA:x,amountMaxB:B},C),new L.TransactionInstruction({keys:b,programId:n,data:Buffer.from([...U.deposit,...C])})}function _i(n,e,t,i,o,c,l,p,y,d,f,g,A,x,B){let h=w([r("lpAmount"),r("amountMinA"),r("amountMinB")]),b=[{pubkey:e,isSigner:!0,isWritable:!1},{pubkey:t,isSigner:!1,isWritable:!1},{pubkey:i,isSigner:!1,isWritable:!0},{pubkey:o,isSigner:!1,isWritable:!0},{pubkey:c,isSigner:!1,isWritable:!0},{pubkey:l,isSigner:!1,isWritable:!0},{pubkey:p,isSigner:!1,isWritable:!0},{pubkey:y,isSigner:!1,isWritable:!0},{pubkey:R.TOKEN_PROGRAM_ID,isSigner:!1,isWritable:!1},{pubkey:R.TOKEN_2022_PROGRAM_ID,isSigner:!1,isWritable:!1},{pubkey:d,isSigner:!1,isWritable:!1},{pubkey:f,isSigner:!1,isWritable:!1},{pubkey:g,isSigner:!1,isWritable:!0},{pubkey:he,isSigner:!1,isWritable:!1}],C=Buffer.alloc(h.span);return h.encode({lpAmount:A,amountMinA:x,amountMinB:B},C),new L.TransactionInstruction({keys:b,programId:n,data:Buffer.from([...U.withdraw,...C])})}function Di(n,e,t,i,o,c,l,p,y,d,f,g,A,x,B,h){let b=w([r("amountIn"),r("amounOutMin")]),C=[{pubkey:e,isSigner:!0,isWritable:!1},{pubkey:t,isSigner:!1,isWritable:!1},{pubkey:i,isSigner:!1,isWritable:!1},{pubkey:o,isSigner:!1,isWritable:!0},{pubkey:c,isSigner:!1,isWritable:!0},{pubkey:l,isSigner:!1,isWritable:!0},{pubkey:p,isSigner:!1,isWritable:!0},{pubkey:y,isSigner:!1,isWritable:!0},{pubkey:d,isSigner:!1,isWritable:!1},{pubkey:f,isSigner:!1,isWritable:!1},{pubkey:g,isSigner:!1,isWritable:!1},{pubkey:A,isSigner:!1,isWritable:!1},{pubkey:x,isSigner:!1,isWritable:!0}],O=Buffer.alloc(b.span);return b.encode({amountIn:B,amounOutMin:h},O),new L.TransactionInstruction({keys:C,programId:n,data:Buffer.from([...U.swapBaseInput,...O])})}function vi(n,e,t,i,o,c,l,p,y,d,f,g,A,x,B,h){let b=w([r("amountInMax"),r("amountOut")]),C=[{pubkey:e,isSigner:!0,isWritable:!1},{pubkey:t,isSigner:!1,isWritable:!1},{pubkey:i,isSigner:!1,isWritable:!1},{pubkey:o,isSigner:!1,isWritable:!0},{pubkey:c,isSigner:!1,isWritable:!0},{pubkey:l,isSigner:!1,isWritable:!0},{pubkey:p,isSigner:!1,isWritable:!0},{pubkey:y,isSigner:!1,isWritable:!0},{pubkey:d,isSigner:!1,isWritable:!1},{pubkey:f,isSigner:!1,isWritable:!1},{pubkey:g,isSigner:!1,isWritable:!1},{pubkey:A,isSigner:!1,isWritable:!1},{pubkey:x,isSigner:!1,isWritable:!0}],O=Buffer.alloc(b.span);return b.encode({amountInMax:B,amountOut:h},O),new L.TransactionInstruction({keys:C,programId:n,data:Buffer.from([...U.swapBaseOutput,...O])})}async function qi(n){var b;let{ownerInfo:e,poolInfo:t,poolKeys:i,feeNftOwner:o,getEphemeralSigners:c}=n,l=[],[p,y]=[new L.PublicKey(t.id),new L.PublicKey(t.lpMint.address)],d;if(c)d=new L.PublicKey((await c(1))[0]);else{let C=L.Keypair.generate();l.push(C),d=C.publicKey}let{publicKey:f}=re(o,d,R.TOKEN_PROGRAM_ID),{publicKey:g}=tt(d),{publicKey:A}=Qe(n.lockProgram,d),{publicKey:x}=re(e.wallet,y,R.TOKEN_PROGRAM_ID),{publicKey:B}=re(n.lockAuthProgram,y,R.TOKEN_PROGRAM_ID),h=an({programId:n.lockProgram,auth:n.lockAuthProgram,payer:e.feePayer,liquidityOwner:e.wallet,nftOwner:o,nftMint:d,nftAccount:f,poolId:p,lockPda:A,mintLp:y,userLpVault:x,lockLpVault:B,poolVaultA:new L.PublicKey(i.vault.A),poolVaultB:new L.PublicKey(i.vault.B),metadataAccount:g,lpAmount:n.lpAmount,withMetadata:(b=n.withMetadata)!=null?b:!0});return{address:{nftMint:d,nftAccount:f,metadataAccount:g,lockPda:A,userLpVault:x,lockLpVault:B},instructions:[h],signers:l,instructionTypes:[ie.CpmmLockLp],lookupTableAddress:[]}}function an({programId:n,auth:e,payer:t,liquidityOwner:i,nftOwner:o,nftMint:c,nftAccount:l,poolId:p,lockPda:y,mintLp:d,userLpVault:f,lockLpVault:g,poolVaultA:A,poolVaultB:x,metadataAccount:B,lpAmount:h,withMetadata:b}){let C=[{pubkey:e,isSigner:!1,isWritable:!1},{pubkey:t,isSigner:!0,isWritable:!0},{pubkey:i,isSigner:!0,isWritable:!1},{pubkey:o,isSigner:!1,isWritable:!1},{pubkey:c,isSigner:!0,isWritable:!0},{pubkey:l,isSigner:!1,isWritable:!0},{pubkey:p,isSigner:!1,isWritable:!1},{pubkey:y,isSigner:!1,isWritable:!0},{pubkey:d,isSigner:!1,isWritable:!1},{pubkey:f,isSigner:!1,isWritable:!0},{pubkey:g,isSigner:!1,isWritable:!0},{pubkey:A,isSigner:!1,isWritable:!0},{pubkey:x,isSigner:!1,isWritable:!0},{pubkey:B,isSigner:!1,isWritable:!0},{pubkey:Be,isSigner:!1,isWritable:!1},{pubkey:L.SystemProgram.programId,isSigner:!1,isWritable:!1},{pubkey:R.TOKEN_PROGRAM_ID,isSigner:!1,isWritable:!1},{pubkey:R.ASSOCIATED_TOKEN_PROGRAM_ID,isSigner:!1,isWritable:!1},{pubkey:ne,isSigner:!1,isWritable:!1}],O=w([r("lpAmount"),z("withMetadata")]),q=Buffer.alloc(O.span);O.encode({lpAmount:h,withMetadata:b},q);let X=Buffer.from([...U.lockCpLiquidity,...q]);return new L.TransactionInstruction({keys:C,programId:n,data:X})}function Gi({programId:n,nftOwner:e,auth:t,nftAccount:i,lockPda:o,poolId:c,mintLp:l,userVaultA:p,userVaultB:y,poolVaultA:d,poolVaultB:f,mintA:g,mintB:A,lockLpVault:x,lpFeeAmount:B,cpmmProgram:h,cpmmAuthProgram:b}){let C=[{pubkey:t,isSigner:!1,isWritable:!1},{pubkey:e,isSigner:!0,isWritable:!1},{pubkey:i,isSigner:!1,isWritable:!0},{pubkey:o,isSigner:!1,isWritable:!0},{pubkey:h!=null?h:Wt,isSigner:!1,isWritable:!1},{pubkey:b!=null?b:Vt,isSigner:!1,isWritable:!1},{pubkey:c,isSigner:!1,isWritable:!0},{pubkey:l,isSigner:!1,isWritable:!0},{pubkey:p,isSigner:!1,isWritable:!0},{pubkey:y,isSigner:!1,isWritable:!0},{pubkey:d,isSigner:!1,isWritable:!0},{pubkey:f,isSigner:!1,isWritable:!0},{pubkey:g,isSigner:!1,isWritable:!1},{pubkey:A,isSigner:!1,isWritable:!1},{pubkey:x,isSigner:!1,isWritable:!0},{pubkey:R.TOKEN_PROGRAM_ID,isSigner:!1,isWritable:!1},{pubkey:R.TOKEN_2022_PROGRAM_ID,isSigner:!1,isWritable:!1},{pubkey:he,isSigner:!1,isWritable:!1}],O=w([r("lpFeeAmount")]),q=Buffer.alloc(O.span);O.encode({lpFeeAmount:B},q);let X=Buffer.from([...U.collectCpFee,...q]);return new L.TransactionInstruction({keys:C,programId:n,data:X})}function Ui(n,e,t,i,o,c,l,p,y,d,f,g,A){let x=[{pubkey:e,isSigner:!0,isWritable:!1},{pubkey:t,isSigner:!1,isWritable:!1},{pubkey:i,isSigner:!1,isWritable:!0},{pubkey:o,isSigner:!1,isWritable:!1},{pubkey:c,isSigner:!1,isWritable:!0},{pubkey:l,isSigner:!1,isWritable:!0},{pubkey:p,isSigner:!1,isWritable:!1},{pubkey:y,isSigner:!1,isWritable:!1},{pubkey:d,isSigner:!1,isWritable:!0},{pubkey:f,isSigner:!1,isWritable:!0},{pubkey:g,isSigner:!1,isWritable:!1},{pubkey:A,isSigner:!1,isWritable:!1},{pubkey:R.ASSOCIATED_TOKEN_PROGRAM_ID,isSigner:!1,isWritable:!1},{pubkey:L.SystemProgram.programId,isSigner:!1,isWritable:!1}];return new L.TransactionInstruction({keys:x,programId:n,data:U.collectCreatorFee})}function Xi(n,e,t,i,o,c,l,p,y,d,f,g,A,x,B,h,b,C,O,q,X,Fe,Ee){let ue=w([r("amountA"),r("amountB"),r("openTime"),I("feeOn")]),mn=[{pubkey:e,isSigner:!0,isWritable:!1},{pubkey:t,isSigner:!1,isWritable:!1},{pubkey:i,isSigner:!1,isWritable:!1},{pubkey:o,isSigner:!1,isWritable:!1},{pubkey:c,isSigner:!1,isWritable:!0},{pubkey:l,isSigner:!1,isWritable:!1},{pubkey:p,isSigner:!1,isWritable:!1},{pubkey:y,isSigner:!1,isWritable:!0},{pubkey:d,isSigner:!1,isWritable:!0},{pubkey:f,isSigner:!1,isWritable:!0},{pubkey:g,isSigner:!1,isWritable:!0},{pubkey:A,isSigner:!1,isWritable:!0},{pubkey:x,isSigner:!1,isWritable:!0},{pubkey:B,isSigner:!1,isWritable:!0},{pubkey:C,isSigner:!1,isWritable:!0},{pubkey:O,isSigner:!1,isWritable:!0},{pubkey:R.TOKEN_PROGRAM_ID,isSigner:!1,isWritable:!1},{pubkey:h,isSigner:!1,isWritable:!1},{pubkey:b,isSigner:!1,isWritable:!1},{pubkey:R.ASSOCIATED_TOKEN_PROGRAM_ID,isSigner:!1,isWritable:!1},{pubkey:L.SystemProgram.programId,isSigner:!1,isWritable:!1}],lt=Buffer.alloc(ue.span);return ue.encode({amountA:q,amountB:X,openTime:Fe,feeOn:Ee},lt),new L.TransactionInstruction({keys:mn,programId:n,data:Buffer.from([...U.initializeWithPermission,...lt])})}var ut=P(require("bn.js"));var ke=P(require("bn.js"));function st(n,e){if(e.isZero())throw Error("divisor is zero");return n.mod(e)}function zi(n,e){if(e.isZero())throw Error("rhs is zero");let t=n.div(e);return st(n,e).gt(Pe)&&(t=t.add(new ke.default(1))),[t,e]}var Pe=new ke.default(0),ae=class{static swapBaseInputWithoutFees(e,t,i){let o=e.mul(i),c=t.add(e);return o.div(c)}static swapBaseOutputWithoutFees(e,t,i){let o=t.mul(e),c=i.sub(e),[l]=zi(o,c);return l}static lpTokensToTradingTokens(e,t,i,o,c){let l=e.mul(i).div(t),p=e.mul(o).div(t);if(c===0)return{tokenAmount0:l,tokenAmount1:p};if(c===1)return st(e.mul(i),t).gt(Pe)&&l.gt(Pe)&&(l=l.add(new ke.default(1))),st(e.mul(o),t).gt(Pe)&&p.gt(Pe)&&(p=p.add(new ke.default(1))),{tokenAmount0:l,tokenAmount1:p};throw Error("roundDirection value error")}};var un=P(require("bn.js"));var F=class{static tradingFee(e,t){return je(e,t,Q)}static protocolFee(e,t){return Ce(e,t,Q)}static fundFee(e,t){return Ce(e,t,Q)}static creatorFee(e,t){return je(e,t,Q)}static splitCreatorFee(e,t,i){return Ce(e,i,t.add(i))}static calculatePreFeeAmount(e,t){if(t.isZero())return e;let i=e.mul(Q),o=Q.sub(t);return i.add(o).sub(new un.default(1)).div(o)}};var at=(t=>(t[t.Floor=0]="Floor",t[t.Ceiling=1]="Ceiling",t))(at||{}),cn=(t=>(t[t.ZeroForOne=0]="ZeroForOne",t[t.OneForZero=1]="OneForZero",t))(cn||{}),ln=(t=>(t[t.OneForZero=0]="OneForZero",t[t.ZeroForOne=1]="ZeroForOne",t))(ln||{}),ct=class{static validate_supply(e,t){if(e.isZero())throw Error("tokenAmount0 is zero");if(t.isZero())throw Error("tokenAmount1 is zero")}static swapBaseInput(e,t,i,o,c,l,p,y){let d=new ut.default(0),f=F.tradingFee(e,o),g;y?(d=F.creatorFee(e,c),g=e.sub(f).sub(d)):g=e.sub(f);let A=F.protocolFee(f,l),x=F.protocolFee(f,p),B=ae.swapBaseInputWithoutFees(g,t,i),h;return y?h=B:(d=F.creatorFee(B,c),h=B.sub(d)),{newInputVaultAmount:t.add(g),newOutputVaultAmount:i.sub(B),inputAmount:e,outputAmount:h,tradeFee:f,protocolFee:A,fundFee:x,creatorFee:d}}static swapBaseOutput(e,t,i,o,c,l,p,y){let d,f=new ut.default(0),g;if(y)g=e;else{let b=F.calculatePreFeeAmount(e,c);f=b.sub(e),g=b}let A=ae.swapBaseOutputWithoutFees(g,t,i),x;if(y){let b=F.calculatePreFeeAmount(A,o.add(c)),C=b.sub(A);f=F.splitCreatorFee(C,o,c),d=C.sub(f),x=b}else{let b=F.calculatePreFeeAmount(A,o);d=b.sub(A),x=b}let B=F.protocolFee(d,l),h=F.fundFee(d,p);return{newInputVaultAmount:t.add(A),newOutputVaultAmount:e.sub(g),inputAmount:x,outputAmount:e,tradeFee:d,protocolFee:B,fundFee:h,creatorFee:f}}};0&&(module.exports={ConstantProductCurve,CpmmConfigInfoLayout,CpmmFee,CpmmPermission,CpmmPoolInfoLayout,CurveCalculator,FeeOn,LOCK_LIQUIDITY_SEED,RoundDirection,TradeDirection,TradeDirectionOpposite,collectCpFeeInstruction,cpmmLockPositionInstruction,getCpLockPda,getCpmmPdaAmmConfigId,getCpmmPdaPoolId,getCreatePoolKeys,getPdaLpMint,getPdaObservationId,getPdaPermissionId,getPdaPoolAuthority,getPdaVault,initializeWithPermission,makeCollectCreatorFeeInstruction,makeCpmmLockInstruction,makeCreateCpmmPoolInInstruction,makeDepositCpmmInInstruction,makeSwapCpmmBaseInInstruction,makeSwapCpmmBaseOutInstruction,makeWithdrawCpmmInInstruction});
//# sourceMappingURL=index.js.map