var Dn=Object.create;var Ae=Object.defineProperty,Mn=Object.defineProperties,Ln=Object.getOwnPropertyDescriptor,Nn=Object.getOwnPropertyDescriptors,Fn=Object.getOwnPropertyNames,Le=Object.getOwnPropertySymbols,En=Object.getPrototypeOf,Ye=Object.prototype.hasOwnProperty,wt=Object.prototype.propertyIsEnumerable;var yt=(n,e,t)=>e in n?Ae(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,K=(n,e)=>{for(var t in e||(e={}))Ye.call(e,t)&&yt(n,t,e[t]);if(Le)for(var t of Le(e))wt.call(e,t)&&yt(n,t,e[t]);return n},Z=(n,e)=>Mn(n,Nn(e));var Ne=(n,e)=>{var t={};for(var r in n)Ye.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&Le)for(var r of Le(n))e.indexOf(r)<0&&wt.call(n,r)&&(t[r]=n[r]);return t};var On=(n,e)=>{for(var t in e)Ae(n,t,{get:e[t],enumerable:!0})},xt=(n,e,t,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of Fn(e))!Ye.call(n,i)&&i!==t&&Ae(n,i,{get:()=>e[i],enumerable:!(r=Ln(e,i))||r.enumerable});return n};var H=(n,e,t)=>(t=n!=null?Dn(En(n)):{},xt(e||!n||!n.__esModule?Ae(t,"default",{value:n,enumerable:!0}):t,n)),Vn=n=>xt(Ae({},"__esModule",{value:!0}),n);var si={};On(si,{ACCOUNT_TYPE_SIZE:()=>_n,ALL_PROGRAM_ID:()=>Yr,AMM_STABLE:()=>an,AMM_V4:()=>sn,ANAMint:()=>cr,AccountType:()=>Bt,BNDivCeil:()=>Q,BN_100:()=>Cr,BN_1000:()=>kr,BN_10000:()=>Ir,BN_FIVE:()=>Br,BN_ONE:()=>Ar,BN_TEN:()=>se,BN_THREE:()=>Sr,BN_TWO:()=>Pr,BN_ZERO:()=>ne,CLMM_LOCK_AUTH_ID:()=>ln,CLMM_LOCK_PROGRAM_ID:()=>un,CLMM_PROGRAM_ID:()=>cn,CLOCK_PROGRAM_ID:()=>Jn,CREATE_CPMM_POOL_AUTH:()=>yn,CREATE_CPMM_POOL_FEE_ACC:()=>wn,CREATE_CPMM_POOL_PROGRAM:()=>bn,DEVNET_PROGRAM_ID:()=>Qr,DEV_LAUNCHPAD_AUTH:()=>Jr,DEV_LAUNCHPAD_PROGRAM:()=>Zr,DEV_LOOKUP_TABLE_CACHE:()=>ge,ETHMint:()=>ur,FARM_PROGRAM_ID_V3:()=>Qt,FARM_PROGRAM_ID_V4:()=>$t,FARM_PROGRAM_ID_V5:()=>en,FARM_PROGRAM_ID_V6:()=>tn,FEE_DESTINATION_ID:()=>dn,FEE_RATE_DENOMINATOR_VALUE:()=>oi,IDO_ALL_PROGRAM:()=>Xr,IDO_PROGRAM_ID_V1:()=>fn,IDO_PROGRAM_ID_V2:()=>gn,IDO_PROGRAM_ID_V3:()=>hn,IDO_PROGRAM_ID_V4:()=>Tn,INSTRUCTION_PROGRAM_ID:()=>Yn,InstructionType:()=>ye,LAUNCHPAD_AUTH:()=>Sn,LAUNCHPAD_CONFIG:()=>Cn,LAUNCHPAD_PLATFORM:()=>Bn,LAUNCHPAD_PROGRAM:()=>Pn,LIQUIDITY_POOL_PROGRAM_ID_V5_MODEL:()=>zr,LOCK_CPMM_AUTH:()=>An,LOCK_CPMM_PROGRAM:()=>xn,LOOKUP_TABLE_CACHE:()=>De,LogLevel:()=>At,Logger:()=>Fe,MAX_BASE64_SIZE:()=>dt,MEMO_PROGRAM_ID:()=>jn,MEMO_PROGRAM_ID2:()=>zn,METADATA_PROGRAM_ID:()=>Xn,MODEL_DATA_PUBKEY:()=>mn,NRVMint:()=>ar,OPEN_BOOK_PROGRAM:()=>rn,Owner:()=>re,PAIMint:()=>er,RAYMint:()=>$n,RENT_PROGRAM_ID:()=>Zn,Rounding:()=>Ve,Router:()=>pn,SERUM_PROGRAM_ID_V3:()=>on,SOLMint:()=>be,SRMMint:()=>tr,SYSTEM_PROGRAM_ID:()=>Qn,TxBuilder:()=>Tt,TxVersion:()=>pt,USDCMint:()=>nr,USDHMint:()=>sr,USDTMint:()=>rr,UTIL1216:()=>nn,WSOLMint:()=>Pe,accountMeta:()=>Ke,add:()=>yr,addComputeBudget:()=>Ie,ceilDiv:()=>Dr,ceilDivBN:()=>ni,checkLegacyTxSize:()=>we,checkV0TxSize:()=>xe,chunkArray:()=>Ee,commonSystemAccountMeta:()=>Hn,confirmTransaction:()=>Re,createLogger:()=>q,decimalToFraction:()=>Gt,div:()=>gr,divCeil:()=>Rr,eq:()=>Wt,fetchMultipleMintInfos:()=>Kn,findProgramAddress:()=>gt,floorDiv:()=>Mr,forecastTransactionSize:()=>ft,getATAAddress:()=>jr,getDate:()=>mt,getDevLookupTableCache:()=>Je,getEpochInfo:()=>Gr,getMax:()=>br,getMultipleAccountsInfo:()=>Oe,getMultipleAccountsInfoWithCustomFlags:()=>St,getMultipleLookupTableInfo:()=>Ze,getRecentBlockHash:()=>fe,getTime:()=>jt,getTimestamp:()=>xr,getTransferAmountFee:()=>$r,getTransferAmountFeeFromPost:()=>ii,getTransferAmountFeeFromPre:()=>ri,getTransferAmountFeeV2:()=>ei,gt:()=>Vt,gte:()=>fr,intersection:()=>Wr,isDateAfter:()=>Or,isDateBefore:()=>Er,isDecimal:()=>Ht,isMeaningfulNumber:()=>Tr,isNumber:()=>lt,jsonInfo2PoolKeys:()=>st,lt:()=>pr,lte:()=>dr,mSOLMint:()=>ir,minExpirationTime:()=>ti,mul:()=>He,notInnerObject:()=>je,offsetDateTime:()=>Vr,parseBigNumberish:()=>U,parseNumberInfo:()=>ae,parseSimulateLogToJson:()=>Ur,parseSimulateValue:()=>qr,printSimulate:()=>ce,recursivelyDecimalToFraction:()=>ct,setLoggerLevel:()=>Wn,shakeFractionDecimal:()=>Ut,simulateMultipleInstruction:()=>vr,simulateTransaction:()=>Zt,sleep:()=>wr,solToWSol:()=>tt,stSOLMint:()=>or,sub:()=>hr,tenExponential:()=>Ge,toBN:()=>qt,toBuffer:()=>ht,toFraction:()=>ut,toFractionWithDecimals:()=>mr,toPercent:()=>Lr,toTokenPrice:()=>Nr,toTotalPrice:()=>Fr,toUsdCurrency:()=>at,transformTxToBase64:()=>Hr,tryParsePublicKey:()=>Ue,txToBase64:()=>Jt,uniq:()=>Kr,validateAndParsePublicKey:()=>ve,xor:()=>_r});module.exports=Vn(si);var et=require("@solana/web3.js");var me=require("lodash"),At=(i=>(i[i.Error=0]="Error",i[i.Warning=1]="Warning",i[i.Info=2]="Info",i[i.Debug=3]="Debug",i))(At||{}),Fe=class{constructor(e){this.logLevel=e.logLevel!==void 0?e.logLevel:0,this.name=e.name}set level(e){this.logLevel=e}get time(){return Date.now().toString()}get moduleName(){return this.name}isLogLevel(e){return e<=this.logLevel}error(...e){return this.isLogLevel(0)?(console.error(this.time,this.name,"sdk logger error",...e),this):this}logWithError(...e){let t=e.map(r=>typeof r=="object"?JSON.stringify(r):r).join(", ");throw new Error(t)}warning(...e){return this.isLogLevel(1)?(console.warn(this.time,this.name,"sdk logger warning",...e),this):this}info(...e){return this.isLogLevel(2)?(console.info(this.time,this.name,"sdk logger info",...e),this):this}debug(...e){return this.isLogLevel(3)?(console.debug(this.time,this.name,"sdk logger debug",...e),this):this}},Qe={},Pt={};function q(n){let e=(0,me.get)(Qe,n);if(!e){let t=(0,me.get)(Pt,n);e=new Fe({name:n,logLevel:t}),(0,me.set)(Qe,n,e)}return e}function Wn(n,e){(0,me.set)(Pt,n,e);let t=(0,me.get)(Qe,n);t&&(t.level=e)}var oe=require("@solana/spl-token"),$e=q("Raydium_accountInfo_util");async function Oe(n,e,t){let{batchRequest:r,commitment:i="confirmed",chunkCount:s=100}=K({batchRequest:!1},t),a=Ee(e,s),o=new Array(a.length).fill([]);if(r){let c=a.map(g=>{let S=n._buildArgs([g.map(A=>A.toBase58())],i,"base64");return{methodName:"getMultipleAccounts",args:S}}),u=Ee(c,10);o=(await(await Promise.all(u.map(async g=>await n._rpcBatchRequest(g)))).flat()).map(g=>(g.error&&$e.logWithError(`failed to get info for multiple accounts, RPC_ERROR, ${g.error.message}`),g.result.value.map(S=>{if(S){let{data:A,executable:T,lamports:x,owner:d,rentEpoch:C}=S;return A.length!==2&&A[1]!=="base64"&&$e.logWithError("info must be base64 encoded, RPC_ERROR"),{data:Buffer.from(A[0],"base64"),executable:T,lamports:x,owner:new et.PublicKey(d),rentEpoch:C}}return null})))}else try{o=await Promise.all(a.map(c=>n.getMultipleAccountsInfo(c,i)))}catch(c){c instanceof Error&&$e.logWithError(`failed to get info for multiple accounts, RPC_ERROR, ${c.message}`)}return o.flat()}async function St(n,e,t){let r=await Oe(n,e.map(i=>i.pubkey),t);return e.map((i,s)=>Z(K({},i),{accountInfo:r[s]}))}var Bt=(r=>(r[r.Uninitialized=0]="Uninitialized",r[r.Mint=1]="Mint",r[r.Account=2]="Account",r))(Bt||{}),_n=1;async function Kn({connection:n,mints:e,config:t}){var s,a,o;if(e.length===0)return{};let r=await St(n,e.map(c=>({pubkey:tt(c)})),t),i={};for(let c of r){if(!c.accountInfo||c.accountInfo.data.length<oe.MINT_SIZE){console.log("invalid mint account",c.pubkey.toBase58());continue}let u=(0,oe.unpackMint)(c.pubkey,c.accountInfo,(s=c.accountInfo)==null?void 0:s.owner);i[c.pubkey.toString()]=Z(K({},u),{programId:((a=c.accountInfo)==null?void 0:a.owner)||oe.TOKEN_PROGRAM_ID,feeConfig:(o=(0,oe.getTransferFeeConfig)(u))!=null?o:void 0})}return i[et.PublicKey.default.toBase58()]=i[Pe.toBase58()],i}var E=H(require("bn.js")),vt=H(require("decimal.js"));var Dt=H(require("big.js")),ee=H(require("bn.js"));var Ct=H(require("toformat")),vn=Ct.default,Se=vn;var Be=H(require("big.js")),It=H(require("bn.js")),Rt=H(require("decimal.js-light"));var Te=H(require("bn.js"));var Ve=(r=>(r[r.ROUND_DOWN=0]="ROUND_DOWN",r[r.ROUND_HALF_UP=1]="ROUND_HALF_UP",r[r.ROUND_UP=2]="ROUND_UP",r))(Ve||{}),kt=9007199254740991;function U(n){let e=q("Raydium_parseBigNumberish");if(n instanceof Te.default)return n;if(typeof n=="string"){if(n.match(/^-?[0-9]+$/))return new Te.default(n);e.logWithError(`invalid BigNumberish string: ${n}`)}return typeof n=="number"?(n%1&&e.logWithError(`BigNumberish number underflow: ${n}`),(n>=kt||n<=-kt)&&e.logWithError(`BigNumberish number overflow: ${n}`),new Te.default(String(n))):typeof n=="bigint"?new Te.default(n.toString()):(e.error(`invalid BigNumberish value: ${n}`),new Te.default(0))}var We=q("module/fraction"),nt=Se(Be.default),Ce=Se(Rt.default),Un={[0]:Ce.ROUND_DOWN,[1]:Ce.ROUND_HALF_UP,[2]:Ce.ROUND_UP},qn={[0]:Be.default.roundDown,[1]:Be.default.roundHalfUp,[2]:Be.default.roundUp},b=class{constructor(e,t=new It.default(1)){this.numerator=U(e),this.denominator=U(t)}get quotient(){return this.numerator.div(this.denominator)}invert(){return new b(this.denominator,this.numerator)}add(e){let t=e instanceof b?e:new b(U(e));return this.denominator.eq(t.denominator)?new b(this.numerator.add(t.numerator),this.denominator):new b(this.numerator.mul(t.denominator).add(t.numerator.mul(this.denominator)),this.denominator.mul(t.denominator))}sub(e){let t=e instanceof b?e:new b(U(e));return this.denominator.eq(t.denominator)?new b(this.numerator.sub(t.numerator),this.denominator):new b(this.numerator.mul(t.denominator).sub(t.numerator.mul(this.denominator)),this.denominator.mul(t.denominator))}mul(e){let t=e instanceof b?e:new b(U(e));return new b(this.numerator.mul(t.numerator),this.denominator.mul(t.denominator))}div(e){let t=e instanceof b?e:new b(U(e));return new b(this.numerator.mul(t.denominator),this.denominator.mul(t.numerator))}toSignificant(e,t={groupSeparator:""},r=1){Number.isInteger(e)||We.logWithError(`${e} is not an integer.`),e<=0&&We.logWithError(`${e} is not positive.`),Ce.set({precision:e+1,rounding:Un[r]});let i=new Ce(this.numerator.toString()).div(this.denominator.toString()).toSignificantDigits(e);return i.toFormat(i.decimalPlaces(),t)}toFixed(e,t={groupSeparator:""},r=1){return Number.isInteger(e)||We.logWithError(`${e} is not an integer.`),e<0&&We.logWithError(`${e} is negative.`),nt.DP=e,nt.RM=qn[r]||1,new nt(this.numerator.toString()).div(this.denominator.toString()).toFormat(e,t)}isZero(){return this.numerator.isZero()}};var Gn=q("Raydium_amount"),_e=Se(Dt.default);function Mt(n,e){let t="0",r="0";if(n.includes(".")){let i=n.split(".");i.length===2?([t,r]=i,r=r.padEnd(e,"0")):Gn.logWithError(`invalid number string, num: ${n}`)}else t=n;return[t,r.slice(0,e)||r]}var J=class extends b{constructor(t,r,i=!0,s){let a=new ee.default(0),o=se.pow(new ee.default(t.decimals));if(i)a=U(r);else{let c=new ee.default(0),u=new ee.default(0);if(typeof r=="string"||typeof r=="number"||typeof r=="bigint"){let[l,g]=Mt(r.toString(),t.decimals);c=U(l),u=U(g)}c=c.mul(o),a=c.add(u)}super(a,o);this.logger=q(s||"TokenAmount"),this.token=t}get raw(){return this.numerator}isZero(){return this.raw.isZero()}gt(t){return this.token.equals(t.token)||this.logger.logWithError("gt token not equals"),this.raw.gt(t.raw)}lt(t){return this.token.equals(t.token)||this.logger.logWithError("lt token not equals"),this.raw.lt(t.raw)}add(t){return this.token.equals(t.token)||this.logger.logWithError("add token not equals"),new J(this.token,this.raw.add(t.raw))}subtract(t){return this.token.equals(t.token)||this.logger.logWithError("sub token not equals"),new J(this.token,this.raw.sub(t.raw))}toSignificant(t=this.token.decimals,r,i=0){return super.toSignificant(t,r,i)}toFixed(t=this.token.decimals,r,i=0){return t>this.token.decimals&&this.logger.logWithError("decimals overflow"),super.toFixed(t,r,i)}toExact(t={groupSeparator:""}){return _e.DP=this.token.decimals,new _e(this.numerator.toString()).div(this.denominator.toString()).toFormat(t)}},pe=class extends b{constructor(t,r,i=!0,s){let a=new ee.default(0),o=se.pow(new ee.default(t.decimals));if(i)a=U(r);else{let c=new ee.default(0),u=new ee.default(0);if(typeof r=="string"||typeof r=="number"||typeof r=="bigint"){let[l,g]=Mt(r.toString(),t.decimals);c=U(l),u=U(g)}c=c.mul(o),a=c.add(u)}super(a,o);this.logger=q(s||"TokenAmount"),this.currency=t}get raw(){return this.numerator}isZero(){return this.raw.isZero()}gt(t){return this.currency.equals(t.currency)||this.logger.logWithError("gt currency not equals"),this.raw.gt(t.raw)}lt(t){return this.currency.equals(t.currency)||this.logger.logWithError("lt currency not equals"),this.raw.lt(t.raw)}add(t){return this.currency.equals(t.currency)||this.logger.logWithError("add currency not equals"),new pe(this.currency,this.raw.add(t.raw))}sub(t){return this.currency.equals(t.currency)||this.logger.logWithError("sub currency not equals"),new pe(this.currency,this.raw.sub(t.raw))}toSignificant(t=this.currency.decimals,r,i=0){return super.toSignificant(t,r,i)}toFixed(t=this.currency.decimals,r,i=0){return t>this.currency.decimals&&this.logger.logWithError("decimals overflow"),super.toFixed(t,r,i)}toExact(t={groupSeparator:""}){return _e.DP=this.currency.decimals,new _e(this.numerator.toString()).div(this.denominator.toString()).toFormat(t)}};var Lt=require("@solana/web3.js"),rt=require("@solana/spl-token"),Nt={chainId:101,address:Lt.PublicKey.default.toBase58(),programId:rt.TOKEN_PROGRAM_ID.toBase58(),decimals:9,symbol:"SOL",name:"solana",logoURI:"https://img-v1.raydium.io/icon/So11111111111111111111111111111111111111112.png",tags:[],priority:2,type:"raydium",extensions:{coingeckoId:"solana"}},de={chainId:101,address:"So11111111111111111111111111111111111111112",programId:rt.TOKEN_PROGRAM_ID.toBase58(),decimals:9,symbol:"WSOL",name:"Wrapped SOL",logoURI:"https://img-v1.raydium.io/icon/So11111111111111111111111111111111111111112.png",tags:[],priority:2,type:"raydium",extensions:{coingeckoId:"solana"}};var qe=require("@solana/web3.js");var M=require("@solana/web3.js"),Ft=require("@solana/spl-token");function Ke({pubkey:n,isSigner:e=!1,isWritable:t=!0}){return{pubkey:n,isWritable:t,isSigner:e}}var Hn=[Ke({pubkey:Ft.TOKEN_PROGRAM_ID,isWritable:!1}),Ke({pubkey:M.SystemProgram.programId,isWritable:!1}),Ke({pubkey:M.SYSVAR_RENT_PUBKEY,isWritable:!1})];function ve({publicKey:n,transformSol:e}){let t=Ue(n.toString());if(t instanceof M.PublicKey)return e&&t.equals(be)?Pe:t;if(e&&t.toString()===be.toBase58())return Pe;if(typeof t=="string"){if(t===M.PublicKey.default.toBase58())return M.PublicKey.default;try{return new M.PublicKey(t)}catch{throw new Error("invalid public key")}}throw new Error("invalid public key")}function Ue(n){try{return new M.PublicKey(n)}catch{return n}}var jn=new M.PublicKey("MemoSq4gqABAXKb96qnH8TysNcWxMyWCqXgDLGmfcHr"),zn=new M.PublicKey("MemoSq4gqABAXKb96qnH8TysNcWxMyWCqXgDLGmfcHr"),Zn=new M.PublicKey("SysvarRent111111111111111111111111111111111"),Jn=new M.PublicKey("SysvarC1ock11111111111111111111111111111111"),Xn=new M.PublicKey("metaqbxxUerdq28cj1RbAWkYQm3ybzjb6a8bt518x1s"),Yn=new M.PublicKey("Sysvar1nstructions1111111111111111111111111"),Qn=M.SystemProgram.programId,$n=new M.PublicKey("4k3Dyjzvzp8eMZWUXbBCjEvwSkkk59S5iCNLY3QrkX6R"),er=new M.PublicKey("Ea5SjE2Y6yvCeW5dYTn7PYMuW5ikXkvbGdcmSnXeaLjS"),tr=new M.PublicKey("SRMuApVNdxXokk5GT7XD5cUUgXMBCoAz2LHeuAoKWRt"),nr=new M.PublicKey("EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v"),rr=new M.PublicKey("Es9vMFrzaCERmJfrF4H2FYD4KCoNkY11McCe8BenwNYB"),ir=new M.PublicKey("mSoLzYCxHdYgdzU16g5QSh3i5K3z3KZK7ytfqcJm7So"),or=new M.PublicKey("7dHbWXmci3dT8UFYWYZweBLXgycu7Y3iL6trKn1Y7ARj"),sr=new M.PublicKey("USDH1SM1ojwWUga67PGrgFWUHibbjqMvuMaDkRJTgkX"),ar=new M.PublicKey("NRVwhjBQiUPYtfDT5zRBVJajzFQHaBUNtC7SNVvqRFa"),cr=new M.PublicKey("ANAxByE6G2WjFp7A4NqtWYXb3mgruyzZYg3spfxe6Lbo"),ur=new M.PublicKey("7vfCXTUXx5WJV5JADk17DUJ4ksgau7utNKj4b963voxs"),Pe=new M.PublicKey("So11111111111111111111111111111111111111112"),be=M.PublicKey.default;function tt(n){return ve({publicKey:n,transformSol:!0})}var it=class{constructor({mint:e,decimals:t,symbol:r,name:i,skipMint:s=!1,isToken2022:a=!1}){if(e===be.toBase58()||e instanceof qe.PublicKey&&be.equals(e)){this.decimals=de.decimals,this.symbol=de.symbol,this.name=de.name,this.mint=new qe.PublicKey(de.address),this.isToken2022=!1;return}this.decimals=t,this.symbol=r||e.toString().substring(0,6),this.name=i||e.toString().substring(0,6),this.mint=s?qe.PublicKey.default:ve({publicKey:e}),this.isToken2022=a}equals(e){return this===e?!0:this.mint.equals(e.mint)}},te=it;te.WSOL=new it(Z(K({},de),{mint:de.address}));var ot=class{constructor({decimals:e,symbol:t="UNKNOWN",name:r="UNKNOWN"}){this.decimals=e,this.symbol=t,this.name=r}equals(e){return this===e}},ke=ot;ke.SOL=new ot(Nt);var Ot=H(require("bn.js"));var Et=new b(new Ot.default(100)),Y=class extends b{toSignificant(e=5,t,r){return this.mul(Et).toSignificant(e,t,r)}toFixed(e=2,t,r){return this.mul(Et).toFixed(e,t,r)}};var lr=q("Raydium_price"),z=class extends b{constructor(t){let{baseToken:r,quoteToken:i,numerator:s,denominator:a}=t;super(s,a);this.baseToken=r,this.quoteToken=i,this.scalar=new b(Ge(r.decimals),Ge(i.decimals))}get raw(){return new b(this.numerator,this.denominator)}get adjusted(){return super.mul(this.scalar)}invert(){return new z({baseToken:this.quoteToken,quoteToken:this.baseToken,denominator:this.numerator,numerator:this.denominator})}mul(t){this.quoteToken!==t.baseToken&&lr.logWithError("mul token not equals");let r=super.mul(t);return new z({baseToken:this.baseToken,quoteToken:t.quoteToken,denominator:r.denominator,numerator:r.numerator})}toSignificant(t=this.quoteToken.decimals,r,i){return this.adjusted.toSignificant(t,r,i)}toFixed(t=this.quoteToken.decimals,r,i){return this.adjusted.toFixed(t,r,i)}};function W(n){if(n instanceof Y)return new b(n.numerator,n.denominator);if(n instanceof z)return n.adjusted;if(n instanceof J)try{return W(n.toExact())}catch{return new b(ne)}if(n instanceof b)return n;let e=String(n),t=ae(e);return new b(t.numerator,t.denominator)}function mr(n){var r;if(n instanceof Y)return{fr:new b(n.numerator,n.denominator)};if(n instanceof z)return{fr:n.adjusted};if(n instanceof J)return{fr:W(n.toExact()),decimals:n.token.decimals};if(n instanceof b)return{fr:n};let e=String(n),t=ae(e);return{fr:new b(t.numerator,t.denominator),decimals:(r=t.dec)==null?void 0:r.length}}function pr(n,e){if(n==null||e==null)return!1;let t=W(n),r=W(e);return t.sub(r).numerator,t.sub(r).numerator.lt(ne)}function Vt(n,e){if(n==null||e==null)return!1;let t=W(n),r=W(e);return t.sub(r).numerator.gt(ne)}function dr(n,e){if(n==null||e==null)return!1;let t=W(n),r=W(e);return t.sub(r).numerator.lte(ne)}function fr(n,e){if(n==null||e==null)return!1;let t=W(n),r=W(e);return t.sub(r).numerator.gte(ne)}function Wt(n,e){if(n==null||e==null)return!1;let t=W(n),r=W(e);return t.sub(r).numerator.eq(ne)}function gr(n,e){if(n==null||e==null)return;let t=W(n),r=W(e);try{return t.div(r)}catch{return t}}function hr(n,e){if(n==null||e==null)return;let t=W(n),r=W(e);return t.sub(r)}function Tr(n){return n==null?!1:!Wt(n,0)}function br(n,e){return Vt(e,n)?e:n}function He(n,e){if(n==null||e==null)return;let t=W(n),r=W(e);return t.mul(r)}function yr(n,e){if(n==null||e==null)return;let t=W(n),r=W(e);return t.add(r)}var _t=require("@solana/web3.js"),Kt=H(require("bn.js"));async function wr(n){new Promise(e=>setTimeout(e,n))}function xr(){return new Date().getTime()}function je(n){return typeof n=="object"&&n!==null&&![te,J,_t.PublicKey,b,Kt.default,z,Y].some(e=>typeof e=="object"&&n instanceof e)}function st(n){return typeof n=="string"?Ue(n):Array.isArray(n)?n.map(e=>st(e)):je(n)?Object.fromEntries(Object.entries(n).map(([e,t])=>[e,st(t)])):n}var ne=new E.default(0),Ar=new E.default(1),Pr=new E.default(2),Sr=new E.default(3),Br=new E.default(5),se=new E.default(10),Cr=new E.default(100),kr=new E.default(1e3),Ir=new E.default(1e4);function Ge(n){return se.pow(U(n))}function ae(n){var o;if(n===void 0)return{denominator:"1",numerator:"0"};if(n instanceof E.default)return{numerator:n.toString(),denominator:"1"};if(n instanceof b)return{denominator:n.denominator.toString(),numerator:n.numerator.toString()};let e=String(n),[,t="",r="",i=""]=(o=e.replace(",","").match(/(-?)(\d*)\.?(\d*)/))!=null?o:[],s="1"+"0".repeat(i.length),a=t+(r==="0"?"":r)+i||"0";return{denominator:s,numerator:a,sign:t,int:r,dec:i}}function Rr(n,e){let t=n.divmod(e);return t.mod.isZero()?t.div:t.div.isNeg()?t.div.isubn(1):t.div.iaddn(1)}function Ut(n){var r;let[,e="",t=""]=(r=n.toFixed(2).match(/(-?)(\d*)\.?(\d*)/))!=null?r:[];return`${e}${t}`}function qt(n,e=0){return n instanceof E.default?n:new E.default(Ut(ut(n).mul(se.pow(new E.default(String(e))))))}function ut(n){if(n instanceof Y)return new b(n.numerator,n.denominator);if(n instanceof z)return n.adjusted;if(n instanceof J)try{return ut(n.toExact())}catch{return new b(ne)}if(n instanceof b)return n;let e=String(n),t=ae(e);return new b(t.numerator,t.denominator)}function Dr(n,e,t){return n.mul(e).add(t).sub(new E.default(1)).div(t)}function Mr(n,e,t){return n.mul(e).div(t)}function Lr(n,e){let{numerator:t,denominator:r}=ae(n);return new Y(new E.default(t),new E.default(r).mul(e!=null&&e.alreadyDecimaled?new E.default(100):new E.default(1)))}function Nr(n){let{token:e,numberPrice:t,decimalDone:r}=n,i=new te({mint:"",decimals:6,symbol:"usd",name:"usd",skipMint:!0}),{numerator:s,denominator:a}=ae(t),o=r?new E.default(s).mul(se.pow(new E.default(e.decimals))):s,c=new E.default(a).mul(se.pow(new E.default(i.decimals)));return new z({baseToken:i,denominator:c.toString(),quoteToken:new te(Z(K({},e),{skipMint:!0,mint:""})),numerator:o.toString()})}function at(n){let e=new ke({decimals:6,symbol:"usd",name:"usd"}),t=qt(He(n,10**e.decimals));return new pe(e,t)}function Fr(n,e){return at(!e||!n?0:He(n,e))}function Gt(n){if(n==null)return;let{numerator:e,denominator:t}=ae(n.toString());return new b(e,t)}function Ht(n){return n instanceof vt.default}function ct(n){return Ht(n)?Gt(n):Array.isArray(n)?n.map(e=>ct(e)):je(n)?Object.fromEntries(Object.entries(n).map(([e,t])=>[e,ct(t)])):n}var lt=n=>typeof n=="number",mt=n=>n?new Date(n):new Date,jt=n=>mt(n).getTime();function Er(n,e,t){let r=lt(e)?e*((t==null?void 0:t.unit)==="s"?1e3:1):e;return new Date(n).getTime()<=r}function Or(n,e,t){let r=lt(e)?e*((t==null?void 0:t.unit)==="s"?1e3:1):e;return new Date(n).getTime()>r}function Vr(n,e){let r=jt(n)+(e.days?e.days*24*60*60*1e3:0)+(e.hours?e.hours*60*60*1e3:0)+(e.minutes?e.minutes*60*1e3:0)+(e.seconds?e.seconds*1e3:0)+(e.milliseconds?e.milliseconds:0);return mt(r)}function Ee(n,e=1,t=[]){let r=[...n];if(e<=0)return t;for(;r.length;)t.push(r.splice(0,e));return t}function Wr(n,...e){return n.filter(t=>e.every(r=>r.includes(t)))}function _r(n,...e){return n.filter(t=>e.every(r=>!r.includes(t)))}function Kr(n){return[...new Set(n)]}var re=class{constructor(e){this._owner=e}get publicKey(){return re.isKeyPair(this._owner)?this._owner.publicKey:this._owner}get signer(){return re.isKeyPair(this._owner)?this._owner:void 0}get isKeyPair(){return re.isKeyPair(this._owner)}get isPublicKey(){return re.isPublicKey(this._owner)}static isKeyPair(e){return e.secretKey!==void 0}static isPublicKey(e){return!re.isKeyPair(e)}};var Xt=require("@solana/web3.js"),Yt=require("@solana/spl-token");var _=require("@solana/web3.js");var pt=(t=>(t[t.V0=0]="V0",t[t.LEGACY=1]="LEGACY",t))(pt||{}),ye={CreateAccount:"CreateAccount",InitAccount:"InitAccount",CreateATA:"CreateATA",CloseAccount:"CloseAccount",TransferAmount:"TransferAmount",InitMint:"InitMint",MintTo:"MintTo",InitMarket:"InitMarket",Util1216OwnerClaim:"Util1216OwnerClaim",SetComputeUnitPrice:"SetComputeUnitPrice",SetComputeUnitLimit:"SetComputeUnitLimit",ClmmCreatePool:"ClmmCreatePool",ClmmOpenPosition:"ClmmOpenPosition",ClmmIncreasePosition:"ClmmIncreasePosition",ClmmDecreasePosition:"ClmmDecreasePosition",ClmmClosePosition:"ClmmClosePosition",ClmmSwapBaseIn:"ClmmSwapBaseIn",ClmmSwapBaseOut:"ClmmSwapBaseOut",ClmmInitReward:"ClmmInitReward",ClmmSetReward:"ClmmSetReward",ClmmCollectReward:"ClmmCollectReward",ClmmLockPosition:"ClmmLockPosition",ClmmHarvestLockPosition:"ClmmHarvestLockPosition",AmmV4Swap:"AmmV4Swap",AmmV4AddLiquidity:"AmmV4AddLiquidity",AmmV4RemoveLiquidity:"AmmV4RemoveLiquidity",AmmV4SimulatePoolInfo:"AmmV4SimulatePoolInfo",AmmV4SwapBaseIn:"AmmV4SwapBaseIn",AmmV4SwapBaseOut:"AmmV4SwapBaseOut",AmmV4CreatePool:"AmmV4CreatePool",AmmV4InitPool:"AmmV4InitPool",AmmV5AddLiquidity:"AmmV5AddLiquidity",AmmV5RemoveLiquidity:"AmmV5RemoveLiquidity",AmmV5SimulatePoolInfo:"AmmV5SimulatePoolInfo",AmmV5SwapBaseIn:"AmmV5SwapBaseIn",AmmV5SwapBaseOut:"AmmV5SwapBaseOut",RouteSwap:"RouteSwap",RouteSwap1:"RouteSwap1",RouteSwap2:"RouteSwap2",FarmV3Deposit:"FarmV3Deposit",FarmV3Withdraw:"FarmV3Withdraw",FarmV3CreateLedger:"FarmV3CreateLedger",FarmV4Withdraw:"FarmV4Withdraw",FarmV5Deposit:"FarmV5Deposit",FarmV5Withdraw:"FarmV5Withdraw",FarmV5CreateLedger:"FarmV5CreateLedger",FarmV6Deposit:"FarmV6Deposit",FarmV6Withdraw:"FarmV6Withdraw",FarmV6Create:"FarmV6Create",FarmV6Restart:"FarmV6Restart",FarmV6CreatorAddReward:"FarmV6CreatorAddReward",FarmV6CreatorWithdraw:"FarmV6CreatorWithdraw",CpmmCreatePool:"CpmmCreatePool",CpmmAddLiquidity:"CpmmAddLiquidity",CpmmWithdrawLiquidity:"CpmmWithdrawLiquidity",CpmmSwapBaseIn:"CpmmSwapBaseIn",CpmmSwapBaseOut:"CpmmSwapBaseOut",CpmmLockLp:"CpmmLockLp",CpmmCollectLockFee:"CpmmCollectLockFee",TransferTip:"TransferTip"};var zt=require("@solana/spl-token"),ie=q("Raydium_txUtil"),dt=1644;function Ie(n){let e=[],t=[];return n.microLamports&&(e.push(_.ComputeBudgetProgram.setComputeUnitPrice({microLamports:n.microLamports})),t.push(ye.SetComputeUnitPrice)),n.units&&(e.push(_.ComputeBudgetProgram.setComputeUnitLimit({units:n.units})),t.push(ye.SetComputeUnitLimit)),{instructions:e,instructionTypes:t}}async function fe(n,e){var r,i;let t=e!=null?e:"confirmed";return(i=await((r=n.getLatestBlockhash)==null?void 0:r.call(n,{commitment:t})))==null?void 0:i.blockhash}async function Re(n,e){return n.getSignatureStatuses([e]),new Promise((t,r)=>{let i=setTimeout(r,6e4);n.onSignature(e,s=>{if(clearTimeout(i),!s.err){t("");return}r(Object.assign(s.err,{txId:e}))},"confirmed")})}function ft(n,e){n.length<1&&ie.logWithError(`no instructions provided: ${n.toString()}`),e.length<1&&ie.logWithError(`no signers provided:, ${e.toString()}`);let t=new _.Transaction;t.recentBlockhash="11111111111111111111111111111111",t.feePayer=e[0],t.add(...n);try{return Buffer.from(t.serialize({verifySignatures:!1})).toString("base64").length<dt}catch{return!1}}async function vr(n,e,t,r=!0){let i=new _.PublicKey("RaydiumSimuLateTransaction11111111111111111"),s=[],a=new _.Transaction;a.feePayer=i;for(let u of e)ft([...a.instructions,u],[i])||(s.push(a),a=new _.Transaction,a.feePayer=i),a.add(u);a.instructions.length>0&&s.push(a);let o=[];try{if(o=await Zt(n,s,r),o.find(u=>u.err!==null))throw Error("rpc simulateTransaction error")}catch(u){u instanceof Error&&ie.logWithError("failed to simulate for instructions","RPC_ERROR",{message:u.message})}let c=[];for(let u of o)if(ie.debug("simulate result:",u),u.logs){let l=u.logs.filter(g=>g&&g.includes(t));ie.debug("filteredLog:",c),l.length||ie.logWithError("simulate log not match keyword","keyword",t),c.push(...l)}return c}function Ur(n,e){let t=n.match(/{["\w:,]+}/g);return!t||t.length!==1?ie.logWithError(`simulate log fail to match json, keyword: ${e}`):t[0]}function qr(n,e){let r=new RegExp(`"${e}":(\\d+)`,"g").exec(n);return!r||r.length!==2?ie.logWithError(`simulate log fail to match key", key: ${e}`):r[1]}function gt(n,e){let[t,r]=_.PublicKey.findProgramAddressSync(n,e);return{publicKey:t,nonce:r}}async function Zt(n,e,t){let r=[];if(t){let i=await n.getLatestBlockhash(),s=[];for(let u of e){u.recentBlockhash=i.blockhash,u.lastValidBlockHeight=i.lastValidBlockHeight;let g=u._compile().serialize(),A=u._serialize(g).toString("base64");s.push(A)}let a=s.map(u=>{let l=n._buildArgs([u],void 0,"base64");return{methodName:"simulateTransaction",args:l}}),o=[],c=20;for(let u=0;u<Math.ceil(a.length/c);u++)o.push(a.slice(u*c,(u+1)*c));r=await(await Promise.all(o.map(async u=>(await n._rpcBatchRequest(u)).map(l=>l.result.value)))).flat()}else try{r=await Promise.all(e.map(async i=>await(await n.simulateTransaction(i)).value))}catch(i){i instanceof Error&&ie.logWithError("failed to get info for multiple accounts","RPC_ERROR",{message:i.message})}return r}function we({instructions:n,payer:e,signers:t}){return ft(n,[e,...t])}function xe({instructions:n,payer:e,lookupTableAddressAccount:t,recentBlockhash:r=_.Keypair.generate().publicKey.toString()}){let s=new _.TransactionMessage({payerKey:e,recentBlockhash:r,instructions:n}).compileToV0Message(Object.values(t!=null?t:{}));try{return Buffer.from(new _.VersionedTransaction(s).serialize()).toString("base64").length<dt}catch{return!1}}var ze={time:0,data:void 0};async function Gr(n){if(!ze.data||(Date.now()-ze.time)/1e3>30){let e=await n.getEpochInfo();return ze={time:Date.now(),data:e},e}else return ze.data}var ht=n=>Buffer.isBuffer(n)?n:n instanceof Uint8Array?Buffer.from(n.buffer,n.byteOffset,n.byteLength):Buffer.from(n),Jt=n=>{let e=n.serialize({requireAllSignatures:!1,verifySignatures:!1});n instanceof _.VersionedTransaction&&(e=ht(e));try{return e instanceof Buffer?e.toString("base64"):Buffer.from(e).toString("base64")}catch{return e.toString("base64")}};function ce(n){let e=[];return n.forEach(t=>{t instanceof _.Transaction&&(t.recentBlockhash||(t.recentBlockhash=zt.TOKEN_PROGRAM_ID.toBase58()),t.feePayer||(t.feePayer=_.Keypair.generate().publicKey)),e.push(Jt(t))}),console.log("simulate tx string:",e),e}function Hr(n){let e=n.serialize({requireAllSignatures:!1,verifySignatures:!1});return n instanceof _.VersionedTransaction&&(e=ht(e)),e.toString("base64")}function jr(n,e,t){return gt([n.toBuffer(),(t!=null?t:Yt.TOKEN_PROGRAM_ID).toBuffer(),e.toBuffer()],new Xt.PublicKey("ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL"))}var p=require("@solana/web3.js"),Qt=new p.PublicKey("EhhTKczWMGQt46ynNeRX1WfeagwwJd7ufHvCDjRxjo5Q"),$t=new p.PublicKey("CBuCnLe26faBpcBP2fktp4rp8abpcAnTWft6ZrP5Q4T"),en=new p.PublicKey("9KEPoZmtHUrBbhWN1v1KWLMkkvwY6WLtAVUCPRtRjP4z"),tn=new p.PublicKey("FarmqiPv5eAj3j1GMdMCMUGXqPUvmquZtMy86QH6rzhG"),nn=new p.PublicKey("CLaimxFqjHzgTJtAGHU47NPhg6qrc5sCnpC4tBLyABQS"),rn=new p.PublicKey("srmqPvymJeFKQ4zGQed1GFppgkRHL9kaELCbyksJtPX"),on=new p.PublicKey("9xQeWvG816bUx9EPjHmaT23yvVM2ZWbrrpZb9PusVFin"),sn=new p.PublicKey("675kPX9MHTjS2zt1qfr1NYHuzeLXfQM9H24wFSUt1Mp8"),an=new p.PublicKey("5quBtoiQqxF9Jv6KYKctB59NT3gtJD2Y65kdnB1Uev3h"),zr=new p.PublicKey("CDSr3ssLcRB6XYPJwAfFt18MZvEZp4LjHcvzBVZ45duo"),cn=new p.PublicKey("CAMMCzo5YL8w4VFF8KVHrK22GGUsp5VTaW7grrKgrWqK"),un=new p.PublicKey("LockrWmn6K5twhz3y9w1dQERbmgSaRkfnTeTKbpofwE"),ln=new p.PublicKey("kN1kEznaF5Xbd8LYuqtEFcxzWSBk5Fv6ygX6SqEGJVy"),mn=new p.PublicKey("CDSr3ssLcRB6XYPJwAfFt18MZvEZp4LjHcvzBVZ45duo"),pn=new p.PublicKey("routeUGWgWzqBWFcrCfv8tritsqukccJPu3q5GPP3xS"),dn=new p.PublicKey("7YttLkHDoNj9wyDur5pM1ejNaAvT9X4eqaYcHQqtj2G5"),fn=new p.PublicKey("6FJon3QE27qgPVggARueB22hLvoh22VzJpXv4rBEoSLF"),gn=new p.PublicKey("CC12se5To1CdEuw7fDS27B7Geo5jJyL7t5UK2B44NgiH"),hn=new p.PublicKey("9HzJyW1qZsEiSfMUf6L2jo3CcTKAyBmSyKdwQeYisHrC"),Tn=new p.PublicKey("DropEU8AvevN3UrXWXTMuz3rqnMczQVNjq3kcSdW2SQi"),bn=new p.PublicKey("CPMMoo8L3F4NbTegBCKVNunggL7H1ZpdTHKxQB5qKP1C"),yn=new p.PublicKey("GpMZbSM2GgvTKHJirzeGfMFoaZ8UR2X7F4v8vHTvxFbL"),wn=new p.PublicKey("DNXgeM9EiiaAbaWvwjHj9fQQLAX5ZsfHyvmYUNRAdNC8"),xn=new p.PublicKey("LockrWmn6K5twhz3y9w1dQERbmgSaRkfnTeTKbpofwE"),An=new p.PublicKey("3f7GcQFG397GAaEnv51zR6tsTVihYRydnydDD1cXekxH"),Pn=new p.PublicKey("LanMV9sAd7wArD4vJFi2qDdfnVhFxYSUg6eADduJ3uj"),Sn=new p.PublicKey("WLHv2UAZm6z4KyaaELi5pjdbJh6RESMva1Rnn8pJVVh"),Zr=new p.PublicKey("DRay6fNdQ5J82H7xV6uq2aV3mNrUZ1J4PgSKsWgptcm6"),Jr=new p.PublicKey("5xqNaZXX5eUi4p5HU4oz9i5QnwRNT2y6oN7yyn4qENeq"),Bn=new p.PublicKey("4Bu96XjU84XjPDSpveTVf6LYGCkfW5FK7SNkREWcEfV4"),Cn=new p.PublicKey("6s1xP3hpbAfFoNtUNF8mfHsjr2Bd97JxFJRWLbL6aHuX"),Xr={IDO_PROGRAM_ID_V1:fn,IDO_PROGRAM_ID_V2:gn,IDO_PROGRAM_ID_V3:hn,IDO_PROGRAM_ID_V4:Tn},Yr={AMM_V4:sn,AMM_STABLE:an,CLMM_PROGRAM_ID:cn,CLMM_LOCK_PROGRAM_ID:un,CLMM_LOCK_AUTH_ID:ln,FARM_PROGRAM_ID_V3:Qt,FARM_PROGRAM_ID_V4:$t,FARM_PROGRAM_ID_V5:en,FARM_PROGRAM_ID_V6:tn,OPEN_BOOK_PROGRAM:rn,SERUM_PROGRAM_ID_V3:on,UTIL1216:nn,Router:pn,CREATE_CPMM_POOL_PROGRAM:bn,CREATE_CPMM_POOL_AUTH:yn,CREATE_CPMM_POOL_FEE_ACC:wn,LOCK_CPMM_PROGRAM:xn,LOCK_CPMM_AUTH:An,LAUNCHPAD_PROGRAM:Pn,LAUNCHPAD_AUTH:Sn,LAUNCHPAD_PLATFORM:Bn,LAUNCHPAD_CONFIG:Cn,FEE_DESTINATION_ID:dn,MODEL_DATA_PUBKEY:mn},Qr={OPEN_BOOK_PROGRAM:new p.PublicKey("EoTcMgcDRTJVZDMZWBoU6rhYHZfkNTVEAfz3uUJRcYGj"),SERUM_PROGRAM_ID_V3:new p.PublicKey("Ray1111111111111111111111111111111111111111"),AMM_V4:new p.PublicKey("DRaya7Kj3aMWQSy19kSjvmuwq9docCHofyP9kanQGaav"),AMM_STABLE:new p.PublicKey("DRayDdXc1NZQ9C3hRWmoSf8zK4iapgMnjdNZWrfwsP8m"),CLMM_PROGRAM_ID:new p.PublicKey("DRayAUgENGQBKVaX8owNhgzkEDyoHTGVEGHVJT1E9pfH"),CLMM_LOCK_PROGRAM_ID:new p.PublicKey("DRay25Usp3YJAi7beckgpGUC7mGJ2cR1AVPxhYfwVCUX"),CLMM_LOCK_AUTH_ID:new p.PublicKey("6Aoh8h2Lw2m5UGxYR8AdAL87jTWYeKoxM52mJRzfYwN"),CREATE_CPMM_POOL_PROGRAM:new p.PublicKey("DRaycpLY18LhpbydsBWbVJtxpNv9oXPgjRSfpF2bWpYb"),CREATE_CPMM_POOL_AUTH:new p.PublicKey("CXniRufdq5xL8t8jZAPxsPZDpuudwuJSPWnbcD5Y5Nxq"),CREATE_CPMM_POOL_FEE_ACC:new p.PublicKey("3oE58BKVt8KuYkGxx8zBojugnymWmBiyafWgMrnb6eYy"),LOCK_CPMM_PROGRAM:new p.PublicKey("DRay25Usp3YJAi7beckgpGUC7mGJ2cR1AVPxhYfwVCUX"),LOCK_CPMM_AUTH:new p.PublicKey("7qWVV8UY2bRJfDLP4s37YzBPKUkVB46DStYJBpYbQzu3"),UTIL1216:p.PublicKey.default,Router:new p.PublicKey("DRaybByLpbUL57LJARs3j8BitTxVfzBg351EaMr5UTCd"),FARM_PROGRAM_ID_V3:new p.PublicKey("DRayWyrLmEW5KEeqs8kdTMMaBabapqagaBC7KWpGtJeZ"),FARM_PROGRAM_ID_V4:new p.PublicKey("Ray1111111111111111111111111111111111111111"),FARM_PROGRAM_ID_V5:new p.PublicKey("DRayiCGSZgku1GTK6rXD6mVDdingXy6APAH1R6R5L2LC"),FARM_PROGRAM_ID_V6:new p.PublicKey("DRayzbYakXs45ELHkzH6vC3fuhQqTAnv5A68gdFuvZyZ"),LAUNCHPAD_PROGRAM:new p.PublicKey("DRay6fNdQ5J82H7xV6uq2aV3mNrUZ1J4PgSKsWgptcm6"),LAUNCHPAD_AUTH:new p.PublicKey("5xqNaZXX5eUi4p5HU4oz9i5QnwRNT2y6oN7yyn4qENeq"),LAUNCHPAD_PLATFORM:new p.PublicKey("2Jx4KTDrVSdWNazuGpcA8n3ZLTRGGBDxAWhuKe2Xcj2a"),LAUNCHPAD_CONFIG:new p.PublicKey("7ZR4zD7PYfY2XxoG1Gxcy2EgEeGYrpxrwzPuwdUBssEt"),FEE_DESTINATION_ID:new p.PublicKey("9y8ENuuZ3b19quffx9hQvRVygG5ky6snHfRvGpuSfeJy"),MODEL_DATA_PUBKEY:new p.PublicKey("Ray1111111111111111111111111111111111111111")};var B=H(require("bn.js")),G=1e4;function $r(n,e,t,r){if(e===void 0)return{amount:n,fee:void 0,expirationTime:void 0};let i=t.epoch<e.newerTransferFee.epoch?e.olderTransferFee:e.newerTransferFee,s=new B.default(i.maximumFee.toString()),a=t.epoch<e.newerTransferFee.epoch?(Number(e.newerTransferFee.epoch)*t.slotsInEpoch-t.absoluteSlot)*400/1e3:void 0;if(r)if(i.transferFeeBasisPoints===G){let o=new B.default(i.maximumFee.toString());return{amount:n.add(o),fee:o,expirationTime:a}}else{let o=Q(n.mul(new B.default(G)),new B.default(G-i.transferFeeBasisPoints)),c=new B.default(i.maximumFee.toString()),u=o.sub(n).gt(c)?n.add(c):o,l=Q(u.mul(new B.default(i.transferFeeBasisPoints)),new B.default(G)),g=l.gt(s)?s:l;return{amount:u,fee:g,expirationTime:a}}else{let o=Q(n.mul(new B.default(i.transferFeeBasisPoints)),new B.default(G)),c=o.gt(s)?s:o;return{amount:n,fee:c,expirationTime:a}}}function ei(n,e,t,r){if(e===void 0)return{amount:n,fee:void 0,expirationTime:void 0};let i=Z(K({},e),{olderTransferFee:{epoch:BigInt(e.olderTransferFee.epoch),maximumFee:BigInt(e.olderTransferFee.maximumFee),transferFeeBasisPoints:e.olderTransferFee.transferFeeBasisPoints},newerTransferFee:{epoch:BigInt(e.newerTransferFee.epoch),maximumFee:BigInt(e.newerTransferFee.maximumFee),transferFeeBasisPoints:e.newerTransferFee.transferFeeBasisPoints}}),s=t.epoch<i.newerTransferFee.epoch?i.olderTransferFee:i.newerTransferFee,a=new B.default(s.maximumFee.toString()),o=t.epoch<i.newerTransferFee.epoch?(Number(i.newerTransferFee.epoch)*t.slotsInEpoch-t.absoluteSlot)*400/1e3:void 0;if(r)if(s.transferFeeBasisPoints===G){let c=new B.default(s.maximumFee.toString());return{amount:n.add(c),fee:c,expirationTime:o}}else{let c=Q(n.mul(new B.default(G)),new B.default(G-s.transferFeeBasisPoints)),u=new B.default(s.maximumFee.toString()),l=c.sub(n).gt(u)?n.add(u):c,g=Q(l.mul(new B.default(s.transferFeeBasisPoints)),new B.default(G)),S=g.gt(a)?a:g;return{amount:l,fee:S,expirationTime:o}}else{let c=Q(n.mul(new B.default(s.transferFeeBasisPoints)),new B.default(G)),u=c.gt(a)?a:c;return{amount:n,fee:u,expirationTime:o}}}function ti(n,e){return n===void 0?e:e===void 0?n:Math.min(n,e)}function Q(n,e){let{div:t,mod:r}=n.divmod(e);return r.gt(new B.default(0))?t.add(new B.default(1)):t}function ni(n,e){if(n.isZero())return new B.default(0);let t=n.div(e);return t.isZero()?new B.default(1):n.mod(e).gt(new B.default(0))?t.add(new B.default(1)):t}function ri(n,e,t){if(e===void 0)return{amount:n,fee:void 0,expirationTime:void 0};let r=Math.floor(t/432e3),i=r<e.newerTransferFee.epoch?e.olderTransferFee:e.newerTransferFee,s=new B.default(i.maximumFee.toString()),a=r<e.newerTransferFee.epoch?(Number(e.newerTransferFee.epoch)*432e3-t)*400/1e3:void 0,o=Q(n.mul(new B.default(i.transferFeeBasisPoints)),new B.default(G)),c=o.gt(s)?s:o;return{amount:n,fee:c,expirationTime:a}}function ii(n,e,t){if(e===void 0)return{amount:n,fee:void 0,expirationTime:void 0};let r=Math.floor(t/432e3),i=r<e.newerTransferFee.epoch?e.olderTransferFee:e.newerTransferFee,s=new B.default(i.maximumFee.toString()),a=r<e.newerTransferFee.epoch?(Number(e.newerTransferFee.epoch)*432e3-t)*400/1e3:void 0;if(i.transferFeeBasisPoints===G){let o=new B.default(i.maximumFee.toString());return{amount:n.add(o),fee:o,expirationTime:a}}else{let o=Q(n.mul(new B.default(G)),new B.default(G-i.transferFeeBasisPoints)),c=new B.default(i.maximumFee.toString()),u=o.sub(n).gt(c)?n.add(c):o,l=Q(u.mul(new B.default(i.transferFeeBasisPoints)),new B.default(G)),g=l.gt(s)?s:l;return{amount:u,fee:g,expirationTime:a}}}var X=require("@solana/web3.js");async function Ze({connection:n,address:e,cluster:t="mainnet"}){let r=await Oe(n,[...new Set(e.map(s=>s.toString()))].map(s=>new X.PublicKey(s))),i={};for(let s=0;s<e.length;s++){let a=r[s],o=e[s];if(!a)continue;let c=new X.AddressLookupTableAccount({key:o,state:X.AddressLookupTableAccount.deserialize(a.data)});i[o.toString()]=c,t==="devnet"?ge[o.toString()]=c:De[o.toString()]=c}return i}var De={AcL1Vo8oy1ULiavEcjSUcwfBSForXMudcZvDZy5nzJkU:new X.AddressLookupTableAccount({key:new X.PublicKey("AcL1Vo8oy1ULiavEcjSUcwfBSForXMudcZvDZy5nzJkU"),state:X.AddressLookupTableAccount.deserialize(Buffer.from("AQAAAP//////////I1rcEwAAAAAvAQYwun9CU6c5Ikm2pAj+D9IEnCOR45nK+SFTGSdpd6J6AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAbd9uHXZaGT2cvhRs7reawctIXtX1s3kTqM9YV+/wCpBt324e51j94YQl285GzN2rYa/E2DuQ0n/r35KNihi/wFSlNQ+F3IgtYUpVZyeIopbd8eq6vQpgZ4iEky9O72oAVKU1qZKSEGTSTocWDaOHx8NbXdvJK7geQfqEBBBUSNBqfVFxksXFEhjMlMPUrxf1ja7gibof1E49vZigAAAAAGp9UXGMd0yShWY5hpHV62i164o5tLbVxzVVshAAAAAIyXJY9OJInxuz0QKRSODYMLWhOZ2v8QhASOe9jb6fhZC3BlsePRfEU4nVJ/awTDzVi4bHMaoP21SbbRvAP4KUbIScv+6Yw2LHF/6K0ZjUPibbSWXCirYPGuuVl7zT789IUPLW4CpHr4JNCatp3ELXDLKMv6JJ+37le50lbBJ2LvBkX2T9y7AHdNGviJAqQNtlDUDCnauQRWybsLji6nPM8Qkw5asQRvCdB3MbX6IEBwytOrpM32l4jQygKG9TKgR0vZScQ2AsM/IHeQ7RajUkyhuZdc8SGiqQz/7H34torNR/Wir3sl0ruUrVxJWEZfUg+QLNAxxODdBi53/OP7Ioil1cqeBM9dtZC3FLov4yyxWRM/wcGStyJX/QfTnLBAHqkqWotPKVlShCVQqpP9W5W1rOao65IMk5QuQ2kMIOxzDMKAy2vjGSxQODgBz0QwGA+eP4ZjIjrIAQaXENv31QfLlOdXSRCkaybRniDHF4C8YcwhcvsqrOVuTP4B2Na+9wLdtrB31uz2rtlFI5kahdsnp/d1SrASDInYCtTYtdoke4kX+hoKWcEWM4Tle8pTUkUVv4BxS6fje/EzKBE4Qu/YsA/yfEEFGcr8Z57VKDw8uQzpiru7g4lvjnfapW62W030syevD8k07SGoxUHiuT/ai7gAHWWhDsVmg/C63ajgpkH7Sn3GdutArDTfyqOkdqv4/IPC/EFFy7mGkfDd2C57N5a/4jC+BbmJy7wQaSEZr0CQU88lPtUxIVvzGjC95b8Ooss2TqmkrayGKofkPMGQn7Ux+9lfwBSNfxwH8NgbpqC/7LNlV4I7nCvsXf3p+ohQk9NrAJb2KAFpUqEIJ9ZBV7BYDzHF/ORKYlgtvPnXjudZQ6CEo5OzUDaNIomTCCsvhD16TxJjsbgne1kGnQPCFSoaxUbq2V1bPMFQ3VYP6wDZ9bKStCFKx9A3tNbwZFC5ZGAN83MFK7XoTy+OmmcFEr6rLOjfSuTfPvHJkSVxW6Qllwkl67XcBi5v00u2gQsbu+38sp+rd5pA/LvyWj4P94ZGZwc1tE2P88xekCLcAwZGb+UhFzL/7K26csOb57yM5bvF9xJrLEObOkAAAAAn+HWRkdcPKyFFMnVwEoD7vnD0jCKFIU1sImubYCxNTSVzsKpaQX+fzNxrLAI3L14JQnJx/D6Uk2LADIHGqnGELzjEbkBDAlaM77NkXMPfqXNLSveCkWI7UEgNs31WEWB6XHSYI/v5DklHOb4QTtDOR804PVbi3fjloZeLR2F8d4FuZmMMO7ck3Fnkn2zEMG5gOmqsygb6PjTitArVl52NhcSznTxVnguaIJxiZkAnurDmn3MWR0PC2GLghp2KJqHCc6QQ85odeIjFHKOlRlJyeSXVJmL8vb1UgOzsbJPVP8p6zM4M3C1Sd7uWIHP33G42AP2Zg8ucn/n6meQjjD266JgCWdxZD6PXs9CsnIeL7SSG0/6lGb9xfP0ZcWkCXB/3hjxHYVXjra/GPOeXGk0fLLKjCbk+mgs2w6d2oCwimBipTzuoZ30GiI8ij8VRzD5CzMWtu2m21eDBIfjGAEo4pQeNNonKcqzV/cleX8ySZLOHsz8PtBCrLqF+VkLm9hOzIT+6i/nIf6keR4GWKMOD4AvqfpjHoD4DuhBpz8P28+DxkGrDXXr/nr20x291VPvcTU/b+b+o2kC9G0kcXeTlLjU6a2TQXWlZ4gBUdBl1jgT7mObSTpLblNiXZsLkbmVXZwvFKXua5cUKlWed/w30skmEUraTuQqtqr5fHZPW9n57EmeTif6LjHL2YJFZkQU+TrJmFzqzmF4/b8OwrPQAprl8mX3q4LUIdAS/a+11B6DWD1Xk2++Sn94dLC4xjkO4Wtlw8c4XuzciVbepHOmnoWzVu/0y3KCrLCSfQxQ3br8DJCoVzhgtPsS2nZZjsBGIZgnU0QpMv+2MnRsnKwdp1VsrCX84j/qvaZn4WhKunippgTbN2EUs0tPTP55Qfgj+nKmjtWW5IYs72FrEwJKYoNfsmqaF4o5pf4v9zgPwVwY/5I4XJKUL2L25m9kAQcW/K+H1RTFEUoj8Z4ajpOmAB/dG0COmCphVMW2CCMvnxhcGiSgPnpDuWu6qiJ7NG7ye5kvHgefgqPLeicspNJ5EpL3XiRNLM2tmJLI1awAwOyd6iHv0dCkMYRKaa6rcaZeYwmKCkckm0kM2JNmnmmAaBQQ7mwmIM0IMxX4f5W6j9PqZWcJxF7r17T/lQBAmcjoupRiJifbnXCNUv9GhpRF19WcBdeKbivRJVlGop6I2RS6lGImJ9udcI1S/0aGlEXX1ZwF14puK9ElWUainojZFYVHLHD6dIP2ESjqBzg3ol1/wB7+/ylGwd9LS7wSZ2A630CJSVKwH47K9P4bB8PEQP8BwjMFa7xQHOqZFP1XqaQ==","base64"))})},ge={},Je=async n=>{let e="EFhMuDw1PKEuckuFRW9PavNfTH4LKP5uKHgyXDmWpFCq";if(ge[e])return ge;let t=new X.PublicKey(e),r=await n.getAccountInfo(t);return r&&(ge[e]=new X.AddressLookupTableAccount({key:t,state:X.AddressLookupTableAccount.deserialize(r.data)})),ge};var I=require("@solana/web3.js"),kn=H(require("axios"));var Xe=2e3,Tt=class{constructor(e){this.instructions=[];this.endInstructions=[];this.lookupTableAddress=[];this.signers=[];this.instructionTypes=[];this.endInstructionTypes=[];this.connection=e.connection,this.feePayer=e.feePayer,this.signAllTransactions=e.signAllTransactions,this.owner=e.owner,this.cluster=e.cluster,this.blockhashCommitment=e.blockhashCommitment,this.loopMultiTxStatus=!!e.loopMultiTxStatus}get AllTxData(){return{instructions:this.instructions,endInstructions:this.endInstructions,signers:this.signers,instructionTypes:this.instructionTypes,endInstructionTypes:this.endInstructionTypes,lookupTableAddress:this.lookupTableAddress}}get allInstructions(){return[...this.instructions,...this.endInstructions]}async getComputeBudgetConfig(){var r;let e=(await kn.default.get(`https://solanacompass.com/api/fees?cacheFreshTime=${3e5}`)).data,{avg:t}=(r=e==null?void 0:e[15])!=null?r:{};if(!!t)return{units:6e5,microLamports:Math.min(Math.ceil(t*1e6/6e5),25e3)}}addCustomComputeBudget(e){if(e){let{instructions:t,instructionTypes:r}=Ie(e);return this.instructions.unshift(...t),this.instructionTypes.unshift(...r),!0}return!1}addTipInstruction(e){var t;return e?(this.endInstructions.push(I.SystemProgram.transfer({fromPubkey:(t=e.feePayer)!=null?t:this.feePayer,toPubkey:new I.PublicKey(e.address),lamports:BigInt(e.amount.toString())})),this.endInstructionTypes.push(ye.TransferTip),!0):!1}async calComputeBudget({config:e,defaultIns:t}){try{let r=e||await this.getComputeBudgetConfig();if(this.addCustomComputeBudget(r))return;t&&this.instructions.unshift(...t)}catch{t&&this.instructions.unshift(...t)}}addInstruction({instructions:e=[],endInstructions:t=[],signers:r=[],instructionTypes:i=[],endInstructionTypes:s=[],lookupTableAddress:a=[]}){return this.instructions.push(...e),this.endInstructions.push(...t),this.signers.push(...r),this.instructionTypes.push(...i),this.endInstructionTypes.push(...s),this.lookupTableAddress.push(...a.filter(o=>o!==I.PublicKey.default.toString())),this}async versionBuild({txVersion:e,extInfo:t}){return e===0?await this.buildV0(K({},t||{})):this.build(t)}build(e){var r;let t=new I.Transaction;return this.allInstructions.length&&t.add(...this.allInstructions),t.feePayer=this.feePayer,((r=this.owner)==null?void 0:r.signer)&&!this.signers.some(i=>i.publicKey.equals(this.owner.publicKey))&&this.signers.push(this.owner.signer),{builder:this,transaction:t,signers:this.signers,instructionTypes:[...this.instructionTypes,...this.endInstructionTypes],execute:async i=>{var l;let{recentBlockHash:s,skipPreflight:a=!0,sendAndConfirm:o,notSendToRpc:c}=i||{},u=s!=null?s:await fe(this.connection,this.blockhashCommitment);if(t.recentBlockhash=u,this.signers.length&&t.sign(...this.signers),ce([t]),(l=this.owner)!=null&&l.isKeyPair)return{txId:o?await(0,I.sendAndConfirmTransaction)(this.connection,t,this.signers.find(S=>S.publicKey.equals(this.owner.publicKey))?this.signers:[...this.signers,this.owner.signer],{skipPreflight:a}):await this.connection.sendRawTransaction(t.serialize(),{skipPreflight:a}),signedTx:t};if(this.signAllTransactions){let g=await this.signAllTransactions([t]);if(this.signers.length)for(let S of g)try{S.sign(...this.signers)}catch{}return{txId:c?"":await this.connection.sendRawTransaction(g[0].serialize(),{skipPreflight:a}),signedTx:g[0]}}throw new Error("please provide owner in keypair format or signAllTransactions function")},extInfo:e||{}}}buildMultiTx(e){var u;let{extraPreBuildData:t=[],extInfo:r}=e,{transaction:i}=this.build(r),s=t.filter(l=>l.transaction.instructions.length>0),a=[i,...s.map(l=>l.transaction)],o=[this.signers,...s.map(l=>l.signers)],c=[...this.instructionTypes,...s.map(l=>l.instructionTypes).flat()];return(u=this.owner)!=null&&u.signer&&o.forEach(l=>{l.some(g=>g.publicKey.equals(this.owner.publicKey))||this.signers.push(this.owner.signer)}),{builder:this,transactions:a,signers:o,instructionTypes:c,execute:async l=>{var C;let{sequentially:g,onTxUpdate:S,skipTxCount:A=0,recentBlockHash:T,skipPreflight:x=!0}=l||{},d=T!=null?T:await fe(this.connection,this.blockhashCommitment);if((C=this.owner)!=null&&C.isKeyPair){if(g){let y=[],R=0;for(let h of a){if(++R,R<=A)continue;let m=await(0,I.sendAndConfirmTransaction)(this.connection,h,this.signers.find(f=>f.publicKey.equals(this.owner.publicKey))?this.signers:[...this.signers,this.owner.signer],{skipPreflight:x});y.push(m)}return{txIds:y,signedTxs:a}}return{txIds:await await Promise.all(a.map(async y=>(y.recentBlockhash=d,await this.connection.sendRawTransaction(y.serialize(),{skipPreflight:x})))),signedTxs:a}}if(this.signAllTransactions){let y=a.map((h,m)=>(h.recentBlockhash=d,o[m].length&&h.sign(...o[m]),h));ce(y);let R=await this.signAllTransactions(y);if(g){let h=0,m=[],f=async()=>{if(!R[h])return;let P=await this.connection.sendRawTransaction(R[h].serialize(),{skipPreflight:x});m.push({txId:P,status:"sent",signedTx:R[h]}),S==null||S([...m]),h++;let w=!1,k=null,L=null,O=D=>{k!==null&&clearInterval(k),L!==null&&this.connection.removeSignatureListener(L);let N=m.findIndex(V=>V.txId===P);if(N>-1){if(m[N].status==="error"||m[N].status==="success")return;m[N].status=D.err?"error":"success"}S==null||S([...m]),D.err||f()};this.loopMultiTxStatus&&(k=setInterval(async()=>{var D;if(w){clearInterval(k);return}try{let N=await this.connection.getTransaction(P,{commitment:"confirmed",maxSupportedTransactionVersion:0});N&&(w=!0,clearInterval(k),O({err:((D=N.meta)==null?void 0:D.err)||null}),console.log("tx status from getTransaction:",P))}catch(N){w=!0,clearInterval(k),console.error("getTransaction timeout:",N,P)}},Xe)),L=this.connection.onSignature(P,D=>{if(w){this.connection.removeSignatureListener(L);return}w=!0,O(D)},"confirmed"),this.connection.getSignatureStatus(P)};return await f(),{txIds:m.map(P=>P.txId),signedTxs:R}}else{let h=[];for(let m=0;m<R.length;m+=1){let f=await this.connection.sendRawTransaction(R[m].serialize(),{skipPreflight:x});h.push(f)}return{txIds:h,signedTxs:R}}}throw new Error("please provide owner in keypair format or signAllTransactions function")},extInfo:r||{}}}async versionMultiBuild({extraPreBuildData:e,txVersion:t,extInfo:r}){return t===0?await this.buildV0MultiTx({extraPreBuildData:e,buildProps:r||{}}):this.buildMultiTx({extraPreBuildData:e,extInfo:r})}async buildV0(e){var x;let T=e||{},{lookupTableCache:t={},lookupTableAddress:r=[],forerunCreate:i,recentBlockhash:s}=T,a=Ne(T,["lookupTableCache","lookupTableAddress","forerunCreate","recentBlockhash"]),o=K(K({},this.cluster==="devnet"?await Je(this.connection):De),t),c=Array.from(new Set([...r,...this.lookupTableAddress])),u=[];for(let d of c)o[d]===void 0&&u.push(new I.PublicKey(d));let l=await Ze({connection:this.connection,address:u});for(let[d,C]of Object.entries(l))o[d]=C;let g=i?I.PublicKey.default.toBase58():s!=null?s:await fe(this.connection,this.blockhashCommitment),S=new I.TransactionMessage({payerKey:this.feePayer,recentBlockhash:g,instructions:[...this.allInstructions]}).compileToV0Message(Object.values(o));((x=this.owner)==null?void 0:x.signer)&&!this.signers.some(d=>d.publicKey.equals(this.owner.publicKey))&&this.signers.push(this.owner.signer);let A=new I.VersionedTransaction(S);return A.sign(this.signers),{builder:this,transaction:A,signers:this.signers,instructionTypes:[...this.instructionTypes,...this.endInstructionTypes],execute:async d=>{var h;let{skipPreflight:C=!0,sendAndConfirm:y,notSendToRpc:R}=d||{};if(ce([A]),(h=this.owner)!=null&&h.isKeyPair){let m=await this.connection.sendTransaction(A,{skipPreflight:C});return y&&await Re(this.connection,m),{txId:m,signedTx:A}}if(this.signAllTransactions){let m=await this.signAllTransactions([A]);if(this.signers.length)for(let f of m)try{f.sign(this.signers)}catch{}return{txId:R?"":await this.connection.sendTransaction(m[0],{skipPreflight:C}),signedTx:m[0]}}throw new Error("please provide owner in keypair format or signAllTransactions function")},extInfo:a||{}}}async buildV0MultiTx(e){var u;let{extraPreBuildData:t=[],buildProps:r}=e,{transaction:i}=await this.buildV0(r),s=t.filter(l=>l.builder.instructions.length>0),a=[i,...s.map(l=>l.transaction)],o=[this.signers,...s.map(l=>l.signers)],c=[...this.instructionTypes,...s.map(l=>l.instructionTypes).flat()];return(u=this.owner)!=null&&u.signer&&o.forEach(l=>{l.some(g=>g.publicKey.equals(this.owner.publicKey))||this.signers.push(this.owner.signer)}),a.forEach(async(l,g)=>{l.sign(o[g])}),{builder:this,transactions:a,signers:o,instructionTypes:c,buildProps:r,execute:async l=>{var x;let{sequentially:g,onTxUpdate:S,recentBlockHash:A,skipPreflight:T=!0}=l||{};if(A&&a.forEach(d=>d.message.recentBlockhash=A),ce(a),(x=this.owner)!=null&&x.isKeyPair){if(g){let d=[];for(let C of a){let y=await this.connection.sendTransaction(C,{skipPreflight:T});await Re(this.connection,y),d.push(y)}return{txIds:d,signedTxs:a}}return{txIds:await Promise.all(a.map(async d=>await this.connection.sendTransaction(d,{skipPreflight:T}))),signedTxs:a}}if(this.signAllTransactions){let d=await this.signAllTransactions(a);if(g){let C=0,y=[],R=async()=>{if(!d[C])return;let h=await this.connection.sendTransaction(d[C],{skipPreflight:T});y.push({txId:h,status:"sent",signedTx:d[C]}),S==null||S([...y]),C++;let m=!1,f=null,P=null,w=k=>{f!==null&&clearInterval(f),P!==null&&this.connection.removeSignatureListener(P);let L=y.findIndex(O=>O.txId===h);if(L>-1){if(y[L].status==="error"||y[L].status==="success")return;y[L].status=k.err?"error":"success"}S==null||S([...y]),k.err||R()};this.loopMultiTxStatus&&(f=setInterval(async()=>{var k;if(m){clearInterval(f);return}try{let L=await this.connection.getTransaction(h,{commitment:"confirmed",maxSupportedTransactionVersion:0});L&&(m=!0,clearInterval(f),w({err:((k=L.meta)==null?void 0:k.err)||null}),console.log("tx status from getTransaction:",h))}catch(L){m=!0,clearInterval(f),console.error("getTransaction timeout:",L,h)}},Xe)),P=this.connection.onSignature(h,k=>{if(m){this.connection.removeSignatureListener(P);return}m=!0,w(k)},"confirmed"),this.connection.getSignatureStatus(h)};return R(),{txIds:[],signedTxs:d}}else{let C=[];for(let y=0;y<d.length;y+=1){let R=await this.connection.sendTransaction(d[y],{skipPreflight:T});C.push(R)}return{txIds:C,signedTxs:d}}}throw new Error("please provide owner in keypair format or signAllTransactions function")},extInfo:r||{}}}async sizeCheckBuild(e){var S;let g=e||{},{splitIns:t=[],computeBudgetConfig:r}=g,i=Ne(g,["splitIns","computeBudgetConfig"]),s=r?Ie(r):{instructions:[],instructionTypes:[]},a=this.signers.reduce((A,T)=>Z(K({},A),{[T.publicKey.toBase58()]:T}),{}),o=[],c=[],u=[],l=0;if(this.allInstructions.forEach(A=>{let T=[...u,A],x=r?[...s.instructions,...T]:T,C=[...new Set(T.map(y=>y.keys.filter(R=>R.isSigner).map(R=>R.pubkey.toString())).flat()).values()].map(y=>new I.PublicKey(y));if(A!==t[l]&&u.length<12&&(we({instructions:x,payer:this.feePayer,signers:C})||we({instructions:T,payer:this.feePayer,signers:C})))u.push(A);else{if(u.length===0)throw Error("item ins too big");l+=A===t[l]?1:0,we({instructions:r?[...s.instructions,...u]:[...u],payer:this.feePayer,signers:C})?o.push(new I.Transaction().add(...s.instructions,...u)):o.push(new I.Transaction().add(...u)),c.push(Array.from(new Set(u.map(y=>y.keys.filter(R=>R.isSigner).map(R=>R.pubkey.toString())).flat())).map(y=>a[y]).filter(y=>y!==void 0)),u=[A]}}),u.length>0){let T=[...new Set(u.map(x=>x.keys.filter(d=>d.isSigner).map(d=>d.pubkey.toString())).flat()).values()].map(x=>a[x]).filter(x=>x!==void 0);we({instructions:r?[...s.instructions,...u]:[...u],payer:this.feePayer,signers:T.map(x=>x.publicKey)})?o.push(new I.Transaction().add(...s.instructions,...u)):o.push(new I.Transaction().add(...u)),c.push(T)}return o.forEach(A=>A.feePayer=this.feePayer),(S=this.owner)!=null&&S.signer&&c.forEach(A=>{A.some(T=>T.publicKey.equals(this.owner.publicKey))||A.push(this.owner.signer)}),{builder:this,transactions:o,signers:c,instructionTypes:this.instructionTypes,execute:async A=>{var h;let{sequentially:T,onTxUpdate:x,skipTxCount:d=0,recentBlockHash:C,skipPreflight:y=!0}=A||{},R=C!=null?C:await fe(this.connection,this.blockhashCommitment);if(o.forEach(async(m,f)=>{m.recentBlockhash=R,c[f].length&&m.sign(...c[f])}),ce(o),(h=this.owner)!=null&&h.isKeyPair){if(T){let m=0,f=[];for(let P of o){if(++m,m<=d){f.push("tx skipped");continue}let w=await(0,I.sendAndConfirmTransaction)(this.connection,P,this.signers.find(k=>k.publicKey.equals(this.owner.publicKey))?this.signers:[...this.signers,this.owner.signer],{skipPreflight:y});f.push(w)}return{txIds:f,signedTxs:o}}return{txIds:await Promise.all(o.map(async m=>await this.connection.sendRawTransaction(m.serialize(),{skipPreflight:y}))),signedTxs:o}}if(this.signAllTransactions){let m=await this.signAllTransactions(o.slice(d,o.length)),f=[...o.slice(0,d),...m];if(T){let P=0,w=[],k=async()=>{if(!f[P])return;P<d&&(w.push({txId:"",status:"success",signedTx:f[P]}),x==null||x([...w]),P++,k());let L=await this.connection.sendRawTransaction(f[P].serialize(),{skipPreflight:y});w.push({txId:L,status:"sent",signedTx:f[P]}),x==null||x([...w]),P++;let O=!1,D=null,N=null,V=j=>{D!==null&&clearInterval(D),N!==null&&this.connection.removeSignatureListener(N);let v=w.findIndex(ue=>ue.txId===L);if(v>-1){if(w[v].status==="error"||w[v].status==="success")return;w[v].status=j.err?"error":"success"}x==null||x([...w]),j.err||k()};this.loopMultiTxStatus&&(D=setInterval(async()=>{var j;if(O){clearInterval(D);return}try{let v=await this.connection.getTransaction(L,{commitment:"confirmed",maxSupportedTransactionVersion:0});v&&(O=!0,clearInterval(D),V({err:((j=v.meta)==null?void 0:j.err)||null}),console.log("tx status from getTransaction:",L))}catch(v){O=!0,clearInterval(D),console.error("getTransaction timeout:",v,L)}},Xe)),N=this.connection.onSignature(L,j=>{if(O){this.connection.removeSignatureListener(N);return}O=!0,V(j)},"confirmed"),this.connection.getSignatureStatus(L)};return await k(),{txIds:w.map(L=>L.txId),signedTxs:f}}else{let P=[];for(let w=0;w<f.length;w+=1){let k=await this.connection.sendRawTransaction(f[w].serialize(),{skipPreflight:y});P.push(k)}return{txIds:P,signedTxs:f}}}throw new Error("please provide owner in keypair format or signAllTransactions function")},extInfo:i||{}}}async sizeCheckBuildV0(e){var R;let y=e||{},{computeBudgetConfig:t,splitIns:r=[],lookupTableCache:i={},lookupTableAddress:s=[]}=y,a=Ne(y,["computeBudgetConfig","splitIns","lookupTableCache","lookupTableAddress"]),o=K(K({},this.cluster==="devnet"?await Je(this.connection):De),i),c=Array.from(new Set([...this.lookupTableAddress,...s])),u=[];for(let h of c)o[h]===void 0&&u.push(new I.PublicKey(h));let l=await Ze({connection:this.connection,address:u});for(let[h,m]of Object.entries(l))o[h]=m;let g=t?Ie(t):{instructions:[],instructionTypes:[]},S=await fe(this.connection,this.blockhashCommitment),A=this.signers.reduce((h,m)=>Z(K({},h),{[m.publicKey.toBase58()]:m}),{}),T=[],x=[],d=[],C=0;if(this.allInstructions.forEach(h=>{let m=[...d,h],f=t?[...g.instructions,...m]:m;if(h!==r[C]&&d.length<12&&(xe({instructions:f,payer:this.feePayer,lookupTableAddressAccount:o})||xe({instructions:m,payer:this.feePayer,lookupTableAddressAccount:o})))d.push(h);else{if(d.length===0)throw Error("item ins too big");C+=h===r[C]?1:0;let P={};for(let w of[...new Set(c)])o[w]!==void 0&&(P[w]=o[w]);if(t&&xe({instructions:[...g.instructions,...d],payer:this.feePayer,lookupTableAddressAccount:o,recentBlockhash:S})){let w=new I.TransactionMessage({payerKey:this.feePayer,recentBlockhash:S,instructions:[...g.instructions,...d]}).compileToV0Message(Object.values(o));T.push(new I.VersionedTransaction(w))}else{let w=new I.TransactionMessage({payerKey:this.feePayer,recentBlockhash:S,instructions:[...d]}).compileToV0Message(Object.values(o));T.push(new I.VersionedTransaction(w))}x.push(Array.from(new Set(d.map(w=>w.keys.filter(k=>k.isSigner).map(k=>k.pubkey.toString())).flat())).map(w=>A[w]).filter(w=>w!==void 0)),d=[h]}}),d.length>0){let m=[...new Set(d.map(f=>f.keys.filter(P=>P.isSigner).map(P=>P.pubkey.toString())).flat()).values()].map(f=>A[f]).filter(f=>f!==void 0);if(t&&xe({instructions:[...g.instructions,...d],payer:this.feePayer,lookupTableAddressAccount:o,recentBlockhash:S})){let f=new I.TransactionMessage({payerKey:this.feePayer,recentBlockhash:S,instructions:[...g.instructions,...d]}).compileToV0Message(Object.values(o));T.push(new I.VersionedTransaction(f))}else{let f=new I.TransactionMessage({payerKey:this.feePayer,recentBlockhash:S,instructions:[...d]}).compileToV0Message(Object.values(o));T.push(new I.VersionedTransaction(f))}x.push(m)}return(R=this.owner)!=null&&R.signer&&x.forEach(h=>{h.some(m=>m.publicKey.equals(this.owner.publicKey))||h.push(this.owner.signer)}),T.forEach((h,m)=>{h.sign(x[m])}),{builder:this,transactions:T,buildProps:e,signers:x,instructionTypes:this.instructionTypes,execute:async h=>{var L;let{sequentially:m,onTxUpdate:f,skipTxCount:P=0,recentBlockHash:w,skipPreflight:k=!0}=h||{};if(T.map(async(O,D)=>{x[D].length&&O.sign(x[D]),w&&(O.message.recentBlockhash=w)}),ce(T),(L=this.owner)!=null&&L.isKeyPair){if(m){let O=0,D=[];for(let N of T){if(++O,O<=P){console.log("skip tx: ",O),D.push("tx skipped");continue}let V=await this.connection.sendTransaction(N,{skipPreflight:k});await Re(this.connection,V),D.push(V)}return{txIds:D,signedTxs:T}}return{txIds:await Promise.all(T.map(async O=>await this.connection.sendTransaction(O,{skipPreflight:k}))),signedTxs:T}}if(this.signAllTransactions){let O=await this.signAllTransactions(T.slice(P,T.length)),D=[...T.slice(0,P),...O];if(m){let N=0,V=[],j=async()=>{if(!D[N])return;if(N<P){V.push({txId:"",status:"success",signedTx:D[N]}),f==null||f([...V]),N++,j();return}let v=await this.connection.sendTransaction(D[N],{skipPreflight:k});V.push({txId:v,status:"sent",signedTx:D[N]}),f==null||f([...V]),N++;let ue=!1,he=null,Me=null,bt=le=>{he!==null&&clearInterval(he),Me!==null&&this.connection.removeSignatureListener(Me);let $=V.findIndex(Rn=>Rn.txId===v);if($>-1){if(V[$].status==="error"||V[$].status==="success")return;V[$].status=le.err?"error":"success"}f==null||f([...V]),le.err||j()};this.loopMultiTxStatus&&(he=setInterval(async()=>{var le;if(ue){clearInterval(he);return}try{let $=await this.connection.getTransaction(v,{commitment:"confirmed",maxSupportedTransactionVersion:0});$&&(ue=!0,clearInterval(he),bt({err:((le=$.meta)==null?void 0:le.err)||null}),console.log("tx status from getTransaction:",v))}catch($){ue=!0,clearInterval(he),console.error("getTransaction timeout:",$,v)}},Xe)),Me=this.connection.onSignature(v,le=>{if(ue){this.connection.removeSignatureListener(Me);return}ue=!0,bt(le)},"confirmed"),this.connection.getSignatureStatus(v)};return j(),{txIds:[],signedTxs:D}}else{let N=[];for(let V=0;V<D.length;V+=1){let j=await this.connection.sendTransaction(D[V],{skipPreflight:k});N.push(j)}return{txIds:N,signedTxs:D}}}throw new Error("please provide owner in keypair format or signAllTransactions function")},extInfo:a||{}}}};var In=H(require("bn.js")),oi=new In.default(1e6);0&&(module.exports={ACCOUNT_TYPE_SIZE,ALL_PROGRAM_ID,AMM_STABLE,AMM_V4,ANAMint,AccountType,BNDivCeil,BN_100,BN_1000,BN_10000,BN_FIVE,BN_ONE,BN_TEN,BN_THREE,BN_TWO,BN_ZERO,CLMM_LOCK_AUTH_ID,CLMM_LOCK_PROGRAM_ID,CLMM_PROGRAM_ID,CLOCK_PROGRAM_ID,CREATE_CPMM_POOL_AUTH,CREATE_CPMM_POOL_FEE_ACC,CREATE_CPMM_POOL_PROGRAM,DEVNET_PROGRAM_ID,DEV_LAUNCHPAD_AUTH,DEV_LAUNCHPAD_PROGRAM,DEV_LOOKUP_TABLE_CACHE,ETHMint,FARM_PROGRAM_ID_V3,FARM_PROGRAM_ID_V4,FARM_PROGRAM_ID_V5,FARM_PROGRAM_ID_V6,FEE_DESTINATION_ID,FEE_RATE_DENOMINATOR_VALUE,IDO_ALL_PROGRAM,IDO_PROGRAM_ID_V1,IDO_PROGRAM_ID_V2,IDO_PROGRAM_ID_V3,IDO_PROGRAM_ID_V4,INSTRUCTION_PROGRAM_ID,InstructionType,LAUNCHPAD_AUTH,LAUNCHPAD_CONFIG,LAUNCHPAD_PLATFORM,LAUNCHPAD_PROGRAM,LIQUIDITY_POOL_PROGRAM_ID_V5_MODEL,LOCK_CPMM_AUTH,LOCK_CPMM_PROGRAM,LOOKUP_TABLE_CACHE,LogLevel,Logger,MAX_BASE64_SIZE,MEMO_PROGRAM_ID,MEMO_PROGRAM_ID2,METADATA_PROGRAM_ID,MODEL_DATA_PUBKEY,NRVMint,OPEN_BOOK_PROGRAM,Owner,PAIMint,RAYMint,RENT_PROGRAM_ID,Rounding,Router,SERUM_PROGRAM_ID_V3,SOLMint,SRMMint,SYSTEM_PROGRAM_ID,TxBuilder,TxVersion,USDCMint,USDHMint,USDTMint,UTIL1216,WSOLMint,accountMeta,add,addComputeBudget,ceilDiv,ceilDivBN,checkLegacyTxSize,checkV0TxSize,chunkArray,commonSystemAccountMeta,confirmTransaction,createLogger,decimalToFraction,div,divCeil,eq,fetchMultipleMintInfos,findProgramAddress,floorDiv,forecastTransactionSize,getATAAddress,getDate,getDevLookupTableCache,getEpochInfo,getMax,getMultipleAccountsInfo,getMultipleAccountsInfoWithCustomFlags,getMultipleLookupTableInfo,getRecentBlockHash,getTime,getTimestamp,getTransferAmountFee,getTransferAmountFeeFromPost,getTransferAmountFeeFromPre,getTransferAmountFeeV2,gt,gte,intersection,isDateAfter,isDateBefore,isDecimal,isMeaningfulNumber,isNumber,jsonInfo2PoolKeys,lt,lte,mSOLMint,minExpirationTime,mul,notInnerObject,offsetDateTime,parseBigNumberish,parseNumberInfo,parseSimulateLogToJson,parseSimulateValue,printSimulate,recursivelyDecimalToFraction,setLoggerLevel,shakeFractionDecimal,simulateMultipleInstruction,simulateTransaction,sleep,solToWSol,stSOLMint,sub,tenExponential,toBN,toBuffer,toFraction,toFractionWithDecimals,toPercent,toTokenPrice,toTotalPrice,toUsdCurrency,transformTxToBase64,tryParsePublicKey,txToBase64,uniq,validateAndParsePublicKey,xor});
//# sourceMappingURL=index.js.map